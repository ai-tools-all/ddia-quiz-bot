1
00:00:00,540 --> 00:00:05,349

all right everybody let's get started

2
00:00:05,349 --> 00:00:05,359

 

3
00:00:05,359 --> 00:00:10,610

today the paper four days I'm is aunt

4
00:00:10,610 --> 00:00:10,620
today the paper four days I'm is aunt
 

5
00:00:10,620 --> 00:00:12,440
today the paper four days I'm is aunt
Aurora paper which is all about how to

6
00:00:12,440 --> 00:00:12,450
Aurora paper which is all about how to
 

7
00:00:12,450 --> 00:00:17,510
Aurora paper which is all about how to
get a high-performance reliable database

8
00:00:17,510 --> 00:00:17,520
get a high-performance reliable database
 

9
00:00:17,520 --> 00:00:19,640
get a high-performance reliable database
going as a piece of cloud infrastructure

10
00:00:19,640 --> 00:00:19,650
going as a piece of cloud infrastructure
 

11
00:00:19,650 --> 00:00:22,790
going as a piece of cloud infrastructure
and itself built out of infrastructure

12
00:00:22,790 --> 00:00:22,800
and itself built out of infrastructure
 

13
00:00:22,800 --> 00:00:29,090
and itself built out of infrastructure
that Amazon itself makes available so

14
00:00:29,090 --> 00:00:29,100
that Amazon itself makes available so
 

15
00:00:29,100 --> 00:00:30,200
that Amazon itself makes available so
the reason why we're reading this paper

16
00:00:30,200 --> 00:00:30,210
the reason why we're reading this paper
 

17
00:00:30,210 --> 00:00:32,089
the reason why we're reading this paper
is that first of all it's a very

18
00:00:32,089 --> 00:00:32,099
is that first of all it's a very
 

19
00:00:32,099 --> 00:00:34,280
is that first of all it's a very
successful recent cloud service from

20
00:00:34,280 --> 00:00:34,290
successful recent cloud service from
 

21
00:00:34,290 --> 00:00:38,470
successful recent cloud service from
Amazon a lot of their customers use it

22
00:00:38,470 --> 00:00:38,480
Amazon a lot of their customers use it
 

23
00:00:38,480 --> 00:00:41,450
Amazon a lot of their customers use it
it shows sort of in its own way an

24
00:00:41,450 --> 00:00:41,460
it shows sort of in its own way an
 

25
00:00:41,460 --> 00:00:44,810
it shows sort of in its own way an
example of a very big payoff from clever

26
00:00:44,810 --> 00:00:44,820
example of a very big payoff from clever
 

27
00:00:44,820 --> 00:00:46,520
example of a very big payoff from clever
design table one which sort of

28
00:00:46,520 --> 00:00:46,530
design table one which sort of
 

29
00:00:46,530 --> 00:00:48,370
design table one which sort of
summarizes the performance shows that

30
00:00:48,370 --> 00:00:48,380
summarizes the performance shows that
 

31
00:00:48,380 --> 00:00:51,200
summarizes the performance shows that
relative to some other system which is

32
00:00:51,200 --> 00:00:51,210
relative to some other system which is
 

33
00:00:51,210 --> 00:00:53,420
relative to some other system which is
not very well explained the paper claims

34
00:00:53,420 --> 00:00:53,430
not very well explained the paper claims
 

35
00:00:53,430 --> 00:00:55,760
not very well explained the paper claims
to get a thirty five times speed up in

36
00:00:55,760 --> 00:00:55,770
to get a thirty five times speed up in
 

37
00:00:55,770 --> 00:00:57,470
to get a thirty five times speed up in
transaction throughput which is

38
00:00:57,470 --> 00:00:57,480
transaction throughput which is
 

39
00:00:57,480 --> 00:01:00,319
transaction throughput which is
extremely impressive this paper also

40
00:01:00,319 --> 00:01:00,329
extremely impressive this paper also
 

41
00:01:00,329 --> 00:01:03,139
extremely impressive this paper also
kind of explores the limits of how well

42
00:01:03,139 --> 00:01:03,149
kind of explores the limits of how well
 

43
00:01:03,149 --> 00:01:04,670
kind of explores the limits of how well
you can do for performance and fault

44
00:01:04,670 --> 00:01:04,680
you can do for performance and fault
 

45
00:01:04,680 --> 00:01:06,740
you can do for performance and fault
tolerance using general-purpose storage

46
00:01:06,740 --> 00:01:06,750
tolerance using general-purpose storage
 

47
00:01:06,750 --> 00:01:08,300
tolerance using general-purpose storage
because one of the themes of the papers

48
00:01:08,300 --> 00:01:08,310
because one of the themes of the papers
 

49
00:01:08,310 --> 00:01:10,460
because one of the themes of the papers
they basically abandoned general-purpose

50
00:01:10,460 --> 00:01:10,470
they basically abandoned general-purpose
 

51
00:01:10,470 --> 00:01:12,500
they basically abandoned general-purpose
storage they switch from a design in

52
00:01:12,500 --> 00:01:12,510
storage they switch from a design in
 

53
00:01:12,510 --> 00:01:14,240
storage they switch from a design in
which they were using their Amazon's own

54
00:01:14,240 --> 00:01:14,250
which they were using their Amazon's own
 

55
00:01:14,250 --> 00:01:16,030
which they were using their Amazon's own
general-purpose storage infrastructure

56
00:01:16,030 --> 00:01:16,040
general-purpose storage infrastructure
 

57
00:01:16,040 --> 00:01:17,960
general-purpose storage infrastructure
decided it was not good enough and

58
00:01:17,960 --> 00:01:17,970
decided it was not good enough and
 

59
00:01:17,970 --> 00:01:19,399
decided it was not good enough and
basically built totally

60
00:01:19,399 --> 00:01:19,409
basically built totally
 

61
00:01:19,409 --> 00:01:22,310
basically built totally
application-specific storage

62
00:01:22,310 --> 00:01:22,320
application-specific storage
 

63
00:01:22,320 --> 00:01:23,930
application-specific storage
furthermore the paper has a lot of

64
00:01:23,930 --> 00:01:23,940
furthermore the paper has a lot of
 

65
00:01:23,940 --> 00:01:25,580
furthermore the paper has a lot of
little tidbits about what turned out to

66
00:01:25,580 --> 00:01:25,590
little tidbits about what turned out to
 

67
00:01:25,590 --> 00:01:29,090
little tidbits about what turned out to
be important in this and the kind of

68
00:01:29,090 --> 00:01:29,100
be important in this and the kind of
 

69
00:01:29,100 --> 00:01:32,480
be important in this and the kind of
cloud infrastructure world so before

70
00:01:32,480 --> 00:01:32,490
cloud infrastructure world so before
 

71
00:01:32,490 --> 00:01:35,000
cloud infrastructure world so before
talking about aurora i want to spend a

72
00:01:35,000 --> 00:01:35,010
talking about aurora i want to spend a
 

73
00:01:35,010 --> 00:01:36,500
talking about aurora i want to spend a
bit of time kind of going over the back

74
00:01:36,500 --> 00:01:36,510
bit of time kind of going over the back
 

75
00:01:36,510 --> 00:01:38,719
bit of time kind of going over the back
history or what my impression is about

76
00:01:38,719 --> 00:01:38,729
history or what my impression is about
 

77
00:01:38,729 --> 00:01:41,260
history or what my impression is about
the story that led up to the design of

78
00:01:41,260 --> 00:01:41,270
the story that led up to the design of
 

79
00:01:41,270 --> 00:01:43,820
the story that led up to the design of
aurora because it's you know the sort of

80
00:01:43,820 --> 00:01:43,830
aurora because it's you know the sort of
 

81
00:01:43,830 --> 00:01:47,300
aurora because it's you know the sort of
m f-- way that amazon has in mind that

82
00:01:47,300 --> 00:01:47,310
m f-- way that amazon has in mind that
 

83
00:01:47,310 --> 00:01:49,940
m f-- way that amazon has in mind that
you ought to build that their cloud

84
00:01:49,940 --> 00:01:49,950
you ought to build that their cloud
 

85
00:01:49,950 --> 00:01:51,800
you ought to build that their cloud
customers ought to build databases on

86
00:01:51,800 --> 00:01:51,810
customers ought to build databases on
 

87
00:01:51,810 --> 00:01:55,130
customers ought to build databases on
amazon's infrastructure so in the

88
00:01:55,130 --> 00:01:55,140
amazon's infrastructure so in the
 

89
00:01:55,140 --> 00:02:02,840
amazon's infrastructure so in the
beginning amazon had basically their

90
00:02:02,840 --> 00:02:02,850
beginning amazon had basically their
 

91
00:02:02,850 --> 00:02:05,359
beginning amazon had basically their
very first offering cloud offering to

92
00:02:05,359 --> 00:02:05,369
very first offering cloud offering to
 

93
00:02:05,369 --> 00:02:06,649
very first offering cloud offering to
support people who wanted to build

94
00:02:06,649 --> 00:02:06,659
support people who wanted to build
 

95
00:02:06,659 --> 00:02:09,409
support people who wanted to build
websites but using Amazon's hardware and

96
00:02:09,409 --> 00:02:09,419
websites but using Amazon's hardware and
 

97
00:02:09,419 --> 00:02:11,449
websites but using Amazon's hardware and
in Amazon's machine room their first

98
00:02:11,449 --> 00:02:11,459
in Amazon's machine room their first
 

99
00:02:11,459 --> 00:02:14,890
in Amazon's machine room their first
offering was something called ec2

100
00:02:14,890 --> 00:02:14,900
offering was something called ec2
 

101
00:02:14,900 --> 00:02:20,089
offering was something called ec2
for elastic cloud apparently too and the

102
00:02:20,089 --> 00:02:20,099
for elastic cloud apparently too and the
 

103
00:02:20,099 --> 00:02:21,740
for elastic cloud apparently too and the
idea here is that Amazon had big machine

104
00:02:21,740 --> 00:02:21,750
idea here is that Amazon had big machine
 

105
00:02:21,750 --> 00:02:23,510
idea here is that Amazon had big machine
rooms full of servers and they ran

106
00:02:23,510 --> 00:02:23,520
rooms full of servers and they ran
 

107
00:02:23,520 --> 00:02:25,010
rooms full of servers and they ran
virtual machine monitors on their

108
00:02:25,010 --> 00:02:25,020
virtual machine monitors on their
 

109
00:02:25,020 --> 00:02:26,720
virtual machine monitors on their
servers and they'd rent out virtual

110
00:02:26,720 --> 00:02:26,730
servers and they'd rent out virtual
 

111
00:02:26,730 --> 00:02:30,410
servers and they'd rent out virtual
machines to their customers and their

112
00:02:30,410 --> 00:02:30,420
machines to their customers and their
 

113
00:02:30,420 --> 00:02:32,180
machines to their customers and their
customers would then you know rent a

114
00:02:32,180 --> 00:02:32,190
customers would then you know rent a
 

115
00:02:32,190 --> 00:02:34,010
customers would then you know rent a
bunch of virtual machines and run web

116
00:02:34,010 --> 00:02:34,020
bunch of virtual machines and run web
 

117
00:02:34,020 --> 00:02:36,020
bunch of virtual machines and run web
servers and databases and whatever ever

118
00:02:36,020 --> 00:02:36,030
servers and databases and whatever ever
 

119
00:02:36,030 --> 00:02:39,320
servers and databases and whatever ever
all else they needed to run inside these

120
00:02:39,320 --> 00:02:39,330
all else they needed to run inside these
 

121
00:02:39,330 --> 00:02:42,490
all else they needed to run inside these
ec2 instances so the picture of one

122
00:02:42,490 --> 00:02:42,500
ec2 instances so the picture of one
 

123
00:02:42,500 --> 00:02:47,979
ec2 instances so the picture of one
physical server looked like this Amazon

124
00:02:47,979 --> 00:02:47,989
physical server looked like this Amazon
 

125
00:02:47,989 --> 00:02:50,509
physical server looked like this Amazon
we control the virtual machine monitor

126
00:02:50,509 --> 00:02:50,519
we control the virtual machine monitor
 

127
00:02:50,519 --> 00:02:53,000
we control the virtual machine monitor
on this hardware server and then there'd

128
00:02:53,000 --> 00:02:53,010
on this hardware server and then there'd
 

129
00:02:53,010 --> 00:02:54,800
on this hardware server and then there'd
be a bunch of guests a bunch of ec2

130
00:02:54,800 --> 00:02:54,810
be a bunch of guests a bunch of ec2
 

131
00:02:54,810 --> 00:02:57,710
be a bunch of guests a bunch of ec2
instances each one rented out to a

132
00:02:57,710 --> 00:02:57,720
instances each one rented out to a
 

133
00:02:57,720 --> 00:02:59,720
instances each one rented out to a
different cloud customer each of these

134
00:02:59,720 --> 00:02:59,730
different cloud customer each of these
 

135
00:02:59,730 --> 00:03:01,039
different cloud customer each of these
would just run a standard operating

136
00:03:01,039 --> 00:03:01,049
would just run a standard operating
 

137
00:03:01,049 --> 00:03:06,979
would just run a standard operating
system like Linux and then you know a

138
00:03:06,979 --> 00:03:06,989
system like Linux and then you know a
 

139
00:03:06,989 --> 00:03:11,050
system like Linux and then you know a
web server or maybe a database server

140
00:03:11,050 --> 00:03:11,060
web server or maybe a database server
 

141
00:03:11,060 --> 00:03:14,059
web server or maybe a database server
and these were relatively cheap

142
00:03:14,059 --> 00:03:14,069
and these were relatively cheap
 

143
00:03:14,069 --> 00:03:17,090
and these were relatively cheap
relatively easy to set up and as a very

144
00:03:17,090 --> 00:03:17,100
relatively easy to set up and as a very
 

145
00:03:17,100 --> 00:03:22,280
relatively easy to set up and as a very
successful service so one little detail

146
00:03:22,280 --> 00:03:22,290
successful service so one little detail
 

147
00:03:22,290 --> 00:03:23,930
successful service so one little detail
that's extremely important for us is

148
00:03:23,930 --> 00:03:23,940
that's extremely important for us is
 

149
00:03:23,940 --> 00:03:28,490
that's extremely important for us is
that initially the way you get storage

150
00:03:28,490 --> 00:03:28,500
that initially the way you get storage
 

151
00:03:28,500 --> 00:03:30,170
that initially the way you get storage
the way you've got storage if you rented

152
00:03:30,170 --> 00:03:30,180
the way you've got storage if you rented
 

153
00:03:30,180 --> 00:03:33,259
the way you've got storage if you rented
an ec2 instance was that every one of

154
00:03:33,259 --> 00:03:33,269
an ec2 instance was that every one of
 

155
00:03:33,269 --> 00:03:35,470
an ec2 instance was that every one of
their servers had a disk attached a

156
00:03:35,470 --> 00:03:35,480
their servers had a disk attached a
 

157
00:03:35,480 --> 00:03:38,420
their servers had a disk attached a
physical disk attached and each one of

158
00:03:38,420 --> 00:03:38,430
physical disk attached and each one of
 

159
00:03:38,430 --> 00:03:41,390
physical disk attached and each one of
these instances that they rented to

160
00:03:41,390 --> 00:03:41,400
these instances that they rented to
 

161
00:03:41,400 --> 00:03:43,460
these instances that they rented to
their customers will get us you know a

162
00:03:43,460 --> 00:03:43,470
their customers will get us you know a
 

163
00:03:43,470 --> 00:03:46,880
their customers will get us you know a
slice of the disk so they said locally

164
00:03:46,880 --> 00:03:46,890
slice of the disk so they said locally
 

165
00:03:46,890 --> 00:03:48,949
slice of the disk so they said locally
attached storage and you got a bit of

166
00:03:48,949 --> 00:03:48,959
attached storage and you got a bit of
 

167
00:03:48,959 --> 00:03:50,420
attached storage and you got a bit of
locally attached storage which itself

168
00:03:50,420 --> 00:03:50,430
locally attached storage which itself
 

169
00:03:50,430 --> 00:03:52,099
locally attached storage which itself
just look like a hard drive an emulated

170
00:03:52,099 --> 00:03:52,109
just look like a hard drive an emulated
 

171
00:03:52,109 --> 00:03:56,860
just look like a hard drive an emulated
hard drive to the virtual machine guests

172
00:03:56,860 --> 00:03:56,870

 

173
00:03:56,870 --> 00:04:00,470

ec2 is like perfect for web servers for

174
00:04:00,470 --> 00:04:00,480
ec2 is like perfect for web servers for
 

175
00:04:00,480 --> 00:04:02,210
ec2 is like perfect for web servers for
stateless web servers you know your

176
00:04:02,210 --> 00:04:02,220
stateless web servers you know your
 

177
00:04:02,220 --> 00:04:04,190
stateless web servers you know your
customers with their web browsers would

178
00:04:04,190 --> 00:04:04,200
customers with their web browsers would
 

179
00:04:04,200 --> 00:04:07,220
customers with their web browsers would
connect to a bunch of rented ec2

180
00:04:07,220 --> 00:04:07,230
connect to a bunch of rented ec2
 

181
00:04:07,230 --> 00:04:10,910
connect to a bunch of rented ec2
instances that ran a web server and if

182
00:04:10,910 --> 00:04:10,920
instances that ran a web server and if
 

183
00:04:10,920 --> 00:04:12,289
instances that ran a web server and if
you added all of a sudden more customers

184
00:04:12,289 --> 00:04:12,299
you added all of a sudden more customers
 

185
00:04:12,299 --> 00:04:14,180
you added all of a sudden more customers
you could just instantly rent more ec2

186
00:04:14,180 --> 00:04:14,190
you could just instantly rent more ec2
 

187
00:04:14,190 --> 00:04:15,530
you could just instantly rent more ec2
instances from

188
00:04:15,530 --> 00:04:15,540
instances from
 

189
00:04:15,540 --> 00:04:17,930
instances from
Amazon and fire up web servers on them

190
00:04:17,930 --> 00:04:17,940
Amazon and fire up web servers on them
 

191
00:04:17,940 --> 00:04:20,029
Amazon and fire up web servers on them
and sort of an easy way to scale up your

192
00:04:20,029 --> 00:04:20,039
and sort of an easy way to scale up your
 

193
00:04:20,039 --> 00:04:23,270
and sort of an easy way to scale up your
ability to handle web load so it was

194
00:04:23,270 --> 00:04:23,280
ability to handle web load so it was
 

195
00:04:23,280 --> 00:04:26,030
ability to handle web load so it was
good for web servers

196
00:04:26,030 --> 00:04:26,040
good for web servers
 

197
00:04:26,040 --> 00:04:27,650
good for web servers
but the other main thing that people ran

198
00:04:27,650 --> 00:04:27,660
but the other main thing that people ran
 

199
00:04:27,660 --> 00:04:30,500
but the other main thing that people ran
in ec2 instance this was databases

200
00:04:30,500 --> 00:04:30,510
in ec2 instance this was databases
 

201
00:04:30,510 --> 00:04:32,270
in ec2 instance this was databases
because usually a website is constructed

202
00:04:32,270 --> 00:04:32,280
because usually a website is constructed
 

203
00:04:32,280 --> 00:04:34,790
because usually a website is constructed
of a set of stateless web servers that

204
00:04:34,790 --> 00:04:34,800
of a set of stateless web servers that
 

205
00:04:34,800 --> 00:04:37,490
of a set of stateless web servers that
anytime they need to get out permanent

206
00:04:37,490 --> 00:04:37,500
anytime they need to get out permanent
 

207
00:04:37,500 --> 00:04:40,580
anytime they need to get out permanent
data go talk to a back-end database so

208
00:04:40,580 --> 00:04:40,590
data go talk to a back-end database so
 

209
00:04:40,590 --> 00:04:43,580
data go talk to a back-end database so
what you would get is is maybe a bunch

210
00:04:43,580 --> 00:04:43,590
what you would get is is maybe a bunch
 

211
00:04:43,590 --> 00:04:48,050
what you would get is is maybe a bunch
of client browsers in the outside world

212
00:04:48,050 --> 00:04:48,060
of client browsers in the outside world
 

213
00:04:48,060 --> 00:04:50,900
of client browsers in the outside world
outside of Amazon's web infrastructure

214
00:04:50,900 --> 00:04:50,910
outside of Amazon's web infrastructure
 

215
00:04:50,910 --> 00:04:56,660
outside of Amazon's web infrastructure
and then a number of ec2 web server

216
00:04:56,660 --> 00:04:56,670
and then a number of ec2 web server
 

217
00:04:56,670 --> 00:04:58,460
and then a number of ec2 web server
instances as many as you need it to run

218
00:04:58,460 --> 00:04:58,470
instances as many as you need it to run
 

219
00:04:58,470 --> 00:05:00,620
instances as many as you need it to run
the sort of logic of the website this

220
00:05:00,620 --> 00:05:00,630
the sort of logic of the website this
 

221
00:05:00,630 --> 00:05:05,300
the sort of logic of the website this
this is now inside Amazon and then also

222
00:05:05,300 --> 00:05:05,310
this is now inside Amazon and then also
 

223
00:05:05,310 --> 00:05:10,870
this is now inside Amazon and then also
some also typically one ec2 instance

224
00:05:10,870 --> 00:05:10,880
some also typically one ec2 instance
 

225
00:05:10,880 --> 00:05:13,820
some also typically one ec2 instance
running a database your web servers

226
00:05:13,820 --> 00:05:13,830
running a database your web servers
 

227
00:05:13,830 --> 00:05:15,500
running a database your web servers
would talk to your database instance and

228
00:05:15,500 --> 00:05:15,510
would talk to your database instance and
 

229
00:05:15,510 --> 00:05:16,910
would talk to your database instance and
ask it to read and write records in the

230
00:05:16,910 --> 00:05:16,920
ask it to read and write records in the
 

231
00:05:16,920 --> 00:05:19,880
ask it to read and write records in the
database unfortunately ec2 wasn't

232
00:05:19,880 --> 00:05:19,890
database unfortunately ec2 wasn't
 

233
00:05:19,890 --> 00:05:22,550
database unfortunately ec2 wasn't
perfect was it nearly as well-suited to

234
00:05:22,550 --> 00:05:22,560
perfect was it nearly as well-suited to
 

235
00:05:22,560 --> 00:05:24,260
perfect was it nearly as well-suited to
running a database as it was to running

236
00:05:24,260 --> 00:05:24,270
running a database as it was to running
 

237
00:05:24,270 --> 00:05:25,880
running a database as it was to running
web servers and the most immediate

238
00:05:25,880 --> 00:05:25,890
web servers and the most immediate
 

239
00:05:25,890 --> 00:05:29,810
web servers and the most immediate
reason is that the storage or the sort

240
00:05:29,810 --> 00:05:29,820
reason is that the storage or the sort
 

241
00:05:29,820 --> 00:05:32,540
reason is that the storage or the sort
of main easy way to get storage for your

242
00:05:32,540 --> 00:05:32,550
of main easy way to get storage for your
 

243
00:05:32,550 --> 00:05:35,090
of main easy way to get storage for your
ec2 database instance was on the locally

244
00:05:35,090 --> 00:05:35,100
ec2 database instance was on the locally
 

245
00:05:35,100 --> 00:05:39,590
ec2 database instance was on the locally
attached disk attached to whatever a

246
00:05:39,590 --> 00:05:39,600
attached disk attached to whatever a
 

247
00:05:39,600 --> 00:05:41,660
attached disk attached to whatever a
piece of hardware your database instance

248
00:05:41,660 --> 00:05:41,670
piece of hardware your database instance
 

249
00:05:41,670 --> 00:05:44,060
piece of hardware your database instance
was currently running on in fact

250
00:05:44,060 --> 00:05:44,070
was currently running on in fact
 

251
00:05:44,070 --> 00:05:46,730
was currently running on in fact
hardware crashed then you also lost

252
00:05:46,730 --> 00:05:46,740
hardware crashed then you also lost
 

253
00:05:46,740 --> 00:05:48,290
hardware crashed then you also lost
access to whatever what is on its hard

254
00:05:48,290 --> 00:05:48,300
access to whatever what is on its hard
 

255
00:05:48,300 --> 00:05:51,740
access to whatever what is on its hard
drive so if it's a hardware that it was

256
00:05:51,740 --> 00:05:51,750
drive so if it's a hardware that it was
 

257
00:05:51,750 --> 00:05:54,200
drive so if it's a hardware that it was
actually implementing a web server

258
00:05:54,200 --> 00:05:54,210
actually implementing a web server
 

259
00:05:54,210 --> 00:05:55,580
actually implementing a web server
crashed no problem at all because

260
00:05:55,580 --> 00:05:55,590
crashed no problem at all because
 

261
00:05:55,590 --> 00:05:57,650
crashed no problem at all because
there's really keeps no state itself you

262
00:05:57,650 --> 00:05:57,660
there's really keeps no state itself you
 

263
00:05:57,660 --> 00:05:59,270
there's really keeps no state itself you
just fire up a new web server on a new

264
00:05:59,270 --> 00:05:59,280
just fire up a new web server on a new
 

265
00:05:59,280 --> 00:06:02,000
just fire up a new web server on a new
ec2 instance if the ec2 instance it's a

266
00:06:02,000 --> 00:06:02,010
ec2 instance if the ec2 instance it's a
 

267
00:06:02,010 --> 00:06:04,730
ec2 instance if the ec2 instance it's a
hardware running it crashes have become

268
00:06:04,730 --> 00:06:04,740
hardware running it crashes have become
 

269
00:06:04,740 --> 00:06:06,200
hardware running it crashes have become
unavailable you have a serious problem

270
00:06:06,200 --> 00:06:06,210
unavailable you have a serious problem
 

271
00:06:06,210 --> 00:06:08,930
unavailable you have a serious problem
if the data is stored on the locally

272
00:06:08,930 --> 00:06:08,940
if the data is stored on the locally
 

273
00:06:08,940 --> 00:06:13,040
if the data is stored on the locally
attached disk so initially at least

274
00:06:13,040 --> 00:06:13,050
attached disk so initially at least
 

275
00:06:13,050 --> 00:06:15,020
attached disk so initially at least
there wasn't sort of a lot of help for

276
00:06:15,020 --> 00:06:15,030
there wasn't sort of a lot of help for
 

277
00:06:15,030 --> 00:06:17,120
there wasn't sort of a lot of help for
doing this one thing that did work out

278
00:06:17,120 --> 00:06:17,130
doing this one thing that did work out
 

279
00:06:17,130 --> 00:06:19,040
doing this one thing that did work out
well is that Amazon did provide this

280
00:06:19,040 --> 00:06:19,050
well is that Amazon did provide this
 

281
00:06:19,050 --> 00:06:22,610
well is that Amazon did provide this
sort of large scheme for storing large

282
00:06:22,610 --> 00:06:22,620
sort of large scheme for storing large
 

283
00:06:22,620 --> 00:06:24,410
sort of large scheme for storing large
chunks of data called s3 and you could

284
00:06:24,410 --> 00:06:24,420
chunks of data called s3 and you could
 

285
00:06:24,420 --> 00:06:25,940
chunks of data called s3 and you could
take snapshots you could take Prius

286
00:06:25,940 --> 00:06:25,950
take snapshots you could take Prius
 

287
00:06:25,950 --> 00:06:27,710
take snapshots you could take Prius
periodic snapshots if you need a basis

288
00:06:27,710 --> 00:06:27,720
periodic snapshots if you need a basis
 

289
00:06:27,720 --> 00:06:30,860
periodic snapshots if you need a basis
state and stored in s3 and use that for

290
00:06:30,860 --> 00:06:30,870
state and stored in s3 and use that for
 

291
00:06:30,870 --> 00:06:34,850
state and stored in s3 and use that for
sort of backup disaster recovery but you

292
00:06:34,850 --> 00:06:34,860
sort of backup disaster recovery but you
 

293
00:06:34,860 --> 00:06:36,860
sort of backup disaster recovery but you
know that style of periodic snapshots

294
00:06:36,860 --> 00:06:36,870
know that style of periodic snapshots
 

295
00:06:36,870 --> 00:06:38,450
know that style of periodic snapshots
means you're gonna lose updates that

296
00:06:38,450 --> 00:06:38,460
means you're gonna lose updates that
 

297
00:06:38,460 --> 00:06:39,260
means you're gonna lose updates that
happen

298
00:06:39,260 --> 00:06:39,270
happen
 

299
00:06:39,270 --> 00:06:43,070
happen
between the periodic backups all right

300
00:06:43,070 --> 00:06:43,080
between the periodic backups all right
 

301
00:06:43,080 --> 00:06:45,380
between the periodic backups all right
so the next thing that came along that's

302
00:06:45,380 --> 00:06:45,390
so the next thing that came along that's
 

303
00:06:45,390 --> 00:06:47,630
so the next thing that came along that's
that's relevant to the sort of Aurora

304
00:06:47,630 --> 00:06:47,640
that's relevant to the sort of Aurora
 

305
00:06:47,640 --> 00:06:51,110
that's relevant to the sort of Aurora
database story is that in order to

306
00:06:51,110 --> 00:06:51,120
database story is that in order to
 

307
00:06:51,120 --> 00:06:55,160
database story is that in order to
provide their customers with disks for

308
00:06:55,160 --> 00:06:55,170
provide their customers with disks for
 

309
00:06:55,170 --> 00:06:57,290
provide their customers with disks for
their ec2 instances that didn't go away

310
00:06:57,290 --> 00:06:57,300
their ec2 instances that didn't go away
 

311
00:06:57,300 --> 00:06:59,360
their ec2 instances that didn't go away
if there was a failure that is more sort

312
00:06:59,360 --> 00:06:59,370
if there was a failure that is more sort
 

313
00:06:59,370 --> 00:07:01,910
if there was a failure that is more sort
of fault tolerant long-term storage was

314
00:07:01,910 --> 00:07:01,920
of fault tolerant long-term storage was
 

315
00:07:01,920 --> 00:07:04,460
of fault tolerant long-term storage was
guaranteed to be there Amazon introduced

316
00:07:04,460 --> 00:07:04,470
guaranteed to be there Amazon introduced
 

317
00:07:04,470 --> 00:07:08,270
guaranteed to be there Amazon introduced
the service called EBS and this stands

318
00:07:08,270 --> 00:07:08,280
the service called EBS and this stands
 

319
00:07:08,280 --> 00:07:09,830
the service called EBS and this stands
for elastic block store

320
00:07:09,830 --> 00:07:09,840
for elastic block store
 

321
00:07:09,840 --> 00:07:12,530
for elastic block store
so with EBS is is a service that looks

322
00:07:12,530 --> 00:07:12,540
so with EBS is is a service that looks
 

323
00:07:12,540 --> 00:07:16,520
so with EBS is is a service that looks
to an ec2 instances it looks to one of

324
00:07:16,520 --> 00:07:16,530
to an ec2 instances it looks to one of
 

325
00:07:16,530 --> 00:07:17,930
to an ec2 instances it looks to one of
these instances one of these guest

326
00:07:17,930 --> 00:07:17,940
these instances one of these guest
 

327
00:07:17,940 --> 00:07:19,700
these instances one of these guest
virtual machines just as if it were a

328
00:07:19,700 --> 00:07:19,710
virtual machines just as if it were a
 

329
00:07:19,710 --> 00:07:21,980
virtual machines just as if it were a
hard drive an ordinary way you could

330
00:07:21,980 --> 00:07:21,990
hard drive an ordinary way you could
 

331
00:07:21,990 --> 00:07:24,140
hard drive an ordinary way you could
format it as a hard drive but a file

332
00:07:24,140 --> 00:07:24,150
format it as a hard drive but a file
 

333
00:07:24,150 --> 00:07:27,110
format it as a hard drive but a file
system like ext3 or whatever Linux file

334
00:07:27,110 --> 00:07:27,120
system like ext3 or whatever Linux file
 

335
00:07:27,120 --> 00:07:28,880
system like ext3 or whatever Linux file
system you like on this on this thing

336
00:07:28,880 --> 00:07:28,890
system you like on this on this thing
 

337
00:07:28,890 --> 00:07:30,620
system you like on this on this thing
that looks to be guest just like a hard

338
00:07:30,620 --> 00:07:30,630
that looks to be guest just like a hard
 

339
00:07:30,630 --> 00:07:31,910
that looks to be guest just like a hard
drive but the way it's actually

340
00:07:31,910 --> 00:07:31,920
drive but the way it's actually
 

341
00:07:31,920 --> 00:07:35,270
drive but the way it's actually
implemented is as a replicated pair of

342
00:07:35,270 --> 00:07:35,280
implemented is as a replicated pair of
 

343
00:07:35,280 --> 00:07:40,880
implemented is as a replicated pair of
storage servers so this is the local

344
00:07:40,880 --> 00:07:40,890
storage servers so this is the local
 

345
00:07:40,890 --> 00:07:43,510
storage servers so this is the local
this is one of local storage with Mike

346
00:07:43,510 --> 00:07:43,520
this is one of local storage with Mike
 

347
00:07:43,520 --> 00:07:47,540
this is one of local storage with Mike
if when EBS came out then you could you

348
00:07:47,540 --> 00:07:47,550
if when EBS came out then you could you
 

349
00:07:47,550 --> 00:07:49,580
if when EBS came out then you could you
could rent an e BS volume which this

350
00:07:49,580 --> 00:07:49,590
could rent an e BS volume which this
 

351
00:07:49,590 --> 00:07:50,660
could rent an e BS volume which this
thing that looks just like an ordinary

352
00:07:50,660 --> 00:07:50,670
thing that looks just like an ordinary
 

353
00:07:50,670 --> 00:07:53,120
thing that looks just like an ordinary
hard drive but it's actually implemented

354
00:07:53,120 --> 00:07:53,130
hard drive but it's actually implemented
 

355
00:07:53,130 --> 00:07:59,080
hard drive but it's actually implemented
as a pair so these are EBS servers a

356
00:07:59,080 --> 00:07:59,090
as a pair so these are EBS servers a
 

357
00:07:59,090 --> 00:08:03,830
as a pair so these are EBS servers a
pair of EBS servers each with an

358
00:08:03,830 --> 00:08:03,840
pair of EBS servers each with an
 

359
00:08:03,840 --> 00:08:09,350
pair of EBS servers each with an
attached hard drive so if your software

360
00:08:09,350 --> 00:08:09,360
attached hard drive so if your software
 

361
00:08:09,360 --> 00:08:10,910
attached hard drive so if your software
here maybe you're running a database now

362
00:08:10,910 --> 00:08:10,920
here maybe you're running a database now
 

363
00:08:10,920 --> 00:08:13,070
here maybe you're running a database now
and your databases mount's one of these

364
00:08:13,070 --> 00:08:13,080
and your databases mount's one of these
 

365
00:08:13,080 --> 00:08:15,110
and your databases mount's one of these
EBS volumes as its storage when the

366
00:08:15,110 --> 00:08:15,120
EBS volumes as its storage when the
 

367
00:08:15,120 --> 00:08:16,340
EBS volumes as its storage when the
database server doesn't write what that

368
00:08:16,340 --> 00:08:16,350
database server doesn't write what that
 

369
00:08:16,350 --> 00:08:18,110
database server doesn't write what that
actually means is that the right to send

370
00:08:18,110 --> 00:08:18,120
actually means is that the right to send
 

371
00:08:18,120 --> 00:08:19,820
actually means is that the right to send
out over the network and using chain

372
00:08:19,820 --> 00:08:19,830
out over the network and using chain
 

373
00:08:19,830 --> 00:08:21,290
out over the network and using chain
replication which we talked about last

374
00:08:21,290 --> 00:08:21,300
replication which we talked about last
 

375
00:08:21,300 --> 00:08:24,020
replication which we talked about last
week you're right is you know first

376
00:08:24,020 --> 00:08:24,030
week you're right is you know first
 

377
00:08:24,030 --> 00:08:27,440
week you're right is you know first
written to the EBS server one on the

378
00:08:27,440 --> 00:08:27,450
written to the EBS server one on the
 

379
00:08:27,450 --> 00:08:28,960
written to the EBS server one on the
first CBS server that's backing your

380
00:08:28,960 --> 00:08:28,970
first CBS server that's backing your
 

381
00:08:28,970 --> 00:08:30,950
first CBS server that's backing your
volume and then the second one and

382
00:08:30,950 --> 00:08:30,960
volume and then the second one and
 

383
00:08:30,960 --> 00:08:33,320
volume and then the second one and
finally you get the reply and similarly

384
00:08:33,320 --> 00:08:33,330
finally you get the reply and similarly
 

385
00:08:33,330 --> 00:08:35,750
finally you get the reply and similarly
when you do a read I guess some chain

386
00:08:35,750 --> 00:08:35,760
when you do a read I guess some chain
 

387
00:08:35,760 --> 00:08:37,370
when you do a read I guess some chain
replication you'll be the last of the

388
00:08:37,370 --> 00:08:37,380
replication you'll be the last of the
 

389
00:08:37,380 --> 00:08:41,780
replication you'll be the last of the
chain so now database is running on ec2

390
00:08:41,780 --> 00:08:41,790
chain so now database is running on ec2
 

391
00:08:41,790 --> 00:08:44,240
chain so now database is running on ec2
instances had available a storage system

392
00:08:44,240 --> 00:08:44,250
instances had available a storage system
 

393
00:08:44,250 --> 00:08:46,030
instances had available a storage system
that actually would survive the crash of

394
00:08:46,030 --> 00:08:46,040
that actually would survive the crash of
 

395
00:08:46,040 --> 00:08:48,650
that actually would survive the crash of
or the you know death of the hardware

396
00:08:48,650 --> 00:08:48,660
or the you know death of the hardware
 

397
00:08:48,660 --> 00:08:50,030
or the you know death of the hardware
that they were running on if this

398
00:08:50,030 --> 00:08:50,040
that they were running on if this
 

399
00:08:50,040 --> 00:08:53,420
that they were running on if this
physical server died you could just get

400
00:08:53,420 --> 00:08:53,430
physical server died you could just get
 

401
00:08:53,430 --> 00:08:55,160
physical server died you could just get
another ec2 instance fire up your

402
00:08:55,160 --> 00:08:55,170
another ec2 instance fire up your
 

403
00:08:55,170 --> 00:08:58,100
another ec2 instance fire up your
database and have it attached to the

404
00:08:58,100 --> 00:08:58,110
database and have it attached to the
 

405
00:08:58,110 --> 00:09:01,100
database and have it attached to the
same old EBS volume that the sort of

406
00:09:01,100 --> 00:09:01,110
same old EBS volume that the sort of
 

407
00:09:01,110 --> 00:09:03,530
same old EBS volume that the sort of
previous version of your database was

408
00:09:03,530 --> 00:09:03,540
previous version of your database was
 

409
00:09:03,540 --> 00:09:04,790
previous version of your database was
attached to and it would see all the old

410
00:09:04,790 --> 00:09:04,800
attached to and it would see all the old
 

411
00:09:04,800 --> 00:09:07,100
attached to and it would see all the old
data just as it had been left off by the

412
00:09:07,100 --> 00:09:07,110
data just as it had been left off by the
 

413
00:09:07,110 --> 00:09:10,490
data just as it had been left off by the
previous database just like you moved a

414
00:09:10,490 --> 00:09:10,500
previous database just like you moved a
 

415
00:09:10,500 --> 00:09:11,750
previous database just like you moved a
hard drive from one machine to another

416
00:09:11,750 --> 00:09:11,760
hard drive from one machine to another
 

417
00:09:11,760 --> 00:09:14,900
hard drive from one machine to another
so EBS was like really a good deal for

418
00:09:14,900 --> 00:09:14,910
so EBS was like really a good deal for
 

419
00:09:14,910 --> 00:09:16,220
so EBS was like really a good deal for
people who need it to keep permanent

420
00:09:16,220 --> 00:09:16,230
people who need it to keep permanent
 

421
00:09:16,230 --> 00:09:26,840
people who need it to keep permanent
state like people running databases one

422
00:09:26,840 --> 00:09:26,850
state like people running databases one
 

423
00:09:26,850 --> 00:09:29,510
state like people running databases one
thing to that is sort of important for

424
00:09:29,510 --> 00:09:29,520
thing to that is sort of important for
 

425
00:09:29,520 --> 00:09:33,170
thing to that is sort of important for
us about EBS is that it's really it's

426
00:09:33,170 --> 00:09:33,180
us about EBS is that it's really it's
 

427
00:09:33,180 --> 00:09:36,250
us about EBS is that it's really it's
not a system for sharing at any one time

428
00:09:36,250 --> 00:09:36,260
not a system for sharing at any one time
 

429
00:09:36,260 --> 00:09:41,329
not a system for sharing at any one time
only one ec2 instance only one virtual

430
00:09:41,329 --> 00:09:41,339
only one ec2 instance only one virtual
 

431
00:09:41,339 --> 00:09:43,760
only one ec2 instance only one virtual
machine can mount a given EBS volume so

432
00:09:43,760 --> 00:09:43,770
machine can mount a given EBS volume so
 

433
00:09:43,770 --> 00:09:45,290
machine can mount a given EBS volume so
the EBS volumes are implemented on a

434
00:09:45,290 --> 00:09:45,300
the EBS volumes are implemented on a
 

435
00:09:45,300 --> 00:09:47,720
the EBS volumes are implemented on a
huge fleet of you know hundreds or

436
00:09:47,720 --> 00:09:47,730
huge fleet of you know hundreds or
 

437
00:09:47,730 --> 00:09:49,610
huge fleet of you know hundreds or
whatever storage servers with disks at

438
00:09:49,610 --> 00:09:49,620
whatever storage servers with disks at
 

439
00:09:49,620 --> 00:09:52,400
whatever storage servers with disks at
Amazon and they're all you know

440
00:09:52,400 --> 00:09:52,410
Amazon and they're all you know
 

441
00:09:52,410 --> 00:09:55,160
Amazon and they're all you know
everybody's EBS volumes are stored on

442
00:09:55,160 --> 00:09:55,170
everybody's EBS volumes are stored on
 

443
00:09:55,170 --> 00:09:58,730
everybody's EBS volumes are stored on
this big pool of servers but each one of

444
00:09:58,730 --> 00:09:58,740
this big pool of servers but each one of
 

445
00:09:58,740 --> 00:10:01,070
this big pool of servers but each one of
each PPS volume can only be used by only

446
00:10:01,070 --> 00:10:01,080
each PPS volume can only be used by only
 

447
00:10:01,080 --> 00:10:08,500
each PPS volume can only be used by only
one ec2 instance only one customer all

448
00:10:08,500 --> 00:10:08,510

 

449
00:10:08,510 --> 00:10:13,280

right still EBS was a big step up but it

450
00:10:13,280 --> 00:10:13,290
right still EBS was a big step up but it
 

451
00:10:13,290 --> 00:10:18,170
right still EBS was a big step up but it
had still has some problems so there's

452
00:10:18,170 --> 00:10:18,180
had still has some problems so there's
 

453
00:10:18,180 --> 00:10:19,220
had still has some problems so there's
still some things that are not quite as

454
00:10:19,220 --> 00:10:19,230
still some things that are not quite as
 

455
00:10:19,230 --> 00:10:22,820
still some things that are not quite as
perfect as it could be one is that if

456
00:10:22,820 --> 00:10:22,830
perfect as it could be one is that if
 

457
00:10:22,830 --> 00:10:24,740
perfect as it could be one is that if
you run a database on EBS it ends up

458
00:10:24,740 --> 00:10:24,750
you run a database on EBS it ends up
 

459
00:10:24,750 --> 00:10:27,740
you run a database on EBS it ends up
sending large volumes of data across the

460
00:10:27,740 --> 00:10:27,750
sending large volumes of data across the
 

461
00:10:27,750 --> 00:10:31,730
sending large volumes of data across the
network and this is uh we're now

462
00:10:31,730 --> 00:10:31,740
network and this is uh we're now
 

463
00:10:31,740 --> 00:10:33,440
network and this is uh we're now
starting to sort of sneak up on figure

464
00:10:33,440 --> 00:10:33,450
starting to sort of sneak up on figure
 

465
00:10:33,450 --> 00:10:36,740
starting to sort of sneak up on figure
two in the the paper where they start

466
00:10:36,740 --> 00:10:36,750
two in the the paper where they start
 

467
00:10:36,750 --> 00:10:38,660
two in the the paper where they start
complaining about how many just how many

468
00:10:38,660 --> 00:10:38,670
complaining about how many just how many
 

469
00:10:38,670 --> 00:10:40,940
complaining about how many just how many
writes it takes if you run a database on

470
00:10:40,940 --> 00:10:40,950
writes it takes if you run a database on
 

471
00:10:40,950 --> 00:10:45,650
writes it takes if you run a database on
top of a network storage system so

472
00:10:45,650 --> 00:10:45,660
top of a network storage system so
 

473
00:10:45,660 --> 00:10:47,990
top of a network storage system so
there's the database on EBS ended up

474
00:10:47,990 --> 00:10:48,000
there's the database on EBS ended up
 

475
00:10:48,000 --> 00:10:50,449
there's the database on EBS ended up
generating a lot of network traffic and

476
00:10:50,449 --> 00:10:50,459
generating a lot of network traffic and
 

477
00:10:50,459 --> 00:10:53,210
generating a lot of network traffic and
one of the kind of things in the paper

478
00:10:53,210 --> 00:10:53,220
one of the kind of things in the paper
 

479
00:10:53,220 --> 00:10:55,880
one of the kind of things in the paper
that the paper implies is that they're

480
00:10:55,880 --> 00:10:55,890
that the paper implies is that they're
 

481
00:10:55,890 --> 00:10:59,900
that the paper implies is that they're
as much network limited as they are CPU

482
00:10:59,900 --> 00:10:59,910
as much network limited as they are CPU
 

483
00:10:59,910 --> 00:11:01,760
as much network limited as they are CPU
or storage limited that is they pay a

484
00:11:01,760 --> 00:11:01,770
or storage limited that is they pay a
 

485
00:11:01,770 --> 00:11:03,800
or storage limited that is they pay a
huge amount of attention to reducing the

486
00:11:03,800 --> 00:11:03,810
huge amount of attention to reducing the
 

487
00:11:03,810 --> 00:11:05,420
huge amount of attention to reducing the
Aurora paper sends a huge amount of

488
00:11:05,420 --> 00:11:05,430
Aurora paper sends a huge amount of
 

489
00:11:05,430 --> 00:11:07,250
Aurora paper sends a huge amount of
attention for reducing the network

490
00:11:07,250 --> 00:11:07,260
attention for reducing the network
 

491
00:11:07,260 --> 00:11:09,710
attention for reducing the network
that the database generates and seems to

492
00:11:09,710 --> 00:11:09,720
that the database generates and seems to
 

493
00:11:09,720 --> 00:11:12,050
that the database generates and seems to
be worrying less about how much CPU time

494
00:11:12,050 --> 00:11:12,060
be worrying less about how much CPU time
 

495
00:11:12,060 --> 00:11:15,850
be worrying less about how much CPU time
or disk space is being consumed that's a

496
00:11:15,850 --> 00:11:15,860
or disk space is being consumed that's a
 

497
00:11:15,860 --> 00:11:18,140
or disk space is being consumed that's a
sort of a hint at what they think is

498
00:11:18,140 --> 00:11:18,150
sort of a hint at what they think is
 

499
00:11:18,150 --> 00:11:20,630
sort of a hint at what they think is
important the other problem with EBS is

500
00:11:20,630 --> 00:11:20,640
important the other problem with EBS is
 

501
00:11:20,640 --> 00:11:22,700
important the other problem with EBS is
not very fault tolerant it turns out

502
00:11:22,700 --> 00:11:22,710
not very fault tolerant it turns out
 

503
00:11:22,710 --> 00:11:25,310
not very fault tolerant it turns out
that for performance reasons they I'm

504
00:11:25,310 --> 00:11:25,320
that for performance reasons they I'm
 

505
00:11:25,320 --> 00:11:26,960
that for performance reasons they I'm
done would always put both of the EBS

506
00:11:26,960 --> 00:11:26,970
done would always put both of the EBS
 

507
00:11:26,970 --> 00:11:29,480
done would always put both of the EBS
both of the replicas of your EBS volume

508
00:11:29,480 --> 00:11:29,490
both of the replicas of your EBS volume
 

509
00:11:29,490 --> 00:11:32,720
both of the replicas of your EBS volume
in the same data center and so we have a

510
00:11:32,720 --> 00:11:32,730
in the same data center and so we have a
 

511
00:11:32,730 --> 00:11:34,640
in the same data center and so we have a
single server crashed if you know one of

512
00:11:34,640 --> 00:11:34,650
single server crashed if you know one of
 

513
00:11:34,650 --> 00:11:36,020
single server crashed if you know one of
the two EBS servers that you're using

514
00:11:36,020 --> 00:11:36,030
the two EBS servers that you're using
 

515
00:11:36,030 --> 00:11:37,430
the two EBS servers that you're using
crashed it's okay because you switch to

516
00:11:37,430 --> 00:11:37,440
crashed it's okay because you switch to
 

517
00:11:37,440 --> 00:11:39,170
crashed it's okay because you switch to
the other one but there was just no

518
00:11:39,170 --> 00:11:39,180
the other one but there was just no
 

519
00:11:39,180 --> 00:11:40,640
the other one but there was just no
story at all for what happens if an

520
00:11:40,640 --> 00:11:40,650
story at all for what happens if an
 

521
00:11:40,650 --> 00:11:50,230
story at all for what happens if an
entire data center went down and and

522
00:11:50,230 --> 00:11:50,240
entire data center went down and and
 

523
00:11:50,240 --> 00:11:53,570
entire data center went down and and
apparently a lot of customers really

524
00:11:53,570 --> 00:11:53,580
apparently a lot of customers really
 

525
00:11:53,580 --> 00:11:55,250
apparently a lot of customers really
wanted a story that would allow their

526
00:11:55,250 --> 00:11:55,260
wanted a story that would allow their
 

527
00:11:55,260 --> 00:11:57,830
wanted a story that would allow their
data to survive an outage of an entire

528
00:11:57,830 --> 00:11:57,840
data to survive an outage of an entire
 

529
00:11:57,840 --> 00:12:00,200
data to survive an outage of an entire
data center maybe it lost his network

530
00:12:00,200 --> 00:12:00,210
data center maybe it lost his network
 

531
00:12:00,210 --> 00:12:01,910
data center maybe it lost his network
connection it was a fire in the building

532
00:12:01,910 --> 00:12:01,920
connection it was a fire in the building
 

533
00:12:01,920 --> 00:12:04,520
connection it was a fire in the building
or a power failure to the whole building

534
00:12:04,520 --> 00:12:04,530
or a power failure to the whole building
 

535
00:12:04,530 --> 00:12:05,720
or a power failure to the whole building
or something people really wanted to

536
00:12:05,720 --> 00:12:05,730
or something people really wanted to
 

537
00:12:05,730 --> 00:12:07,100
or something people really wanted to
have at least the option if they're

538
00:12:07,100 --> 00:12:07,110
have at least the option if they're
 

539
00:12:07,110 --> 00:12:09,320
have at least the option if they're
willing to pay more of having their data

540
00:12:09,320 --> 00:12:09,330
willing to pay more of having their data
 

541
00:12:09,330 --> 00:12:10,580
willing to pay more of having their data
stored in a way they hid they could

542
00:12:10,580 --> 00:12:10,590
stored in a way they hid they could
 

543
00:12:10,590 --> 00:12:13,850
stored in a way they hid they could
still get at it I'm even if one data

544
00:12:13,850 --> 00:12:13,860
still get at it I'm even if one data
 

545
00:12:13,860 --> 00:12:20,380
still get at it I'm even if one data
center goes down and the way that Amazon

546
00:12:20,380 --> 00:12:20,390
center goes down and the way that Amazon
 

547
00:12:20,390 --> 00:12:25,460
center goes down and the way that Amazon
described this there is that both an

548
00:12:25,460 --> 00:12:25,470
described this there is that both an
 

549
00:12:25,470 --> 00:12:29,930
described this there is that both an
instance and its EBS to EBS replicas are

550
00:12:29,930 --> 00:12:29,940
instance and its EBS to EBS replicas are
 

551
00:12:29,940 --> 00:12:32,350
instance and its EBS to EBS replicas are
in the same ability veil ability zone

552
00:12:32,350 --> 00:12:32,360
in the same ability veil ability zone
 

553
00:12:32,360 --> 00:12:34,730
in the same ability veil ability zone
and an Amazon jargon an availability

554
00:12:34,730 --> 00:12:34,740
and an Amazon jargon an availability
 

555
00:12:34,740 --> 00:12:36,890
and an Amazon jargon an availability
zone is a particular data center and the

556
00:12:36,890 --> 00:12:36,900
zone is a particular data center and the
 

557
00:12:36,900 --> 00:12:38,780
zone is a particular data center and the
way they structure their data centers is

558
00:12:38,780 --> 00:12:38,790
way they structure their data centers is
 

559
00:12:38,790 --> 00:12:42,160
way they structure their data centers is
that there's usually multiple

560
00:12:42,160 --> 00:12:42,170
that there's usually multiple
 

561
00:12:42,170 --> 00:12:44,750
that there's usually multiple
independent data centers in more or less

562
00:12:44,750 --> 00:12:44,760
independent data centers in more or less
 

563
00:12:44,760 --> 00:12:46,670
independent data centers in more or less
the same city or relatively close to

564
00:12:46,670 --> 00:12:46,680
the same city or relatively close to
 

565
00:12:46,680 --> 00:12:50,000
the same city or relatively close to
each other and all the multiple

566
00:12:50,000 --> 00:12:50,010
each other and all the multiple
 

567
00:12:50,010 --> 00:12:52,550
each other and all the multiple
availability zones maybe two or three

568
00:12:52,550 --> 00:12:52,560
availability zones maybe two or three
 

569
00:12:52,560 --> 00:12:54,170
availability zones maybe two or three
that are near by each other are all

570
00:12:54,170 --> 00:12:54,180
that are near by each other are all
 

571
00:12:54,180 --> 00:12:56,330
that are near by each other are all
connected by redundant high speed

572
00:12:56,330 --> 00:12:56,340
connected by redundant high speed
 

573
00:12:56,340 --> 00:12:58,280
connected by redundant high speed
networks so there's always payers or

574
00:12:58,280 --> 00:12:58,290
networks so there's always payers or
 

575
00:12:58,290 --> 00:13:00,350
networks so there's always payers or
triples of nearby availability

576
00:13:00,350 --> 00:13:00,360
triples of nearby availability
 

577
00:13:00,360 --> 00:13:01,730
triples of nearby availability
availability centers and we'll see the

578
00:13:01,730 --> 00:13:01,740
availability centers and we'll see the
 

579
00:13:01,740 --> 00:13:03,350
availability centers and we'll see the
buy that's important in a little bit but

580
00:13:03,350 --> 00:13:03,360
buy that's important in a little bit but
 

581
00:13:03,360 --> 00:13:05,750
buy that's important in a little bit but
at least for EBS in order to keep the

582
00:13:05,750 --> 00:13:05,760
at least for EBS in order to keep the
 

583
00:13:05,760 --> 00:13:08,030
at least for EBS in order to keep the
sort of costs of using chain replication

584
00:13:08,030 --> 00:13:08,040
sort of costs of using chain replication
 

585
00:13:08,040 --> 00:13:12,200
sort of costs of using chain replication
down they required the two replicas to

586
00:13:12,200 --> 00:13:12,210
down they required the two replicas to
 

587
00:13:12,210 --> 00:13:16,720
down they required the two replicas to
be in the same availability zone

588
00:13:16,720 --> 00:13:16,730

 

589
00:13:16,730 --> 00:13:21,890

all right um before I dive into more

590
00:13:21,890 --> 00:13:21,900
all right um before I dive into more
 

591
00:13:21,900 --> 00:13:27,620
all right um before I dive into more
into how Aurora actually works it turns

592
00:13:27,620 --> 00:13:27,630
into how Aurora actually works it turns
 

593
00:13:27,630 --> 00:13:31,160
into how Aurora actually works it turns
out that the details of the design in

594
00:13:31,160 --> 00:13:31,170
out that the details of the design in
 

595
00:13:31,170 --> 00:13:32,570
out that the details of the design in
order to understand them we first have

596
00:13:32,570 --> 00:13:32,580
order to understand them we first have
 

597
00:13:32,580 --> 00:13:34,640
order to understand them we first have
to know a fair amount about the sort of

598
00:13:34,640 --> 00:13:34,650
to know a fair amount about the sort of
 

599
00:13:34,650 --> 00:13:36,440
to know a fair amount about the sort of
design of typical databases because what

600
00:13:36,440 --> 00:13:36,450
design of typical databases because what
 

601
00:13:36,450 --> 00:13:40,220
design of typical databases because what
they taken is sort of the main machinery

602
00:13:40,220 --> 00:13:40,230
they taken is sort of the main machinery
 

603
00:13:40,230 --> 00:13:42,350
they taken is sort of the main machinery
of a database my sequel as it happens

604
00:13:42,350 --> 00:13:42,360
of a database my sequel as it happens
 

605
00:13:42,360 --> 00:13:44,930
of a database my sequel as it happens
and split it up in an interesting way so

606
00:13:44,930 --> 00:13:44,940
and split it up in an interesting way so
 

607
00:13:44,940 --> 00:13:46,640
and split it up in an interesting way so
we need to know sort of what it but it

608
00:13:46,640 --> 00:13:46,650
we need to know sort of what it but it
 

609
00:13:46,650 --> 00:13:48,380
we need to know sort of what it but it
is a database does so we can understand

610
00:13:48,380 --> 00:13:48,390
is a database does so we can understand
 

611
00:13:48,390 --> 00:13:50,870
is a database does so we can understand
how they split it up so this is really a

612
00:13:50,870 --> 00:13:50,880
how they split it up so this is really a
 

613
00:13:50,880 --> 00:13:58,130
how they split it up so this is really a
kind of database tutorial really

614
00:13:58,130 --> 00:13:58,140
kind of database tutorial really
 

615
00:13:58,140 --> 00:14:01,750
kind of database tutorial really
focusing on what it takes to implement

616
00:14:01,750 --> 00:14:01,760
focusing on what it takes to implement
 

617
00:14:01,760 --> 00:14:04,100
focusing on what it takes to implement
transactions crashed recoverable

618
00:14:04,100 --> 00:14:04,110
transactions crashed recoverable
 

619
00:14:04,110 --> 00:14:06,200
transactions crashed recoverable
transactions so what I really care about

620
00:14:06,200 --> 00:14:06,210
transactions so what I really care about
 

621
00:14:06,210 --> 00:14:14,420
transactions so what I really care about
is transactions and crash recovery and

622
00:14:14,420 --> 00:14:14,430
is transactions and crash recovery and
 

623
00:14:14,430 --> 00:14:17,060
is transactions and crash recovery and
there's a lot else going on in databases

624
00:14:17,060 --> 00:14:17,070
there's a lot else going on in databases
 

625
00:14:17,070 --> 00:14:18,950
there's a lot else going on in databases
but this is really the part that matters

626
00:14:18,950 --> 00:14:18,960
but this is really the part that matters
 

627
00:14:18,960 --> 00:14:22,310
but this is really the part that matters
for this paper so first what's a

628
00:14:22,310 --> 00:14:22,320
for this paper so first what's a
 

629
00:14:22,320 --> 00:14:24,260
for this paper so first what's a
transaction you know transaction is just

630
00:14:24,260 --> 00:14:24,270
transaction you know transaction is just
 

631
00:14:24,270 --> 00:14:26,990
transaction you know transaction is just
a way of wrapping multiple operations on

632
00:14:26,990 --> 00:14:27,000
a way of wrapping multiple operations on
 

633
00:14:27,000 --> 00:14:28,700
a way of wrapping multiple operations on
maybe different pieces of data and

634
00:14:28,700 --> 00:14:28,710
maybe different pieces of data and
 

635
00:14:28,710 --> 00:14:31,370
maybe different pieces of data and
declare in that that that's entire

636
00:14:31,370 --> 00:14:31,380
declare in that that that's entire
 

637
00:14:31,380 --> 00:14:33,410
declare in that that that's entire
sequence of operations should appear a

638
00:14:33,410 --> 00:14:33,420
sequence of operations should appear a
 

639
00:14:33,420 --> 00:14:35,960
sequence of operations should appear a
Tomic to anyone else who's reading or

640
00:14:35,960 --> 00:14:35,970
Tomic to anyone else who's reading or
 

641
00:14:35,970 --> 00:14:38,740
Tomic to anyone else who's reading or
writing the data so you might see

642
00:14:38,740 --> 00:14:38,750
writing the data so you might see
 

643
00:14:38,750 --> 00:14:40,790
writing the data so you might see
transposing we're running a bank and we

644
00:14:40,790 --> 00:14:40,800
transposing we're running a bank and we
 

645
00:14:40,800 --> 00:14:43,100
transposing we're running a bank and we
want to do transfers between different

646
00:14:43,100 --> 00:14:43,110
want to do transfers between different
 

647
00:14:43,110 --> 00:14:46,400
want to do transfers between different
accounts maybe you would say well we

648
00:14:46,400 --> 00:14:46,410
accounts maybe you would say well we
 

649
00:14:46,410 --> 00:14:48,590
accounts maybe you would say well we
would see code or you know see a

650
00:14:48,590 --> 00:14:48,600
would see code or you know see a
 

651
00:14:48,600 --> 00:14:50,210
would see code or you know see a
transaction looks like this is you have

652
00:14:50,210 --> 00:14:50,220
transaction looks like this is you have
 

653
00:14:50,220 --> 00:14:51,950
transaction looks like this is you have
to clear the beginning of the sequence

654
00:14:51,950 --> 00:14:51,960
to clear the beginning of the sequence
 

655
00:14:51,960 --> 00:14:53,870
to clear the beginning of the sequence
of instructions that you want to be

656
00:14:53,870 --> 00:14:53,880
of instructions that you want to be
 

657
00:14:53,880 --> 00:14:55,880
of instructions that you want to be
atomic in the in transaction maybe we're

658
00:14:55,880 --> 00:14:55,890
atomic in the in transaction maybe we're
 

659
00:14:55,890 --> 00:14:59,240
atomic in the in transaction maybe we're
going to transfer money from account Y

660
00:14:59,240 --> 00:14:59,250
going to transfer money from account Y
 

661
00:14:59,250 --> 00:15:02,570
going to transfer money from account Y
to account X so we might see where I'll

662
00:15:02,570 --> 00:15:02,580
to account X so we might see where I'll
 

663
00:15:02,580 --> 00:15:05,180
to account X so we might see where I'll
just pretend X is a bank balance Jordan

664
00:15:05,180 --> 00:15:05,190
just pretend X is a bank balance Jordan
 

665
00:15:05,190 --> 00:15:06,410
just pretend X is a bank balance Jordan
the database you might see the

666
00:15:06,410 --> 00:15:06,420
the database you might see the
 

667
00:15:06,420 --> 00:15:08,600
the database you might see the
transaction looks like oh can I add $10

668
00:15:08,600 --> 00:15:08,610
transaction looks like oh can I add $10
 

669
00:15:08,610 --> 00:15:11,579
transaction looks like oh can I add $10
to X's account and

670
00:15:11,579 --> 00:15:11,589
to X's account and
 

671
00:15:11,589 --> 00:15:14,019
to X's account and
deduct the same ten dollars from my

672
00:15:14,019 --> 00:15:14,029
deduct the same ten dollars from my
 

673
00:15:14,029 --> 00:15:16,420
deduct the same ten dollars from my
account and that's the end of the

674
00:15:16,420 --> 00:15:16,430
account and that's the end of the
 

675
00:15:16,430 --> 00:15:17,199
account and that's the end of the
transaction

676
00:15:17,199 --> 00:15:17,209
transaction
 

677
00:15:17,209 --> 00:15:19,930
transaction
I want the database to just do them both

678
00:15:19,930 --> 00:15:19,940
I want the database to just do them both
 

679
00:15:19,940 --> 00:15:21,939
I want the database to just do them both
without allowing anybody else to sneak

680
00:15:21,939 --> 00:15:21,949
without allowing anybody else to sneak
 

681
00:15:21,949 --> 00:15:24,009
without allowing anybody else to sneak
in and see the state between these two

682
00:15:24,009 --> 00:15:24,019
in and see the state between these two
 

683
00:15:24,019 --> 00:15:27,220
in and see the state between these two
statements and also with respect to

684
00:15:27,220 --> 00:15:27,230
statements and also with respect to
 

685
00:15:27,230 --> 00:15:29,560
statements and also with respect to
crashes if there's a crash at this point

686
00:15:29,560 --> 00:15:29,570
crashes if there's a crash at this point
 

687
00:15:29,570 --> 00:15:31,060
crashes if there's a crash at this point
somewhere in here we're going to make

688
00:15:31,060 --> 00:15:31,070
somewhere in here we're going to make
 

689
00:15:31,070 --> 00:15:32,710
somewhere in here we're going to make
sure that after the crash and recovery

690
00:15:32,710 --> 00:15:32,720
sure that after the crash and recovery
 

691
00:15:32,720 --> 00:15:34,840
sure that after the crash and recovery
that either the entire transactions

692
00:15:34,840 --> 00:15:34,850
that either the entire transactions
 

693
00:15:34,850 --> 00:15:36,460
that either the entire transactions
worth the modifications are visible or

694
00:15:36,460 --> 00:15:36,470
worth the modifications are visible or
 

695
00:15:36,470 --> 00:15:40,090
worth the modifications are visible or
none of them are so that's the effect we

696
00:15:40,090 --> 00:15:40,100
none of them are so that's the effect we
 

697
00:15:40,100 --> 00:15:41,379
none of them are so that's the effect we
want from transactions there's

698
00:15:41,379 --> 00:15:41,389
want from transactions there's
 

699
00:15:41,389 --> 00:15:44,350
want from transactions there's
additionally people expect database

700
00:15:44,350 --> 00:15:44,360
additionally people expect database
 

701
00:15:44,360 --> 00:15:46,629
additionally people expect database
users expect that the database will tell

702
00:15:46,629 --> 00:15:46,639
users expect that the database will tell
 

703
00:15:46,639 --> 00:15:48,819
users expect that the database will tell
them tell the client that submitted the

704
00:15:48,819 --> 00:15:48,829
them tell the client that submitted the
 

705
00:15:48,829 --> 00:15:51,189
them tell the client that submitted the
transaction whether the transaction

706
00:15:51,189 --> 00:15:51,199
transaction whether the transaction
 

707
00:15:51,199 --> 00:15:52,870
transaction whether the transaction
really finished and committed or not and

708
00:15:52,870 --> 00:15:52,880
really finished and committed or not and
 

709
00:15:52,880 --> 00:15:55,319
really finished and committed or not and
if a transaction is committed we expect

710
00:15:55,319 --> 00:15:55,329
if a transaction is committed we expect
 

711
00:15:55,329 --> 00:15:58,030
if a transaction is committed we expect
clients expect that the transaction will

712
00:15:58,030 --> 00:15:58,040
clients expect that the transaction will
 

713
00:15:58,040 --> 00:15:59,980
clients expect that the transaction will
be permanent will be durable still there

714
00:15:59,980 --> 00:15:59,990
be permanent will be durable still there
 

715
00:15:59,990 --> 00:16:01,990
be permanent will be durable still there
even if the database should crash and

716
00:16:01,990 --> 00:16:02,000
even if the database should crash and
 

717
00:16:02,000 --> 00:16:05,710
even if the database should crash and
reboot um one thing it's a bit important

718
00:16:05,710 --> 00:16:05,720
reboot um one thing it's a bit important
 

719
00:16:05,720 --> 00:16:08,110
reboot um one thing it's a bit important
is that the usual way these are

720
00:16:08,110 --> 00:16:08,120
is that the usual way these are
 

721
00:16:08,120 --> 00:16:10,000
is that the usual way these are
implemented is that the transaction

722
00:16:10,000 --> 00:16:10,010
implemented is that the transaction
 

723
00:16:10,010 --> 00:16:12,790
implemented is that the transaction
locks each piece of data before it uses

724
00:16:12,790 --> 00:16:12,800
locks each piece of data before it uses
 

725
00:16:12,800 --> 00:16:15,970
locks each piece of data before it uses
it so you can view the they're being

726
00:16:15,970 --> 00:16:15,980
it so you can view the they're being
 

727
00:16:15,980 --> 00:16:20,829
it so you can view the they're being
locks x and y for the duration of the

728
00:16:20,829 --> 00:16:20,839
locks x and y for the duration of the
 

729
00:16:20,839 --> 00:16:22,480
locks x and y for the duration of the
transaction and these are only released

730
00:16:22,480 --> 00:16:22,490
transaction and these are only released
 

731
00:16:22,490 --> 00:16:24,550
transaction and these are only released
after the transaction finally commits

732
00:16:24,550 --> 00:16:24,560
after the transaction finally commits
 

733
00:16:24,560 --> 00:16:29,199
after the transaction finally commits
that is known to be permanent this is

734
00:16:29,199 --> 00:16:29,209
that is known to be permanent this is
 

735
00:16:29,209 --> 00:16:31,840
that is known to be permanent this is
important if you for some of the things

736
00:16:31,840 --> 00:16:31,850
important if you for some of the things
 

737
00:16:31,850 --> 00:16:33,250
important if you for some of the things
that you have to if you some of the

738
00:16:33,250 --> 00:16:33,260
that you have to if you some of the
 

739
00:16:33,260 --> 00:16:35,050
that you have to if you some of the
details in the paper really only makes

740
00:16:35,050 --> 00:16:35,060
details in the paper really only makes
 

741
00:16:35,060 --> 00:16:36,430
details in the paper really only makes
sense if you realize that the database

742
00:16:36,430 --> 00:16:36,440
sense if you realize that the database
 

743
00:16:36,440 --> 00:16:38,710
sense if you realize that the database
is actually locking out other access to

744
00:16:38,710 --> 00:16:38,720
is actually locking out other access to
 

745
00:16:38,720 --> 00:16:40,210
is actually locking out other access to
the data during the life of a

746
00:16:40,210 --> 00:16:40,220
the data during the life of a
 

747
00:16:40,220 --> 00:16:43,329
the data during the life of a
transaction so how this actually

748
00:16:43,329 --> 00:16:43,339
transaction so how this actually
 

749
00:16:43,339 --> 00:16:48,689
transaction so how this actually
implemented it turns out the database

750
00:16:48,689 --> 00:16:48,699

 

751
00:16:48,699 --> 00:16:53,050

consists of at least for the simple

752
00:16:53,050 --> 00:16:53,060
consists of at least for the simple
 

753
00:16:53,060 --> 00:16:55,240
consists of at least for the simple
database model where the databases are

754
00:16:55,240 --> 00:16:55,250
database model where the databases are
 

755
00:16:55,250 --> 00:16:56,740
database model where the databases are
typically written to run on a single

756
00:16:56,740 --> 00:16:56,750
typically written to run on a single
 

757
00:16:56,750 --> 00:16:58,180
typically written to run on a single
server with you know some storage

758
00:16:58,180 --> 00:16:58,190
server with you know some storage
 

759
00:16:58,190 --> 00:17:00,250
server with you know some storage
directly attached and a game that the

760
00:17:00,250 --> 00:17:00,260
directly attached and a game that the
 

761
00:17:00,260 --> 00:17:01,540
directly attached and a game that the
Aurora paper is playing is sort of

762
00:17:01,540 --> 00:17:01,550
Aurora paper is playing is sort of
 

763
00:17:01,550 --> 00:17:05,319
Aurora paper is playing is sort of
moving that software only modestly

764
00:17:05,319 --> 00:17:05,329
moving that software only modestly
 

765
00:17:05,329 --> 00:17:07,329
moving that software only modestly
revised in order to run on a much more

766
00:17:07,329 --> 00:17:07,339
revised in order to run on a much more
 

767
00:17:07,339 --> 00:17:09,549
revised in order to run on a much more
complex network system but the starting

768
00:17:09,549 --> 00:17:09,559
complex network system but the starting
 

769
00:17:09,559 --> 00:17:11,380
complex network system but the starting
point is we just assume we have a

770
00:17:11,380 --> 00:17:11,390
point is we just assume we have a
 

771
00:17:11,390 --> 00:17:16,510
point is we just assume we have a
database with a attached to a disk the

772
00:17:16,510 --> 00:17:16,520
database with a attached to a disk the
 

773
00:17:16,520 --> 00:17:18,809
database with a attached to a disk the
on disk structure that stores these

774
00:17:18,809 --> 00:17:18,819
on disk structure that stores these
 

775
00:17:18,819 --> 00:17:21,549
on disk structure that stores these
records is some kind of indexing

776
00:17:21,549 --> 00:17:21,559
records is some kind of indexing
 

777
00:17:21,559 --> 00:17:24,180
records is some kind of indexing
structure like a b-tree maybe so

778
00:17:24,180 --> 00:17:24,190
structure like a b-tree maybe so
 

779
00:17:24,190 --> 00:17:25,950
structure like a b-tree maybe so
there's a sort of pages with the paper

780
00:17:25,950 --> 00:17:25,960
there's a sort of pages with the paper
 

781
00:17:25,960 --> 00:17:27,810
there's a sort of pages with the paper
calls data pages that holds us you know

782
00:17:27,810 --> 00:17:27,820
calls data pages that holds us you know
 

783
00:17:27,820 --> 00:17:32,250
calls data pages that holds us you know
real data of the of the database you

784
00:17:32,250 --> 00:17:32,260
real data of the of the database you
 

785
00:17:32,260 --> 00:17:34,620
real data of the of the database you
know maybe this is excess balances and

786
00:17:34,620 --> 00:17:34,630
know maybe this is excess balances and
 

787
00:17:34,630 --> 00:17:36,570
know maybe this is excess balances and
this is wise balance these data pages

788
00:17:36,570 --> 00:17:36,580
this is wise balance these data pages
 

789
00:17:36,580 --> 00:17:40,250
this is wise balance these data pages
typically hold lots and lots of records

790
00:17:40,250 --> 00:17:40,260
typically hold lots and lots of records
 

791
00:17:40,260 --> 00:17:42,330
typically hold lots and lots of records
whereas X and y are typically just a

792
00:17:42,330 --> 00:17:42,340
whereas X and y are typically just a
 

793
00:17:42,340 --> 00:17:44,310
whereas X and y are typically just a
couple bites on some page in the

794
00:17:44,310 --> 00:17:44,320
couple bites on some page in the
 

795
00:17:44,320 --> 00:17:46,730
couple bites on some page in the
database so on the disk there's the

796
00:17:46,730 --> 00:17:46,740
database so on the disk there's the
 

797
00:17:46,740 --> 00:17:49,980
database so on the disk there's the
actual data plus on the disk there's

798
00:17:49,980 --> 00:17:49,990
actual data plus on the disk there's
 

799
00:17:49,990 --> 00:17:55,650
actual data plus on the disk there's
also a right ahead log or wal and the

800
00:17:55,650 --> 00:17:55,660
also a right ahead log or wal and the
 

801
00:17:55,660 --> 00:17:57,390
also a right ahead log or wal and the
right ahead logs are a critical part of

802
00:17:57,390 --> 00:17:57,400
right ahead logs are a critical part of
 

803
00:17:57,400 --> 00:18:00,000
right ahead logs are a critical part of
why the system is gonna be fault

804
00:18:00,000 --> 00:18:00,010
why the system is gonna be fault
 

805
00:18:00,010 --> 00:18:03,000
why the system is gonna be fault
tolerant inside the database server

806
00:18:03,000 --> 00:18:03,010
tolerant inside the database server
 

807
00:18:03,010 --> 00:18:05,520
tolerant inside the database server
there's the database software the

808
00:18:05,520 --> 00:18:05,530
there's the database software the
 

809
00:18:05,530 --> 00:18:08,220
there's the database software the
database typically has a cache of pages

810
00:18:08,220 --> 00:18:08,230
database typically has a cache of pages
 

811
00:18:08,230 --> 00:18:11,040
database typically has a cache of pages
that it's read from the disk that it's

812
00:18:11,040 --> 00:18:11,050
that it's read from the disk that it's
 

813
00:18:11,050 --> 00:18:13,200
that it's read from the disk that it's
recently used when you execute a

814
00:18:13,200 --> 00:18:13,210
recently used when you execute a
 

815
00:18:13,210 --> 00:18:15,240
recently used when you execute a
transaction what that actually executes

816
00:18:15,240 --> 00:18:15,250
transaction what that actually executes
 

817
00:18:15,250 --> 00:18:16,980
transaction what that actually executes
these statements what that really means

818
00:18:16,980 --> 00:18:16,990
these statements what that really means
 

819
00:18:16,990 --> 00:18:19,320
these statements what that really means
is you know what x equals x plus 10

820
00:18:19,320 --> 00:18:19,330
is you know what x equals x plus 10
 

821
00:18:19,330 --> 00:18:21,870
is you know what x equals x plus 10
turns into the runtime is that the

822
00:18:21,870 --> 00:18:21,880
turns into the runtime is that the
 

823
00:18:21,880 --> 00:18:23,790
turns into the runtime is that the
database reads the current page holding

824
00:18:23,790 --> 00:18:23,800
database reads the current page holding
 

825
00:18:23,800 --> 00:18:27,510
database reads the current page holding
X from the disk and adds 10 to it but so

826
00:18:27,510 --> 00:18:27,520
X from the disk and adds 10 to it but so
 

827
00:18:27,520 --> 00:18:29,910
X from the disk and adds 10 to it but so
far until the transaction commits it

828
00:18:29,910 --> 00:18:29,920
far until the transaction commits it
 

829
00:18:29,920 --> 00:18:31,470
far until the transaction commits it
only makes the modifications in the

830
00:18:31,470 --> 00:18:31,480
only makes the modifications in the
 

831
00:18:31,480 --> 00:18:34,020
only makes the modifications in the
local cache not on the disk because we

832
00:18:34,020 --> 00:18:34,030
local cache not on the disk because we
 

833
00:18:34,030 --> 00:18:35,070
local cache not on the disk because we
don't want to expose we don't want to

834
00:18:35,070 --> 00:18:35,080
don't want to expose we don't want to
 

835
00:18:35,080 --> 00:18:37,020
don't want to expose we don't want to
write on the disk yet and the part

836
00:18:37,020 --> 00:18:37,030
write on the disk yet and the part
 

837
00:18:37,030 --> 00:18:42,980
write on the disk yet and the part
possibly expose a partial transaction so

838
00:18:42,980 --> 00:18:42,990

 

839
00:18:42,990 --> 00:18:46,170

while then when the database but before

840
00:18:46,170 --> 00:18:46,180
while then when the database but before
 

841
00:18:46,180 --> 00:18:47,970
while then when the database but before
because the database wants to sort of

842
00:18:47,970 --> 00:18:47,980
because the database wants to sort of
 

843
00:18:47,980 --> 00:18:50,580
because the database wants to sort of
pre to clear the complete transaction so

844
00:18:50,580 --> 00:18:50,590
pre to clear the complete transaction so
 

845
00:18:50,590 --> 00:18:53,130
pre to clear the complete transaction so
it's available to the software after a

846
00:18:53,130 --> 00:18:53,140
it's available to the software after a
 

847
00:18:53,140 --> 00:18:56,280
it's available to the software after a
crash and during recovery before the

848
00:18:56,280 --> 00:18:56,290
crash and during recovery before the
 

849
00:18:56,290 --> 00:18:57,900
crash and during recovery before the
database is allowed to modify the real

850
00:18:57,900 --> 00:18:57,910
database is allowed to modify the real
 

851
00:18:57,910 --> 00:18:59,940
database is allowed to modify the real
data pages on disk its first required to

852
00:18:59,940 --> 00:18:59,950
data pages on disk its first required to
 

853
00:18:59,950 --> 00:19:03,950
data pages on disk its first required to
add log entries that describe the

854
00:19:03,950 --> 00:19:03,960
add log entries that describe the
 

855
00:19:03,960 --> 00:19:06,390
add log entries that describe the
transaction so it has to in order before

856
00:19:06,390 --> 00:19:06,400
transaction so it has to in order before
 

857
00:19:06,400 --> 00:19:07,860
transaction so it has to in order before
it can commit the transaction it needs

858
00:19:07,860 --> 00:19:07,870
it can commit the transaction it needs
 

859
00:19:07,870 --> 00:19:09,300
it can commit the transaction it needs
to put a complete set of log ahead

860
00:19:09,300 --> 00:19:09,310
to put a complete set of log ahead
 

861
00:19:09,310 --> 00:19:11,700
to put a complete set of log ahead
entries in the right ahead log on disk

862
00:19:11,700 --> 00:19:11,710
entries in the right ahead log on disk
 

863
00:19:11,710 --> 00:19:13,710
entries in the right ahead log on disk
I'm describing all the data bases

864
00:19:13,710 --> 00:19:13,720
I'm describing all the data bases
 

865
00:19:13,720 --> 00:19:15,930
I'm describing all the data bases
modification so let's suppose here that

866
00:19:15,930 --> 00:19:15,940
modification so let's suppose here that
 

867
00:19:15,940 --> 00:19:20,730
modification so let's suppose here that
x and y start out as say 500 and y

868
00:19:20,730 --> 00:19:20,740
x and y start out as say 500 and y
 

869
00:19:20,740 --> 00:19:24,030
x and y start out as say 500 and y
starts out as 750 and we want to execute

870
00:19:24,030 --> 00:19:24,040
starts out as 750 and we want to execute
 

871
00:19:24,040 --> 00:19:26,820
starts out as 750 and we want to execute
this transaction before committing and

872
00:19:26,820 --> 00:19:26,830
this transaction before committing and
 

873
00:19:26,830 --> 00:19:29,160
this transaction before committing and
before writing the pages the database is

874
00:19:29,160 --> 00:19:29,170
before writing the pages the database is
 

875
00:19:29,170 --> 00:19:31,740
before writing the pages the database is
going to add at least typically 3 log

876
00:19:31,740 --> 00:19:31,750
going to add at least typically 3 log
 

877
00:19:31,750 --> 00:19:34,470
going to add at least typically 3 log
records 1 this that says well as part of

878
00:19:34,470 --> 00:19:34,480
records 1 this that says well as part of
 

879
00:19:34,480 --> 00:19:37,370
records 1 this that says well as part of
this transaction I'm modifying X

880
00:19:37,370 --> 00:19:37,380
this transaction I'm modifying X
 

881
00:19:37,380 --> 00:19:43,520
this transaction I'm modifying X
and it's old value is 500 make more room

882
00:19:43,520 --> 00:19:43,530
and it's old value is 500 make more room
 

883
00:19:43,530 --> 00:19:50,240
and it's old value is 500 make more room
here this is the on dis log so each log

884
00:19:50,240 --> 00:19:50,250
here this is the on dis log so each log
 

885
00:19:50,250 --> 00:19:52,340
here this is the on dis log so each log
entry might say here's the value I'm

886
00:19:52,340 --> 00:19:52,350
entry might say here's the value I'm
 

887
00:19:52,350 --> 00:19:56,720
entry might say here's the value I'm
modifying here's the old value and we're

888
00:19:56,720 --> 00:19:56,730
modifying here's the old value and we're
 

889
00:19:56,730 --> 00:19:58,670
modifying here's the old value and we're
adding and here's the new value say five

890
00:19:58,670 --> 00:19:58,680
adding and here's the new value say five
 

891
00:19:58,680 --> 00:20:02,060
adding and here's the new value say five
ten so that's one log record another 4y

892
00:20:02,060 --> 00:20:02,070
ten so that's one log record another 4y
 

893
00:20:02,070 --> 00:20:04,790
ten so that's one log record another 4y
may be old value is 750 we're

894
00:20:04,790 --> 00:20:04,800
may be old value is 750 we're
 

895
00:20:04,800 --> 00:20:07,400
may be old value is 750 we're
subtracting 10 so the new value is 740

896
00:20:07,400 --> 00:20:07,410
subtracting 10 so the new value is 740
 

897
00:20:07,410 --> 00:20:11,300
subtracting 10 so the new value is 740
and then when the database if it

898
00:20:11,300 --> 00:20:11,310
and then when the database if it
 

899
00:20:11,310 --> 00:20:12,800
and then when the database if it
actually manages to get to the end of

900
00:20:12,800 --> 00:20:12,810
actually manages to get to the end of
 

901
00:20:12,810 --> 00:20:14,390
actually manages to get to the end of
the transaction before crashing its

902
00:20:14,390 --> 00:20:14,400
the transaction before crashing its
 

903
00:20:14,400 --> 00:20:18,440
the transaction before crashing its
gonna write a commit record saying and

904
00:20:18,440 --> 00:20:18,450
gonna write a commit record saying and
 

905
00:20:18,450 --> 00:20:20,300
gonna write a commit record saying and
typically these are all tagged with some

906
00:20:20,300 --> 00:20:20,310
typically these are all tagged with some
 

907
00:20:20,310 --> 00:20:23,210
typically these are all tagged with some
sort with a transaction ID so that the

908
00:20:23,210 --> 00:20:23,220
sort with a transaction ID so that the
 

909
00:20:23,220 --> 00:20:24,920
sort with a transaction ID so that the
recovery software eventually will know

910
00:20:24,920 --> 00:20:24,930
recovery software eventually will know
 

911
00:20:24,930 --> 00:20:27,650
recovery software eventually will know
how this commit record refers to these

912
00:20:27,650 --> 00:20:27,660
how this commit record refers to these
 

913
00:20:27,660 --> 00:20:36,580
how this commit record refers to these
log records yes

914
00:20:36,580 --> 00:20:36,590

 

915
00:20:36,590 --> 00:20:38,960

in a simple database will be enough to

916
00:20:38,960 --> 00:20:38,970
in a simple database will be enough to
 

917
00:20:38,970 --> 00:20:41,600
in a simple database will be enough to
just store the new values and say well

918
00:20:41,600 --> 00:20:41,610
just store the new values and say well
 

919
00:20:41,610 --> 00:20:43,970
just store the new values and say well
it is a crash we're gonna just reapply

920
00:20:43,970 --> 00:20:43,980
it is a crash we're gonna just reapply
 

921
00:20:43,980 --> 00:20:47,230
it is a crash we're gonna just reapply
all the new values the reason most

922
00:20:47,230 --> 00:20:47,240
all the new values the reason most
 

923
00:20:47,240 --> 00:20:50,840
all the new values the reason most
serious databases store the old as well

924
00:20:50,840 --> 00:20:50,850
serious databases store the old as well
 

925
00:20:50,850 --> 00:20:52,370
serious databases store the old as well
as a new value is to give them freedom

926
00:20:52,370 --> 00:20:52,380
as a new value is to give them freedom
 

927
00:20:52,380 --> 00:20:56,420
as a new value is to give them freedom
to even for a long-running traction for

928
00:20:56,420 --> 00:20:56,430
to even for a long-running traction for
 

929
00:20:56,430 --> 00:20:57,830
to even for a long-running traction for
a long-running transaction even before

930
00:20:57,830 --> 00:20:57,840
a long-running transaction even before
 

931
00:20:57,840 --> 00:20:59,600
a long-running transaction even before
the transaction is finished it gives the

932
00:20:59,600 --> 00:20:59,610
the transaction is finished it gives the
 

933
00:20:59,610 --> 00:21:00,890
the transaction is finished it gives the
database the freedom to write the

934
00:21:00,890 --> 00:21:00,900
database the freedom to write the
 

935
00:21:00,900 --> 00:21:04,480
database the freedom to write the
updated page to disk with the new value

936
00:21:04,480 --> 00:21:04,490
updated page to disk with the new value
 

937
00:21:04,490 --> 00:21:07,340
updated page to disk with the new value
740 let's say from the from an

938
00:21:07,340 --> 00:21:07,350
740 let's say from the from an
 

939
00:21:07,350 --> 00:21:10,580
740 let's say from the from an
uncompleted transaction as long as it's

940
00:21:10,580 --> 00:21:10,590
uncompleted transaction as long as it's
 

941
00:21:10,590 --> 00:21:11,960
uncompleted transaction as long as it's
written the log record to disk and then

942
00:21:11,960 --> 00:21:11,970
written the log record to disk and then
 

943
00:21:11,970 --> 00:21:13,910
written the log record to disk and then
if there's a crash before the commit the

944
00:21:13,910 --> 00:21:13,920
if there's a crash before the commit the
 

945
00:21:13,920 --> 00:21:15,410
if there's a crash before the commit the
recovery software always say aha well

946
00:21:15,410 --> 00:21:15,420
recovery software always say aha well
 

947
00:21:15,420 --> 00:21:17,180
recovery software always say aha well
this transaction never finished

948
00:21:17,180 --> 00:21:17,190
this transaction never finished
 

949
00:21:17,190 --> 00:21:19,040
this transaction never finished
therefore we have to undo all of its

950
00:21:19,040 --> 00:21:19,050
therefore we have to undo all of its
 

951
00:21:19,050 --> 00:21:21,290
therefore we have to undo all of its
changes and these values these old

952
00:21:21,290 --> 00:21:21,300
changes and these values these old
 

953
00:21:21,300 --> 00:21:22,670
changes and these values these old
values are the values you need in order

954
00:21:22,670 --> 00:21:22,680
values are the values you need in order
 

955
00:21:22,680 --> 00:21:24,320
values are the values you need in order
to undo a transaction that's been

956
00:21:24,320 --> 00:21:24,330
to undo a transaction that's been
 

957
00:21:24,330 --> 00:21:26,600
to undo a transaction that's been
partially written to the data pages so

958
00:21:26,600 --> 00:21:26,610
partially written to the data pages so
 

959
00:21:26,610 --> 00:21:32,720
partially written to the data pages so
the aurora indeed uses undo redo logging

960
00:21:32,720 --> 00:21:32,730
the aurora indeed uses undo redo logging
 

961
00:21:32,730 --> 00:21:35,860
the aurora indeed uses undo redo logging
to be able to undo partially applied

962
00:21:35,860 --> 00:21:35,870
to be able to undo partially applied
 

963
00:21:35,870 --> 00:21:40,190
to be able to undo partially applied
transactions okay so if the database

964
00:21:40,190 --> 00:21:40,200
transactions okay so if the database
 

965
00:21:40,200 --> 00:21:42,230
transactions okay so if the database
manages to get as far as getting the

966
00:21:42,230 --> 00:21:42,240
manages to get as far as getting the
 

967
00:21:42,240 --> 00:21:44,180
manages to get as far as getting the
transactions log records on the disk and

968
00:21:44,180 --> 00:21:44,190
transactions log records on the disk and
 

969
00:21:44,190 --> 00:21:46,420
transactions log records on the disk and
the commit record marking is finished

970
00:21:46,420 --> 00:21:46,430
the commit record marking is finished
 

971
00:21:46,430 --> 00:21:48,980
the commit record marking is finished
then it is entitled to apply to the

972
00:21:48,980 --> 00:21:48,990
then it is entitled to apply to the
 

973
00:21:48,990 --> 00:21:50,150
then it is entitled to apply to the
client we said the transactions

974
00:21:50,150 --> 00:21:50,160
client we said the transactions
 

975
00:21:50,160 --> 00:21:51,890
client we said the transactions
committed the database can reply to the

976
00:21:51,890 --> 00:21:51,900
committed the database can reply to the
 

977
00:21:51,900 --> 00:21:53,840
committed the database can reply to the
client and the client can be assured

978
00:21:53,840 --> 00:21:53,850
client and the client can be assured
 

979
00:21:53,850 --> 00:21:56,390
client and the client can be assured
that its transaction will be sort of

980
00:21:56,390 --> 00:21:56,400
that its transaction will be sort of
 

981
00:21:56,400 --> 00:21:59,960
that its transaction will be sort of
visible forever and now one of two

982
00:21:59,960 --> 00:21:59,970
visible forever and now one of two
 

983
00:21:59,970 --> 00:22:01,310
visible forever and now one of two
things happens the database server

984
00:22:01,310 --> 00:22:01,320
things happens the database server
 

985
00:22:01,320 --> 00:22:04,490
things happens the database server
doesn't crash then eventually so it's

986
00:22:04,490 --> 00:22:04,500
doesn't crash then eventually so it's
 

987
00:22:04,500 --> 00:22:08,870
doesn't crash then eventually so it's
modified in its cache these these X&Y

988
00:22:08,870 --> 00:22:08,880
modified in its cache these these X&Y
 

989
00:22:08,880 --> 00:22:13,010
modified in its cache these these X&Y
records to be 510 and 740 eventually the

990
00:22:13,010 --> 00:22:13,020
records to be 510 and 740 eventually the
 

991
00:22:13,020 --> 00:22:15,920
records to be 510 and 740 eventually the
database will write it's cached updated

992
00:22:15,920 --> 00:22:15,930
database will write it's cached updated
 

993
00:22:15,930 --> 00:22:18,170
database will write it's cached updated
blocks to their real places on the disk

994
00:22:18,170 --> 00:22:18,180
blocks to their real places on the disk
 

995
00:22:18,180 --> 00:22:20,630
blocks to their real places on the disk
over writing you know these be tree

996
00:22:20,630 --> 00:22:20,640
over writing you know these be tree
 

997
00:22:20,640 --> 00:22:22,370
over writing you know these be tree
nodes or something and then the database

998
00:22:22,370 --> 00:22:22,380
nodes or something and then the database
 

999
00:22:22,380 --> 00:22:26,540
nodes or something and then the database
can reuse this part of the log so

1000
00:22:26,540 --> 00:22:26,550
can reuse this part of the log so
 

1001
00:22:26,550 --> 00:22:27,980
can reuse this part of the log so
databases tend to be lazy about that

1002
00:22:27,980 --> 00:22:27,990
databases tend to be lazy about that
 

1003
00:22:27,990 --> 00:22:30,230
databases tend to be lazy about that
because they like to accumulate you know

1004
00:22:30,230 --> 00:22:30,240
because they like to accumulate you know
 

1005
00:22:30,240 --> 00:22:32,420
because they like to accumulate you know
maybe there'll be many updates to these

1006
00:22:32,420 --> 00:22:32,430
maybe there'll be many updates to these
 

1007
00:22:32,430 --> 00:22:34,810
maybe there'll be many updates to these
pages in the cache it's nice to

1008
00:22:34,810 --> 00:22:34,820
pages in the cache it's nice to
 

1009
00:22:34,820 --> 00:22:37,040
pages in the cache it's nice to
accumulate a lot of updates before being

1010
00:22:37,040 --> 00:22:37,050
accumulate a lot of updates before being
 

1011
00:22:37,050 --> 00:22:39,890
accumulate a lot of updates before being
forced to write the disk if the database

1012
00:22:39,890 --> 00:22:39,900
forced to write the disk if the database
 

1013
00:22:39,900 --> 00:22:41,510
forced to write the disk if the database
server crashes before writing the day

1014
00:22:41,510 --> 00:22:41,520
server crashes before writing the day
 

1015
00:22:41,520 --> 00:22:43,760
server crashes before writing the day
writing these pages to the disk so they

1016
00:22:43,760 --> 00:22:43,770
writing these pages to the disk so they
 

1017
00:22:43,770 --> 00:22:47,150
writing these pages to the disk so they
still have their old values then it's

1018
00:22:47,150 --> 00:22:47,160
still have their old values then it's
 

1019
00:22:47,160 --> 00:22:49,040
still have their old values then it's
guaranteed that the recovery software

1020
00:22:49,040 --> 00:22:49,050
guaranteed that the recovery software
 

1021
00:22:49,050 --> 00:22:49,870
guaranteed that the recovery software
when you restart that

1022
00:22:49,870 --> 00:22:49,880
when you restart that
 

1023
00:22:49,880 --> 00:22:53,590
when you restart that
debase scan the log see these records

1024
00:22:53,590 --> 00:22:53,600
debase scan the log see these records
 

1025
00:22:53,600 --> 00:22:54,940
debase scan the log see these records
for the transaction see that that

1026
00:22:54,940 --> 00:22:54,950
for the transaction see that that
 

1027
00:22:54,950 --> 00:22:58,540
for the transaction see that that
transaction was committed and apply the

1028
00:22:58,540 --> 00:22:58,550
transaction was committed and apply the
 

1029
00:22:58,550 --> 00:23:03,960
transaction was committed and apply the
new values to the to the stored data and

1030
00:23:03,960 --> 00:23:03,970
new values to the to the stored data and
 

1031
00:23:03,970 --> 00:23:07,060
new values to the to the stored data and
that's called a redo it basically does

1032
00:23:07,060 --> 00:23:07,070
that's called a redo it basically does
 

1033
00:23:07,070 --> 00:23:11,860
that's called a redo it basically does
all the rights in the transaction so

1034
00:23:11,860 --> 00:23:11,870
all the rights in the transaction so
 

1035
00:23:11,870 --> 00:23:15,250
all the rights in the transaction so
that's how transactional databases work

1036
00:23:15,250 --> 00:23:15,260
that's how transactional databases work
 

1037
00:23:15,260 --> 00:23:18,430
that's how transactional databases work
in a nutshell and so this is a sort of

1038
00:23:18,430 --> 00:23:18,440
in a nutshell and so this is a sort of
 

1039
00:23:18,440 --> 00:23:22,140
in a nutshell and so this is a sort of
very extremely abbreviated version of

1040
00:23:22,140 --> 00:23:22,150
very extremely abbreviated version of
 

1041
00:23:22,150 --> 00:23:25,330
very extremely abbreviated version of
how for example the my sequel database

1042
00:23:25,330 --> 00:23:25,340
how for example the my sequel database
 

1043
00:23:25,340 --> 00:23:28,810
how for example the my sequel database
works that an Aurora is based on this

1044
00:23:28,810 --> 00:23:28,820
works that an Aurora is based on this
 

1045
00:23:28,820 --> 00:23:30,160
works that an Aurora is based on this
open source software thing called

1046
00:23:30,160 --> 00:23:30,170
open source software thing called
 

1047
00:23:30,170 --> 00:23:32,530
open source software thing called
database called my sequel which does

1048
00:23:32,530 --> 00:23:32,540
database called my sequel which does
 

1049
00:23:32,540 --> 00:23:34,600
database called my sequel which does
crash recovery transaction and crash

1050
00:23:34,600 --> 00:23:34,610
crash recovery transaction and crash
 

1051
00:23:34,610 --> 00:23:40,360
crash recovery transaction and crash
recovery in much this way ok so the next

1052
00:23:40,360 --> 00:23:40,370
recovery in much this way ok so the next
 

1053
00:23:40,370 --> 00:23:44,680
recovery in much this way ok so the next
step in Amazon's development a better

1054
00:23:44,680 --> 00:23:44,690
step in Amazon's development a better
 

1055
00:23:44,690 --> 00:23:46,720
step in Amazon's development a better
and better database infrastructure for

1056
00:23:46,720 --> 00:23:46,730
and better database infrastructure for
 

1057
00:23:46,730 --> 00:23:50,250
and better database infrastructure for
its cloud customers is something called

1058
00:23:50,250 --> 00:23:50,260
its cloud customers is something called
 

1059
00:23:50,260 --> 00:23:53,860
its cloud customers is something called
RDS and I'm only talking about RDS

1060
00:23:53,860 --> 00:23:53,870
RDS and I'm only talking about RDS
 

1061
00:23:53,870 --> 00:23:55,630
RDS and I'm only talking about RDS
because it turns out that even though

1062
00:23:55,630 --> 00:23:55,640
because it turns out that even though
 

1063
00:23:55,640 --> 00:23:56,710
because it turns out that even though
the paper doesn't quite mention it

1064
00:23:56,710 --> 00:23:56,720
the paper doesn't quite mention it
 

1065
00:23:56,720 --> 00:23:58,870
the paper doesn't quite mention it
figure 2 in the paper is basically a

1066
00:23:58,870 --> 00:23:58,880
figure 2 in the paper is basically a
 

1067
00:23:58,880 --> 00:24:01,540
figure 2 in the paper is basically a
description of RDS so what's going on

1068
00:24:01,540 --> 00:24:01,550
description of RDS so what's going on
 

1069
00:24:01,550 --> 00:24:04,270
description of RDS so what's going on
and RDS is that it was a first attempt

1070
00:24:04,270 --> 00:24:04,280
and RDS is that it was a first attempt
 

1071
00:24:04,280 --> 00:24:07,150
and RDS is that it was a first attempt
to get a database that was replicated in

1072
00:24:07,150 --> 00:24:07,160
to get a database that was replicated in
 

1073
00:24:07,160 --> 00:24:09,430
to get a database that was replicated in
multiple availability zones so that if

1074
00:24:09,430 --> 00:24:09,440
multiple availability zones so that if
 

1075
00:24:09,440 --> 00:24:12,730
multiple availability zones so that if
an entire data center went down you

1076
00:24:12,730 --> 00:24:12,740
an entire data center went down you
 

1077
00:24:12,740 --> 00:24:14,350
an entire data center went down you
could get back your database contents

1078
00:24:14,350 --> 00:24:14,360
could get back your database contents
 

1079
00:24:14,360 --> 00:24:16,840
could get back your database contents
without missing any rights so that deal

1080
00:24:16,840 --> 00:24:16,850
without missing any rights so that deal
 

1081
00:24:16,850 --> 00:24:20,320
without missing any rights so that deal
with RDS is that there's one you have

1082
00:24:20,320 --> 00:24:20,330
with RDS is that there's one you have
 

1083
00:24:20,330 --> 00:24:22,900
with RDS is that there's one you have
one ec2 instance that's the database

1084
00:24:22,900 --> 00:24:22,910
one ec2 instance that's the database
 

1085
00:24:22,910 --> 00:24:23,560
one ec2 instance that's the database
server

1086
00:24:23,560 --> 00:24:23,570
server
 

1087
00:24:23,570 --> 00:24:24,910
server
you just have one you just want to

1088
00:24:24,910 --> 00:24:24,920
you just have one you just want to
 

1089
00:24:24,920 --> 00:24:28,480
you just have one you just want to
running one database it stores its data

1090
00:24:28,480 --> 00:24:28,490
running one database it stores its data
 

1091
00:24:28,490 --> 00:24:31,680
running one database it stores its data
pages and log just basically with this

1092
00:24:31,680 --> 00:24:31,690
pages and log just basically with this
 

1093
00:24:31,690 --> 00:24:34,450
pages and log just basically with this
instead of on the local disk its stores

1094
00:24:34,450 --> 00:24:34,460
instead of on the local disk its stores
 

1095
00:24:34,460 --> 00:24:36,340
instead of on the local disk its stores
them in EBS so whenever the database

1096
00:24:36,340 --> 00:24:36,350
them in EBS so whenever the database
 

1097
00:24:36,350 --> 00:24:38,080
them in EBS so whenever the database
does a log write or page write or

1098
00:24:38,080 --> 00:24:38,090
does a log write or page write or
 

1099
00:24:38,090 --> 00:24:40,960
does a log write or page write or
whatever those rights actually go to

1100
00:24:40,960 --> 00:24:40,970
whatever those rights actually go to
 

1101
00:24:40,970 --> 00:24:47,950
whatever those rights actually go to
these two EBS volumes EBS replicas in

1102
00:24:47,950 --> 00:24:47,960
these two EBS volumes EBS replicas in
 

1103
00:24:47,960 --> 00:24:50,170
these two EBS volumes EBS replicas in
addition so and so this is in one

1104
00:24:50,170 --> 00:24:50,180
addition so and so this is in one
 

1105
00:24:50,180 --> 00:24:54,220
addition so and so this is in one
availability zone in addition for every

1106
00:24:54,220 --> 00:24:54,230
availability zone in addition for every
 

1107
00:24:54,230 --> 00:24:55,900
availability zone in addition for every
write that the database software does

1108
00:24:55,900 --> 00:24:55,910
write that the database software does
 

1109
00:24:55,910 --> 00:24:58,090
write that the database software does
Amazon would transparently without the

1110
00:24:58,090 --> 00:24:58,100
Amazon would transparently without the
 

1111
00:24:58,100 --> 00:24:59,890
Amazon would transparently without the
database even realizing necessarily this

1112
00:24:59,890 --> 00:24:59,900
database even realizing necessarily this
 

1113
00:24:59,900 --> 00:25:03,880
database even realizing necessarily this
was happened also send those rights to

1114
00:25:03,880 --> 00:25:03,890
was happened also send those rights to
 

1115
00:25:03,890 --> 00:25:06,010
was happened also send those rights to
a special set up in a second

1116
00:25:06,010 --> 00:25:06,020
a special set up in a second
 

1117
00:25:06,020 --> 00:25:07,750
a special set up in a second
availability zone in a second machine

1118
00:25:07,750 --> 00:25:07,760
availability zone in a second machine
 

1119
00:25:07,760 --> 00:25:13,180
availability zone in a second machine
room - just going from figure 2 to

1120
00:25:13,180 --> 00:25:13,190
room - just going from figure 2 to
 

1121
00:25:13,190 --> 00:25:14,950
room - just going from figure 2 to
apparently a separate computer or ec2

1122
00:25:14,950 --> 00:25:14,960
apparently a separate computer or ec2
 

1123
00:25:14,960 --> 00:25:16,720
apparently a separate computer or ec2
instance or something whose job was just

1124
00:25:16,720 --> 00:25:16,730
instance or something whose job was just
 

1125
00:25:16,730 --> 00:25:20,230
instance or something whose job was just
a mirror writes that the main database

1126
00:25:20,230 --> 00:25:20,240
a mirror writes that the main database
 

1127
00:25:20,240 --> 00:25:22,600
a mirror writes that the main database
did so this other sort of mirroring

1128
00:25:22,600 --> 00:25:22,610
did so this other sort of mirroring
 

1129
00:25:22,610 --> 00:25:25,090
did so this other sort of mirroring
server would then just copy these rights

1130
00:25:25,090 --> 00:25:25,100
server would then just copy these rights
 

1131
00:25:25,100 --> 00:25:30,970
server would then just copy these rights
to a second pair of EBS servers and so

1132
00:25:30,970 --> 00:25:30,980
to a second pair of EBS servers and so
 

1133
00:25:30,980 --> 00:25:33,160
to a second pair of EBS servers and so
with this set up with this RDS set up

1134
00:25:33,160 --> 00:25:33,170
with this set up with this RDS set up
 

1135
00:25:33,170 --> 00:25:36,040
with this set up with this RDS set up
and that's what figure - every time the

1136
00:25:36,040 --> 00:25:36,050
and that's what figure - every time the
 

1137
00:25:36,050 --> 00:25:38,680
and that's what figure - every time the
database appends to the log or writes to

1138
00:25:38,680 --> 00:25:38,690
database appends to the log or writes to
 

1139
00:25:38,690 --> 00:25:43,030
database appends to the log or writes to
one of its pages it has to the data has

1140
00:25:43,030 --> 00:25:43,040
one of its pages it has to the data has
 

1141
00:25:43,040 --> 00:25:44,740
one of its pages it has to the data has
to be sent to these two replicas has to

1142
00:25:44,740 --> 00:25:44,750
to be sent to these two replicas has to
 

1143
00:25:44,750 --> 00:25:47,200
to be sent to these two replicas has to
be sent on the network connection across

1144
00:25:47,200 --> 00:25:47,210
be sent on the network connection across
 

1145
00:25:47,210 --> 00:25:49,480
be sent on the network connection across
the other availability zone on the other

1146
00:25:49,480 --> 00:25:49,490
the other availability zone on the other
 

1147
00:25:49,490 --> 00:25:51,370
the other availability zone on the other
side of town sent to this mirroring

1148
00:25:51,370 --> 00:25:51,380
side of town sent to this mirroring
 

1149
00:25:51,380 --> 00:25:52,990
side of town sent to this mirroring
server which would then send it to it's

1150
00:25:52,990 --> 00:25:53,000
server which would then send it to it's
 

1151
00:25:53,000 --> 00:25:56,950
server which would then send it to it's
two separate EBS replicas and then

1152
00:25:56,950 --> 00:25:56,960
two separate EBS replicas and then
 

1153
00:25:56,960 --> 00:25:59,200
two separate EBS replicas and then
finally this reply would come back and

1154
00:25:59,200 --> 00:25:59,210
finally this reply would come back and
 

1155
00:25:59,210 --> 00:26:00,580
finally this reply would come back and
then only then with the right be

1156
00:26:00,580 --> 00:26:00,590
then only then with the right be
 

1157
00:26:00,590 --> 00:26:03,580
then only then with the right be
finished with a DAT bc AHA my writes

1158
00:26:03,580 --> 00:26:03,590
finished with a DAT bc AHA my writes
 

1159
00:26:03,590 --> 00:26:07,000
finished with a DAT bc AHA my writes
finished I can you know count this log

1160
00:26:07,000 --> 00:26:07,010
finished I can you know count this log
 

1161
00:26:07,010 --> 00:26:08,260
finished I can you know count this log
record it was really being appendage of

1162
00:26:08,260 --> 00:26:08,270
record it was really being appendage of
 

1163
00:26:08,270 --> 00:26:09,250
record it was really being appendage of
the log or whatever

1164
00:26:09,250 --> 00:26:09,260
the log or whatever
 

1165
00:26:09,260 --> 00:26:13,540
the log or whatever
so this RDS arrangement gets you betcha

1166
00:26:13,540 --> 00:26:13,550
so this RDS arrangement gets you betcha
 

1167
00:26:13,550 --> 00:26:14,950
so this RDS arrangement gets you betcha
better fault tolerance because now you

1168
00:26:14,950 --> 00:26:14,960
better fault tolerance because now you
 

1169
00:26:14,960 --> 00:26:17,050
better fault tolerance because now you
have a complete up-to-date copy of the

1170
00:26:17,050 --> 00:26:17,060
have a complete up-to-date copy of the
 

1171
00:26:17,060 --> 00:26:18,760
have a complete up-to-date copy of the
database like seeing them all the very

1172
00:26:18,760 --> 00:26:18,770
database like seeing them all the very
 

1173
00:26:18,770 --> 00:26:21,130
database like seeing them all the very
latest writes in a separate availability

1174
00:26:21,130 --> 00:26:21,140
latest writes in a separate availability
 

1175
00:26:21,140 --> 00:26:23,650
latest writes in a separate availability
zone even if you know fire burns down

1176
00:26:23,650 --> 00:26:23,660
zone even if you know fire burns down
 

1177
00:26:23,660 --> 00:26:26,140
zone even if you know fire burns down
this entire data center boom you can

1178
00:26:26,140 --> 00:26:26,150
this entire data center boom you can
 

1179
00:26:26,150 --> 00:26:28,660
this entire data center boom you can
weaken you can run the database in a new

1180
00:26:28,660 --> 00:26:28,670
weaken you can run the database in a new
 

1181
00:26:28,670 --> 00:26:30,850
weaken you can run the database in a new
instance and the second availability

1182
00:26:30,850 --> 00:26:30,860
instance and the second availability
 

1183
00:26:30,860 --> 00:26:45,340
instance and the second availability
zone and lose no data at all yes

1184
00:26:45,340 --> 00:26:45,350

 

1185
00:26:45,350 --> 00:26:48,859

um I don't know how to answer that I

1186
00:26:48,859 --> 00:26:48,869
um I don't know how to answer that I
 

1187
00:26:48,869 --> 00:26:51,049
um I don't know how to answer that I
mean that is just not what they do and

1188
00:26:51,049 --> 00:26:51,059
mean that is just not what they do and
 

1189
00:26:51,059 --> 00:26:54,590
mean that is just not what they do and
my guess is that it would be that for

1190
00:26:54,590 --> 00:26:54,600
my guess is that it would be that for
 

1191
00:26:54,600 --> 00:26:56,269
my guess is that it would be that for
most EVs customers it would be too

1192
00:26:56,269 --> 00:26:56,279
most EVs customers it would be too
 

1193
00:26:56,279 --> 00:26:58,489
most EVs customers it would be too
painfully slow to forward every right

1194
00:26:58,489 --> 00:26:58,499
painfully slow to forward every right
 

1195
00:26:58,499 --> 00:27:02,389
painfully slow to forward every right
across two separate data center I'm not

1196
00:27:02,389 --> 00:27:02,399
across two separate data center I'm not
 

1197
00:27:02,399 --> 00:27:04,279
across two separate data center I'm not
really sure what's going on but I think

1198
00:27:04,279 --> 00:27:04,289
really sure what's going on but I think
 

1199
00:27:04,289 --> 00:27:06,529
really sure what's going on but I think
the main answers they don't do that and

1200
00:27:06,529 --> 00:27:06,539
the main answers they don't do that and
 

1201
00:27:06,539 --> 00:27:09,859
the main answers they don't do that and
this is sort of a a little bit of a

1202
00:27:09,859 --> 00:27:09,869
this is sort of a a little bit of a
 

1203
00:27:09,869 --> 00:27:11,869
this is sort of a a little bit of a
workaround for the way EBS works too

1204
00:27:11,869 --> 00:27:11,879
workaround for the way EBS works too
 

1205
00:27:11,879 --> 00:27:14,629
workaround for the way EBS works too
kind of tricky BS and actually producing

1206
00:27:14,629 --> 00:27:14,639
kind of tricky BS and actually producing
 

1207
00:27:14,639 --> 00:27:16,999
kind of tricky BS and actually producing
and sort of using the existing EBS

1208
00:27:16,999 --> 00:27:17,009
and sort of using the existing EBS
 

1209
00:27:17,009 --> 00:27:20,899
and sort of using the existing EBS
infrastructure unchanged I stableman

1210
00:27:20,899 --> 00:27:20,909
infrastructure unchanged I stableman
 

1211
00:27:20,909 --> 00:27:24,259
infrastructure unchanged I stableman
chose this turns out to be extremely

1212
00:27:24,259 --> 00:27:24,269
chose this turns out to be extremely
 

1213
00:27:24,269 --> 00:27:28,849
chose this turns out to be extremely
expensive or anyway it's expensive as

1214
00:27:28,849 --> 00:27:28,859
expensive or anyway it's expensive as
 

1215
00:27:28,859 --> 00:27:29,419
expensive or anyway it's expensive as
you might think

1216
00:27:29,419 --> 00:27:29,429
you might think
 

1217
00:27:29,429 --> 00:27:30,919
you might think
you know we're writing fairly large

1218
00:27:30,919 --> 00:27:30,929
you know we're writing fairly large
 

1219
00:27:30,929 --> 00:27:33,549
you know we're writing fairly large
volumes of data because you know even

1220
00:27:33,549 --> 00:27:33,559
volumes of data because you know even
 

1221
00:27:33,559 --> 00:27:36,590
volumes of data because you know even
this transaction which seems like it

1222
00:27:36,590 --> 00:27:36,600
this transaction which seems like it
 

1223
00:27:36,600 --> 00:27:38,779
this transaction which seems like it
just modifies two integers like maybe

1224
00:27:38,779 --> 00:27:38,789
just modifies two integers like maybe
 

1225
00:27:38,789 --> 00:27:41,090
just modifies two integers like maybe
eight bytes or I don't know what sixteen

1226
00:27:41,090 --> 00:27:41,100
eight bytes or I don't know what sixteen
 

1227
00:27:41,100 --> 00:27:43,009
eight bytes or I don't know what sixteen
who knows only a few bytes of data are

1228
00:27:43,009 --> 00:27:43,019
who knows only a few bytes of data are
 

1229
00:27:43,019 --> 00:27:45,049
who knows only a few bytes of data are
being modified here what that translates

1230
00:27:45,049 --> 00:27:45,059
being modified here what that translates
 

1231
00:27:45,059 --> 00:27:46,879
being modified here what that translates
to as far as the database reading and

1232
00:27:46,879 --> 00:27:46,889
to as far as the database reading and
 

1233
00:27:46,889 --> 00:27:49,700
to as far as the database reading and
writing the disk is I actually these log

1234
00:27:49,700 --> 00:27:49,710
writing the disk is I actually these log
 

1235
00:27:49,710 --> 00:27:51,710
writing the disk is I actually these log
records are that also quite small so

1236
00:27:51,710 --> 00:27:51,720
records are that also quite small so
 

1237
00:27:51,720 --> 00:27:53,149
records are that also quite small so
this these two log records might

1238
00:27:53,149 --> 00:27:53,159
this these two log records might
 

1239
00:27:53,159 --> 00:27:55,039
this these two log records might
themself only be dozens of bytes long so

1240
00:27:55,039 --> 00:27:55,049
themself only be dozens of bytes long so
 

1241
00:27:55,049 --> 00:27:57,349
themself only be dozens of bytes long so
that's nice but the reads and writes of

1242
00:27:57,349 --> 00:27:57,359
that's nice but the reads and writes of
 

1243
00:27:57,359 --> 00:27:58,940
that's nice but the reads and writes of
the actual data pages are likely to be

1244
00:27:58,940 --> 00:27:58,950
the actual data pages are likely to be
 

1245
00:27:58,950 --> 00:28:01,999
the actual data pages are likely to be
much much larger than just a couple of

1246
00:28:01,999 --> 00:28:02,009
much much larger than just a couple of
 

1247
00:28:02,009 --> 00:28:03,349
much much larger than just a couple of
dozen bytes because each of these pages

1248
00:28:03,349 --> 00:28:03,359
dozen bytes because each of these pages
 

1249
00:28:03,359 --> 00:28:05,509
dozen bytes because each of these pages
is going to be you know eight kilobytes

1250
00:28:05,509 --> 00:28:05,519
is going to be you know eight kilobytes
 

1251
00:28:05,519 --> 00:28:08,119
is going to be you know eight kilobytes
or 16 kilobytes or some relatively large

1252
00:28:08,119 --> 00:28:08,129
or 16 kilobytes or some relatively large
 

1253
00:28:08,129 --> 00:28:10,039
or 16 kilobytes or some relatively large
number the file system or disk block

1254
00:28:10,039 --> 00:28:10,049
number the file system or disk block
 

1255
00:28:10,049 --> 00:28:14,869
number the file system or disk block
size and it means that just to read and

1256
00:28:14,869 --> 00:28:14,879
size and it means that just to read and
 

1257
00:28:14,879 --> 00:28:17,389
size and it means that just to read and
write these two numbers when it comes

1258
00:28:17,389 --> 00:28:17,399
write these two numbers when it comes
 

1259
00:28:17,399 --> 00:28:19,549
write these two numbers when it comes
time to update the data pages there's a

1260
00:28:19,549 --> 00:28:19,559
time to update the data pages there's a
 

1261
00:28:19,559 --> 00:28:21,109
time to update the data pages there's a
lot of data being pushed around on to

1262
00:28:21,109 --> 00:28:21,119
lot of data being pushed around on to
 

1263
00:28:21,119 --> 00:28:23,330
lot of data being pushed around on to
the disk a locally attached disk now

1264
00:28:23,330 --> 00:28:23,340
the disk a locally attached disk now
 

1265
00:28:23,340 --> 00:28:26,450
the disk a locally attached disk now
it's reasonably fast but I guess what

1266
00:28:26,450 --> 00:28:26,460
it's reasonably fast but I guess what
 

1267
00:28:26,460 --> 00:28:27,950
it's reasonably fast but I guess what
they found is when they start sending

1268
00:28:27,950 --> 00:28:27,960
they found is when they start sending
 

1269
00:28:27,960 --> 00:28:30,859
they found is when they start sending
those big 8 kilobyte writes across the

1270
00:28:30,859 --> 00:28:30,869
those big 8 kilobyte writes across the
 

1271
00:28:30,869 --> 00:28:34,399
those big 8 kilobyte writes across the
network that that used up too much

1272
00:28:34,399 --> 00:28:34,409
network that that used up too much
 

1273
00:28:34,409 --> 00:28:37,989
network that that used up too much
network capacity to be supported and so

1274
00:28:37,989 --> 00:28:37,999
network capacity to be supported and so
 

1275
00:28:37,999 --> 00:28:40,070
network capacity to be supported and so
this arrangement this figure 2

1276
00:28:40,070 --> 00:28:40,080
this arrangement this figure 2
 

1277
00:28:40,080 --> 00:28:51,199
this arrangement this figure 2
arrangement evidently was too slow yes

1278
00:28:51,199 --> 00:28:51,209

 

1279
00:28:51,209 --> 00:28:56,299

so in this in this figure to set up the

1280
00:28:56,299 --> 00:28:56,309
so in this in this figure to set up the
 

1281
00:28:56,309 --> 00:28:58,919
so in this in this figure to set up the
you know unknown to the database server

1282
00:28:58,919 --> 00:28:58,929
you know unknown to the database server
 

1283
00:28:58,929 --> 00:29:02,459
you know unknown to the database server
every time it called write erode its EBS

1284
00:29:02,459 --> 00:29:02,469
every time it called write erode its EBS
 

1285
00:29:02,469 --> 00:29:05,369
every time it called write erode its EBS
disk a copy of every write went over

1286
00:29:05,369 --> 00:29:05,379
disk a copy of every write went over
 

1287
00:29:05,379 --> 00:29:08,339
disk a copy of every write went over
across availabilities zones and had to

1288
00:29:08,339 --> 00:29:08,349
across availabilities zones and had to
 

1289
00:29:08,349 --> 00:29:10,349
across availabilities zones and had to
be written to the was written to the

1290
00:29:10,349 --> 00:29:10,359
be written to the was written to the
 

1291
00:29:10,359 --> 00:29:12,570
be written to the was written to the
both of these EBS servers and then

1292
00:29:12,570 --> 00:29:12,580
both of these EBS servers and then
 

1293
00:29:12,580 --> 00:29:15,259
both of these EBS servers and then
acknowledged and only then did the write

1294
00:29:15,259 --> 00:29:15,269
acknowledged and only then did the write
 

1295
00:29:15,269 --> 00:29:17,999
acknowledged and only then did the write
appear to complete to the database so I

1296
00:29:17,999 --> 00:29:18,009
appear to complete to the database so I
 

1297
00:29:18,009 --> 00:29:19,829
appear to complete to the database so I
really had to wait for all the fall for

1298
00:29:19,829 --> 00:29:19,839
really had to wait for all the fall for
 

1299
00:29:19,839 --> 00:29:22,259
really had to wait for all the fall for
copies to be updated and for the data to

1300
00:29:22,259 --> 00:29:22,269
copies to be updated and for the data to
 

1301
00:29:22,269 --> 00:29:24,229
copies to be updated and for the data to
be sent on the link across to the other

1302
00:29:24,229 --> 00:29:24,239
be sent on the link across to the other
 

1303
00:29:24,239 --> 00:29:30,779
be sent on the link across to the other
availability zone and you know as far as

1304
00:29:30,779 --> 00:29:30,789
availability zone and you know as far as
 

1305
00:29:30,789 --> 00:29:33,139
availability zone and you know as far as
table one it's concerned that first

1306
00:29:33,139 --> 00:29:33,149
table one it's concerned that first
 

1307
00:29:33,149 --> 00:29:39,079
table one it's concerned that first
performance table the reason why the

1308
00:29:39,079 --> 00:29:39,089

 

1309
00:29:39,089 --> 00:29:42,810

reason why the slow the mirrored my

1310
00:29:42,810 --> 00:29:42,820
reason why the slow the mirrored my
 

1311
00:29:42,820 --> 00:29:45,569
reason why the slow the mirrored my
sequel line is much much slower than the

1312
00:29:45,569 --> 00:29:45,579
sequel line is much much slower than the
 

1313
00:29:45,579 --> 00:29:47,879
sequel line is much much slower than the
Aurora line is basically that it sends

1314
00:29:47,879 --> 00:29:47,889
Aurora line is basically that it sends
 

1315
00:29:47,889 --> 00:29:50,489
Aurora line is basically that it sends
huge amounts of data over these

1316
00:29:50,489 --> 00:29:50,499
huge amounts of data over these
 

1317
00:29:50,499 --> 00:29:52,589
huge amounts of data over these
relatively slow Network links and that

1318
00:29:52,589 --> 00:29:52,599
relatively slow Network links and that
 

1319
00:29:52,599 --> 00:29:54,089
relatively slow Network links and that
was the problem that was the performance

1320
00:29:54,089 --> 00:29:54,099
was the problem that was the performance
 

1321
00:29:54,099 --> 00:29:55,919
was the problem that was the performance
problem they're really trying to fix so

1322
00:29:55,919 --> 00:29:55,929
problem they're really trying to fix so
 

1323
00:29:55,929 --> 00:29:57,749
problem they're really trying to fix so
this is good for fault tolerance because

1324
00:29:57,749 --> 00:29:57,759
this is good for fault tolerance because
 

1325
00:29:57,759 --> 00:29:59,069
this is good for fault tolerance because
now we have a second copy and another

1326
00:29:59,069 --> 00:29:59,079
now we have a second copy and another
 

1327
00:29:59,079 --> 00:30:02,039
now we have a second copy and another
availability zone but it was bad news

1328
00:30:02,039 --> 00:30:02,049
availability zone but it was bad news
 

1329
00:30:02,049 --> 00:30:05,569
availability zone but it was bad news
for performance all right the way Aurora

1330
00:30:05,569 --> 00:30:05,579
for performance all right the way Aurora
 

1331
00:30:05,579 --> 00:30:07,849
for performance all right the way Aurora
and the next step after this is Aurora

1332
00:30:07,849 --> 00:30:07,859
and the next step after this is Aurora
 

1333
00:30:07,859 --> 00:30:14,310
and the next step after this is Aurora
and to set up there the high level view

1334
00:30:14,310 --> 00:30:14,320
and to set up there the high level view
 

1335
00:30:14,320 --> 00:30:15,799
and to set up there the high level view
is we still have a database server

1336
00:30:15,799 --> 00:30:15,809
is we still have a database server
 

1337
00:30:15,809 --> 00:30:18,539
is we still have a database server
although now it's running custom

1338
00:30:18,539 --> 00:30:18,549
although now it's running custom
 

1339
00:30:18,549 --> 00:30:21,569
although now it's running custom
software that Amazon supplies so I can

1340
00:30:21,569 --> 00:30:21,579
software that Amazon supplies so I can
 

1341
00:30:21,579 --> 00:30:23,969
software that Amazon supplies so I can
rent an Aurora server from Amazon but

1342
00:30:23,969 --> 00:30:23,979
rent an Aurora server from Amazon but
 

1343
00:30:23,979 --> 00:30:26,310
rent an Aurora server from Amazon but
it's not I'm not running my software on

1344
00:30:26,310 --> 00:30:26,320
it's not I'm not running my software on
 

1345
00:30:26,320 --> 00:30:28,769
it's not I'm not running my software on
it I'm renting a server running Amazon's

1346
00:30:28,769 --> 00:30:28,779
it I'm renting a server running Amazon's
 

1347
00:30:28,779 --> 00:30:32,249
it I'm renting a server running Amazon's
Aurora database software on it rent an

1348
00:30:32,249 --> 00:30:32,259
Aurora database software on it rent an
 

1349
00:30:32,259 --> 00:30:35,549
Aurora database software on it rent an
Aurora database server from them and

1350
00:30:35,549 --> 00:30:35,559
Aurora database server from them and
 

1351
00:30:35,559 --> 00:30:38,489
Aurora database server from them and
it's it's just one instance it sits in

1352
00:30:38,489 --> 00:30:38,499
it's it's just one instance it sits in
 

1353
00:30:38,499 --> 00:30:44,669
it's it's just one instance it sits in
some availability zone and there's two

1354
00:30:44,669 --> 00:30:44,679
some availability zone and there's two
 

1355
00:30:44,679 --> 00:30:46,769
some availability zone and there's two
interesting things about the way it's

1356
00:30:46,769 --> 00:30:46,779
interesting things about the way it's
 

1357
00:30:46,779 --> 00:30:52,259
interesting things about the way it's
set up first of all is that the data you

1358
00:30:52,259 --> 00:30:52,269
set up first of all is that the data you
 

1359
00:30:52,269 --> 00:30:54,680
set up first of all is that the data you
know it's replacement basically for EBS

1360
00:30:54,680 --> 00:30:54,690
know it's replacement basically for EBS
 

1361
00:30:54,690 --> 00:30:59,630
know it's replacement basically for EBS
involves six replicas now

1362
00:30:59,630 --> 00:30:59,640
involves six replicas now
 

1363
00:30:59,640 --> 00:31:09,670
involves six replicas now
- in each of three availability zones

1364
00:31:09,670 --> 00:31:09,680

 

1365
00:31:09,680 --> 00:31:12,170

for super fault tolerance and so every

1366
00:31:12,170 --> 00:31:12,180
for super fault tolerance and so every
 

1367
00:31:12,180 --> 00:31:14,450
for super fault tolerance and so every
time the database complicated we'll talk

1368
00:31:14,450 --> 00:31:14,460
time the database complicated we'll talk
 

1369
00:31:14,460 --> 00:31:15,920
time the database complicated we'll talk
but basically when the database writes

1370
00:31:15,920 --> 00:31:15,930
but basically when the database writes
 

1371
00:31:15,930 --> 00:31:19,570
but basically when the database writes
or reads when the database writes it's

1372
00:31:19,570 --> 00:31:19,580
or reads when the database writes it's
 

1373
00:31:19,580 --> 00:31:22,700
or reads when the database writes it's
we're not sure exactly how its managed

1374
00:31:22,700 --> 00:31:22,710
we're not sure exactly how its managed
 

1375
00:31:22,710 --> 00:31:24,890
we're not sure exactly how its managed
but it more or less needs to send a

1376
00:31:24,890 --> 00:31:24,900
but it more or less needs to send a
 

1377
00:31:24,900 --> 00:31:27,290
but it more or less needs to send a
write one way or another writes have to

1378
00:31:27,290 --> 00:31:27,300
write one way or another writes have to
 

1379
00:31:27,300 --> 00:31:31,270
write one way or another writes have to
get sent to all six of these replicas

1380
00:31:31,270 --> 00:31:31,280
get sent to all six of these replicas
 

1381
00:31:31,280 --> 00:31:33,830
get sent to all six of these replicas
the key to making and so this looks like

1382
00:31:33,830 --> 00:31:33,840
the key to making and so this looks like
 

1383
00:31:33,840 --> 00:31:35,360
the key to making and so this looks like
more replicas gosh you know why isn't it

1384
00:31:35,360 --> 00:31:35,370
more replicas gosh you know why isn't it
 

1385
00:31:35,370 --> 00:31:37,580
more replicas gosh you know why isn't it
slower why isn't it slower than this

1386
00:31:37,580 --> 00:31:37,590
slower why isn't it slower than this
 

1387
00:31:37,590 --> 00:31:38,960
slower why isn't it slower than this
previous scheme which only had four

1388
00:31:38,960 --> 00:31:38,970
previous scheme which only had four
 

1389
00:31:38,970 --> 00:31:41,180
previous scheme which only had four
replicas and the answer to that is that

1390
00:31:41,180 --> 00:31:41,190
replicas and the answer to that is that
 

1391
00:31:41,190 --> 00:31:43,100
replicas and the answer to that is that
what's being the only thing being

1392
00:31:43,100 --> 00:31:43,110
what's being the only thing being
 

1393
00:31:43,110 --> 00:31:44,840
what's being the only thing being
written over the network is the log

1394
00:31:44,840 --> 00:31:44,850
written over the network is the log
 

1395
00:31:44,850 --> 00:31:47,180
written over the network is the log
records so that's really the key to

1396
00:31:47,180 --> 00:31:47,190
records so that's really the key to
 

1397
00:31:47,190 --> 00:31:50,000
records so that's really the key to
success is that the data that goes over

1398
00:31:50,000 --> 00:31:50,010
success is that the data that goes over
 

1399
00:31:50,010 --> 00:31:51,470
success is that the data that goes over
these links in the sense of the replicas

1400
00:31:51,470 --> 00:31:51,480
these links in the sense of the replicas
 

1401
00:31:51,480 --> 00:31:58,120
these links in the sense of the replicas
it's just the log records log entries

1402
00:31:58,120 --> 00:31:58,130
it's just the log records log entries
 

1403
00:31:58,130 --> 00:32:02,450
it's just the log records log entries
and as you can see you know a log entry

1404
00:32:02,450 --> 00:32:02,460
and as you can see you know a log entry
 

1405
00:32:02,460 --> 00:32:04,190
and as you can see you know a log entry
here you know at least and this is a

1406
00:32:04,190 --> 00:32:04,200
here you know at least and this is a
 

1407
00:32:04,200 --> 00:32:06,050
here you know at least and this is a
simple example now it's not quite this

1408
00:32:06,050 --> 00:32:06,060
simple example now it's not quite this
 

1409
00:32:06,060 --> 00:32:08,210
simple example now it's not quite this
small but it's really not vastly more

1410
00:32:08,210 --> 00:32:08,220
small but it's really not vastly more
 

1411
00:32:08,220 --> 00:32:10,340
small but it's really not vastly more
than a couple of dozen bytes needed to

1412
00:32:10,340 --> 00:32:10,350
than a couple of dozen bytes needed to
 

1413
00:32:10,350 --> 00:32:11,900
than a couple of dozen bytes needed to
store the old value and the new value

1414
00:32:11,900 --> 00:32:11,910
store the old value and the new value
 

1415
00:32:11,910 --> 00:32:14,510
store the old value and the new value
for the piece of data we're writing so

1416
00:32:14,510 --> 00:32:14,520
for the piece of data we're writing so
 

1417
00:32:14,520 --> 00:32:16,240
for the piece of data we're writing so
the log entries tend to be quite small

1418
00:32:16,240 --> 00:32:16,250
the log entries tend to be quite small
 

1419
00:32:16,250 --> 00:32:20,240
the log entries tend to be quite small
whereas when the database you know we

1420
00:32:20,240 --> 00:32:20,250
whereas when the database you know we
 

1421
00:32:20,250 --> 00:32:21,380
whereas when the database you know we
had a database that thought it was

1422
00:32:21,380 --> 00:32:21,390
had a database that thought it was
 

1423
00:32:21,390 --> 00:32:23,090
had a database that thought it was
writing a local disk and it was updating

1424
00:32:23,090 --> 00:32:23,100
writing a local disk and it was updating
 

1425
00:32:23,100 --> 00:32:24,890
writing a local disk and it was updating
its data pages these tended to be

1426
00:32:24,890 --> 00:32:24,900
its data pages these tended to be
 

1427
00:32:24,900 --> 00:32:26,930
its data pages these tended to be
enormous like doesn't really say in the

1428
00:32:26,930 --> 00:32:26,940
enormous like doesn't really say in the
 

1429
00:32:26,940 --> 00:32:28,160
enormous like doesn't really say in the
paper I don't think that eight kilobytes

1430
00:32:28,160 --> 00:32:28,170
paper I don't think that eight kilobytes
 

1431
00:32:28,170 --> 00:32:31,490
paper I don't think that eight kilobytes
or more so this set up here was sending

1432
00:32:31,490 --> 00:32:31,500
or more so this set up here was sending
 

1433
00:32:31,500 --> 00:32:33,530
or more so this set up here was sending
for each transaction was sending

1434
00:32:33,530 --> 00:32:33,540
for each transaction was sending
 

1435
00:32:33,540 --> 00:32:36,560
for each transaction was sending
multiple 8 kilobyte pages across to the

1436
00:32:36,560 --> 00:32:36,570
multiple 8 kilobyte pages across to the
 

1437
00:32:36,570 --> 00:32:38,750
multiple 8 kilobyte pages across to the
replicas whereas this set up is just

1438
00:32:38,750 --> 00:32:38,760
replicas whereas this set up is just
 

1439
00:32:38,760 --> 00:32:41,030
replicas whereas this set up is just
sending these small log entries to more

1440
00:32:41,030 --> 00:32:41,040
sending these small log entries to more
 

1441
00:32:41,040 --> 00:32:43,760
sending these small log entries to more
replicas but the log entries are so very

1442
00:32:43,760 --> 00:32:43,770
replicas but the log entries are so very
 

1443
00:32:43,770 --> 00:32:46,370
replicas but the log entries are so very
much smaller than 8k pages that it's a

1444
00:32:46,370 --> 00:32:46,380
much smaller than 8k pages that it's a
 

1445
00:32:46,380 --> 00:32:51,190
much smaller than 8k pages that it's a
net performance win okay so that's one

1446
00:32:51,190 --> 00:32:51,200
net performance win okay so that's one
 

1447
00:32:51,200 --> 00:32:56,510
net performance win okay so that's one
this is like one of their big insights

1448
00:32:56,510 --> 00:32:56,520
this is like one of their big insights
 

1449
00:32:56,520 --> 00:32:58,730
this is like one of their big insights
is just in the log entries of course a

1450
00:32:58,730 --> 00:32:58,740
is just in the log entries of course a
 

1451
00:32:58,740 --> 00:33:00,470
is just in the log entries of course a
fallout from this is that their storage

1452
00:33:00,470 --> 00:33:00,480
fallout from this is that their storage
 

1453
00:33:00,480 --> 00:33:01,940
fallout from this is that their storage
system is now not very general purpose

1454
00:33:01,940 --> 00:33:01,950
system is now not very general purpose
 

1455
00:33:01,950 --> 00:33:03,200
system is now not very general purpose
this is a storage system that

1456
00:33:03,200 --> 00:33:03,210
this is a storage system that
 

1457
00:33:03,210 --> 00:33:06,560
this is a storage system that
understands what to do with my sequel

1458
00:33:06,560 --> 00:33:06,570
understands what to do with my sequel
 

1459
00:33:06,570 --> 00:33:09,290
understands what to do with my sequel
log entries right it's not just you know

1460
00:33:09,290 --> 00:33:09,300
log entries right it's not just you know
 

1461
00:33:09,300 --> 00:33:11,630
log entries right it's not just you know
EBS was a very general purpose just

1462
00:33:11,630 --> 00:33:11,640
EBS was a very general purpose just
 

1463
00:33:11,640 --> 00:33:13,310
EBS was a very general purpose just
emulated to disk you read them right

1464
00:33:13,310 --> 00:33:13,320
emulated to disk you read them right
 

1465
00:33:13,320 --> 00:33:15,470
emulated to disk you read them right
block's doesn't understand anything

1466
00:33:15,470 --> 00:33:15,480
block's doesn't understand anything
 

1467
00:33:15,480 --> 00:33:17,149
block's doesn't understand anything
about anything except for blocks this is

1468
00:33:17,149 --> 00:33:17,159
about anything except for blocks this is
 

1469
00:33:17,159 --> 00:33:19,430
about anything except for blocks this is
a storage system that really understands

1470
00:33:19,430 --> 00:33:19,440
a storage system that really understands
 

1471
00:33:19,440 --> 00:33:20,299
a storage system that really understands
that it's sitting underneath the

1472
00:33:20,299 --> 00:33:20,309
that it's sitting underneath the
 

1473
00:33:20,309 --> 00:33:23,180
that it's sitting underneath the
database so that's one thing they've

1474
00:33:23,180 --> 00:33:23,190
database so that's one thing they've
 

1475
00:33:23,190 --> 00:33:25,070
database so that's one thing they've
done is ditched general-purpose storage

1476
00:33:25,070 --> 00:33:25,080
done is ditched general-purpose storage
 

1477
00:33:25,080 --> 00:33:28,310
done is ditched general-purpose storage
and switched to a very application

1478
00:33:28,310 --> 00:33:28,320
and switched to a very application
 

1479
00:33:28,320 --> 00:33:31,519
and switched to a very application
specific storage system

1480
00:33:31,519 --> 00:33:31,529
specific storage system
 

1481
00:33:31,529 --> 00:33:34,279

the other big thing I'll also go into in

1482
00:33:34,279 --> 00:33:34,289
the other big thing I'll also go into in
 

1483
00:33:34,289 --> 00:33:36,519
the other big thing I'll also go into in
more detail is that they don't require

1484
00:33:36,519 --> 00:33:36,529
more detail is that they don't require
 

1485
00:33:36,529 --> 00:33:40,700
more detail is that they don't require
that the rights be acknowledged by all

1486
00:33:40,700 --> 00:33:40,710
that the rights be acknowledged by all
 

1487
00:33:40,710 --> 00:33:43,039
that the rights be acknowledged by all
six replicas in order for the database

1488
00:33:43,039 --> 00:33:43,049
six replicas in order for the database
 

1489
00:33:43,049 --> 00:33:47,570
six replicas in order for the database
server to continue instead the database

1490
00:33:47,570 --> 00:33:47,580
server to continue instead the database
 

1491
00:33:47,580 --> 00:33:49,639
server to continue instead the database
server can continue as long as a quorum

1492
00:33:49,639 --> 00:33:49,649
server can continue as long as a quorum
 

1493
00:33:49,649 --> 00:33:51,649
server can continue as long as a quorum
and which turns out to be for as long as

1494
00:33:51,649 --> 00:33:51,659
and which turns out to be for as long as
 

1495
00:33:51,659 --> 00:33:54,560
and which turns out to be for as long as
any four of these servers responds so if

1496
00:33:54,560 --> 00:33:54,570
any four of these servers responds so if
 

1497
00:33:54,570 --> 00:33:57,340
any four of these servers responds so if
one of these availability zones is

1498
00:33:57,340 --> 00:33:57,350
one of these availability zones is
 

1499
00:33:57,350 --> 00:33:59,960
one of these availability zones is
offline or maybe the network connection

1500
00:33:59,960 --> 00:33:59,970
offline or maybe the network connection
 

1501
00:33:59,970 --> 00:34:02,149
offline or maybe the network connection
to it is slow or maybe even just these

1502
00:34:02,149 --> 00:34:02,159
to it is slow or maybe even just these
 

1503
00:34:02,159 --> 00:34:04,340
to it is slow or maybe even just these
servers just happen to be slow doing

1504
00:34:04,340 --> 00:34:04,350
servers just happen to be slow doing
 

1505
00:34:04,350 --> 00:34:05,480
servers just happen to be slow doing
something else at the moment we're

1506
00:34:05,480 --> 00:34:05,490
something else at the moment we're
 

1507
00:34:05,490 --> 00:34:08,780
something else at the moment we're
trying to write the database server can

1508
00:34:08,780 --> 00:34:08,790
trying to write the database server can
 

1509
00:34:08,790 --> 00:34:12,260
trying to write the database server can
basically ignore the two slowest or the

1510
00:34:12,260 --> 00:34:12,270
basically ignore the two slowest or the
 

1511
00:34:12,270 --> 00:34:14,690
basically ignore the two slowest or the
two most dead of the server's when it's

1512
00:34:14,690 --> 00:34:14,700
two most dead of the server's when it's
 

1513
00:34:14,700 --> 00:34:16,040
two most dead of the server's when it's
doing it right so it only requires

1514
00:34:16,040 --> 00:34:16,050
doing it right so it only requires
 

1515
00:34:16,050 --> 00:34:17,839
doing it right so it only requires
acknowledgments from any four out of six

1516
00:34:17,839 --> 00:34:17,849
acknowledgments from any four out of six
 

1517
00:34:17,849 --> 00:34:19,819
acknowledgments from any four out of six
and then it can continue and so this

1518
00:34:19,819 --> 00:34:19,829
and then it can continue and so this
 

1519
00:34:19,829 --> 00:34:25,369
and then it can continue and so this
quorum scheme is the other big trick

1520
00:34:25,369 --> 00:34:25,379
quorum scheme is the other big trick
 

1521
00:34:25,379 --> 00:34:30,800
quorum scheme is the other big trick
they use to help them have more replicas

1522
00:34:30,800 --> 00:34:30,810
they use to help them have more replicas
 

1523
00:34:30,810 --> 00:34:33,349
they use to help them have more replicas
in more availability zones and yet not

1524
00:34:33,349 --> 00:34:33,359
in more availability zones and yet not
 

1525
00:34:33,359 --> 00:34:35,540
in more availability zones and yet not
pay a huge performance penalty because

1526
00:34:35,540 --> 00:34:35,550
pay a huge performance penalty because
 

1527
00:34:35,550 --> 00:34:36,829
pay a huge performance penalty because
they never have to wait for all of them

1528
00:34:36,829 --> 00:34:36,839
they never have to wait for all of them
 

1529
00:34:36,839 --> 00:34:39,680
they never have to wait for all of them
just the four fastest of the six

1530
00:34:39,680 --> 00:34:39,690
just the four fastest of the six
 

1531
00:34:39,690 --> 00:34:45,740
just the four fastest of the six
replicas so the rest of the lecture is

1532
00:34:45,740 --> 00:34:45,750
replicas so the rest of the lecture is
 

1533
00:34:45,750 --> 00:34:47,690
replicas so the rest of the lecture is
gonna be explaining first quorums and

1534
00:34:47,690 --> 00:34:47,700
gonna be explaining first quorums and
 

1535
00:34:47,700 --> 00:34:49,669
gonna be explaining first quorums and
then log entries and then this idea of

1536
00:34:49,669 --> 00:34:49,679
then log entries and then this idea of
 

1537
00:34:49,679 --> 00:34:53,000
then log entries and then this idea of
just sending log entries basically table

1538
00:34:53,000 --> 00:34:53,010
just sending log entries basically table
 

1539
00:34:53,010 --> 00:34:54,559
just sending log entries basically table
one summarizes the result if you look at

1540
00:34:54,559 --> 00:34:54,569
one summarizes the result if you look at
 

1541
00:34:54,569 --> 00:34:56,839
one summarizes the result if you look at
table one by switching from this

1542
00:34:56,839 --> 00:34:56,849
table one by switching from this
 

1543
00:34:56,849 --> 00:34:58,790
table one by switching from this
architecture in which they send the big

1544
00:34:58,790 --> 00:34:58,800
architecture in which they send the big
 

1545
00:34:58,800 --> 00:35:02,960
architecture in which they send the big
data pages to four places to this Aurora

1546
00:35:02,960 --> 00:35:02,970
data pages to four places to this Aurora
 

1547
00:35:02,970 --> 00:35:04,790
data pages to four places to this Aurora
schema sending just the log entries to

1548
00:35:04,790 --> 00:35:04,800
schema sending just the log entries to
 

1549
00:35:04,800 --> 00:35:08,569
schema sending just the log entries to
six replicas they get a amazing 35 times

1550
00:35:08,569 --> 00:35:08,579
six replicas they get a amazing 35 times
 

1551
00:35:08,579 --> 00:35:11,660
six replicas they get a amazing 35 times
performance increase over some other

1552
00:35:11,660 --> 00:35:11,670
performance increase over some other
 

1553
00:35:11,670 --> 00:35:15,190
performance increase over some other
system you know this system over here

1554
00:35:15,190 --> 00:35:15,200
system you know this system over here
 

1555
00:35:15,200 --> 00:35:17,480
system you know this system over here
but by playing these two tricks and

1556
00:35:17,480 --> 00:35:17,490
but by playing these two tricks and
 

1557
00:35:17,490 --> 00:35:19,150
but by playing these two tricks and
paper is not very good about explaining

1558
00:35:19,150 --> 00:35:19,160
paper is not very good about explaining
 

1559
00:35:19,160 --> 00:35:21,290
paper is not very good about explaining
how much of the performance is due to

1560
00:35:21,290 --> 00:35:21,300
how much of the performance is due to
 

1561
00:35:21,300 --> 00:35:23,180
how much of the performance is due to
quorums and how much is due to just

1562
00:35:23,180 --> 00:35:23,190
quorums and how much is due to just
 

1563
00:35:23,190 --> 00:35:25,160
quorums and how much is due to just
sending log entries but anyway you slice

1564
00:35:25,160 --> 00:35:25,170
sending log entries but anyway you slice
 

1565
00:35:25,170 --> 00:35:27,240
sending log entries but anyway you slice
it 35

1566
00:35:27,240 --> 00:35:27,250
it 35
 

1567
00:35:27,250 --> 00:35:31,320
it 35
times improvement performance is very

1568
00:35:31,320 --> 00:35:31,330
times improvement performance is very
 

1569
00:35:31,330 --> 00:35:33,000
times improvement performance is very
respectable and of course extremely

1570
00:35:33,000 --> 00:35:33,010
respectable and of course extremely
 

1571
00:35:33,010 --> 00:35:34,650
respectable and of course extremely
valuable to their customers and to them

1572
00:35:34,650 --> 00:35:34,660
valuable to their customers and to them
 

1573
00:35:34,660 --> 00:35:37,650
valuable to their customers and to them
and it's like transformative I am sure

1574
00:35:37,650 --> 00:35:37,660
and it's like transformative I am sure
 

1575
00:35:37,660 --> 00:35:44,030
and it's like transformative I am sure
for many of Amazon's customers all right

1576
00:35:44,030 --> 00:35:44,040
for many of Amazon's customers all right
 

1577
00:35:44,040 --> 00:35:46,680
for many of Amazon's customers all right
okay so the first thing I want to talk

1578
00:35:46,680 --> 00:35:46,690
okay so the first thing I want to talk
 

1579
00:35:46,690 --> 00:35:50,580
okay so the first thing I want to talk
about in in detail is their quorum

1580
00:35:50,580 --> 00:35:50,590
about in in detail is their quorum
 

1581
00:35:50,590 --> 00:35:52,050
about in in detail is their quorum
arrangement what they actually mean by

1582
00:35:52,050 --> 00:35:52,060
arrangement what they actually mean by
 

1583
00:35:52,060 --> 00:35:55,170
arrangement what they actually mean by
quorums so first of all the quorums is

1584
00:35:55,170 --> 00:35:55,180
quorums so first of all the quorums is
 

1585
00:35:55,180 --> 00:35:57,300
quorums so first of all the quorums is
all about the arrangement of

1586
00:35:57,300 --> 00:35:57,310
all about the arrangement of
 

1587
00:35:57,310 --> 00:35:59,280
all about the arrangement of
fault-tolerant of this fault-tolerant

1588
00:35:59,280 --> 00:35:59,290
fault-tolerant of this fault-tolerant
 

1589
00:35:59,290 --> 00:36:03,600
fault-tolerant of this fault-tolerant
storage so it's worth thinking a little

1590
00:36:03,600 --> 00:36:03,610
storage so it's worth thinking a little
 

1591
00:36:03,610 --> 00:36:05,280
storage so it's worth thinking a little
bit about what their fault tolerance

1592
00:36:05,280 --> 00:36:05,290
bit about what their fault tolerance
 

1593
00:36:05,290 --> 00:36:09,750
bit about what their fault tolerance
goals were so this is like fault

1594
00:36:09,750 --> 00:36:09,760
goals were so this is like fault
 

1595
00:36:09,760 --> 00:36:15,810
goals were so this is like fault
tolerance goals they wanted to be able

1596
00:36:15,810 --> 00:36:15,820
tolerance goals they wanted to be able
 

1597
00:36:15,820 --> 00:36:18,960
tolerance goals they wanted to be able
to do rights even if one reads and

1598
00:36:18,960 --> 00:36:18,970
to do rights even if one reads and
 

1599
00:36:18,970 --> 00:36:21,750
to do rights even if one reads and
writes even if one availability zone was

1600
00:36:21,750 --> 00:36:21,760
writes even if one availability zone was
 

1601
00:36:21,760 --> 00:36:26,060
writes even if one availability zone was
completely dead so they're gonna write

1602
00:36:26,060 --> 00:36:26,070
completely dead so they're gonna write
 

1603
00:36:26,070 --> 00:36:37,980
completely dead so they're gonna write
you know even with they wanted to be

1604
00:36:37,980 --> 00:36:37,990
you know even with they wanted to be
 

1605
00:36:37,990 --> 00:36:40,770
you know even with they wanted to be
able to read even if there was one dead

1606
00:36:40,770 --> 00:36:40,780
able to read even if there was one dead
 

1607
00:36:40,780 --> 00:36:43,590
able to read even if there was one dead
availability zone plus one other dead

1608
00:36:43,590 --> 00:36:43,600
availability zone plus one other dead
 

1609
00:36:43,600 --> 00:36:46,920
availability zone plus one other dead
server and the reason for this is that

1610
00:36:46,920 --> 00:36:46,930
server and the reason for this is that
 

1611
00:36:46,930 --> 00:36:48,870
server and the reason for this is that
an availability zone might be offline

1612
00:36:48,870 --> 00:36:48,880
an availability zone might be offline
 

1613
00:36:48,880 --> 00:36:50,850
an availability zone might be offline
for quite a while because maybe it's you

1614
00:36:50,850 --> 00:36:50,860
for quite a while because maybe it's you
 

1615
00:36:50,860 --> 00:36:52,770
for quite a while because maybe it's you
know was suffered from a flood or

1616
00:36:52,770 --> 00:36:52,780
know was suffered from a flood or
 

1617
00:36:52,780 --> 00:36:54,960
know was suffered from a flood or
something and while it's down for a

1618
00:36:54,960 --> 00:36:54,970
something and while it's down for a
 

1619
00:36:54,970 --> 00:36:56,550
something and while it's down for a
couple of days or a week or something

1620
00:36:56,550 --> 00:36:56,560
couple of days or a week or something
 

1621
00:36:56,560 --> 00:36:58,410
couple of days or a week or something
well people prepare the damage from the

1622
00:36:58,410 --> 00:36:58,420
well people prepare the damage from the
 

1623
00:36:58,420 --> 00:37:00,690
well people prepare the damage from the
flood we're now reliant on just you know

1624
00:37:00,690 --> 00:37:00,700
flood we're now reliant on just you know
 

1625
00:37:00,700 --> 00:37:01,650
flood we're now reliant on just you know
the servers and the other two

1626
00:37:01,650 --> 00:37:01,660
the servers and the other two
 

1627
00:37:01,660 --> 00:37:03,540
the servers and the other two
availability zones if one of them should

1628
00:37:03,540 --> 00:37:03,550
availability zones if one of them should
 

1629
00:37:03,550 --> 00:37:05,820
availability zones if one of them should
go down we still we don't want it to be

1630
00:37:05,820 --> 00:37:05,830
go down we still we don't want it to be
 

1631
00:37:05,830 --> 00:37:09,240
go down we still we don't want it to be
a disaster so they're going to be able

1632
00:37:09,240 --> 00:37:09,250
a disaster so they're going to be able
 

1633
00:37:09,250 --> 00:37:11,070
a disaster so they're going to be able
to write with one even with one dead

1634
00:37:11,070 --> 00:37:11,080
to write with one even with one dead
 

1635
00:37:11,080 --> 00:37:13,080
to write with one even with one dead
availability zone they furthermore they

1636
00:37:13,080 --> 00:37:13,090
availability zone they furthermore they
 

1637
00:37:13,090 --> 00:37:16,740
availability zone they furthermore they
wanted to be able to read with one dead

1638
00:37:16,740 --> 00:37:16,750
wanted to be able to read with one dead
 

1639
00:37:16,750 --> 00:37:19,530
wanted to be able to read with one dead
availability zone plus one other dead

1640
00:37:19,530 --> 00:37:19,540
availability zone plus one other dead
 

1641
00:37:19,540 --> 00:37:20,970
availability zone plus one other dead
server so they wanted to be able to

1642
00:37:20,970 --> 00:37:20,980
server so they wanted to be able to
 

1643
00:37:20,980 --> 00:37:23,550
server so they wanted to be able to
still read you know and get the correct

1644
00:37:23,550 --> 00:37:23,560
still read you know and get the correct
 

1645
00:37:23,560 --> 00:37:26,490
still read you know and get the correct
data even if there was one dead

1646
00:37:26,490 --> 00:37:26,500
data even if there was one dead
 

1647
00:37:26,500 --> 00:37:28,500
data even if there was one dead
availability zone plus one other server

1648
00:37:28,500 --> 00:37:28,510
availability zone plus one other server
 

1649
00:37:28,510 --> 00:37:30,420
availability zone plus one other server
and the live availability zones were

1650
00:37:30,420 --> 00:37:30,430
and the live availability zones were
 

1651
00:37:30,430 --> 00:37:34,500
and the live availability zones were
dead so you know they we have to sort of

1652
00:37:34,500 --> 00:37:34,510
dead so you know they we have to sort of
 

1653
00:37:34,510 --> 00:37:36,450
dead so you know they we have to sort of
take take it for granted that they know

1654
00:37:36,450 --> 00:37:36,460
take take it for granted that they know
 

1655
00:37:36,460 --> 00:37:38,670
take take it for granted that they know
what their they know their own business

1656
00:37:38,670 --> 00:37:38,680
what their they know their own business
 

1657
00:37:38,680 --> 00:37:40,470
what their they know their own business
and that this is really

1658
00:37:40,470 --> 00:37:40,480
and that this is really
 

1659
00:37:40,480 --> 00:37:43,120
and that this is really
you know kind of a sweet spot for how

1660
00:37:43,120 --> 00:37:43,130
you know kind of a sweet spot for how
 

1661
00:37:43,130 --> 00:37:46,570
you know kind of a sweet spot for how
fault-tolerant you want to be um and in

1662
00:37:46,570 --> 00:37:46,580
fault-tolerant you want to be um and in
 

1663
00:37:46,580 --> 00:37:47,860
fault-tolerant you want to be um and in
addition I already mentioned they want

1664
00:37:47,860 --> 00:37:47,870
addition I already mentioned they want
 

1665
00:37:47,870 --> 00:37:49,630
addition I already mentioned they want
to be able to taller to sur ride out

1666
00:37:49,630 --> 00:37:49,640
to be able to taller to sur ride out
 

1667
00:37:49,640 --> 00:37:55,540
to be able to taller to sur ride out
temporarily slow replicas I think from a

1668
00:37:55,540 --> 00:37:55,550
temporarily slow replicas I think from a
 

1669
00:37:55,550 --> 00:37:58,930
temporarily slow replicas I think from a
lot of sources it's clear that the if

1670
00:37:58,930 --> 00:37:58,940
lot of sources it's clear that the if
 

1671
00:37:58,940 --> 00:38:01,090
lot of sources it's clear that the if
you read and write EBS for example you

1672
00:38:01,090 --> 00:38:01,100
you read and write EBS for example you
 

1673
00:38:01,100 --> 00:38:03,280
you read and write EBS for example you
don't get consistently high performance

1674
00:38:03,280 --> 00:38:03,290
don't get consistently high performance
 

1675
00:38:03,290 --> 00:38:04,600
don't get consistently high performance
all the time sometimes there's little

1676
00:38:04,600 --> 00:38:04,610
all the time sometimes there's little
 

1677
00:38:04,610 --> 00:38:06,310
all the time sometimes there's little
glitches because maybe some part of the

1678
00:38:06,310 --> 00:38:06,320
glitches because maybe some part of the
 

1679
00:38:06,320 --> 00:38:08,230
glitches because maybe some part of the
network is overloaded or something is

1680
00:38:08,230 --> 00:38:08,240
network is overloaded or something is
 

1681
00:38:08,240 --> 00:38:10,780
network is overloaded or something is
doing a software upgrade or whatever and

1682
00:38:10,780 --> 00:38:10,790
doing a software upgrade or whatever and
 

1683
00:38:10,790 --> 00:38:13,510
doing a software upgrade or whatever and
it's temporarily slow so they want to be

1684
00:38:13,510 --> 00:38:13,520
it's temporarily slow so they want to be
 

1685
00:38:13,520 --> 00:38:15,340
it's temporarily slow so they want to be
able to just keep going despite

1686
00:38:15,340 --> 00:38:15,350
able to just keep going despite
 

1687
00:38:15,350 --> 00:38:21,340
able to just keep going despite
transient transiently slow or maybe

1688
00:38:21,340 --> 00:38:21,350
transient transiently slow or maybe
 

1689
00:38:21,350 --> 00:38:27,760
transient transiently slow or maybe
briefly unavailable storage servers and

1690
00:38:27,760 --> 00:38:27,770
briefly unavailable storage servers and
 

1691
00:38:27,770 --> 00:38:30,220
briefly unavailable storage servers and
a final requirement is that if something

1692
00:38:30,220 --> 00:38:30,230
a final requirement is that if something
 

1693
00:38:30,230 --> 00:38:33,790
a final requirement is that if something
if a storage server should fail it's a

1694
00:38:33,790 --> 00:38:33,800
if a storage server should fail it's a
 

1695
00:38:33,800 --> 00:38:36,220
if a storage server should fail it's a
bit of a race against time before the

1696
00:38:36,220 --> 00:38:36,230
bit of a race against time before the
 

1697
00:38:36,230 --> 00:38:39,010
bit of a race against time before the
next storage server fails sort of always

1698
00:38:39,010 --> 00:38:39,020
next storage server fails sort of always
 

1699
00:38:39,020 --> 00:38:42,910
next storage server fails sort of always
the case and it's not the statistics are

1700
00:38:42,910 --> 00:38:42,920
the case and it's not the statistics are
 

1701
00:38:42,920 --> 00:38:44,440
the case and it's not the statistics are
not as favorable as you might hope

1702
00:38:44,440 --> 00:38:44,450
not as favorable as you might hope
 

1703
00:38:44,450 --> 00:38:47,260
not as favorable as you might hope
because typically you buy basically

1704
00:38:47,260 --> 00:38:47,270
because typically you buy basically
 

1705
00:38:47,270 --> 00:38:50,650
because typically you buy basically
because server failure is often not

1706
00:38:50,650 --> 00:38:50,660
because server failure is often not
 

1707
00:38:50,660 --> 00:38:52,990
because server failure is often not
independent like the fact that one

1708
00:38:52,990 --> 00:38:53,000
independent like the fact that one
 

1709
00:38:53,000 --> 00:38:56,710
independent like the fact that one
server is down often means that there's

1710
00:38:56,710 --> 00:38:56,720
server is down often means that there's
 

1711
00:38:56,720 --> 00:38:58,330
server is down often means that there's
a much increased probability that

1712
00:38:58,330 --> 00:38:58,340
a much increased probability that
 

1713
00:38:58,340 --> 00:39:00,400
a much increased probability that
another one of your servers will soon go

1714
00:39:00,400 --> 00:39:00,410
another one of your servers will soon go
 

1715
00:39:00,410 --> 00:39:03,310
another one of your servers will soon go
down because it's identical Hardware may

1716
00:39:03,310 --> 00:39:03,320
down because it's identical Hardware may
 

1717
00:39:03,320 --> 00:39:05,530
down because it's identical Hardware may
be bought from the same company came off

1718
00:39:05,530 --> 00:39:05,540
be bought from the same company came off
 

1719
00:39:05,540 --> 00:39:07,510
be bought from the same company came off
the same production line one after

1720
00:39:07,510 --> 00:39:07,520
the same production line one after
 

1721
00:39:07,520 --> 00:39:09,640
the same production line one after
another and so a flaw and one of them is

1722
00:39:09,640 --> 00:39:09,650
another and so a flaw and one of them is
 

1723
00:39:09,650 --> 00:39:11,710
another and so a flaw and one of them is
extremely likely to be reflected in a

1724
00:39:11,710 --> 00:39:11,720
extremely likely to be reflected in a
 

1725
00:39:11,720 --> 00:39:14,560
extremely likely to be reflected in a
flaw and another one so people always

1726
00:39:14,560 --> 00:39:14,570
flaw and another one so people always
 

1727
00:39:14,570 --> 00:39:16,090
flaw and another one so people always
nervous off there's one failure boy

1728
00:39:16,090 --> 00:39:16,100
nervous off there's one failure boy
 

1729
00:39:16,100 --> 00:39:17,320
nervous off there's one failure boy
there could be a second failure very

1730
00:39:17,320 --> 00:39:17,330
there could be a second failure very
 

1731
00:39:17,330 --> 00:39:21,490
there could be a second failure very
soon and in a system like this well it

1732
00:39:21,490 --> 00:39:21,500
soon and in a system like this well it
 

1733
00:39:21,500 --> 00:39:24,460
soon and in a system like this well it
turns out in these quorum systems you

1734
00:39:24,460 --> 00:39:24,470
turns out in these quorum systems you
 

1735
00:39:24,470 --> 00:39:26,020
turns out in these quorum systems you
know you can only recover it's a little

1736
00:39:26,020 --> 00:39:26,030
know you can only recover it's a little
 

1737
00:39:26,030 --> 00:39:28,150
know you can only recover it's a little
bit like raft you can recover as long as

1738
00:39:28,150 --> 00:39:28,160
bit like raft you can recover as long as
 

1739
00:39:28,160 --> 00:39:31,450
bit like raft you can recover as long as
not too many of the replicas fail so

1740
00:39:31,450 --> 00:39:31,460
not too many of the replicas fail so
 

1741
00:39:31,460 --> 00:39:35,260
not too many of the replicas fail so
they really needed to have fast we

1742
00:39:35,260 --> 00:39:35,270
they really needed to have fast we
 

1743
00:39:35,270 --> 00:39:37,120
they really needed to have fast we
replicate them that is of one server

1744
00:39:37,120 --> 00:39:37,130
replicate them that is of one server
 

1745
00:39:37,130 --> 00:39:38,860
replicate them that is of one server
seems permanently dead we'd like to be

1746
00:39:38,860 --> 00:39:38,870
seems permanently dead we'd like to be
 

1747
00:39:38,870 --> 00:39:41,170
seems permanently dead we'd like to be
able to generate a new replica as fast

1748
00:39:41,170 --> 00:39:41,180
able to generate a new replica as fast
 

1749
00:39:41,180 --> 00:39:43,150
able to generate a new replica as fast
as possible from the remaining replicas

1750
00:39:43,150 --> 00:39:43,160
as possible from the remaining replicas
 

1751
00:39:43,160 --> 00:39:48,029
as possible from the remaining replicas
I mean a fast food replication

1752
00:39:48,029 --> 00:39:48,039

 

1753
00:39:48,039 --> 00:39:50,289

these are the main fault tolerance goals

1754
00:39:50,289 --> 00:39:50,299
these are the main fault tolerance goals
 

1755
00:39:50,299 --> 00:39:56,079
these are the main fault tolerance goals
the peeper lays out and by the way this

1756
00:39:56,079 --> 00:39:56,089
the peeper lays out and by the way this
 

1757
00:39:56,089 --> 00:39:57,849
the peeper lays out and by the way this
discussion is only about the storage

1758
00:39:57,849 --> 00:39:57,859
discussion is only about the storage
 

1759
00:39:57,859 --> 00:40:00,130
discussion is only about the storage
servers and you know what their failure

1760
00:40:00,130 --> 00:40:00,140
servers and you know what their failure
 

1761
00:40:00,140 --> 00:40:01,420
servers and you know what their failure
character is too excited you know the

1762
00:40:01,420 --> 00:40:01,430
character is too excited you know the
 

1763
00:40:01,430 --> 00:40:03,579
character is too excited you know the
failures how to recover and it's a

1764
00:40:03,579 --> 00:40:03,589
failures how to recover and it's a
 

1765
00:40:03,589 --> 00:40:05,380
failures how to recover and it's a
completely separate topic what to do if

1766
00:40:05,380 --> 00:40:05,390
completely separate topic what to do if
 

1767
00:40:05,390 --> 00:40:10,029
completely separate topic what to do if
the database server fails and Aurora has

1768
00:40:10,029 --> 00:40:10,039
the database server fails and Aurora has
 

1769
00:40:10,039 --> 00:40:17,069
the database server fails and Aurora has
a totally different set of machinery for

1770
00:40:17,069 --> 00:40:17,079
a totally different set of machinery for
 

1771
00:40:17,079 --> 00:40:18,999
a totally different set of machinery for
noticing a database servers fail

1772
00:40:18,999 --> 00:40:19,009
noticing a database servers fail
 

1773
00:40:19,009 --> 00:40:20,979
noticing a database servers fail
creating a new instance running in a new

1774
00:40:20,979 --> 00:40:20,989
creating a new instance running in a new
 

1775
00:40:20,989 --> 00:40:22,390
creating a new instance running in a new
database server on the new instance

1776
00:40:22,390 --> 00:40:22,400
database server on the new instance
 

1777
00:40:22,400 --> 00:40:24,370
database server on the new instance
which is intense it's not what I'm

1778
00:40:24,370 --> 00:40:24,380
which is intense it's not what I'm
 

1779
00:40:24,380 --> 00:40:25,420
which is intense it's not what I'm
talking about right now we'll talk about

1780
00:40:25,420 --> 00:40:25,430
talking about right now we'll talk about
 

1781
00:40:25,430 --> 00:40:27,249
talking about right now we'll talk about
it a little bit later on right now it's

1782
00:40:27,249 --> 00:40:27,259
it a little bit later on right now it's
 

1783
00:40:27,259 --> 00:40:29,469
it a little bit later on right now it's
just gonna build a storage system that's

1784
00:40:29,469 --> 00:40:29,479
just gonna build a storage system that's
 

1785
00:40:29,479 --> 00:40:32,079
just gonna build a storage system that's
a lot that's where the storage system is

1786
00:40:32,079 --> 00:40:32,089
a lot that's where the storage system is
 

1787
00:40:32,089 --> 00:40:36,579
a lot that's where the storage system is
fault tolerant okay so they use this

1788
00:40:36,579 --> 00:40:36,589
fault tolerant okay so they use this
 

1789
00:40:36,589 --> 00:40:43,930
fault tolerant okay so they use this
idea called quorums and for a little

1790
00:40:43,930 --> 00:40:43,940
idea called quorums and for a little
 

1791
00:40:43,940 --> 00:40:45,880
idea called quorums and for a little
while now I'm going to describe the sort

1792
00:40:45,880 --> 00:40:45,890
while now I'm going to describe the sort
 

1793
00:40:45,890 --> 00:40:49,029
while now I'm going to describe the sort
of classic quorum idea which is dates

1794
00:40:49,029 --> 00:40:49,039
of classic quorum idea which is dates
 

1795
00:40:49,039 --> 00:40:52,930
of classic quorum idea which is dates
back to the late 70s so this is quorum

1796
00:40:52,930 --> 00:40:52,940
back to the late 70s so this is quorum
 

1797
00:40:52,940 --> 00:40:57,519
back to the late 70s so this is quorum
replicate quorum replication I'm gonna

1798
00:40:57,519 --> 00:40:57,529
replicate quorum replication I'm gonna
 

1799
00:40:57,529 --> 00:40:59,079
replicate quorum replication I'm gonna
describe to you this or abstract quorum

1800
00:40:59,079 --> 00:40:59,089
describe to you this or abstract quorum
 

1801
00:40:59,089 --> 00:41:02,049
describe to you this or abstract quorum
idea they use a variant of what I'm

1802
00:41:02,049 --> 00:41:02,059
idea they use a variant of what I'm
 

1803
00:41:02,059 --> 00:41:05,289
idea they use a variant of what I'm
gonna explain and the idea of behind

1804
00:41:05,289 --> 00:41:05,299
gonna explain and the idea of behind
 

1805
00:41:05,299 --> 00:41:07,329
gonna explain and the idea of behind
quorum quorum systems is to be able to

1806
00:41:07,329 --> 00:41:07,339
quorum quorum systems is to be able to
 

1807
00:41:07,339 --> 00:41:10,809
quorum quorum systems is to be able to
build storage systems that provide fault

1808
00:41:10,809 --> 00:41:10,819
build storage systems that provide fault
 

1809
00:41:10,819 --> 00:41:13,079
build storage systems that provide fault
tolerance storage using replications and

1810
00:41:13,079 --> 00:41:13,089
tolerance storage using replications and
 

1811
00:41:13,089 --> 00:41:15,219
tolerance storage using replications and
guarantee that even if some of the

1812
00:41:15,219 --> 00:41:15,229
guarantee that even if some of the
 

1813
00:41:15,229 --> 00:41:18,099
guarantee that even if some of the
replicas fail your that reads will still

1814
00:41:18,099 --> 00:41:18,109
replicas fail your that reads will still
 

1815
00:41:18,109 --> 00:41:22,420
replicas fail your that reads will still
see the most recent writes and typically

1816
00:41:22,420 --> 00:41:22,430
see the most recent writes and typically
 

1817
00:41:22,430 --> 00:41:25,420
see the most recent writes and typically
quorum systems are sort of simple

1818
00:41:25,420 --> 00:41:25,430
quorum systems are sort of simple
 

1819
00:41:25,430 --> 00:41:28,209
quorum systems are sort of simple
readwrite systems put get systems and

1820
00:41:28,209 --> 00:41:28,219
readwrite systems put get systems and
 

1821
00:41:28,219 --> 00:41:30,999
readwrite systems put get systems and
they don't typically directly support

1822
00:41:30,999 --> 00:41:31,009
they don't typically directly support
 

1823
00:41:31,009 --> 00:41:33,130
they don't typically directly support
more complex operations just you can

1824
00:41:33,130 --> 00:41:33,140
more complex operations just you can
 

1825
00:41:33,140 --> 00:41:34,839
more complex operations just you can
read you could have objects you can read

1826
00:41:34,839 --> 00:41:34,849
read you could have objects you can read
 

1827
00:41:34,849 --> 00:41:36,339
read you could have objects you can read
an object or you can overwrite an entire

1828
00:41:36,339 --> 00:41:36,349
an object or you can overwrite an entire
 

1829
00:41:36,349 --> 00:41:38,349
an object or you can overwrite an entire
object and so the idea is you have n

1830
00:41:38,349 --> 00:41:38,359
object and so the idea is you have n
 

1831
00:41:38,359 --> 00:41:48,249
object and so the idea is you have n
replicas if you want to write or you

1832
00:41:48,249 --> 00:41:48,259
replicas if you want to write or you
 

1833
00:41:48,259 --> 00:41:49,689
replicas if you want to write or you
have to get you have to in order to

1834
00:41:49,689 --> 00:41:49,699
have to get you have to in order to
 

1835
00:41:49,699 --> 00:41:51,130
have to get you have to in order to
write you have to make sure your write

1836
00:41:51,130 --> 00:41:51,140
write you have to make sure your write
 

1837
00:41:51,140 --> 00:41:53,920
write you have to make sure your write
is acknowledged by W where W is less

1838
00:41:53,920 --> 00:41:53,930
is acknowledged by W where W is less
 

1839
00:41:53,930 --> 00:41:58,690
is acknowledged by W where W is less
than n of the replicas so W

1840
00:41:58,690 --> 00:41:58,700
than n of the replicas so W
 

1841
00:41:58,700 --> 00:42:02,350
than n of the replicas so W
right you have to send each right to

1842
00:42:02,350 --> 00:42:02,360
right you have to send each right to
 

1843
00:42:02,360 --> 00:42:04,510
right you have to send each right to
these W are the replicas and if you want

1844
00:42:04,510 --> 00:42:04,520
these W are the replicas and if you want
 

1845
00:42:04,520 --> 00:42:07,540
these W are the replicas and if you want
to do a read you have to get input read

1846
00:42:07,540 --> 00:42:07,550
to do a read you have to get input read
 

1847
00:42:07,550 --> 00:42:14,940
to do a read you have to get input read
information from at least our replicas

1848
00:42:14,940 --> 00:42:14,950

 

1849
00:42:14,950 --> 00:42:20,230

and so a typical setup that's so well

1850
00:42:20,230 --> 00:42:20,240
and so a typical setup that's so well
 

1851
00:42:20,240 --> 00:42:23,950
and so a typical setup that's so well
first of all the key thing here is that

1852
00:42:23,950 --> 00:42:23,960
first of all the key thing here is that
 

1853
00:42:23,960 --> 00:42:27,610
first of all the key thing here is that
W and our have to be set relative to end

1854
00:42:27,610 --> 00:42:27,620
W and our have to be set relative to end
 

1855
00:42:27,620 --> 00:42:31,060
W and our have to be set relative to end
so that any quorum of W servers that you

1856
00:42:31,060 --> 00:42:31,070
so that any quorum of W servers that you
 

1857
00:42:31,070 --> 00:42:33,370
so that any quorum of W servers that you
manage to send a right to must

1858
00:42:33,370 --> 00:42:33,380
manage to send a right to must
 

1859
00:42:33,380 --> 00:42:36,250
manage to send a right to must
necessarily overlap with any quorum of

1860
00:42:36,250 --> 00:42:36,260
necessarily overlap with any quorum of
 

1861
00:42:36,260 --> 00:42:38,890
necessarily overlap with any quorum of
our servers that any future reader might

1862
00:42:38,890 --> 00:42:38,900
our servers that any future reader might
 

1863
00:42:38,900 --> 00:42:42,120
our servers that any future reader might
read from and so what that means is that

1864
00:42:42,120 --> 00:42:42,130
read from and so what that means is that
 

1865
00:42:42,130 --> 00:42:50,020
read from and so what that means is that
our plus W has to be greater than n so

1866
00:42:50,020 --> 00:42:50,030
our plus W has to be greater than n so
 

1867
00:42:50,030 --> 00:42:52,960
our plus W has to be greater than n so
that any W servers must overlap in at

1868
00:42:52,960 --> 00:42:52,970
that any W servers must overlap in at
 

1869
00:42:52,970 --> 00:42:58,920
that any W servers must overlap in at
least one server with any our servers

1870
00:42:58,920 --> 00:42:58,930
least one server with any our servers
 

1871
00:42:58,930 --> 00:43:01,360
least one server with any our servers
and so you might have three we can

1872
00:43:01,360 --> 00:43:01,370
and so you might have three we can
 

1873
00:43:01,370 --> 00:43:05,880
and so you might have three we can
imagine there's three servers s1 s2 s3

1874
00:43:05,880 --> 00:43:05,890
imagine there's three servers s1 s2 s3
 

1875
00:43:05,890 --> 00:43:08,050
imagine there's three servers s1 s2 s3
each of them holds I say we just have

1876
00:43:08,050 --> 00:43:08,060
each of them holds I say we just have
 

1877
00:43:08,060 --> 00:43:10,120
each of them holds I say we just have
one object that we're updating we send

1878
00:43:10,120 --> 00:43:10,130
one object that we're updating we send
 

1879
00:43:10,130 --> 00:43:11,590
one object that we're updating we send
out a write maybe we want to set the

1880
00:43:11,590 --> 00:43:11,600
out a write maybe we want to set the
 

1881
00:43:11,600 --> 00:43:15,820
out a write maybe we want to set the
value of our object to 23 well in order

1882
00:43:15,820 --> 00:43:15,830
value of our object to 23 well in order
 

1883
00:43:15,830 --> 00:43:17,350
value of our object to 23 well in order
to do a write we need to get our new

1884
00:43:17,350 --> 00:43:17,360
to do a write we need to get our new
 

1885
00:43:17,360 --> 00:43:22,510
to do a write we need to get our new
value on to at least W of the of the

1886
00:43:22,510 --> 00:43:22,520
value on to at least W of the of the
 

1887
00:43:22,520 --> 00:43:24,790
value on to at least W of the of the
replicas let's say for this system that

1888
00:43:24,790 --> 00:43:24,800
replicas let's say for this system that
 

1889
00:43:24,800 --> 00:43:29,290
replicas let's say for this system that
R and W are both equals 2 and n is equal

1890
00:43:29,290 --> 00:43:29,300
R and W are both equals 2 and n is equal
 

1891
00:43:29,300 --> 00:43:32,410
R and W are both equals 2 and n is equal
to 3 that's the setup to do a write we

1892
00:43:32,410 --> 00:43:32,420
to 3 that's the setup to do a write we
 

1893
00:43:32,420 --> 00:43:35,170
to 3 that's the setup to do a write we
need to get our new value onto a quorum

1894
00:43:35,170 --> 00:43:35,180
need to get our new value onto a quorum
 

1895
00:43:35,180 --> 00:43:38,020
need to get our new value onto a quorum
onto a beast to the server so maybe we

1896
00:43:38,020 --> 00:43:38,030
onto a beast to the server so maybe we
 

1897
00:43:38,030 --> 00:43:40,750
onto a beast to the server so maybe we
get our right onto these two so they

1898
00:43:40,750 --> 00:43:40,760
get our right onto these two so they
 

1899
00:43:40,760 --> 00:43:43,270
get our right onto these two so they
both now know that the value of the of

1900
00:43:43,270 --> 00:43:43,280
both now know that the value of the of
 

1901
00:43:43,280 --> 00:43:47,740
both now know that the value of the of
our data object is 23 if somebody comes

1902
00:43:47,740 --> 00:43:47,750
our data object is 23 if somebody comes
 

1903
00:43:47,750 --> 00:43:51,130
our data object is 23 if somebody comes
along and reads or read it also requires

1904
00:43:51,130 --> 00:43:51,140
along and reads or read it also requires
 

1905
00:43:51,140 --> 00:43:53,140
along and reads or read it also requires
that the reader check with at least a

1906
00:43:53,140 --> 00:43:53,150
that the reader check with at least a
 

1907
00:43:53,150 --> 00:43:55,690
that the reader check with at least a
read quorum of the servers so that's

1908
00:43:55,690 --> 00:43:55,700
read quorum of the servers so that's
 

1909
00:43:55,700 --> 00:43:58,810
read quorum of the servers so that's
also 2 in this set up so you know that

1910
00:43:58,810 --> 00:43:58,820
also 2 in this set up so you know that
 

1911
00:43:58,820 --> 00:44:00,640
also 2 in this set up so you know that
quorum could include a server that

1912
00:44:00,640 --> 00:44:00,650
quorum could include a server that
 

1913
00:44:00,650 --> 00:44:02,500
quorum could include a server that
didn't see the right but it has to

1914
00:44:02,500 --> 00:44:02,510
didn't see the right but it has to
 

1915
00:44:02,510 --> 00:44:03,820
didn't see the right but it has to
include at least one other in order to

1916
00:44:03,820 --> 00:44:03,830
include at least one other in order to
 

1917
00:44:03,830 --> 00:44:07,480
include at least one other in order to
get to so that means the any future read

1918
00:44:07,480 --> 00:44:07,490
get to so that means the any future read
 

1919
00:44:07,490 --> 00:44:09,490
get to so that means the any future read
must for example consult both this

1920
00:44:09,490 --> 00:44:09,500
must for example consult both this
 

1921
00:44:09,500 --> 00:44:11,260
must for example consult both this
server that didn't see the write plus at

1922
00:44:11,260 --> 00:44:11,270
server that didn't see the write plus at
 

1923
00:44:11,270 --> 00:44:12,370
server that didn't see the write plus at
least one that did

1924
00:44:12,370 --> 00:44:12,380
least one that did
 

1925
00:44:12,380 --> 00:44:14,589
least one that did
that is a requirement of right form must

1926
00:44:14,589 --> 00:44:14,599
that is a requirement of right form must
 

1927
00:44:14,599 --> 00:44:17,349
that is a requirement of right form must
overlap in at least one server so any

1928
00:44:17,349 --> 00:44:17,359
overlap in at least one server so any
 

1929
00:44:17,359 --> 00:44:20,499
overlap in at least one server so any
read must consult a server that saw any

1930
00:44:20,499 --> 00:44:20,509
read must consult a server that saw any
 

1931
00:44:20,509 --> 00:44:31,509
read must consult a server that saw any
previous right now what's cool about

1932
00:44:31,509 --> 00:44:31,519
previous right now what's cool about
 

1933
00:44:31,519 --> 00:44:34,420
previous right now what's cool about
this well actually there's still one

1934
00:44:34,420 --> 00:44:34,430
this well actually there's still one
 

1935
00:44:34,430 --> 00:44:38,140
this well actually there's still one
critical missing piece here the reader

1936
00:44:38,140 --> 00:44:38,150
critical missing piece here the reader
 

1937
00:44:38,150 --> 00:44:41,019
critical missing piece here the reader
is gonna get back our results possibly

1938
00:44:41,019 --> 00:44:41,029
is gonna get back our results possibly
 

1939
00:44:41,029 --> 00:44:44,349
is gonna get back our results possibly
are different results because and the

1940
00:44:44,349 --> 00:44:44,359
are different results because and the
 

1941
00:44:44,359 --> 00:44:46,660
are different results because and the
question is how does a reader know which

1942
00:44:46,660 --> 00:44:46,670
question is how does a reader know which
 

1943
00:44:46,670 --> 00:44:48,670
question is how does a reader know which
of the our results it got back from the

1944
00:44:48,670 --> 00:44:48,680
of the our results it got back from the
 

1945
00:44:48,680 --> 00:44:51,039
of the our results it got back from the
our servers in its forum which one

1946
00:44:51,039 --> 00:44:51,049
our servers in its forum which one
 

1947
00:44:51,049 --> 00:44:55,019
our servers in its forum which one
actually uses the correct value

1948
00:44:55,019 --> 00:44:55,029

 

1949
00:44:55,029 --> 00:44:57,069

something that doesn't work is voting

1950
00:44:57,069 --> 00:44:57,079
something that doesn't work is voting
 

1951
00:44:57,079 --> 00:44:59,710
something that doesn't work is voting
like just voting by popularity of the

1952
00:44:59,710 --> 00:44:59,720
like just voting by popularity of the
 

1953
00:44:59,720 --> 00:45:01,660
like just voting by popularity of the
different values it gets back it turns

1954
00:45:01,660 --> 00:45:01,670
different values it gets back it turns
 

1955
00:45:01,670 --> 00:45:03,609
different values it gets back it turns
out not to work because we're only

1956
00:45:03,609 --> 00:45:03,619
out not to work because we're only
 

1957
00:45:03,619 --> 00:45:05,620
out not to work because we're only
guaranteed that our reader overlaps of

1958
00:45:05,620 --> 00:45:05,630
guaranteed that our reader overlaps of
 

1959
00:45:05,630 --> 00:45:07,390
guaranteed that our reader overlaps of
the writer in at most one server so that

1960
00:45:07,390 --> 00:45:07,400
the writer in at most one server so that
 

1961
00:45:07,400 --> 00:45:09,609
the writer in at most one server so that
could mean that the correct value is

1962
00:45:09,609 --> 00:45:09,619
could mean that the correct value is
 

1963
00:45:09,619 --> 00:45:11,410
could mean that the correct value is
only represented by one of the servers

1964
00:45:11,410 --> 00:45:11,420
only represented by one of the servers
 

1965
00:45:11,420 --> 00:45:15,579
only represented by one of the servers
that the reader consulted and you know

1966
00:45:15,579 --> 00:45:15,589
that the reader consulted and you know
 

1967
00:45:15,589 --> 00:45:17,499
that the reader consulted and you know
in a system with say six replicas you

1968
00:45:17,499 --> 00:45:17,509
in a system with say six replicas you
 

1969
00:45:17,509 --> 00:45:19,809
in a system with say six replicas you
know you might have Reaper might be four

1970
00:45:19,809 --> 00:45:19,819
know you might have Reaper might be four
 

1971
00:45:19,819 --> 00:45:23,380
know you might have Reaper might be four
you might get back for answers and only

1972
00:45:23,380 --> 00:45:23,390
you might get back for answers and only
 

1973
00:45:23,390 --> 00:45:26,769
you might get back for answers and only
one of them is the answer that is the

1974
00:45:26,769 --> 00:45:26,779
one of them is the answer that is the
 

1975
00:45:26,779 --> 00:45:28,990
one of them is the answer that is the
correct answer from the server in which

1976
00:45:28,990 --> 00:45:29,000
correct answer from the server in which
 

1977
00:45:29,000 --> 00:45:31,509
correct answer from the server in which
you overlap with the previous right so

1978
00:45:31,509 --> 00:45:31,519
you overlap with the previous right so
 

1979
00:45:31,519 --> 00:45:33,069
you overlap with the previous right so
you can't use voting and instead these

1980
00:45:33,069 --> 00:45:33,079
you can't use voting and instead these
 

1981
00:45:33,079 --> 00:45:35,740
you can't use voting and instead these
quorum systems need version numbers so

1982
00:45:35,740 --> 00:45:35,750
quorum systems need version numbers so
 

1983
00:45:35,750 --> 00:45:38,499
quorum systems need version numbers so
every right every time you do a right

1984
00:45:38,499 --> 00:45:38,509
every right every time you do a right
 

1985
00:45:38,509 --> 00:45:40,480
every right every time you do a right
you need to accompany your new value

1986
00:45:40,480 --> 00:45:40,490
you need to accompany your new value
 

1987
00:45:40,490 --> 00:45:42,849
you need to accompany your new value
with you know an increasing version

1988
00:45:42,849 --> 00:45:42,859
with you know an increasing version
 

1989
00:45:42,859 --> 00:45:45,670
with you know an increasing version
number and then the reader it gets back

1990
00:45:45,670 --> 00:45:45,680
number and then the reader it gets back
 

1991
00:45:45,680 --> 00:45:47,019
number and then the reader it gets back
a bunch of different values from the

1992
00:45:47,019 --> 00:45:47,029
a bunch of different values from the
 

1993
00:45:47,029 --> 00:45:48,609
a bunch of different values from the
read quorum and it can just use them

1994
00:45:48,609 --> 00:45:48,619
read quorum and it can just use them
 

1995
00:45:48,619 --> 00:45:51,309
read quorum and it can just use them
only the highest version number I'm said

1996
00:45:51,309 --> 00:45:51,319
only the highest version number I'm said
 

1997
00:45:51,319 --> 00:45:53,380
only the highest version number I'm said
that means that this 21 here

1998
00:45:53,380 --> 00:45:53,390
that means that this 21 here
 

1999
00:45:53,390 --> 00:45:57,779
that means that this 21 here
you know maybe s2 had a old value of 20

2000
00:45:57,779 --> 00:45:57,789
you know maybe s2 had a old value of 20
 

2001
00:45:57,789 --> 00:45:59,859
you know maybe s2 had a old value of 20
each of these needs to be tagged with a

2002
00:45:59,859 --> 00:45:59,869
each of these needs to be tagged with a
 

2003
00:45:59,869 --> 00:46:01,480
each of these needs to be tagged with a
version number so maybe this is version

2004
00:46:01,480 --> 00:46:01,490
version number so maybe this is version
 

2005
00:46:01,490 --> 00:46:03,370
version number so maybe this is version
number three this was also version

2006
00:46:03,370 --> 00:46:03,380
number three this was also version
 

2007
00:46:03,380 --> 00:46:04,599
number three this was also version
number three because it came from the

2008
00:46:04,599 --> 00:46:04,609
number three because it came from the
 

2009
00:46:04,609 --> 00:46:06,700
number three because it came from the
same original right and we're imagining

2010
00:46:06,700 --> 00:46:06,710
same original right and we're imagining
 

2011
00:46:06,710 --> 00:46:08,470
same original right and we're imagining
that this server that didn't see the

2012
00:46:08,470 --> 00:46:08,480
that this server that didn't see the
 

2013
00:46:08,480 --> 00:46:09,970
that this server that didn't see the
right is gonna have version number two

2014
00:46:09,970 --> 00:46:09,980
right is gonna have version number two
 

2015
00:46:09,980 --> 00:46:11,440
right is gonna have version number two
then the reader gets back these two

2016
00:46:11,440 --> 00:46:11,450
then the reader gets back these two
 

2017
00:46:11,450 --> 00:46:13,509
then the reader gets back these two
values these two version numbers fix the

2018
00:46:13,509 --> 00:46:13,519
values these two version numbers fix the
 

2019
00:46:13,519 --> 00:46:15,039
values these two version numbers fix the
version were the highest the value with

2020
00:46:15,039 --> 00:46:15,049
version were the highest the value with
 

2021
00:46:15,049 --> 00:46:18,009
version were the highest the value with
the highest version number and in Aurora

2022
00:46:18,009 --> 00:46:18,019
the highest version number and in Aurora
 

2023
00:46:18,019 --> 00:46:23,470
the highest version number and in Aurora
this was essentially about well never

2024
00:46:23,470 --> 00:46:23,480
this was essentially about well never
 

2025
00:46:23,480 --> 00:46:28,560
this was essentially about well never
mind about Aurora for a moment

2026
00:46:28,560 --> 00:46:28,570

 

2027
00:46:28,570 --> 00:46:33,340

okay furthermore if you can't talk to if

2028
00:46:33,340 --> 00:46:33,350
okay furthermore if you can't talk to if
 

2029
00:46:33,350 --> 00:46:35,710
okay furthermore if you can't talk to if
you can't actually contact a quorum or a

2030
00:46:35,710 --> 00:46:35,720
you can't actually contact a quorum or a
 

2031
00:46:35,720 --> 00:46:37,480
you can't actually contact a quorum or a
read or write you really just have to

2032
00:46:37,480 --> 00:46:37,490
read or write you really just have to
 

2033
00:46:37,490 --> 00:46:40,990
read or write you really just have to
keep trying those are the rules so keep

2034
00:46:40,990 --> 00:46:41,000
keep trying those are the rules so keep
 

2035
00:46:41,000 --> 00:46:45,190
keep trying those are the rules so keep
trying until the server's are brought

2036
00:46:45,190 --> 00:46:45,200
trying until the server's are brought
 

2037
00:46:45,200 --> 00:46:49,360
trying until the server's are brought
back up or connected again so the reason

2038
00:46:49,360 --> 00:46:49,370
back up or connected again so the reason
 

2039
00:46:49,370 --> 00:46:51,250
back up or connected again so the reason
why this is preferable to something like

2040
00:46:51,250 --> 00:46:51,260
why this is preferable to something like
 

2041
00:46:51,260 --> 00:46:54,520
why this is preferable to something like
chain replication is that it can easily

2042
00:46:54,520 --> 00:46:54,530
chain replication is that it can easily
 

2043
00:46:54,530 --> 00:46:59,860
chain replication is that it can easily
ride out temporary dead or disconnected

2044
00:46:59,860 --> 00:46:59,870
ride out temporary dead or disconnected
 

2045
00:46:59,870 --> 00:47:01,660
ride out temporary dead or disconnected
or slow servers so in fact the way it

2046
00:47:01,660 --> 00:47:01,670
or slow servers so in fact the way it
 

2047
00:47:01,670 --> 00:47:02,890
or slow servers so in fact the way it
would work is that if you want to read

2048
00:47:02,890 --> 00:47:02,900
would work is that if you want to read
 

2049
00:47:02,900 --> 00:47:04,780
would work is that if you want to read
or write if you want to write you would

2050
00:47:04,780 --> 00:47:04,790
or write if you want to write you would
 

2051
00:47:04,790 --> 00:47:06,010
or write if you want to write you would
saying your newly written about you

2052
00:47:06,010 --> 00:47:06,020
saying your newly written about you
 

2053
00:47:06,020 --> 00:47:08,770
saying your newly written about you
would send the newly written value plus

2054
00:47:08,770 --> 00:47:08,780
would send the newly written value plus
 

2055
00:47:08,780 --> 00:47:11,230
would send the newly written value plus
its version number to all of the servers

2056
00:47:11,230 --> 00:47:11,240
its version number to all of the servers
 

2057
00:47:11,240 --> 00:47:13,420
its version number to all of the servers
to all n of the servers but only wait

2058
00:47:13,420 --> 00:47:13,430
to all n of the servers but only wait
 

2059
00:47:13,430 --> 00:47:17,080
to all n of the servers but only wait
for W of them to respond and similarly

2060
00:47:17,080 --> 00:47:17,090
for W of them to respond and similarly
 

2061
00:47:17,090 --> 00:47:18,580
for W of them to respond and similarly
if you want to read you would in a

2062
00:47:18,580 --> 00:47:18,590
if you want to read you would in a
 

2063
00:47:18,590 --> 00:47:19,990
if you want to read you would in a
quorum system you would send the read to

2064
00:47:19,990 --> 00:47:20,000
quorum system you would send the read to
 

2065
00:47:20,000 --> 00:47:21,310
quorum system you would send the read to
all the servers and only wait for a

2066
00:47:21,310 --> 00:47:21,320
all the servers and only wait for a
 

2067
00:47:21,320 --> 00:47:23,700
all the servers and only wait for a
quorum for R of the servers to respond

2068
00:47:23,700 --> 00:47:23,710
quorum for R of the servers to respond
 

2069
00:47:23,710 --> 00:47:26,140
quorum for R of the servers to respond
and that and because you only have to

2070
00:47:26,140 --> 00:47:26,150
and that and because you only have to
 

2071
00:47:26,150 --> 00:47:29,710
and that and because you only have to
wait for are out of n of them that means

2072
00:47:29,710 --> 00:47:29,720
wait for are out of n of them that means
 

2073
00:47:29,720 --> 00:47:31,630
wait for are out of n of them that means
that you can continue after the fastest

2074
00:47:31,630 --> 00:47:31,640
that you can continue after the fastest
 

2075
00:47:31,640 --> 00:47:35,470
that you can continue after the fastest
are have responded or the fastest W and

2076
00:47:35,470 --> 00:47:35,480
are have responded or the fastest W and
 

2077
00:47:35,480 --> 00:47:37,030
are have responded or the fastest W and
you don't have to wait for a slow server

2078
00:47:37,030 --> 00:47:37,040
you don't have to wait for a slow server
 

2079
00:47:37,040 --> 00:47:39,070
you don't have to wait for a slow server
or a server that's dead and there's not

2080
00:47:39,070 --> 00:47:39,080
or a server that's dead and there's not
 

2081
00:47:39,080 --> 00:47:43,230
or a server that's dead and there's not
any you know the machinery for ignoring

2082
00:47:43,230 --> 00:47:43,240
any you know the machinery for ignoring
 

2083
00:47:43,240 --> 00:47:45,790
any you know the machinery for ignoring
slow or dead servers is completely

2084
00:47:45,790 --> 00:47:45,800
slow or dead servers is completely
 

2085
00:47:45,800 --> 00:47:47,770
slow or dead servers is completely
implicit there's nothing here or about

2086
00:47:47,770 --> 00:47:47,780
implicit there's nothing here or about
 

2087
00:47:47,780 --> 00:47:49,600
implicit there's nothing here or about
oh we have to sort of make decisions

2088
00:47:49,600 --> 00:47:49,610
oh we have to sort of make decisions
 

2089
00:47:49,610 --> 00:47:51,850
oh we have to sort of make decisions
about which servers are up or down or

2090
00:47:51,850 --> 00:47:51,860
about which servers are up or down or
 

2091
00:47:51,860 --> 00:47:54,300
about which servers are up or down or
like the leaders or anything it just

2092
00:47:54,300 --> 00:47:54,310
like the leaders or anything it just
 

2093
00:47:54,310 --> 00:47:57,580
like the leaders or anything it just
kind of automatically proceeds as long

2094
00:47:57,580 --> 00:47:57,590
kind of automatically proceeds as long
 

2095
00:47:57,590 --> 00:48:02,470
kind of automatically proceeds as long
as the quorum is available so we get

2096
00:48:02,470 --> 00:48:02,480
as the quorum is available so we get
 

2097
00:48:02,480 --> 00:48:04,120
as the quorum is available so we get
very smooth handling of dead or slow

2098
00:48:04,120 --> 00:48:04,130
very smooth handling of dead or slow
 

2099
00:48:04,130 --> 00:48:07,270
very smooth handling of dead or slow
servers in addition there's not much

2100
00:48:07,270 --> 00:48:07,280
servers in addition there's not much
 

2101
00:48:07,280 --> 00:48:09,040
servers in addition there's not much
leeway for it here well actually you

2102
00:48:09,040 --> 00:48:09,050
leeway for it here well actually you
 

2103
00:48:09,050 --> 00:48:11,290
leeway for it here well actually you
even in this simple case you can adjust

2104
00:48:11,290 --> 00:48:11,300
even in this simple case you can adjust
 

2105
00:48:11,300 --> 00:48:14,260
even in this simple case you can adjust
the R and W to make either reads to

2106
00:48:14,260 --> 00:48:14,270
the R and W to make either reads to
 

2107
00:48:14,270 --> 00:48:17,560
the R and W to make either reads to
favor either reads or writes so here we

2108
00:48:17,560 --> 00:48:17,570
favor either reads or writes so here we
 

2109
00:48:17,570 --> 00:48:19,270
favor either reads or writes so here we
could actually say that well the right

2110
00:48:19,270 --> 00:48:19,280
could actually say that well the right
 

2111
00:48:19,280 --> 00:48:21,550
could actually say that well the right
forum is three every write has to go to

2112
00:48:21,550 --> 00:48:21,560
forum is three every write has to go to
 

2113
00:48:21,560 --> 00:48:23,230
forum is three every write has to go to
all three servers and in that case the

2114
00:48:23,230 --> 00:48:23,240
all three servers and in that case the
 

2115
00:48:23,240 --> 00:48:26,680
all three servers and in that case the
read quorum can be want so you could if

2116
00:48:26,680 --> 00:48:26,690
read quorum can be want so you could if
 

2117
00:48:26,690 --> 00:48:28,600
read quorum can be want so you could if
you wanted to favored reads with this

2118
00:48:28,600 --> 00:48:28,610
you wanted to favored reads with this
 

2119
00:48:28,610 --> 00:48:31,600
you wanted to favored reads with this
setup you could have read equals one

2120
00:48:31,600 --> 00:48:31,610
setup you could have read equals one
 

2121
00:48:31,610 --> 00:48:33,850
setup you could have read equals one
write equals three memories are much

2122
00:48:33,850 --> 00:48:33,860
write equals three memories are much
 

2123
00:48:33,860 --> 00:48:35,470
write equals three memories are much
faster they only have to wait for one

2124
00:48:35,470 --> 00:48:35,480
faster they only have to wait for one
 

2125
00:48:35,480 --> 00:48:37,060
faster they only have to wait for one
server but then return the writes are

2126
00:48:37,060 --> 00:48:37,070
server but then return the writes are
 

2127
00:48:37,070 --> 00:48:38,830
server but then return the writes are
slow if you wanted to favor right

2128
00:48:38,830 --> 00:48:38,840
slow if you wanted to favor right
 

2129
00:48:38,840 --> 00:48:40,660
slow if you wanted to favor right
you could say that Oh any reader has to

2130
00:48:40,660 --> 00:48:40,670
you could say that Oh any reader has to
 

2131
00:48:40,670 --> 00:48:42,280
you could say that Oh any reader has to
be from all of them but a writer only

2132
00:48:42,280 --> 00:48:42,290
be from all of them but a writer only
 

2133
00:48:42,290 --> 00:48:45,370
be from all of them but a writer only
has to write one so I mean the only one

2134
00:48:45,370 --> 00:48:45,380
has to write one so I mean the only one
 

2135
00:48:45,380 --> 00:48:48,390
has to write one so I mean the only one
server might have the latest value but

2136
00:48:48,390 --> 00:48:48,400
server might have the latest value but
 

2137
00:48:48,400 --> 00:48:53,980
server might have the latest value but
readers have to consult all three but

2138
00:48:53,980 --> 00:48:53,990
readers have to consult all three but
 

2139
00:48:53,990 --> 00:48:55,180
readers have to consult all three but
they're guaranteed that their three will

2140
00:48:55,180 --> 00:48:55,190
they're guaranteed that their three will
 

2141
00:48:55,190 --> 00:48:57,370
they're guaranteed that their three will
overlap with this of course these

2142
00:48:57,370 --> 00:48:57,380
overlap with this of course these
 

2143
00:48:57,380 --> 00:49:00,370
overlap with this of course these
particular values makes writes not fault

2144
00:49:00,370 --> 00:49:00,380
particular values makes writes not fault
 

2145
00:49:00,380 --> 00:49:02,650
particular values makes writes not fault
tolerant and here reads not fault

2146
00:49:02,650 --> 00:49:02,660
tolerant and here reads not fault
 

2147
00:49:02,660 --> 00:49:04,750
tolerant and here reads not fault
tolerant because all the server's have

2148
00:49:04,750 --> 00:49:04,760
tolerant because all the server's have
 

2149
00:49:04,760 --> 00:49:06,400
tolerant because all the server's have
to be up so you probably wouldn't want

2150
00:49:06,400 --> 00:49:06,410
to be up so you probably wouldn't want
 

2151
00:49:06,410 --> 00:49:08,140
to be up so you probably wouldn't want
to do this in real life you might have

2152
00:49:08,140 --> 00:49:08,150
to do this in real life you might have
 

2153
00:49:08,150 --> 00:49:10,450
to do this in real life you might have
you would have as Knowle Rohrer does a

2154
00:49:10,450 --> 00:49:10,460
you would have as Knowle Rohrer does a
 

2155
00:49:10,460 --> 00:49:13,300
you would have as Knowle Rohrer does a
larger number of servers and sort of

2156
00:49:13,300 --> 00:49:13,310
larger number of servers and sort of
 

2157
00:49:13,310 --> 00:49:15,580
larger number of servers and sort of
intermediate numbers of vinum right

2158
00:49:15,580 --> 00:49:15,590
intermediate numbers of vinum right
 

2159
00:49:15,590 --> 00:49:23,020
intermediate numbers of vinum right
corns Aurora in order to achieve its

2160
00:49:23,020 --> 00:49:23,030
corns Aurora in order to achieve its
 

2161
00:49:23,030 --> 00:49:26,980
corns Aurora in order to achieve its
goals here of being able to write with

2162
00:49:26,980 --> 00:49:26,990
goals here of being able to write with
 

2163
00:49:26,990 --> 00:49:30,670
goals here of being able to write with
one debt availability zone and read with

2164
00:49:30,670 --> 00:49:30,680
one debt availability zone and read with
 

2165
00:49:30,680 --> 00:49:32,500
one debt availability zone and read with
one dead availability zone plus one

2166
00:49:32,500 --> 00:49:32,510
one dead availability zone plus one
 

2167
00:49:32,510 --> 00:49:35,020
one dead availability zone plus one
other server it uses a quorum system

2168
00:49:35,020 --> 00:49:35,030
other server it uses a quorum system
 

2169
00:49:35,030 --> 00:49:45,190
other server it uses a quorum system
with N equals 6 w equals 4 and R equals

2170
00:49:45,190 --> 00:49:45,200
with N equals 6 w equals 4 and R equals
 

2171
00:49:45,200 --> 00:49:48,130
with N equals 6 w equals 4 and R equals
3 so the W equals 4 means that it can do

2172
00:49:48,130 --> 00:49:48,140
3 so the W equals 4 means that it can do
 

2173
00:49:48,140 --> 00:49:51,250
3 so the W equals 4 means that it can do
a write with one dead availability zone

2174
00:49:51,250 --> 00:49:51,260
a write with one dead availability zone
 

2175
00:49:51,260 --> 00:49:53,050
a write with one dead availability zone
if this availability zone can't be

2176
00:49:53,050 --> 00:49:53,060
if this availability zone can't be
 

2177
00:49:53,060 --> 00:49:54,760
if this availability zone can't be
contacted well these other four servers

2178
00:49:54,760 --> 00:49:54,770
contacted well these other four servers
 

2179
00:49:54,770 --> 00:49:58,690
contacted well these other four servers
are enough to complete right the reform

2180
00:49:58,690 --> 00:49:58,700
are enough to complete right the reform
 

2181
00:49:58,700 --> 00:50:01,540
are enough to complete right the reform
of 3 so 4 plus week so 7 so they

2182
00:50:01,540 --> 00:50:01,550
of 3 so 4 plus week so 7 so they
 

2183
00:50:01,550 --> 00:50:04,180
of 3 so 4 plus week so 7 so they
definitely guaranteed overlap a read

2184
00:50:04,180 --> 00:50:04,190
definitely guaranteed overlap a read
 

2185
00:50:04,190 --> 00:50:05,500
definitely guaranteed overlap a read
quorum of 3 means that even if one

2186
00:50:05,500 --> 00:50:05,510
quorum of 3 means that even if one
 

2187
00:50:05,510 --> 00:50:07,630
quorum of 3 means that even if one
availability is zone is dead plus one

2188
00:50:07,630 --> 00:50:07,640
availability is zone is dead plus one
 

2189
00:50:07,640 --> 00:50:09,550
availability is zone is dead plus one
more server the three remaining servers

2190
00:50:09,550 --> 00:50:09,560
more server the three remaining servers
 

2191
00:50:09,560 --> 00:50:12,070
more server the three remaining servers
are enough to serve a read now in this

2192
00:50:12,070 --> 00:50:12,080
are enough to serve a read now in this
 

2193
00:50:12,080 --> 00:50:15,190
are enough to serve a read now in this
case we're three servers are now down

2194
00:50:15,190 --> 00:50:15,200
case we're three servers are now down
 

2195
00:50:15,200 --> 00:50:17,590
case we're three servers are now down
the system can do reads and as you know

2196
00:50:17,590 --> 00:50:17,600
the system can do reads and as you know
 

2197
00:50:17,600 --> 00:50:20,440
the system can do reads and as you know
can reconstruct the confine the current

2198
00:50:20,440 --> 00:50:20,450
can reconstruct the confine the current
 

2199
00:50:20,450 --> 00:50:21,970
can reconstruct the confine the current
state of the database but it can't do

2200
00:50:21,970 --> 00:50:21,980
state of the database but it can't do
 

2201
00:50:21,980 --> 00:50:24,880
state of the database but it can't do
writes without further work so if they

2202
00:50:24,880 --> 00:50:24,890
writes without further work so if they
 

2203
00:50:24,890 --> 00:50:28,830
writes without further work so if they
were in a situation where there was

2204
00:50:28,830 --> 00:50:28,840

 

2205
00:50:28,840 --> 00:50:31,870

three dead servers there they have

2206
00:50:31,870 --> 00:50:31,880
three dead servers there they have
 

2207
00:50:31,880 --> 00:50:33,550
three dead servers there they have
enough of a quorum to be able to read

2208
00:50:33,550 --> 00:50:33,560
enough of a quorum to be able to read
 

2209
00:50:33,560 --> 00:50:35,950
enough of a quorum to be able to read
the data and reconstruct more cop more

2210
00:50:35,950 --> 00:50:35,960
the data and reconstruct more cop more
 

2211
00:50:35,960 --> 00:50:38,860
the data and reconstruct more cop more
replicas but until they've created more

2212
00:50:38,860 --> 00:50:38,870
replicas but until they've created more
 

2213
00:50:38,870 --> 00:50:41,710
replicas but until they've created more
replicas to basically replace these dead

2214
00:50:41,710 --> 00:50:41,720
replicas to basically replace these dead
 

2215
00:50:41,720 --> 00:50:47,780
replicas to basically replace these dead
ones they can't serve as rights

2216
00:50:47,780 --> 00:50:47,790

 

2217
00:50:47,790 --> 00:50:50,660

and also the quorum system as I

2218
00:50:50,660 --> 00:50:50,670
and also the quorum system as I
 

2219
00:50:50,670 --> 00:50:52,970
and also the quorum system as I
explained before allows them to ride out

2220
00:50:52,970 --> 00:50:52,980
explained before allows them to ride out
 

2221
00:50:52,980 --> 00:51:02,680
explained before allows them to ride out
these transient slow replicas all right

2222
00:51:02,680 --> 00:51:02,690
these transient slow replicas all right
 

2223
00:51:02,690 --> 00:51:07,190
these transient slow replicas all right
as it happens as explained before what

2224
00:51:07,190 --> 00:51:07,200
as it happens as explained before what
 

2225
00:51:07,200 --> 00:51:09,829
as it happens as explained before what
the rights in Aurora aren't really over

2226
00:51:09,829 --> 00:51:09,839
the rights in Aurora aren't really over
 

2227
00:51:09,839 --> 00:51:12,880
the rights in Aurora aren't really over
writing objects as in a sort of classic

2228
00:51:12,880 --> 00:51:12,890
writing objects as in a sort of classic
 

2229
00:51:12,890 --> 00:51:16,940
writing objects as in a sort of classic
quorum system what Aurora in fact its

2230
00:51:16,940 --> 00:51:16,950
quorum system what Aurora in fact its
 

2231
00:51:16,950 --> 00:51:20,000
quorum system what Aurora in fact its
rights never overwrite anything its

2232
00:51:20,000 --> 00:51:20,010
rights never overwrite anything its
 

2233
00:51:20,010 --> 00:51:22,670
rights never overwrite anything its
rights just append log entries to the

2234
00:51:22,670 --> 00:51:22,680
rights just append log entries to the
 

2235
00:51:22,680 --> 00:51:23,569
rights just append log entries to the
current law

2236
00:51:23,569 --> 00:51:23,579
current law
 

2237
00:51:23,579 --> 00:51:25,910
current law
so the way it's using quorums is

2238
00:51:25,910 --> 00:51:25,920
so the way it's using quorums is
 

2239
00:51:25,920 --> 00:51:27,680
so the way it's using quorums is
basically to say well when the database

2240
00:51:27,680 --> 00:51:27,690
basically to say well when the database
 

2241
00:51:27,690 --> 00:51:29,390
basically to say well when the database
sends out our new log record because

2242
00:51:29,390 --> 00:51:29,400
sends out our new log record because
 

2243
00:51:29,400 --> 00:51:31,760
sends out our new log record because
it's executing some transaction it needs

2244
00:51:31,760 --> 00:51:31,770
it's executing some transaction it needs
 

2245
00:51:31,770 --> 00:51:33,770
it's executing some transaction it needs
to make sure that that log record is

2246
00:51:33,770 --> 00:51:33,780
to make sure that that log record is
 

2247
00:51:33,780 --> 00:51:38,270
to make sure that that log record is
present on at least four of the store of

2248
00:51:38,270 --> 00:51:38,280
present on at least four of the store of
 

2249
00:51:38,280 --> 00:51:40,819
present on at least four of the store of
its storage servers before it's allowed

2250
00:51:40,819 --> 00:51:40,829
its storage servers before it's allowed
 

2251
00:51:40,829 --> 00:51:42,140
its storage servers before it's allowed
to proceed with the transaction are

2252
00:51:42,140 --> 00:51:42,150
to proceed with the transaction are
 

2253
00:51:42,150 --> 00:51:43,789
to proceed with the transaction are
committed so that's really the meaning

2254
00:51:43,789 --> 00:51:43,799
committed so that's really the meaning
 

2255
00:51:43,799 --> 00:51:46,160
committed so that's really the meaning
of its other Wars right porins is that

2256
00:51:46,160 --> 00:51:46,170
of its other Wars right porins is that
 

2257
00:51:46,170 --> 00:51:49,010
of its other Wars right porins is that
each new log record has to be appended

2258
00:51:49,010 --> 00:51:49,020
each new log record has to be appended
 

2259
00:51:49,020 --> 00:51:50,599
each new log record has to be appended
to the storage and at least for the

2260
00:51:50,599 --> 00:51:50,609
to the storage and at least for the
 

2261
00:51:50,609 --> 00:51:52,579
to the storage and at least for the
replicas before the write can be

2262
00:51:52,579 --> 00:51:52,589
replicas before the write can be
 

2263
00:51:52,589 --> 00:52:01,490
replicas before the write can be
considered to to have completed and when

2264
00:52:01,490 --> 00:52:01,500
considered to to have completed and when
 

2265
00:52:01,500 --> 00:52:03,890
considered to to have completed and when
a when Aurora gets to the end of a

2266
00:52:03,890 --> 00:52:03,900
a when Aurora gets to the end of a
 

2267
00:52:03,900 --> 00:52:05,809
a when Aurora gets to the end of a
transaction before it can reply to the

2268
00:52:05,809 --> 00:52:05,819
transaction before it can reply to the
 

2269
00:52:05,819 --> 00:52:07,520
transaction before it can reply to the
client until the client tell the client

2270
00:52:07,520 --> 00:52:07,530
client until the client tell the client
 

2271
00:52:07,530 --> 00:52:08,780
client until the client tell the client
a hi you know your transaction is

2272
00:52:08,780 --> 00:52:08,790
a hi you know your transaction is
 

2273
00:52:08,790 --> 00:52:10,839
a hi you know your transaction is
committed and finished and durable

2274
00:52:10,839 --> 00:52:10,849
committed and finished and durable
 

2275
00:52:10,849 --> 00:52:14,120
committed and finished and durable
Aurora has to wait for acknowledgments

2276
00:52:14,120 --> 00:52:14,130
Aurora has to wait for acknowledgments
 

2277
00:52:14,130 --> 00:52:16,309
Aurora has to wait for acknowledgments
from a write quorum for each of the log

2278
00:52:16,309 --> 00:52:16,319
from a write quorum for each of the log
 

2279
00:52:16,319 --> 00:52:18,500
from a write quorum for each of the log
records that made up that transaction

2280
00:52:18,500 --> 00:52:18,510
records that made up that transaction
 

2281
00:52:18,510 --> 00:52:24,589
records that made up that transaction
and in fact because because if there

2282
00:52:24,589 --> 00:52:24,599
and in fact because because if there
 

2283
00:52:24,599 --> 00:52:25,970
and in fact because because if there
were a crash in a recovery you're not

2284
00:52:25,970 --> 00:52:25,980
were a crash in a recovery you're not
 

2285
00:52:25,980 --> 00:52:30,250
were a crash in a recovery you're not
allowed to recover one transaction if

2286
00:52:30,250 --> 00:52:30,260
allowed to recover one transaction if
 

2287
00:52:30,260 --> 00:52:33,799
allowed to recover one transaction if
preceding transactions don't aren't also

2288
00:52:33,799 --> 00:52:33,809
preceding transactions don't aren't also
 

2289
00:52:33,809 --> 00:52:36,680
preceding transactions don't aren't also
recovered in practice Aurora has before

2290
00:52:36,680 --> 00:52:36,690
recovered in practice Aurora has before
 

2291
00:52:36,690 --> 00:52:38,240
recovered in practice Aurora has before
Aurora can acknowledge a transaction it

2292
00:52:38,240 --> 00:52:38,250
Aurora can acknowledge a transaction it
 

2293
00:52:38,250 --> 00:52:42,680
Aurora can acknowledge a transaction it
has to wait for a write quorum of

2294
00:52:42,680 --> 00:52:42,690
has to wait for a write quorum of
 

2295
00:52:42,690 --> 00:52:44,359
has to wait for a write quorum of
storage servers to respond for all

2296
00:52:44,359 --> 00:52:44,369
storage servers to respond for all
 

2297
00:52:44,369 --> 00:52:46,579
storage servers to respond for all
previously committed transaction and the

2298
00:52:46,579 --> 00:52:46,589
previously committed transaction and the
 

2299
00:52:46,589 --> 00:52:48,740
previously committed transaction and the
transaction of interest and then can

2300
00:52:48,740 --> 00:52:48,750
transaction of interest and then can
 

2301
00:52:48,750 --> 00:52:54,730
transaction of interest and then can
respond to the client

2302
00:52:54,730 --> 00:52:54,740

 

2303
00:52:54,740 --> 00:52:57,430

okay so these these storage servers are

2304
00:52:57,430 --> 00:52:57,440
okay so these these storage servers are
 

2305
00:52:57,440 --> 00:52:59,980
okay so these these storage servers are
getting incoming log records

2306
00:52:59,980 --> 00:52:59,990
getting incoming log records
 

2307
00:52:59,990 --> 00:53:02,859
getting incoming log records
that's what rights look like to them and

2308
00:53:02,859 --> 00:53:02,869
that's what rights look like to them and
 

2309
00:53:02,869 --> 00:53:04,210
that's what rights look like to them and
so what do they actually do you know

2310
00:53:04,210 --> 00:53:04,220
so what do they actually do you know
 

2311
00:53:04,220 --> 00:53:06,400
so what do they actually do you know
they're not getting new data pages from

2312
00:53:06,400 --> 00:53:06,410
they're not getting new data pages from
 

2313
00:53:06,410 --> 00:53:07,599
they're not getting new data pages from
the database server they're just getting

2314
00:53:07,599 --> 00:53:07,609
the database server they're just getting
 

2315
00:53:07,609 --> 00:53:10,690
the database server they're just getting
log records that just describe changes

2316
00:53:10,690 --> 00:53:10,700
log records that just describe changes
 

2317
00:53:10,700 --> 00:53:16,000
log records that just describe changes
to the data pages so internally one of

2318
00:53:16,000 --> 00:53:16,010
to the data pages so internally one of
 

2319
00:53:16,010 --> 00:53:22,359
to the data pages so internally one of
these one of these storage servers it

2320
00:53:22,359 --> 00:53:22,369
these one of these storage servers it
 

2321
00:53:22,369 --> 00:53:25,180
these one of these storage servers it
has internally it has copies of all that

2322
00:53:25,180 --> 00:53:25,190
has internally it has copies of all that
 

2323
00:53:25,190 --> 00:53:30,670
has internally it has copies of all that
data of all the data pages at some point

2324
00:53:30,670 --> 00:53:30,680
data of all the data pages at some point
 

2325
00:53:30,680 --> 00:53:34,180
data of all the data pages at some point
in the database data pages evolution so

2326
00:53:34,180 --> 00:53:34,190
in the database data pages evolution so
 

2327
00:53:34,190 --> 00:53:39,370
in the database data pages evolution so
it has maybe in its cache on its disk a

2328
00:53:39,370 --> 00:53:39,380
it has maybe in its cache on its disk a
 

2329
00:53:39,380 --> 00:53:41,349
it has maybe in its cache on its disk a
whole bunch of these pages you know page

2330
00:53:41,349 --> 00:53:41,359
whole bunch of these pages you know page
 

2331
00:53:41,359 --> 00:53:47,440
whole bunch of these pages you know page
1 page 2 so forth when a new write comes

2332
00:53:47,440 --> 00:53:47,450
1 page 2 so forth when a new write comes
 

2333
00:53:47,450 --> 00:53:52,810
1 page 2 so forth when a new write comes
in the storage server would win a new

2334
00:53:52,810 --> 00:53:52,820
in the storage server would win a new
 

2335
00:53:52,820 --> 00:53:54,280
in the storage server would win a new
log rec over in a new write arrives

2336
00:53:54,280 --> 00:53:54,290
log rec over in a new write arrives
 

2337
00:53:54,290 --> 00:53:56,589
log rec over in a new write arrives
carrying with it just a log record what

2338
00:53:56,589 --> 00:53:56,599
carrying with it just a log record what
 

2339
00:53:56,599 --> 00:53:58,390
carrying with it just a log record what
has to happen some day but not right

2340
00:53:58,390 --> 00:53:58,400
has to happen some day but not right
 

2341
00:53:58,400 --> 00:54:00,550
has to happen some day but not right
away is that the changes in that log

2342
00:54:00,550 --> 00:54:00,560
away is that the changes in that log
 

2343
00:54:00,560 --> 00:54:02,770
away is that the changes in that log
record the new value here has to be

2344
00:54:02,770 --> 00:54:02,780
record the new value here has to be
 

2345
00:54:02,780 --> 00:54:05,470
record the new value here has to be
applied to the relevant page but we

2346
00:54:05,470 --> 00:54:05,480
applied to the relevant page but we
 

2347
00:54:05,480 --> 00:54:06,640
applied to the relevant page but we
don't at the source of it doesn't have

2348
00:54:06,640 --> 00:54:06,650
don't at the source of it doesn't have
 

2349
00:54:06,650 --> 00:54:09,099
don't at the source of it doesn't have
to do that until someone asks just until

2350
00:54:09,099 --> 00:54:09,109
to do that until someone asks just until
 

2351
00:54:09,109 --> 00:54:11,230
to do that until someone asks just until
the database server or the recovery

2352
00:54:11,230 --> 00:54:11,240
the database server or the recovery
 

2353
00:54:11,240 --> 00:54:13,510
the database server or the recovery
software asks to see that page so

2354
00:54:13,510 --> 00:54:13,520
software asks to see that page so
 

2355
00:54:13,520 --> 00:54:15,430
software asks to see that page so
immediately what happens to a new log

2356
00:54:15,430 --> 00:54:15,440
immediately what happens to a new log
 

2357
00:54:15,440 --> 00:54:17,500
immediately what happens to a new log
record is that the log records are just

2358
00:54:17,500 --> 00:54:17,510
record is that the log records are just
 

2359
00:54:17,510 --> 00:54:20,200
record is that the log records are just
appended to lists of log records that

2360
00:54:20,200 --> 00:54:20,210
appended to lists of log records that
 

2361
00:54:20,210 --> 00:54:23,170
appended to lists of log records that
effect each page so for every page that

2362
00:54:23,170 --> 00:54:23,180
effect each page so for every page that
 

2363
00:54:23,180 --> 00:54:26,500
effect each page so for every page that
the storage server stores if it's been

2364
00:54:26,500 --> 00:54:26,510
the storage server stores if it's been
 

2365
00:54:26,510 --> 00:54:29,260
the storage server stores if it's been
recently modified by a log record by a

2366
00:54:29,260 --> 00:54:29,270
recently modified by a log record by a
 

2367
00:54:29,270 --> 00:54:31,300
recently modified by a log record by a
transaction what the storage server will

2368
00:54:31,300 --> 00:54:31,310
transaction what the storage server will
 

2369
00:54:31,310 --> 00:54:34,089
transaction what the storage server will
actually store is an old version of the

2370
00:54:34,089 --> 00:54:34,099
actually store is an old version of the
 

2371
00:54:34,099 --> 00:54:37,450
actually store is an old version of the
page plus the string of the sequence of

2372
00:54:37,450 --> 00:54:37,460
page plus the string of the sequence of
 

2373
00:54:37,460 --> 00:54:40,599
page plus the string of the sequence of
log records that have come in from trend

2374
00:54:40,599 --> 00:54:40,609
log records that have come in from trend
 

2375
00:54:40,609 --> 00:54:42,730
log records that have come in from trend
from the database server since that page

2376
00:54:42,730 --> 00:54:42,740
from the database server since that page
 

2377
00:54:42,740 --> 00:54:45,490
from the database server since that page
was last brought up to date so if

2378
00:54:45,490 --> 00:54:45,500
was last brought up to date so if
 

2379
00:54:45,500 --> 00:54:47,050
was last brought up to date so if
nothing else happens the storage server

2380
00:54:47,050 --> 00:54:47,060
nothing else happens the storage server
 

2381
00:54:47,060 --> 00:54:49,870
nothing else happens the storage server
just stores these old pages plus lists

2382
00:54:49,870 --> 00:54:49,880
just stores these old pages plus lists
 

2383
00:54:49,880 --> 00:54:53,560
just stores these old pages plus lists
of log records if the database server

2384
00:54:53,560 --> 00:54:53,570
of log records if the database server
 

2385
00:54:53,570 --> 00:54:56,109
of log records if the database server
later you know fix the page from its

2386
00:54:56,109 --> 00:54:56,119
later you know fix the page from its
 

2387
00:54:56,119 --> 00:54:58,300
later you know fix the page from its
cache and then needs to read the page

2388
00:54:58,300 --> 00:54:58,310
cache and then needs to read the page
 

2389
00:54:58,310 --> 00:55:00,430
cache and then needs to read the page
again for a future transaction it'll

2390
00:55:00,430 --> 00:55:00,440
again for a future transaction it'll
 

2391
00:55:00,440 --> 00:55:03,130
again for a future transaction it'll
send a read request out to one of the

2392
00:55:03,130 --> 00:55:03,140
send a read request out to one of the
 

2393
00:55:03,140 --> 00:55:04,420
send a read request out to one of the
storage servers and say look you know I

2394
00:55:04,420 --> 00:55:04,430
storage servers and say look you know I
 

2395
00:55:04,430 --> 00:55:06,130
storage servers and say look you know I
need a copy I need an updated copy a

2396
00:55:06,130 --> 00:55:06,140
need a copy I need an updated copy a
 

2397
00:55:06,140 --> 00:55:06,779
need a copy I need an updated copy a
page one

2398
00:55:06,779 --> 00:55:06,789
page one
 

2399
00:55:06,789 --> 00:55:09,089
page one
and at that point the storage server

2400
00:55:09,089 --> 00:55:09,099
and at that point the storage server
 

2401
00:55:09,099 --> 00:55:12,809
and at that point the storage server
will apply these log records to the page

2402
00:55:12,809 --> 00:55:12,819
will apply these log records to the page
 

2403
00:55:12,819 --> 00:55:15,839
will apply these log records to the page
you know do do these writes of new data

2404
00:55:15,839 --> 00:55:15,849
you know do do these writes of new data
 

2405
00:55:15,849 --> 00:55:18,029
you know do do these writes of new data
that are implied that are described in

2406
00:55:18,029 --> 00:55:18,039
that are implied that are described in
 

2407
00:55:18,039 --> 00:55:19,380
that are implied that are described in
the log records and then send that

2408
00:55:19,380 --> 00:55:19,390
the log records and then send that
 

2409
00:55:19,390 --> 00:55:22,229
the log records and then send that
updated page back to the database server

2410
00:55:22,229 --> 00:55:22,239
updated page back to the database server
 

2411
00:55:22,239 --> 00:55:27,989
updated page back to the database server
and presumably maybe then like a racist

2412
00:55:27,989 --> 00:55:27,999
and presumably maybe then like a racist
 

2413
00:55:27,999 --> 00:55:29,819
and presumably maybe then like a racist
list and just store the newly updated

2414
00:55:29,819 --> 00:55:29,829
list and just store the newly updated
 

2415
00:55:29,829 --> 00:55:35,749
list and just store the newly updated
page although it's not quite that simple

2416
00:55:35,749 --> 00:55:35,759

 

2417
00:55:35,759 --> 00:55:37,939

all right so the storage servers just

2418
00:55:37,939 --> 00:55:37,949
all right so the storage servers just
 

2419
00:55:37,949 --> 00:55:41,279
all right so the storage servers just
store these strings of log records plus

2420
00:55:41,279 --> 00:55:41,289
store these strings of log records plus
 

2421
00:55:41,289 --> 00:55:53,370
store these strings of log records plus
old log page versions now the database

2422
00:55:53,370 --> 00:55:53,380
old log page versions now the database
 

2423
00:55:53,380 --> 00:55:54,809
old log page versions now the database
server as I mentioned sometimes needs to

2424
00:55:54,809 --> 00:55:54,819
server as I mentioned sometimes needs to
 

2425
00:55:54,819 --> 00:55:57,299
server as I mentioned sometimes needs to
read pages so by the way one thing to

2426
00:55:57,299 --> 00:55:57,309
read pages so by the way one thing to
 

2427
00:55:57,309 --> 00:55:58,650
read pages so by the way one thing to
observe is that the database server is

2428
00:55:58,650 --> 00:55:58,660
observe is that the database server is
 

2429
00:55:58,660 --> 00:56:00,959
observe is that the database server is
writing log records but it's reading

2430
00:56:00,959 --> 00:56:00,969
writing log records but it's reading
 

2431
00:56:00,969 --> 00:56:03,479
writing log records but it's reading
data pages so there's also different my

2432
00:56:03,479 --> 00:56:03,489
data pages so there's also different my
 

2433
00:56:03,489 --> 00:56:05,609
data pages so there's also different my
corns poram system in the sense that the

2434
00:56:05,609 --> 00:56:05,619
corns poram system in the sense that the
 

2435
00:56:05,619 --> 00:56:07,109
corns poram system in the sense that the
sort of things that are being read and

2436
00:56:07,109 --> 00:56:07,119
sort of things that are being read and
 

2437
00:56:07,119 --> 00:56:09,089
sort of things that are being read and
written are quite different in addition

2438
00:56:09,089 --> 00:56:09,099
written are quite different in addition
 

2439
00:56:09,099 --> 00:56:11,880
written are quite different in addition
it turns out that in ordinary operation

2440
00:56:11,880 --> 00:56:11,890
it turns out that in ordinary operation
 

2441
00:56:11,890 --> 00:56:16,829
it turns out that in ordinary operation
the database server knows doesn't have

2442
00:56:16,829 --> 00:56:16,839
the database server knows doesn't have
 

2443
00:56:16,839 --> 00:56:20,459
the database server knows doesn't have
to send quorum reads because the

2444
00:56:20,459 --> 00:56:20,469
to send quorum reads because the
 

2445
00:56:20,469 --> 00:56:23,729
to send quorum reads because the
database server tracks for each one of

2446
00:56:23,729 --> 00:56:23,739
database server tracks for each one of
 

2447
00:56:23,739 --> 00:56:27,299
database server tracks for each one of
the storage servers how far how much of

2448
00:56:27,299 --> 00:56:27,309
the storage servers how far how much of
 

2449
00:56:27,309 --> 00:56:29,819
the storage servers how far how much of
the prefix of the log that storage

2450
00:56:29,819 --> 00:56:29,829
the prefix of the log that storage
 

2451
00:56:29,829 --> 00:56:32,159
the prefix of the log that storage
server is actually received so the

2452
00:56:32,159 --> 00:56:32,169
server is actually received so the
 

2453
00:56:32,169 --> 00:56:34,319
server is actually received so the
database server is keeping track of

2454
00:56:34,319 --> 00:56:34,329
database server is keeping track of
 

2455
00:56:34,329 --> 00:56:36,089
database server is keeping track of
these six numbers so so first of all log

2456
00:56:36,089 --> 00:56:36,099
these six numbers so so first of all log
 

2457
00:56:36,099 --> 00:56:37,919
these six numbers so so first of all log
entries are numbered just one two three

2458
00:56:37,919 --> 00:56:37,929
entries are numbered just one two three
 

2459
00:56:37,929 --> 00:56:40,409
entries are numbered just one two three
four five the database server sends that

2460
00:56:40,409 --> 00:56:40,419
four five the database server sends that
 

2461
00:56:40,419 --> 00:56:42,659
four five the database server sends that
new log entries to all the storage

2462
00:56:42,659 --> 00:56:42,669
new log entries to all the storage
 

2463
00:56:42,669 --> 00:56:44,219
new log entries to all the storage
servers the storage servers that receive

2464
00:56:44,219 --> 00:56:44,229
servers the storage servers that receive
 

2465
00:56:44,229 --> 00:56:45,899
servers the storage servers that receive
them respond saying oh yeah I got log

2466
00:56:45,899 --> 00:56:45,909
them respond saying oh yeah I got log
 

2467
00:56:45,909 --> 00:56:48,569
them respond saying oh yeah I got log
entries 79 and furthermore you know I

2468
00:56:48,569 --> 00:56:48,579
entries 79 and furthermore you know I
 

2469
00:56:48,579 --> 00:56:51,269
entries 79 and furthermore you know I
have every log entry before 79 also the

2470
00:56:51,269 --> 00:56:51,279
have every log entry before 79 also the
 

2471
00:56:51,279 --> 00:56:52,769
have every log entry before 79 also the
database server keeps track of these

2472
00:56:52,769 --> 00:56:52,779
database server keeps track of these
 

2473
00:56:52,779 --> 00:56:56,419
database server keeps track of these
numbers how far each server has gotten

2474
00:56:56,419 --> 00:56:56,429
numbers how far each server has gotten
 

2475
00:56:56,429 --> 00:56:59,419
numbers how far each server has gotten
or what the highest sort of contiguous

2476
00:56:59,419 --> 00:56:59,429
or what the highest sort of contiguous
 

2477
00:56:59,429 --> 00:57:02,339
or what the highest sort of contiguous
log entry number is that each of the

2478
00:57:02,339 --> 00:57:02,349
log entry number is that each of the
 

2479
00:57:02,349 --> 00:57:04,709
log entry number is that each of the
servers has gotten so that way when the

2480
00:57:04,709 --> 00:57:04,719
servers has gotten so that way when the
 

2481
00:57:04,719 --> 00:57:06,390
servers has gotten so that way when the
database server needs to do a read it

2482
00:57:06,390 --> 00:57:06,400
database server needs to do a read it
 

2483
00:57:06,400 --> 00:57:09,870
database server needs to do a read it
just picks a storage server that's up to

2484
00:57:09,870 --> 00:57:09,880
just picks a storage server that's up to
 

2485
00:57:09,880 --> 00:57:12,870
just picks a storage server that's up to
date and sends the read request for the

2486
00:57:12,870 --> 00:57:12,880
date and sends the read request for the
 

2487
00:57:12,880 --> 00:57:14,549
date and sends the read request for the
page it wants just to that storage

2488
00:57:14,549 --> 00:57:14,559
page it wants just to that storage
 

2489
00:57:14,559 --> 00:57:18,539
page it wants just to that storage
server so the the database server does

2490
00:57:18,539 --> 00:57:18,549
server so the the database server does
 

2491
00:57:18,549 --> 00:57:19,799
server so the the database server does
have to do quorum writes but it

2492
00:57:19,799 --> 00:57:19,809
have to do quorum writes but it
 

2493
00:57:19,809 --> 00:57:20,580
have to do quorum writes but it
basically

2494
00:57:20,580 --> 00:57:20,590
basically
 

2495
00:57:20,590 --> 00:57:22,110
basically
doesn't ordinarily have to do quorum

2496
00:57:22,110 --> 00:57:22,120
doesn't ordinarily have to do quorum
 

2497
00:57:22,120 --> 00:57:23,970
doesn't ordinarily have to do quorum
reads and knows which of these storage

2498
00:57:23,970 --> 00:57:23,980
reads and knows which of these storage
 

2499
00:57:23,980 --> 00:57:25,110
reads and knows which of these storage
servers are up to date and just reads

2500
00:57:25,110 --> 00:57:25,120
servers are up to date and just reads
 

2501
00:57:25,120 --> 00:57:27,240
servers are up to date and just reads
from one of them so the reason I keep ur

2502
00:57:27,240 --> 00:57:27,250
from one of them so the reason I keep ur
 

2503
00:57:27,250 --> 00:57:30,420
from one of them so the reason I keep ur
than they would be in a that just reads

2504
00:57:30,420 --> 00:57:30,430
than they would be in a that just reads
 

2505
00:57:30,430 --> 00:57:32,310
than they would be in a that just reads
one copy of the page and doesn't have to

2506
00:57:32,310 --> 00:57:32,320
one copy of the page and doesn't have to
 

2507
00:57:32,320 --> 00:57:36,440
one copy of the page and doesn't have to
go through the expense of a quorum read

2508
00:57:36,440 --> 00:57:36,450

 

2509
00:57:36,450 --> 00:57:39,570

now it does sometimes use quorum reads

2510
00:57:39,570 --> 00:57:39,580
now it does sometimes use quorum reads
 

2511
00:57:39,580 --> 00:57:41,850
now it does sometimes use quorum reads
it turns out that during crash recovery

2512
00:57:41,850 --> 00:57:41,860
it turns out that during crash recovery
 

2513
00:57:41,860 --> 00:57:44,160
it turns out that during crash recovery
you know if the crash during crash

2514
00:57:44,160 --> 00:57:44,170
you know if the crash during crash
 

2515
00:57:44,170 --> 00:57:46,800
you know if the crash during crash
recovery of the database server and so

2516
00:57:46,800 --> 00:57:46,810
recovery of the database server and so
 

2517
00:57:46,810 --> 00:57:49,350
recovery of the database server and so
this is different from a crash recovery

2518
00:57:49,350 --> 00:57:49,360
this is different from a crash recovery
 

2519
00:57:49,360 --> 00:57:50,790
this is different from a crash recovery
of the storage service if the database

2520
00:57:50,790 --> 00:57:50,800
of the storage service if the database
 

2521
00:57:50,800 --> 00:57:53,370
of the storage service if the database
server itself sir crash in me because

2522
00:57:53,370 --> 00:57:53,380
server itself sir crash in me because
 

2523
00:57:53,380 --> 00:57:55,830
server itself sir crash in me because
the it's running in an ec2 instance on

2524
00:57:55,830 --> 00:57:55,840
the it's running in an ec2 instance on
 

2525
00:57:55,840 --> 00:57:57,480
the it's running in an ec2 instance on
some piece of hardware some real piece

2526
00:57:57,480 --> 00:57:57,490
some piece of hardware some real piece
 

2527
00:57:57,490 --> 00:57:58,560
some piece of hardware some real piece
of hardware may be that piece of

2528
00:57:58,560 --> 00:57:58,570
of hardware may be that piece of
 

2529
00:57:58,570 --> 00:58:01,200
of hardware may be that piece of
hardware suffers a failure the database

2530
00:58:01,200 --> 00:58:01,210
hardware suffers a failure the database
 

2531
00:58:01,210 --> 00:58:02,940
hardware suffers a failure the database
server crashes there's some monitoring

2532
00:58:02,940 --> 00:58:02,950
server crashes there's some monitoring
 

2533
00:58:02,950 --> 00:58:04,500
server crashes there's some monitoring
infrastructure at Amazon that says oh

2534
00:58:04,500 --> 00:58:04,510
infrastructure at Amazon that says oh
 

2535
00:58:04,510 --> 00:58:06,360
infrastructure at Amazon that says oh
wait a minute you know the database the

2536
00:58:06,360 --> 00:58:06,370
wait a minute you know the database the
 

2537
00:58:06,370 --> 00:58:08,160
wait a minute you know the database the
Aurora database server over running for

2538
00:58:08,160 --> 00:58:08,170
Aurora database server over running for
 

2539
00:58:08,170 --> 00:58:12,890
Aurora database server over running for
a customer or whatever just crashed and

2540
00:58:12,890 --> 00:58:12,900
a customer or whatever just crashed and
 

2541
00:58:12,900 --> 00:58:15,570
a customer or whatever just crashed and
Amazon will automatically fire up a new

2542
00:58:15,570 --> 00:58:15,580
Amazon will automatically fire up a new
 

2543
00:58:15,580 --> 00:58:18,000
Amazon will automatically fire up a new
ec2 instance start up the database

2544
00:58:18,000 --> 00:58:18,010
ec2 instance start up the database
 

2545
00:58:18,010 --> 00:58:20,760
ec2 instance start up the database
software and that ec2 instance and sort

2546
00:58:20,760 --> 00:58:20,770
software and that ec2 instance and sort
 

2547
00:58:20,770 --> 00:58:23,280
software and that ec2 instance and sort
of tell it look your data is sitting on

2548
00:58:23,280 --> 00:58:23,290
of tell it look your data is sitting on
 

2549
00:58:23,290 --> 00:58:26,400
of tell it look your data is sitting on
this particular volume this set of

2550
00:58:26,400 --> 00:58:26,410
this particular volume this set of
 

2551
00:58:26,410 --> 00:58:29,330
this particular volume this set of
storage systems please clean up any

2552
00:58:29,330 --> 00:58:29,340
storage systems please clean up any
 

2553
00:58:29,340 --> 00:58:32,070
storage systems please clean up any
partially executed transactions that are

2554
00:58:32,070 --> 00:58:32,080
partially executed transactions that are
 

2555
00:58:32,080 --> 00:58:34,830
partially executed transactions that are
evident in the logs stored in these

2556
00:58:34,830 --> 00:58:34,840
evident in the logs stored in these
 

2557
00:58:34,840 --> 00:58:38,940
evident in the logs stored in these
storage servers and continue so we have

2558
00:58:38,940 --> 00:58:38,950
storage servers and continue so we have
 

2559
00:58:38,950 --> 00:58:44,450
storage servers and continue so we have
to and that's the point at which Aurora

2560
00:58:44,450 --> 00:58:44,460
to and that's the point at which Aurora
 

2561
00:58:44,460 --> 00:58:48,540
to and that's the point at which Aurora
uses quorum logic for weeds because this

2562
00:58:48,540 --> 00:58:48,550
uses quorum logic for weeds because this
 

2563
00:58:48,550 --> 00:58:52,320
uses quorum logic for weeds because this
database server when the old when the

2564
00:58:52,320 --> 00:58:52,330
database server when the old when the
 

2565
00:58:52,330 --> 00:58:54,150
database server when the old when the
previous database server crashed it was

2566
00:58:54,150 --> 00:58:54,160
previous database server crashed it was
 

2567
00:58:54,160 --> 00:58:56,370
previous database server crashed it was
almost certainly partway through

2568
00:58:56,370 --> 00:58:56,380
almost certainly partway through
 

2569
00:58:56,380 --> 00:58:59,220
almost certainly partway through
executing some set of transactions so

2570
00:58:59,220 --> 00:58:59,230
executing some set of transactions so
 

2571
00:58:59,230 --> 00:59:00,510
executing some set of transactions so
the state of play at the time of the

2572
00:59:00,510 --> 00:59:00,520
the state of play at the time of the
 

2573
00:59:00,520 --> 00:59:01,980
the state of play at the time of the
crash was well it's completed some

2574
00:59:01,980 --> 00:59:01,990
crash was well it's completed some
 

2575
00:59:01,990 --> 00:59:03,540
crash was well it's completed some
transactions and committed them and

2576
00:59:03,540 --> 00:59:03,550
transactions and committed them and
 

2577
00:59:03,550 --> 00:59:06,360
transactions and committed them and
their log entries are on a quorum plus

2578
00:59:06,360 --> 00:59:06,370
their log entries are on a quorum plus
 

2579
00:59:06,370 --> 00:59:09,570
their log entries are on a quorum plus
it's in the middle of executing some

2580
00:59:09,570 --> 00:59:09,580
it's in the middle of executing some
 

2581
00:59:09,580 --> 00:59:12,150
it's in the middle of executing some
other set of transactions which also may

2582
00:59:12,150 --> 00:59:12,160
other set of transactions which also may
 

2583
00:59:12,160 --> 00:59:14,820
other set of transactions which also may
have log entries on on a quorum but

2584
00:59:14,820 --> 00:59:14,830
have log entries on on a quorum but
 

2585
00:59:14,830 --> 00:59:16,710
have log entries on on a quorum but
because a database server crashed midway

2586
00:59:16,710 --> 00:59:16,720
because a database server crashed midway
 

2587
00:59:16,720 --> 00:59:18,330
because a database server crashed midway
through those transactions they can

2588
00:59:18,330 --> 00:59:18,340
through those transactions they can
 

2589
00:59:18,340 --> 00:59:23,190
through those transactions they can
never be completed and for those

2590
00:59:23,190 --> 00:59:23,200
never be completed and for those
 

2591
00:59:23,200 --> 00:59:24,930
never be completed and for those
transactions that haven't completed in

2592
00:59:24,930 --> 00:59:24,940
transactions that haven't completed in
 

2593
00:59:24,940 --> 00:59:27,630
transactions that haven't completed in
addition there may be you know we may

2594
00:59:27,630 --> 00:59:27,640
addition there may be you know we may
 

2595
00:59:27,640 --> 00:59:30,870
addition there may be you know we may
have a situation in which you know maybe

2596
00:59:30,870 --> 00:59:30,880
have a situation in which you know maybe
 

2597
00:59:30,880 --> 00:59:33,300
have a situation in which you know maybe
log entry this server has log on three

2598
00:59:33,300 --> 00:59:33,310
log entry this server has log on three
 

2599
00:59:33,310 --> 00:59:33,780
log entry this server has log on three
hundred

2600
00:59:33,780 --> 00:59:33,790
hundred
 

2601
00:59:33,790 --> 00:59:36,930
hundred
and the Surrey has logon 302 and there's

2602
00:59:36,930 --> 00:59:36,940
and the Surrey has logon 302 and there's
 

2603
00:59:36,940 --> 00:59:41,310
and the Surrey has logon 302 and there's
a hundred and four somewhere but no you

2604
00:59:41,310 --> 00:59:41,320
a hundred and four somewhere but no you
 

2605
00:59:41,320 --> 00:59:42,720
a hundred and four somewhere but no you
know for I as yet uncommitted

2606
00:59:42,720 --> 00:59:42,730
know for I as yet uncommitted
 

2607
00:59:42,730 --> 00:59:44,460
know for I as yet uncommitted
transaction before the crash made me

2608
00:59:44,460 --> 00:59:44,470
transaction before the crash made me
 

2609
00:59:44,470 --> 00:59:48,660
transaction before the crash made me
know server got a copy of log entry 103

2610
00:59:48,660 --> 00:59:48,670
know server got a copy of log entry 103
 

2611
00:59:48,670 --> 00:59:52,260
know server got a copy of log entry 103
so after a crash and remember the new

2612
00:59:52,260 --> 00:59:52,270
so after a crash and remember the new
 

2613
00:59:52,270 --> 00:59:54,600
so after a crash and remember the new
database service recovering it does

2614
00:59:54,600 --> 00:59:54,610
database service recovering it does
 

2615
00:59:54,610 --> 00:59:56,580
database service recovering it does
quorum reads to basically find the point

2616
00:59:56,580 --> 00:59:56,590
quorum reads to basically find the point
 

2617
00:59:56,590 --> 00:59:59,460
quorum reads to basically find the point
in the log the highest log number for

2618
00:59:59,460 --> 00:59:59,470
in the log the highest log number for
 

2619
00:59:59,470 --> 01:00:02,520
in the log the highest log number for
which every preceding log entry exists

2620
01:00:02,520 --> 01:00:02,530
which every preceding log entry exists
 

2621
01:00:02,530 --> 01:00:04,650
which every preceding log entry exists
somewhere in the storage service so

2622
01:00:04,650 --> 01:00:04,660
somewhere in the storage service so
 

2623
01:00:04,660 --> 01:00:07,380
somewhere in the storage service so
basically it finds the first missing the

2624
01:00:07,380 --> 01:00:07,390
basically it finds the first missing the
 

2625
01:00:07,390 --> 01:00:08,970
basically it finds the first missing the
number of the first missing log entry

2626
01:00:08,970 --> 01:00:08,980
number of the first missing log entry
 

2627
01:00:08,980 --> 01:00:12,420
number of the first missing log entry
which is 103 and says well and so we're

2628
01:00:12,420 --> 01:00:12,430
which is 103 and says well and so we're
 

2629
01:00:12,430 --> 01:00:14,460
which is 103 and says well and so we're
missing a log entry we can't do anything

2630
01:00:14,460 --> 01:00:14,470
missing a log entry we can't do anything
 

2631
01:00:14,470 --> 01:00:16,530
missing a log entry we can't do anything
with a log after this point because

2632
01:00:16,530 --> 01:00:16,540
with a log after this point because
 

2633
01:00:16,540 --> 01:00:20,430
with a log after this point because
we're like missing an update so the

2634
01:00:20,430 --> 01:00:20,440
we're like missing an update so the
 

2635
01:00:20,440 --> 01:00:21,840
we're like missing an update so the
database server does these quorum reads

2636
01:00:21,840 --> 01:00:21,850
database server does these quorum reads
 

2637
01:00:21,850 --> 01:00:23,100
database server does these quorum reads
it finds a hundred and three is the

2638
01:00:23,100 --> 01:00:23,110
it finds a hundred and three is the
 

2639
01:00:23,110 --> 01:00:27,480
it finds a hundred and three is the
first entry that's MIT that's I can't

2640
01:00:27,480 --> 01:00:27,490
first entry that's MIT that's I can't
 

2641
01:00:27,490 --> 01:00:28,800
first entry that's MIT that's I can't
you know I look at my quorum the

2642
01:00:28,800 --> 01:00:28,810
you know I look at my quorum the
 

2643
01:00:28,810 --> 01:00:31,110
you know I look at my quorum the
server's I can reach and 103 is not

2644
01:00:31,110 --> 01:00:31,120
server's I can reach and 103 is not
 

2645
01:00:31,120 --> 01:00:32,880
server's I can reach and 103 is not
there and the database server will send

2646
01:00:32,880 --> 01:00:32,890
there and the database server will send
 

2647
01:00:32,890 --> 01:00:34,290
there and the database server will send
out a message to all the server saying

2648
01:00:34,290 --> 01:00:34,300
out a message to all the server saying
 

2649
01:00:34,300 --> 01:00:37,320
out a message to all the server saying
look please just discard every log entry

2650
01:00:37,320 --> 01:00:37,330
look please just discard every log entry
 

2651
01:00:37,330 --> 01:00:39,630
look please just discard every log entry
from 103 onwards and those mussels

2652
01:00:39,630 --> 01:00:39,640
from 103 onwards and those mussels
 

2653
01:00:39,640 --> 01:00:43,020
from 103 onwards and those mussels
necessarily not include log entries from

2654
01:00:43,020 --> 01:00:43,030
necessarily not include log entries from
 

2655
01:00:43,030 --> 01:00:45,150
necessarily not include log entries from
committed transactions because we know a

2656
01:00:45,150 --> 01:00:45,160
committed transactions because we know a
 

2657
01:00:45,160 --> 01:00:46,860
committed transactions because we know a
transaction can't commit until all of

2658
01:00:46,860 --> 01:00:46,870
transaction can't commit until all of
 

2659
01:00:46,870 --> 01:00:49,380
transaction can't commit until all of
its entries are on a right corner so we

2660
01:00:49,380 --> 01:00:49,390
its entries are on a right corner so we
 

2661
01:00:49,390 --> 01:00:50,940
its entries are on a right corner so we
would be guaranteed to see them so we're

2662
01:00:50,940 --> 01:00:50,950
would be guaranteed to see them so we're
 

2663
01:00:50,950 --> 01:00:53,100
would be guaranteed to see them so we're
only discarding log entries from

2664
01:00:53,100 --> 01:00:53,110
only discarding log entries from
 

2665
01:00:53,110 --> 01:00:58,200
only discarding log entries from
uncommitted transactions of course so

2666
01:00:58,200 --> 01:00:58,210
uncommitted transactions of course so
 

2667
01:00:58,210 --> 01:00:59,430
uncommitted transactions of course so
we're sort of cutting off the log here

2668
01:00:59,430 --> 01:00:59,440
we're sort of cutting off the log here
 

2669
01:00:59,440 --> 01:01:03,180
we're sort of cutting off the log here
at login 302 these log entries that

2670
01:01:03,180 --> 01:01:03,190
at login 302 these log entries that
 

2671
01:01:03,190 --> 01:01:04,920
at login 302 these log entries that
we're preserving now may actually

2672
01:01:04,920 --> 01:01:04,930
we're preserving now may actually
 

2673
01:01:04,930 --> 01:01:07,290
we're preserving now may actually
include log entries from uncommitted

2674
01:01:07,290 --> 01:01:07,300
include log entries from uncommitted
 

2675
01:01:07,300 --> 01:01:08,850
include log entries from uncommitted
transactions from transactions that were

2676
01:01:08,850 --> 01:01:08,860
transactions from transactions that were
 

2677
01:01:08,860 --> 01:01:10,710
transactions from transactions that were
interrupted by the crash and the

2678
01:01:10,710 --> 01:01:10,720
interrupted by the crash and the
 

2679
01:01:10,720 --> 01:01:12,060
interrupted by the crash and the
database server actually has to detect

2680
01:01:12,060 --> 01:01:12,070
database server actually has to detect
 

2681
01:01:12,070 --> 01:01:14,100
database server actually has to detect
those which you can by seeing a hope you

2682
01:01:14,100 --> 01:01:14,110
those which you can by seeing a hope you
 

2683
01:01:14,110 --> 01:01:16,470
those which you can by seeing a hope you
know a certain transaction there's it

2684
01:01:16,470 --> 01:01:16,480
know a certain transaction there's it
 

2685
01:01:16,480 --> 01:01:18,630
know a certain transaction there's it
has update entries in the log but no

2686
01:01:18,630 --> 01:01:18,640
has update entries in the log but no
 

2687
01:01:18,640 --> 01:01:20,490
has update entries in the log but no
commit record the database server will

2688
01:01:20,490 --> 01:01:20,500
commit record the database server will
 

2689
01:01:20,500 --> 01:01:22,800
commit record the database server will
find the full set of those uncompleted

2690
01:01:22,800 --> 01:01:22,810
find the full set of those uncompleted
 

2691
01:01:22,810 --> 01:01:25,470
find the full set of those uncompleted
transactions and basically issue undo

2692
01:01:25,470 --> 01:01:25,480
transactions and basically issue undo
 

2693
01:01:25,480 --> 01:01:28,320
transactions and basically issue undo
operations I sort of knew log entries

2694
01:01:28,320 --> 01:01:28,330
operations I sort of knew log entries
 

2695
01:01:28,330 --> 01:01:32,720
operations I sort of knew log entries
that undo all of the changes that that

2696
01:01:32,720 --> 01:01:32,730
that undo all of the changes that that
 

2697
01:01:32,730 --> 01:01:35,670
that undo all of the changes that that
that those uncommitted transactions made

2698
01:01:35,670 --> 01:01:35,680
that those uncommitted transactions made
 

2699
01:01:35,680 --> 01:01:38,270
that those uncommitted transactions made
and you know that's the point at which

2700
01:01:38,270 --> 01:01:38,280
and you know that's the point at which
 

2701
01:01:38,280 --> 01:01:41,700
and you know that's the point at which
Aurora needs this these old values in

2702
01:01:41,700 --> 01:01:41,710
Aurora needs this these old values in
 

2703
01:01:41,710 --> 01:01:44,680
Aurora needs this these old values in
the log entries so that a

2704
01:01:44,680 --> 01:01:44,690
the log entries so that a
 

2705
01:01:44,690 --> 01:01:46,839
the log entries so that a
server that's doing recovery after a

2706
01:01:46,839 --> 01:01:46,849
server that's doing recovery after a
 

2707
01:01:46,849 --> 01:01:49,750
server that's doing recovery after a
crash can sort of back out of partially

2708
01:01:49,750 --> 01:01:49,760
crash can sort of back out of partially
 

2709
01:01:49,760 --> 01:02:00,390
crash can sort of back out of partially
completed transactions all right one

2710
01:02:00,390 --> 01:02:00,400
completed transactions all right one
 

2711
01:02:00,400 --> 01:02:03,990
completed transactions all right one
another thing I'd like to talk about is

2712
01:02:03,990 --> 01:02:04,000
another thing I'd like to talk about is
 

2713
01:02:04,000 --> 01:02:09,010
another thing I'd like to talk about is
how Aurora deals with big databases so

2714
01:02:09,010 --> 01:02:09,020
how Aurora deals with big databases so
 

2715
01:02:09,020 --> 01:02:13,089
how Aurora deals with big databases so
so far I've explained the storage setup

2716
01:02:13,089 --> 01:02:13,099
so far I've explained the storage setup
 

2717
01:02:13,099 --> 01:02:17,010
so far I've explained the storage setup
as if the database just has these six

2718
01:02:17,010 --> 01:02:17,020
as if the database just has these six
 

2719
01:02:17,020 --> 01:02:20,349
as if the database just has these six
replicas of its storage and if that was

2720
01:02:20,349 --> 01:02:20,359
replicas of its storage and if that was
 

2721
01:02:20,359 --> 01:02:22,089
replicas of its storage and if that was
all there was to it basically a database

2722
01:02:22,089 --> 01:02:22,099
all there was to it basically a database
 

2723
01:02:22,099 --> 01:02:23,890
all there was to it basically a database
couldn't be you know each of these just

2724
01:02:23,890 --> 01:02:23,900
couldn't be you know each of these just
 

2725
01:02:23,900 --> 01:02:25,960
couldn't be you know each of these just
a computer with a disk or two or

2726
01:02:25,960 --> 01:02:25,970
a computer with a disk or two or
 

2727
01:02:25,970 --> 01:02:28,599
a computer with a disk or two or
something attached to it if this were

2728
01:02:28,599 --> 01:02:28,609
something attached to it if this were
 

2729
01:02:28,609 --> 01:02:31,000
something attached to it if this were
the way the full situation then we

2730
01:02:31,000 --> 01:02:31,010
the way the full situation then we
 

2731
01:02:31,010 --> 01:02:32,319
the way the full situation then we
couldn't have a database that was bigger

2732
01:02:32,319 --> 01:02:32,329
couldn't have a database that was bigger
 

2733
01:02:32,329 --> 01:02:34,390
couldn't have a database that was bigger
than the amount of storage that you

2734
01:02:34,390 --> 01:02:34,400
than the amount of storage that you
 

2735
01:02:34,400 --> 01:02:36,220
than the amount of storage that you
could put on a single machine there's

2736
01:02:36,220 --> 01:02:36,230
could put on a single machine there's
 

2737
01:02:36,230 --> 01:02:37,000
could put on a single machine there's
the fact that we have six machines

2738
01:02:37,000 --> 01:02:37,010
the fact that we have six machines
 

2739
01:02:37,010 --> 01:02:39,309
the fact that we have six machines
doesn't give us six times as much usable

2740
01:02:39,309 --> 01:02:39,319
doesn't give us six times as much usable
 

2741
01:02:39,319 --> 01:02:41,410
doesn't give us six times as much usable
storage because each one I'm storing a

2742
01:02:41,410 --> 01:02:41,420
storage because each one I'm storing a
 

2743
01:02:41,420 --> 01:02:43,210
storage because each one I'm storing a
replica of the same old data again and

2744
01:02:43,210 --> 01:02:43,220
replica of the same old data again and
 

2745
01:02:43,220 --> 01:02:46,690
replica of the same old data again and
again and you know so I want to use

2746
01:02:46,690 --> 01:02:46,700
again and you know so I want to use
 

2747
01:02:46,700 --> 01:02:48,309
again and you know so I want to use
solid-state drives or something we can

2748
01:02:48,309 --> 01:02:48,319
solid-state drives or something we can
 

2749
01:02:48,319 --> 01:02:50,920
solid-state drives or something we can
put you know terabytes of storage on a

2750
01:02:50,920 --> 01:02:50,930
put you know terabytes of storage on a
 

2751
01:02:50,930 --> 01:02:53,950
put you know terabytes of storage on a
single machine but we can't put you know

2752
01:02:53,950 --> 01:02:53,960
single machine but we can't put you know
 

2753
01:02:53,960 --> 01:02:55,450
single machine but we can't put you know
hundreds of terabytes on a single

2754
01:02:55,450 --> 01:02:55,460
hundreds of terabytes on a single
 

2755
01:02:55,460 --> 01:02:59,500
hundreds of terabytes on a single
machine so in order to support customers

2756
01:02:59,500 --> 01:02:59,510
machine so in order to support customers
 

2757
01:02:59,510 --> 01:03:01,990
machine so in order to support customers
who need like more than ten terabytes

2758
01:03:01,990 --> 01:03:02,000
who need like more than ten terabytes
 

2759
01:03:02,000 --> 01:03:06,700
who need like more than ten terabytes
who need to have vast databases Amazon

2760
01:03:06,700 --> 01:03:06,710
who need to have vast databases Amazon
 

2761
01:03:06,710 --> 01:03:09,069
who need to have vast databases Amazon
is happy Amazon will split up the

2762
01:03:09,069 --> 01:03:09,079
is happy Amazon will split up the
 

2763
01:03:09,079 --> 01:03:12,960
is happy Amazon will split up the
databases data onto multiple sets of six

2764
01:03:12,960 --> 01:03:12,970
databases data onto multiple sets of six
 

2765
01:03:12,970 --> 01:03:19,170
databases data onto multiple sets of six
replicas so and the kind of unit of

2766
01:03:19,170 --> 01:03:19,180
replicas so and the kind of unit of
 

2767
01:03:19,180 --> 01:03:21,280
replicas so and the kind of unit of
sharding the unit of splitting up the

2768
01:03:21,280 --> 01:03:21,290
sharding the unit of splitting up the
 

2769
01:03:21,290 --> 01:03:23,950
sharding the unit of splitting up the
data I think is 10 gigabytes so a

2770
01:03:23,950 --> 01:03:23,960
data I think is 10 gigabytes so a
 

2771
01:03:23,960 --> 01:03:25,900
data I think is 10 gigabytes so a
database that needs 20 gigabytes of data

2772
01:03:25,900 --> 01:03:25,910
database that needs 20 gigabytes of data
 

2773
01:03:25,910 --> 01:03:28,390
database that needs 20 gigabytes of data
will use two protection groups these

2774
01:03:28,390 --> 01:03:28,400
will use two protection groups these
 

2775
01:03:28,400 --> 01:03:32,050
will use two protection groups these
these PG things to its data you know sit

2776
01:03:32,050 --> 01:03:32,060
these PG things to its data you know sit
 

2777
01:03:32,060 --> 01:03:35,559
these PG things to its data you know sit
on half of it will sit on the six

2778
01:03:35,559 --> 01:03:35,569
on half of it will sit on the six
 

2779
01:03:35,569 --> 01:03:41,230
on half of it will sit on the six
servers of protection Group one and then

2780
01:03:41,230 --> 01:03:41,240
servers of protection Group one and then
 

2781
01:03:41,240 --> 01:03:44,800
servers of protection Group one and then
they'll be another six servers you know

2782
01:03:44,800 --> 01:03:44,810
they'll be another six servers you know
 

2783
01:03:44,810 --> 01:03:46,630
they'll be another six servers you know
possibly a different set of six storage

2784
01:03:46,630 --> 01:03:46,640
possibly a different set of six storage
 

2785
01:03:46,640 --> 01:03:48,460
possibly a different set of six storage
servers because Amazon's running and

2786
01:03:48,460 --> 01:03:48,470
servers because Amazon's running and
 

2787
01:03:48,470 --> 01:03:49,809
servers because Amazon's running and
like a huge fleet of these storage

2788
01:03:49,809 --> 01:03:49,819
like a huge fleet of these storage
 

2789
01:03:49,819 --> 01:03:51,760
like a huge fleet of these storage
servers that are jointly used by all of

2790
01:03:51,760 --> 01:03:51,770
servers that are jointly used by all of
 

2791
01:03:51,770 --> 01:03:54,730
servers that are jointly used by all of
its Aurora customers the second ten

2792
01:03:54,730 --> 01:03:54,740
its Aurora customers the second ten
 

2793
01:03:54,740 --> 01:03:57,670
its Aurora customers the second ten
gigabytes of the databases 20 gigabytes

2794
01:03:57,670 --> 01:03:57,680
gigabytes of the databases 20 gigabytes
 

2795
01:03:57,680 --> 01:03:58,240
gigabytes of the databases 20 gigabytes
of data

2796
01:03:58,240 --> 01:03:58,250
of data
 

2797
01:03:58,250 --> 01:04:02,730
of data
we'll be replicated on another set of

2798
01:04:02,730 --> 01:04:02,740
we'll be replicated on another set of
 

2799
01:04:02,740 --> 01:04:05,170
we'll be replicated on another set of
you know typically different I'll you

2800
01:04:05,170 --> 01:04:05,180
you know typically different I'll you
 

2801
01:04:05,180 --> 01:04:06,460
you know typically different I'll you
know there could be overlap between

2802
01:04:06,460 --> 01:04:06,470
know there could be overlap between
 

2803
01:04:06,470 --> 01:04:08,710
know there could be overlap between
these but typically just a different set

2804
01:04:08,710 --> 01:04:08,720
these but typically just a different set
 

2805
01:04:08,720 --> 01:04:11,200
these but typically just a different set
of six server so now we get 20 gigabytes

2806
01:04:11,200 --> 01:04:11,210
of six server so now we get 20 gigabytes
 

2807
01:04:11,210 --> 01:04:15,730
of six server so now we get 20 gigabytes
a day done and we have more of these as

2808
01:04:15,730 --> 01:04:15,740
a day done and we have more of these as
 

2809
01:04:15,740 --> 01:04:18,880
a day done and we have more of these as
a database goes bigger one interesting

2810
01:04:18,880 --> 01:04:18,890
a database goes bigger one interesting
 

2811
01:04:18,890 --> 01:04:21,040
a database goes bigger one interesting
piece of fallout from this is that while

2812
01:04:21,040 --> 01:04:21,050
piece of fallout from this is that while
 

2813
01:04:21,050 --> 01:04:25,660
piece of fallout from this is that while
it's clear that you can take the data

2814
01:04:25,660 --> 01:04:25,670
it's clear that you can take the data
 

2815
01:04:25,670 --> 01:04:28,900
it's clear that you can take the data
pages and split them up over multiple

2816
01:04:28,900 --> 01:04:28,910
pages and split them up over multiple
 

2817
01:04:28,910 --> 01:04:30,820
pages and split them up over multiple
independent protection groups maybe you

2818
01:04:30,820 --> 01:04:30,830
independent protection groups maybe you
 

2819
01:04:30,830 --> 01:04:32,440
independent protection groups maybe you
know odd numbered data pages from your

2820
01:04:32,440 --> 01:04:32,450
know odd numbered data pages from your
 

2821
01:04:32,450 --> 01:04:35,380
know odd numbered data pages from your
b-tree go on PG one and even number

2822
01:04:35,380 --> 01:04:35,390
b-tree go on PG one and even number
 

2823
01:04:35,390 --> 01:04:38,050
b-tree go on PG one and even number
pages go on PG - it's good you can shard

2824
01:04:38,050 --> 01:04:38,060
pages go on PG - it's good you can shard
 

2825
01:04:38,060 --> 01:04:40,630
pages go on PG - it's good you can shard
split up the data pages it's not

2826
01:04:40,630 --> 01:04:40,640
split up the data pages it's not
 

2827
01:04:40,640 --> 01:04:41,950
split up the data pages it's not
immediately obvious what to do with a

2828
01:04:41,950 --> 01:04:41,960
immediately obvious what to do with a
 

2829
01:04:41,960 --> 01:04:44,800
immediately obvious what to do with a
log all right how do you split up the

2830
01:04:44,800 --> 01:04:44,810
log all right how do you split up the
 

2831
01:04:44,810 --> 01:04:46,900
log all right how do you split up the
log if you have two of these two

2832
01:04:46,900 --> 01:04:46,910
log if you have two of these two
 

2833
01:04:46,910 --> 01:04:48,610
log if you have two of these two
protection groups or more in a mantra

2834
01:04:48,610 --> 01:04:48,620
protection groups or more in a mantra
 

2835
01:04:48,620 --> 01:04:52,150
protection groups or more in a mantra
tection group and the answer that amazon

2836
01:04:52,150 --> 01:04:52,160
tection group and the answer that amazon
 

2837
01:04:52,160 --> 01:04:54,130
tection group and the answer that amazon
does is that that that Aurora uses is

2838
01:04:54,130 --> 01:04:54,140
does is that that that Aurora uses is
 

2839
01:04:54,140 --> 01:04:55,240
does is that that that Aurora uses is
that the database server when it's

2840
01:04:55,240 --> 01:04:55,250
that the database server when it's
 

2841
01:04:55,250 --> 01:04:57,190
that the database server when it's
sending out a log record it looks at the

2842
01:04:57,190 --> 01:04:57,200
sending out a log record it looks at the
 

2843
01:04:57,200 --> 01:04:59,920
sending out a log record it looks at the
data that the log record modifies and

2844
01:04:59,920 --> 01:04:59,930
data that the log record modifies and
 

2845
01:04:59,930 --> 01:05:03,610
data that the log record modifies and
figures out which protection groups

2846
01:05:03,610 --> 01:05:03,620
figures out which protection groups
 

2847
01:05:03,620 --> 01:05:06,250
figures out which protection groups
store that data and it sends each log

2848
01:05:06,250 --> 01:05:06,260
store that data and it sends each log
 

2849
01:05:06,260 --> 01:05:08,230
store that data and it sends each log
record just to the protection groups

2850
01:05:08,230 --> 01:05:08,240
record just to the protection groups
 

2851
01:05:08,240 --> 01:05:11,350
record just to the protection groups
that store data that's mentioned that's

2852
01:05:11,350 --> 01:05:11,360
that store data that's mentioned that's
 

2853
01:05:11,360 --> 01:05:14,530
that store data that's mentioned that's
modified in the log entry and so that

2854
01:05:14,530 --> 01:05:14,540
modified in the log entry and so that
 

2855
01:05:14,540 --> 01:05:16,720
modified in the log entry and so that
means that each of these protection

2856
01:05:16,720 --> 01:05:16,730
means that each of these protection
 

2857
01:05:16,730 --> 01:05:19,420
means that each of these protection
groups store some fraction of the data

2858
01:05:19,420 --> 01:05:19,430
groups store some fraction of the data
 

2859
01:05:19,430 --> 01:05:22,330
groups store some fraction of the data
pages plus all the log records that

2860
01:05:22,330 --> 01:05:22,340
pages plus all the log records that
 

2861
01:05:22,340 --> 01:05:25,270
pages plus all the log records that
apply to those data pages see these

2862
01:05:25,270 --> 01:05:25,280
apply to those data pages see these
 

2863
01:05:25,280 --> 01:05:27,130
apply to those data pages see these
protection groups stores a subset of a

2864
01:05:27,130 --> 01:05:27,140
protection groups stores a subset of a
 

2865
01:05:27,140 --> 01:05:36,280
protection groups stores a subset of a
log that's relevant to its pages so a

2866
01:05:36,280 --> 01:05:36,290
log that's relevant to its pages so a
 

2867
01:05:36,290 --> 01:05:41,440
log that's relevant to its pages so a
final maybe I erase the photons

2868
01:05:41,440 --> 01:05:41,450
final maybe I erase the photons
 

2869
01:05:41,450 --> 01:05:43,810
final maybe I erase the photons
requirements but a final requirement is

2870
01:05:43,810 --> 01:05:43,820
requirements but a final requirement is
 

2871
01:05:43,820 --> 01:05:48,250
requirements but a final requirement is
that if a if ass one of these storage

2872
01:05:48,250 --> 01:05:48,260
that if a if ass one of these storage
 

2873
01:05:48,260 --> 01:05:50,590
that if a if ass one of these storage
servers crashes we want to be able to

2874
01:05:50,590 --> 01:05:50,600
servers crashes we want to be able to
 

2875
01:05:50,600 --> 01:05:53,050
servers crashes we want to be able to
replace it as soon as possible right

2876
01:05:53,050 --> 01:05:53,060
replace it as soon as possible right
 

2877
01:05:53,060 --> 01:05:55,390
replace it as soon as possible right
because you know if we wait too long

2878
01:05:55,390 --> 01:05:55,400
because you know if we wait too long
 

2879
01:05:55,400 --> 01:05:57,490
because you know if we wait too long
then we risk maybe three of them are

2880
01:05:57,490 --> 01:05:57,500
then we risk maybe three of them are
 

2881
01:05:57,500 --> 01:05:58,840
then we risk maybe three of them are
four of them crashing and a four of them

2882
01:05:58,840 --> 01:05:58,850
four of them crashing and a four of them
 

2883
01:05:58,850 --> 01:06:01,540
four of them crashing and a four of them
crash then we actually can't recover

2884
01:06:01,540 --> 01:06:01,550
crash then we actually can't recover
 

2885
01:06:01,550 --> 01:06:02,740
crash then we actually can't recover
because then we don't have a reform

2886
01:06:02,740 --> 01:06:02,750
because then we don't have a reform
 

2887
01:06:02,750 --> 01:06:05,980
because then we don't have a reform
anymore so we need to regain replication

2888
01:06:05,980 --> 01:06:05,990
anymore so we need to regain replication
 

2889
01:06:05,990 --> 01:06:08,020
anymore so we need to regain replication
as soon as possible if you think about

2890
01:06:08,020 --> 01:06:08,030
as soon as possible if you think about
 

2891
01:06:08,030 --> 01:06:11,470
as soon as possible if you think about
any one storage server sure this this do

2892
01:06:11,470 --> 01:06:11,480
any one storage server sure this this do
 

2893
01:06:11,480 --> 01:06:13,690
any one storage server sure this this do
which server is storing 10 gigabytes for

2894
01:06:13,690 --> 01:06:13,700
which server is storing 10 gigabytes for
 

2895
01:06:13,700 --> 01:06:15,609
which server is storing 10 gigabytes for
you know my databases protection group

2896
01:06:15,609 --> 01:06:15,619
you know my databases protection group
 

2897
01:06:15,619 --> 01:06:17,800
you know my databases protection group
but in fact the physical thing you know

2898
01:06:17,800 --> 01:06:17,810
but in fact the physical thing you know
 

2899
01:06:17,810 --> 01:06:19,420
but in fact the physical thing you know
the physical setup of any one of these

2900
01:06:19,420 --> 01:06:19,430
the physical setup of any one of these
 

2901
01:06:19,430 --> 01:06:21,520
the physical setup of any one of these
servers is that it has a you know maybe

2902
01:06:21,520 --> 01:06:21,530
servers is that it has a you know maybe
 

2903
01:06:21,530 --> 01:06:23,320
servers is that it has a you know maybe
a one or two or something

2904
01:06:23,320 --> 01:06:23,330
a one or two or something
 

2905
01:06:23,330 --> 01:06:26,890
a one or two or something
terabyte disk on it that's storing 10

2906
01:06:26,890 --> 01:06:26,900
terabyte disk on it that's storing 10
 

2907
01:06:26,900 --> 01:06:31,359
terabyte disk on it that's storing 10
gigabyte segments of a hundred or more

2908
01:06:31,359 --> 01:06:31,369
gigabyte segments of a hundred or more
 

2909
01:06:31,369 --> 01:06:34,660
gigabyte segments of a hundred or more
different Aurora instances so what's

2910
01:06:34,660 --> 01:06:34,670
different Aurora instances so what's
 

2911
01:06:34,670 --> 01:06:37,450
different Aurora instances so what's
what's on this physical machine is you

2912
01:06:37,450 --> 01:06:37,460
what's on this physical machine is you
 

2913
01:06:37,460 --> 01:06:39,400
what's on this physical machine is you
know 10 terabyte era byte or 10

2914
01:06:39,400 --> 01:06:39,410
know 10 terabyte era byte or 10
 

2915
01:06:39,410 --> 01:06:42,099
know 10 terabyte era byte or 10
terabytes or whatever of data in total

2916
01:06:42,099 --> 01:06:42,109
terabytes or whatever of data in total
 

2917
01:06:42,109 --> 01:06:44,530
terabytes or whatever of data in total
so when there's a when one of these

2918
01:06:44,530 --> 01:06:44,540
so when there's a when one of these
 

2919
01:06:44,540 --> 01:06:47,590
so when there's a when one of these
storage servers crashes it's taking with

2920
01:06:47,590 --> 01:06:47,600
storage servers crashes it's taking with
 

2921
01:06:47,600 --> 01:06:50,620
storage servers crashes it's taking with
it not just the 10 gigabytes from my

2922
01:06:50,620 --> 01:06:50,630
it not just the 10 gigabytes from my
 

2923
01:06:50,630 --> 01:06:53,349
it not just the 10 gigabytes from my
database but also 10 gigabytes from a

2924
01:06:53,349 --> 01:06:53,359
database but also 10 gigabytes from a
 

2925
01:06:53,359 --> 01:06:55,300
database but also 10 gigabytes from a
hundred other people's databases as well

2926
01:06:55,300 --> 01:06:55,310
hundred other people's databases as well
 

2927
01:06:55,310 --> 01:06:58,090
hundred other people's databases as well
and what has to be replicated is not

2928
01:06:58,090 --> 01:06:58,100
and what has to be replicated is not
 

2929
01:06:58,100 --> 01:07:00,310
and what has to be replicated is not
just my 10 gigabytes but the entire

2930
01:07:00,310 --> 01:07:00,320
just my 10 gigabytes but the entire
 

2931
01:07:00,320 --> 01:07:03,010
just my 10 gigabytes but the entire
terabyte or whatever or more that's

2932
01:07:03,010 --> 01:07:03,020
terabyte or whatever or more that's
 

2933
01:07:03,020 --> 01:07:05,530
terabyte or whatever or more that's
stored on this servers solid-state drive

2934
01:07:05,530 --> 01:07:05,540
stored on this servers solid-state drive
 

2935
01:07:05,540 --> 01:07:08,050
stored on this servers solid-state drive
and if you think through the numbers you

2936
01:07:08,050 --> 01:07:08,060
and if you think through the numbers you
 

2937
01:07:08,060 --> 01:07:10,150
and if you think through the numbers you
know maybe we have 10 gigabit per second

2938
01:07:10,150 --> 01:07:10,160
know maybe we have 10 gigabit per second
 

2939
01:07:10,160 --> 01:07:15,070
know maybe we have 10 gigabit per second
network interfaces if we need to move 10

2940
01:07:15,070 --> 01:07:15,080
network interfaces if we need to move 10
 

2941
01:07:15,080 --> 01:07:18,430
network interfaces if we need to move 10
terabytes across a 10 gigabyte per

2942
01:07:18,430 --> 01:07:18,440
terabytes across a 10 gigabyte per
 

2943
01:07:18,440 --> 01:07:19,720
terabytes across a 10 gigabyte per
second network interface from one

2944
01:07:19,720 --> 01:07:19,730
second network interface from one
 

2945
01:07:19,730 --> 01:07:22,410
second network interface from one
machine to another it's gonna take I

2946
01:07:22,410 --> 01:07:22,420
machine to another it's gonna take I
 

2947
01:07:22,420 --> 01:07:25,210
machine to another it's gonna take I
don't know a thousand seconds ten

2948
01:07:25,210 --> 01:07:25,220
don't know a thousand seconds ten
 

2949
01:07:25,220 --> 01:07:26,920
don't know a thousand seconds ten
thousand seconds maybe ten thousand

2950
01:07:26,920 --> 01:07:26,930
thousand seconds maybe ten thousand
 

2951
01:07:26,930 --> 01:07:31,090
thousand seconds maybe ten thousand
seconds and that's way too long right we

2952
01:07:31,090 --> 01:07:31,100
seconds and that's way too long right we
 

2953
01:07:31,100 --> 01:07:32,230
seconds and that's way too long right we
don't want to have to sit there and wait

2954
01:07:32,230 --> 01:07:32,240
don't want to have to sit there and wait
 

2955
01:07:32,240 --> 01:07:34,570
don't want to have to sit there and wait
you know it we don't want to have a

2956
01:07:34,570 --> 01:07:34,580
you know it we don't want to have a
 

2957
01:07:34,580 --> 01:07:37,030
you know it we don't want to have a
strategy in which the way we weak we can

2958
01:07:37,030 --> 01:07:37,040
strategy in which the way we weak we can
 

2959
01:07:37,040 --> 01:07:40,060
strategy in which the way we weak we can
reconstruct this is to find is to have

2960
01:07:40,060 --> 01:07:40,070
reconstruct this is to find is to have
 

2961
01:07:40,070 --> 01:07:41,620
reconstruct this is to find is to have
another machine that was replicating

2962
01:07:41,620 --> 01:07:41,630
another machine that was replicating
 

2963
01:07:41,630 --> 01:07:43,599
another machine that was replicating
everything on it and had that machine

2964
01:07:43,599 --> 01:07:43,609
everything on it and had that machine
 

2965
01:07:43,609 --> 01:07:46,930
everything on it and had that machine
send 10 terabytes to a replacement

2966
01:07:46,930 --> 01:07:46,940
send 10 terabytes to a replacement
 

2967
01:07:46,940 --> 01:07:48,400
send 10 terabytes to a replacement
machine we're gonna be able to

2968
01:07:48,400 --> 01:07:48,410
machine we're gonna be able to
 

2969
01:07:48,410 --> 01:07:50,080
machine we're gonna be able to
reconstruct the data far faster than

2970
01:07:50,080 --> 01:07:50,090
reconstruct the data far faster than
 

2971
01:07:50,090 --> 01:07:52,840
reconstruct the data far faster than
that and so the actual setup they use is

2972
01:07:52,840 --> 01:07:52,850
that and so the actual setup they use is
 

2973
01:07:52,850 --> 01:07:56,440
that and so the actual setup they use is
that if I have a particular storage

2974
01:07:56,440 --> 01:07:56,450
that if I have a particular storage
 

2975
01:07:56,450 --> 01:07:57,599
that if I have a particular storage
server

2976
01:07:57,599 --> 01:07:57,609
server
 

2977
01:07:57,609 --> 01:08:01,840
server
it stores many many segments you know

2978
01:08:01,840 --> 01:08:01,850
it stores many many segments you know
 

2979
01:08:01,850 --> 01:08:04,420
it stores many many segments you know
replicas of many 10 gigabyte protection

2980
01:08:04,420 --> 01:08:04,430
replicas of many 10 gigabyte protection
 

2981
01:08:04,430 --> 01:08:07,470
replicas of many 10 gigabyte protection
groups so maybe this protection group

2982
01:08:07,470 --> 01:08:07,480
groups so maybe this protection group
 

2983
01:08:07,480 --> 01:08:09,820
groups so maybe this protection group
maybe this segment that it's storing

2984
01:08:09,820 --> 01:08:09,830
maybe this segment that it's storing
 

2985
01:08:09,830 --> 01:08:12,820
maybe this segment that it's storing
data for the other envy for this one the

2986
01:08:12,820 --> 01:08:12,830
data for the other envy for this one the
 

2987
01:08:12,830 --> 01:08:17,470
data for the other envy for this one the
other replicas are you know these five

2988
01:08:17,470 --> 01:08:17,480
other replicas are you know these five
 

2989
01:08:17,480 --> 01:08:19,809
other replicas are you know these five
other machines all right so these are

2990
01:08:19,809 --> 01:08:19,819
other machines all right so these are
 

2991
01:08:19,819 --> 01:08:22,729
other machines all right so these are
all storing

2992
01:08:22,729 --> 01:08:22,739

 

2993
01:08:22,739 --> 01:08:25,079

segments of protection group a and so

2994
01:08:25,079 --> 01:08:25,089
segments of protection group a and so
 

2995
01:08:25,089 --> 01:08:26,309
segments of protection group a and so
you know there's a whole bunch of other

2996
01:08:26,309 --> 01:08:26,319
you know there's a whole bunch of other
 

2997
01:08:26,319 --> 01:08:27,689
you know there's a whole bunch of other
ones that we're also storing so I mean

2998
01:08:27,689 --> 01:08:27,699
ones that we're also storing so I mean
 

2999
01:08:27,699 --> 01:08:29,279
ones that we're also storing so I mean
we may be this particular machine also

3000
01:08:29,279 --> 01:08:29,289
we may be this particular machine also
 

3001
01:08:29,289 --> 01:08:33,569
we may be this particular machine also
stores a replica for protecting group B

3002
01:08:33,569 --> 01:08:33,579
stores a replica for protecting group B
 

3003
01:08:33,579 --> 01:08:36,120
stores a replica for protecting group B
but the other copies of the data for B

3004
01:08:36,120 --> 01:08:36,130
but the other copies of the data for B
 

3005
01:08:36,130 --> 01:08:38,970
but the other copies of the data for B
are going to be put on a disjoint set of

3006
01:08:38,970 --> 01:08:38,980
are going to be put on a disjoint set of
 

3007
01:08:38,980 --> 01:08:41,430
are going to be put on a disjoint set of
servers right so now there's five

3008
01:08:41,430 --> 01:08:41,440
servers right so now there's five
 

3009
01:08:41,440 --> 01:08:43,259
servers right so now there's five
servers that have the other copies of B

3010
01:08:43,259 --> 01:08:43,269
servers that have the other copies of B
 

3011
01:08:43,269 --> 01:08:48,779
servers that have the other copies of B
and so on for all of the segments that

3012
01:08:48,779 --> 01:08:48,789
and so on for all of the segments that
 

3013
01:08:48,789 --> 01:08:50,430
and so on for all of the segments that
this server that are sitting on this

3014
01:08:50,430 --> 01:08:50,440
this server that are sitting on this
 

3015
01:08:50,440 --> 01:08:52,410
this server that are sitting on this
storage servers hard drive for you know

3016
01:08:52,410 --> 01:08:52,420
storage servers hard drive for you know
 

3017
01:08:52,420 --> 01:08:55,559
storage servers hard drive for you know
many many different Aurora instances so

3018
01:08:55,559 --> 01:08:55,569
many many different Aurora instances so
 

3019
01:08:55,569 --> 01:08:57,169
many many different Aurora instances so
that means that this machine goes down

3020
01:08:57,169 --> 01:08:57,179
that means that this machine goes down
 

3021
01:08:57,179 --> 01:09:00,329
that means that this machine goes down
the replacement strategy is that we pick

3022
01:09:00,329 --> 01:09:00,339
the replacement strategy is that we pick
 

3023
01:09:00,339 --> 01:09:01,890
the replacement strategy is that we pick
if we're say we're storing a hundred of

3024
01:09:01,890 --> 01:09:01,900
if we're say we're storing a hundred of
 

3025
01:09:01,900 --> 01:09:04,049
if we're say we're storing a hundred of
these segments on it we pick a hundred

3026
01:09:04,049 --> 01:09:04,059
these segments on it we pick a hundred
 

3027
01:09:04,059 --> 01:09:09,450
these segments on it we pick a hundred
different storage servers each of which

3028
01:09:09,450 --> 01:09:09,460
different storage servers each of which
 

3029
01:09:09,460 --> 01:09:13,439
different storage servers each of which
is gonna pick up one new segment that is

3030
01:09:13,439 --> 01:09:13,449
is gonna pick up one new segment that is
 

3031
01:09:13,449 --> 01:09:14,939
is gonna pick up one new segment that is
each of which is going to now be

3032
01:09:14,939 --> 01:09:14,949
each of which is going to now be
 

3033
01:09:14,949 --> 01:09:17,160
each of which is going to now be
participating in one more protection

3034
01:09:17,160 --> 01:09:17,170
participating in one more protection
 

3035
01:09:17,170 --> 01:09:20,039
participating in one more protection
group so one one we miss like one server

3036
01:09:20,039 --> 01:09:20,049
group so one one we miss like one server
 

3037
01:09:20,049 --> 01:09:22,799
group so one one we miss like one server
to be replicate on for each of these ten

3038
01:09:22,799 --> 01:09:22,809
to be replicate on for each of these ten
 

3039
01:09:22,809 --> 01:09:24,629
to be replicate on for each of these ten
gigabytes segments and now we have you

3040
01:09:24,629 --> 01:09:24,639
gigabytes segments and now we have you
 

3041
01:09:24,639 --> 01:09:28,229
gigabytes segments and now we have you
know maybe 100 sort of different segment

3042
01:09:28,229 --> 01:09:28,239
know maybe 100 sort of different segment
 

3043
01:09:28,239 --> 01:09:29,430
know maybe 100 sort of different segment
servers and you know I probably storing

3044
01:09:29,430 --> 01:09:29,440
servers and you know I probably storing
 

3045
01:09:29,440 --> 01:09:30,779
servers and you know I probably storing
other stuff but they have a little bit

3046
01:09:30,779 --> 01:09:30,789
other stuff but they have a little bit
 

3047
01:09:30,789 --> 01:09:32,549
other stuff but they have a little bit
of free disk space and then for each of

3048
01:09:32,549 --> 01:09:32,559
of free disk space and then for each of
 

3049
01:09:32,559 --> 01:09:35,849
of free disk space and then for each of
these we pick one machine one of the

3050
01:09:35,849 --> 01:09:35,859
these we pick one machine one of the
 

3051
01:09:35,859 --> 01:09:38,129
these we pick one machine one of the
replicas that we're going to copy the

3052
01:09:38,129 --> 01:09:38,139
replicas that we're going to copy the
 

3053
01:09:38,139 --> 01:09:39,899
replicas that we're going to copy the
data from one of the remaining replicas

3054
01:09:39,899 --> 01:09:39,909
data from one of the remaining replicas
 

3055
01:09:39,909 --> 01:09:41,399
data from one of the remaining replicas
so maybe for a we're going to copy from

3056
01:09:41,399 --> 01:09:41,409
so maybe for a we're going to copy from
 

3057
01:09:41,409 --> 01:09:43,739
so maybe for a we're going to copy from
there for B from here you know if we

3058
01:09:43,739 --> 01:09:43,749
there for B from here you know if we
 

3059
01:09:43,749 --> 01:09:47,729
there for B from here you know if we
have five other copies with C we pick a

3060
01:09:47,729 --> 01:09:47,739
have five other copies with C we pick a
 

3061
01:09:47,739 --> 01:09:50,879
have five other copies with C we pick a
different server for C and so we have we

3062
01:09:50,879 --> 01:09:50,889
different server for C and so we have we
 

3063
01:09:50,889 --> 01:09:53,399
different server for C and so we have we
copy a from this server to that server

3064
01:09:53,399 --> 01:09:53,409
copy a from this server to that server
 

3065
01:09:53,409 --> 01:09:57,839
copy a from this server to that server
and B like this and C like this and so

3066
01:09:57,839 --> 01:09:57,849
and B like this and C like this and so
 

3067
01:09:57,849 --> 01:10:01,739
and B like this and C like this and so
now we have a hundred different 10

3068
01:10:01,739 --> 01:10:01,749
now we have a hundred different 10
 

3069
01:10:01,749 --> 01:10:03,950
now we have a hundred different 10
gigabyte copies going on in parallel

3070
01:10:03,950 --> 01:10:03,960
gigabyte copies going on in parallel
 

3071
01:10:03,960 --> 01:10:07,350
gigabyte copies going on in parallel
across the network and assuming you know

3072
01:10:07,350 --> 01:10:07,360
across the network and assuming you know
 

3073
01:10:07,360 --> 01:10:09,359
across the network and assuming you know
we have enough servers that these can

3074
01:10:09,359 --> 01:10:09,369
we have enough servers that these can
 

3075
01:10:09,369 --> 01:10:11,989
we have enough servers that these can
all be disjoint and we have plenty of

3076
01:10:11,989 --> 01:10:11,999
all be disjoint and we have plenty of
 

3077
01:10:11,999 --> 01:10:14,879
all be disjoint and we have plenty of
bandwidth in switching network that

3078
01:10:14,879 --> 01:10:14,889
bandwidth in switching network that
 

3079
01:10:14,889 --> 01:10:17,839
bandwidth in switching network that
connects them now we can copy our

3080
01:10:17,839 --> 01:10:17,849
connects them now we can copy our
 

3081
01:10:17,849 --> 01:10:20,129
connects them now we can copy our
terabyte or 10 terabytes or whatever of

3082
01:10:20,129 --> 01:10:20,139
terabyte or 10 terabytes or whatever of
 

3083
01:10:20,139 --> 01:10:23,100
terabyte or 10 terabytes or whatever of
data and total in parallel with a

3084
01:10:23,100 --> 01:10:23,110
data and total in parallel with a
 

3085
01:10:23,110 --> 01:10:25,560
data and total in parallel with a
hundredfold parallelism and the whole

3086
01:10:25,560 --> 01:10:25,570
hundredfold parallelism and the whole
 

3087
01:10:25,570 --> 01:10:27,479
hundredfold parallelism and the whole
thing will take you know 10 seconds or

3088
01:10:27,479 --> 01:10:27,489
thing will take you know 10 seconds or
 

3089
01:10:27,489 --> 01:10:29,279
thing will take you know 10 seconds or
something instead of taking a thousand

3090
01:10:29,279 --> 01:10:29,289
something instead of taking a thousand
 

3091
01:10:29,289 --> 01:10:30,719
something instead of taking a thousand
seconds if there were just two machines

3092
01:10:30,719 --> 01:10:30,729
seconds if there were just two machines
 

3093
01:10:30,729 --> 01:10:34,439
seconds if there were just two machines
involved anyway so this is

3094
01:10:34,439 --> 01:10:34,449
involved anyway so this is
 

3095
01:10:34,449 --> 01:10:35,729
involved anyway so this is
this is the strategies they use and it

3096
01:10:35,729 --> 01:10:35,739
this is the strategies they use and it
 

3097
01:10:35,739 --> 01:10:37,080
this is the strategies they use and it
means that they can recover you know for

3098
01:10:37,080 --> 01:10:37,090
means that they can recover you know for
 

3099
01:10:37,090 --> 01:10:39,689
means that they can recover you know for
machine dies they can recover in

3100
01:10:39,689 --> 01:10:39,699
machine dies they can recover in
 

3101
01:10:39,699 --> 01:10:41,669
machine dies they can recover in
parallel from one machine's death

3102
01:10:41,669 --> 01:10:41,679
parallel from one machine's death
 

3103
01:10:41,679 --> 01:10:45,330
parallel from one machine's death
extremely quickly if lots of machines

3104
01:10:45,330 --> 01:10:45,340
extremely quickly if lots of machines
 

3105
01:10:45,340 --> 01:10:49,080
extremely quickly if lots of machines
diets doesn't work as well but they can

3106
01:10:49,080 --> 01:10:49,090
diets doesn't work as well but they can
 

3107
01:10:49,090 --> 01:10:50,370
diets doesn't work as well but they can
recover from single they can be

3108
01:10:50,370 --> 01:10:50,380
recover from single they can be
 

3109
01:10:50,380 --> 01:10:52,169
recover from single they can be
replicate from single machine crashes

3110
01:10:52,169 --> 01:10:52,179
replicate from single machine crashes
 

3111
01:10:52,179 --> 01:10:58,109
replicate from single machine crashes
extremely quickly alright so a final

3112
01:10:58,109 --> 01:10:58,119
extremely quickly alright so a final
 

3113
01:10:58,119 --> 01:10:59,819
extremely quickly alright so a final
thing that the paper mentions if you

3114
01:10:59,819 --> 01:10:59,829
thing that the paper mentions if you
 

3115
01:10:59,829 --> 01:11:02,939
thing that the paper mentions if you
look at figure three you'll see that not

3116
01:11:02,939 --> 01:11:02,949
look at figure three you'll see that not
 

3117
01:11:02,949 --> 01:11:06,270
look at figure three you'll see that not
only do they have this main database but

3118
01:11:06,270 --> 01:11:06,280
only do they have this main database but
 

3119
01:11:06,280 --> 01:11:09,870
only do they have this main database but
they also have replica databases so for

3120
01:11:09,870 --> 01:11:09,880
they also have replica databases so for
 

3121
01:11:09,880 --> 01:11:12,120
they also have replica databases so for
many of their customers many of their

3122
01:11:12,120 --> 01:11:12,130
many of their customers many of their
 

3123
01:11:12,130 --> 01:11:14,819
many of their customers many of their
customers see far more read-only queries

3124
01:11:14,819 --> 01:11:14,829
customers see far more read-only queries
 

3125
01:11:14,829 --> 01:11:17,609
customers see far more read-only queries
than they see readwrite queries that is

3126
01:11:17,609 --> 01:11:17,619
than they see readwrite queries that is
 

3127
01:11:17,619 --> 01:11:19,199
than they see readwrite queries that is
if you think about a web server if you

3128
01:11:19,199 --> 01:11:19,209
if you think about a web server if you
 

3129
01:11:19,209 --> 01:11:21,209
if you think about a web server if you
just view a web page on some website

3130
01:11:21,209 --> 01:11:21,219
just view a web page on some website
 

3131
01:11:21,219 --> 01:11:24,060
just view a web page on some website
then chances are the web server you

3132
01:11:24,060 --> 01:11:24,070
then chances are the web server you
 

3133
01:11:24,070 --> 01:11:25,709
then chances are the web server you
connected to has to read lots and lots

3134
01:11:25,709 --> 01:11:25,719
connected to has to read lots and lots
 

3135
01:11:25,719 --> 01:11:28,140
connected to has to read lots and lots
and stuff in order to generate all the

3136
01:11:28,140 --> 01:11:28,150
and stuff in order to generate all the
 

3137
01:11:28,150 --> 01:11:30,180
and stuff in order to generate all the
things that are shown on the page to you

3138
01:11:30,180 --> 01:11:30,190
things that are shown on the page to you
 

3139
01:11:30,190 --> 01:11:32,009
things that are shown on the page to you
maybe hundreds of different items have

3140
01:11:32,009 --> 01:11:32,019
maybe hundreds of different items have
 

3141
01:11:32,019 --> 01:11:33,959
maybe hundreds of different items have
to be read out of the database or so out

3142
01:11:33,959 --> 01:11:33,969
to be read out of the database or so out
 

3143
01:11:33,969 --> 01:11:35,489
to be read out of the database or so out
of some database but the number of

3144
01:11:35,489 --> 01:11:35,499
of some database but the number of
 

3145
01:11:35,499 --> 01:11:37,620
of some database but the number of
writes for a typical web page view is

3146
01:11:37,620 --> 01:11:37,630
writes for a typical web page view is
 

3147
01:11:37,630 --> 01:11:39,330
writes for a typical web page view is
usually much much smaller maybe some

3148
01:11:39,330 --> 01:11:39,340
usually much much smaller maybe some
 

3149
01:11:39,340 --> 01:11:41,250
usually much much smaller maybe some
statistics have to be updated or a

3150
01:11:41,250 --> 01:11:41,260
statistics have to be updated or a
 

3151
01:11:41,260 --> 01:11:42,629
statistics have to be updated or a
little bit of history for you or

3152
01:11:42,629 --> 01:11:42,639
little bit of history for you or
 

3153
01:11:42,639 --> 01:11:44,430
little bit of history for you or
something so you might have a hundred to

3154
01:11:44,430 --> 01:11:44,440
something so you might have a hundred to
 

3155
01:11:44,440 --> 01:11:48,390
something so you might have a hundred to
one ratio of reads to writes that is you

3156
01:11:48,390 --> 01:11:48,400
one ratio of reads to writes that is you
 

3157
01:11:48,400 --> 01:11:50,729
one ratio of reads to writes that is you
may typically have a large large large

3158
01:11:50,729 --> 01:11:50,739
may typically have a large large large
 

3159
01:11:50,739 --> 01:11:54,509
may typically have a large large large
number of straight read only database

3160
01:11:54,509 --> 01:11:54,519
number of straight read only database
 

3161
01:11:54,519 --> 01:11:57,719
number of straight read only database
queries now with this set up the writes

3162
01:11:57,719 --> 01:11:57,729
queries now with this set up the writes
 

3163
01:11:57,729 --> 01:11:59,879
queries now with this set up the writes
can only go through the one database

3164
01:11:59,879 --> 01:11:59,889
can only go through the one database
 

3165
01:11:59,889 --> 01:12:01,140
can only go through the one database
server because we really can only

3166
01:12:01,140 --> 01:12:01,150
server because we really can only
 

3167
01:12:01,150 --> 01:12:03,120
server because we really can only
support one writer for this storage

3168
01:12:03,120 --> 01:12:03,130
support one writer for this storage
 

3169
01:12:03,130 --> 01:12:06,060
support one writer for this storage
strategy and I think you know one place

3170
01:12:06,060 --> 01:12:06,070
strategy and I think you know one place
 

3171
01:12:06,070 --> 01:12:07,469
strategy and I think you know one place
where the rubber really hits the road

3172
01:12:07,469 --> 01:12:07,479
where the rubber really hits the road
 

3173
01:12:07,479 --> 01:12:09,479
where the rubber really hits the road
there is that the log entries have to be

3174
01:12:09,479 --> 01:12:09,489
there is that the log entries have to be
 

3175
01:12:09,489 --> 01:12:11,759
there is that the log entries have to be
numbered sequentially and that's easy to

3176
01:12:11,759 --> 01:12:11,769
numbered sequentially and that's easy to
 

3177
01:12:11,769 --> 01:12:13,469
numbered sequentially and that's easy to
do if all the writes go through a single

3178
01:12:13,469 --> 01:12:13,479
do if all the writes go through a single
 

3179
01:12:13,479 --> 01:12:15,449
do if all the writes go through a single
server and extremely difficult if we

3180
01:12:15,449 --> 01:12:15,459
server and extremely difficult if we
 

3181
01:12:15,459 --> 01:12:17,430
server and extremely difficult if we
have lots of different servers all sort

3182
01:12:17,430 --> 01:12:17,440
have lots of different servers all sort
 

3183
01:12:17,440 --> 01:12:19,080
have lots of different servers all sort
of writing in an uncoordinated way to

3184
01:12:19,080 --> 01:12:19,090
of writing in an uncoordinated way to
 

3185
01:12:19,090 --> 01:12:21,870
of writing in an uncoordinated way to
the same database so the writes really

3186
01:12:21,870 --> 01:12:21,880
the same database so the writes really
 

3187
01:12:21,880 --> 01:12:24,319
the same database so the writes really
have to be go through one database but

3188
01:12:24,319 --> 01:12:24,329
have to be go through one database but
 

3189
01:12:24,329 --> 01:12:27,419
have to be go through one database but
we could set up and indeed Amazon does

3190
01:12:27,419 --> 01:12:27,429
we could set up and indeed Amazon does
 

3191
01:12:27,429 --> 01:12:29,459
we could set up and indeed Amazon does
set up a situation where we have read

3192
01:12:29,459 --> 01:12:29,469
set up a situation where we have read
 

3193
01:12:29,469 --> 01:12:32,699
set up a situation where we have read
only database replicas that can read

3194
01:12:32,699 --> 01:12:32,709
only database replicas that can read
 

3195
01:12:32,709 --> 01:12:35,459
only database replicas that can read
from these storage servers and so the

3196
01:12:35,459 --> 01:12:35,469
from these storage servers and so the
 

3197
01:12:35,469 --> 01:12:38,520
from these storage servers and so the
full glory of figure three is that in

3198
01:12:38,520 --> 01:12:38,530
full glory of figure three is that in
 

3199
01:12:38,530 --> 01:12:40,709
full glory of figure three is that in
addition to the main database server

3200
01:12:40,709 --> 01:12:40,719
addition to the main database server
 

3201
01:12:40,719 --> 01:12:42,870
addition to the main database server
that handles the write requests there's

3202
01:12:42,870 --> 01:12:42,880
that handles the write requests there's
 

3203
01:12:42,880 --> 01:12:48,270
that handles the write requests there's
also a set of read-only

3204
01:12:48,270 --> 01:12:48,280
also a set of read-only
 

3205
01:12:48,280 --> 01:12:50,950
also a set of read-only
databases and they say they can support

3206
01:12:50,950 --> 01:12:50,960
databases and they say they can support
 

3207
01:12:50,960 --> 01:12:53,020
databases and they say they can support
up to 15 so you can actually get a lot

3208
01:12:53,020 --> 01:12:53,030
up to 15 so you can actually get a lot
 

3209
01:12:53,030 --> 01:12:56,500
up to 15 so you can actually get a lot
of you know if your senior we'd have you

3210
01:12:56,500 --> 01:12:56,510
of you know if your senior we'd have you
 

3211
01:12:56,510 --> 01:12:58,840
of you know if your senior we'd have you
workload a lot of it can be you know

3212
01:12:58,840 --> 01:12:58,850
workload a lot of it can be you know
 

3213
01:12:58,850 --> 01:13:01,180
workload a lot of it can be you know
most of it can be sort of hived off to a

3214
01:13:01,180 --> 01:13:01,190
most of it can be sort of hived off to a
 

3215
01:13:01,190 --> 01:13:02,950
most of it can be sort of hived off to a
whole bunch of these read-only databases

3216
01:13:02,950 --> 01:13:02,960
whole bunch of these read-only databases
 

3217
01:13:02,960 --> 01:13:05,440
whole bunch of these read-only databases
and when a client sends a read request

3218
01:13:05,440 --> 01:13:05,450
and when a client sends a read request
 

3219
01:13:05,450 --> 01:13:07,150
and when a client sends a read request
to read only database what happens is

3220
01:13:07,150 --> 01:13:07,160
to read only database what happens is
 

3221
01:13:07,160 --> 01:13:09,460
to read only database what happens is
the read only database figures out you

3222
01:13:09,460 --> 01:13:09,470
the read only database figures out you
 

3223
01:13:09,470 --> 01:13:11,770
the read only database figures out you
know what data pages it needs to serve

3224
01:13:11,770 --> 01:13:11,780
know what data pages it needs to serve
 

3225
01:13:11,780 --> 01:13:14,110
know what data pages it needs to serve
that request and sends reads into the

3226
01:13:14,110 --> 01:13:14,120
that request and sends reads into the
 

3227
01:13:14,120 --> 01:13:15,910
that request and sends reads into the
directly into the storage system without

3228
01:13:15,910 --> 01:13:15,920
directly into the storage system without
 

3229
01:13:15,920 --> 01:13:21,490
directly into the storage system without
bothering the main readwrite database so

3230
01:13:21,490 --> 01:13:21,500
bothering the main readwrite database so
 

3231
01:13:21,500 --> 01:13:23,170
bothering the main readwrite database so
the the read-only replica database

3232
01:13:23,170 --> 01:13:23,180
the the read-only replica database
 

3233
01:13:23,180 --> 01:13:25,630
the the read-only replica database
ascend page requests read requests

3234
01:13:25,630 --> 01:13:25,640
ascend page requests read requests
 

3235
01:13:25,640 --> 01:13:27,550
ascend page requests read requests
directly the storage servers and then

3236
01:13:27,550 --> 01:13:27,560
directly the storage servers and then
 

3237
01:13:27,560 --> 01:13:31,480
directly the storage servers and then
they'll be no cache those pages so that

3238
01:13:31,480 --> 01:13:31,490
they'll be no cache those pages so that
 

3239
01:13:31,490 --> 01:13:33,670
they'll be no cache those pages so that
they can you know respond to future read

3240
01:13:33,670 --> 01:13:33,680
they can you know respond to future read
 

3241
01:13:33,680 --> 01:13:35,800
they can you know respond to future read
requests right out of their cache of

3242
01:13:35,800 --> 01:13:35,810
requests right out of their cache of
 

3243
01:13:35,810 --> 01:13:36,820
requests right out of their cache of
course they need to be able to update

3244
01:13:36,820 --> 01:13:36,830
course they need to be able to update
 

3245
01:13:36,830 --> 01:13:40,360
course they need to be able to update
those caches and for that reason Aurora

3246
01:13:40,360 --> 01:13:40,370
those caches and for that reason Aurora
 

3247
01:13:40,370 --> 01:13:43,270
those caches and for that reason Aurora
also the main database sends a copy of

3248
01:13:43,270 --> 01:13:43,280
also the main database sends a copy of
 

3249
01:13:43,280 --> 01:13:46,780
also the main database sends a copy of
its log to each of the read-only

3250
01:13:46,780 --> 01:13:46,790
its log to each of the read-only
 

3251
01:13:46,790 --> 01:13:49,120
its log to each of the read-only
databases and that's the horizontal

3252
01:13:49,120 --> 01:13:49,130
databases and that's the horizontal
 

3253
01:13:49,130 --> 01:13:51,250
databases and that's the horizontal
lines you see between the blue boxes and

3254
01:13:51,250 --> 01:13:51,260
lines you see between the blue boxes and
 

3255
01:13:51,260 --> 01:13:52,960
lines you see between the blue boxes and
figure three that the main database

3256
01:13:52,960 --> 01:13:52,970
figure three that the main database
 

3257
01:13:52,970 --> 01:13:55,480
figure three that the main database
sends all the log entries do these mean

3258
01:13:55,480 --> 01:13:55,490
sends all the log entries do these mean
 

3259
01:13:55,490 --> 01:13:57,540
sends all the log entries do these mean
only databases which they use to update

3260
01:13:57,540 --> 01:13:57,550
only databases which they use to update
 

3261
01:13:57,550 --> 01:14:03,730
only databases which they use to update
their cached copies to reflect recent

3262
01:14:03,730 --> 01:14:03,740
their cached copies to reflect recent
 

3263
01:14:03,740 --> 01:14:05,410
their cached copies to reflect recent
transactions in the database and it

3264
01:14:05,410 --> 01:14:05,420
transactions in the database and it
 

3265
01:14:05,420 --> 01:14:07,930
transactions in the database and it
means it does mean that the read only

3266
01:14:07,930 --> 01:14:07,940
means it does mean that the read only
 

3267
01:14:07,940 --> 01:14:09,520
means it does mean that the read only
database is lag a little bit behind the

3268
01:14:09,520 --> 01:14:09,530
database is lag a little bit behind the
 

3269
01:14:09,530 --> 01:14:12,250
database is lag a little bit behind the
main database but it turns out for a lot

3270
01:14:12,250 --> 01:14:12,260
main database but it turns out for a lot
 

3271
01:14:12,260 --> 01:14:13,810
main database but it turns out for a lot
of read-only workloads that's okay if

3272
01:14:13,810 --> 01:14:13,820
of read-only workloads that's okay if
 

3273
01:14:13,820 --> 01:14:15,640
of read-only workloads that's okay if
you look at a web page and it's you know

3274
01:14:15,640 --> 01:14:15,650
you look at a web page and it's you know
 

3275
01:14:15,650 --> 01:14:17,320
you look at a web page and it's you know
20 milliseconds out of date that's

3276
01:14:17,320 --> 01:14:17,330
20 milliseconds out of date that's
 

3277
01:14:17,330 --> 01:14:24,220
20 milliseconds out of date that's
usually not a big problem there are some

3278
01:14:24,220 --> 01:14:24,230
usually not a big problem there are some
 

3279
01:14:24,230 --> 01:14:26,740
usually not a big problem there are some
complexities from this like one problem

3280
01:14:26,740 --> 01:14:26,750
complexities from this like one problem
 

3281
01:14:26,750 --> 01:14:28,330
complexities from this like one problem
is that we don't want these relay

3282
01:14:28,330 --> 01:14:28,340
is that we don't want these relay
 

3283
01:14:28,340 --> 01:14:31,000
is that we don't want these relay
databases to see data from uncommitted

3284
01:14:31,000 --> 01:14:31,010
databases to see data from uncommitted
 

3285
01:14:31,010 --> 01:14:34,300
databases to see data from uncommitted
transactions yet and so in this stream

3286
01:14:34,300 --> 01:14:34,310
transactions yet and so in this stream
 

3287
01:14:34,310 --> 01:14:36,970
transactions yet and so in this stream
of log entries the database may need to

3288
01:14:36,970 --> 01:14:36,980
of log entries the database may need to
 

3289
01:14:36,980 --> 01:14:39,460
of log entries the database may need to
be sort of denotes which transactions

3290
01:14:39,460 --> 01:14:39,470
be sort of denotes which transactions
 

3291
01:14:39,470 --> 01:14:42,040
be sort of denotes which transactions
have committed and they're read-only

3292
01:14:42,040 --> 01:14:42,050
have committed and they're read-only
 

3293
01:14:42,050 --> 01:14:43,500
have committed and they're read-only
databases are careful not to apply

3294
01:14:43,500 --> 01:14:43,510
databases are careful not to apply
 

3295
01:14:43,510 --> 01:14:44,790
databases are careful not to apply
uncommon

3296
01:14:44,790 --> 01:14:44,800
uncommon
 

3297
01:14:44,800 --> 01:14:47,860
uncommon
uncommitted transactions to their caches

3298
01:14:47,860 --> 01:14:47,870
uncommitted transactions to their caches
 

3299
01:14:47,870 --> 01:14:49,660
uncommitted transactions to their caches
they wait till the transactions commit

3300
01:14:49,660 --> 01:14:49,670
they wait till the transactions commit
 

3301
01:14:49,670 --> 01:14:54,760
they wait till the transactions commit
the other complexity that these

3302
01:14:54,760 --> 01:14:54,770
the other complexity that these
 

3303
01:14:54,770 --> 01:14:59,400
the other complexity that these
read-only replicas impose is that

3304
01:14:59,400 --> 01:14:59,410
read-only replicas impose is that
 

3305
01:14:59,410 --> 01:15:03,420
read-only replicas impose is that
the the the these structures he of these

3306
01:15:03,420 --> 01:15:03,430
the the the these structures he of these
 

3307
01:15:03,430 --> 01:15:05,370
the the the these structures he of these
andhe structures are quite complex this

3308
01:15:05,370 --> 01:15:05,380
andhe structures are quite complex this
 

3309
01:15:05,380 --> 01:15:06,660
andhe structures are quite complex this
might be a b-tree it might need to be

3310
01:15:06,660 --> 01:15:06,670
might be a b-tree it might need to be
 

3311
01:15:06,670 --> 01:15:09,510
might be a b-tree it might need to be
rebalanced periodically for example I'm

3312
01:15:09,510 --> 01:15:09,520
rebalanced periodically for example I'm
 

3313
01:15:09,520 --> 01:15:10,710
rebalanced periodically for example I'm
the rebalancing is quite a complex

3314
01:15:10,710 --> 01:15:10,720
the rebalancing is quite a complex
 

3315
01:15:10,720 --> 01:15:12,420
the rebalancing is quite a complex
operation in which a lot of the tree has

3316
01:15:12,420 --> 01:15:12,430
operation in which a lot of the tree has
 

3317
01:15:12,430 --> 01:15:15,570
operation in which a lot of the tree has
to be modified in atomically and so the

3318
01:15:15,570 --> 01:15:15,580
to be modified in atomically and so the
 

3319
01:15:15,580 --> 01:15:17,340
to be modified in atomically and so the
tree is incorrect while it's being be

3320
01:15:17,340 --> 01:15:17,350
tree is incorrect while it's being be
 

3321
01:15:17,350 --> 01:15:18,990
tree is incorrect while it's being be
balanced and you only allowed to look at

3322
01:15:18,990 --> 01:15:19,000
balanced and you only allowed to look at
 

3323
01:15:19,000 --> 01:15:21,510
balanced and you only allowed to look at
it after the rebalancing is done if

3324
01:15:21,510 --> 01:15:21,520
it after the rebalancing is done if
 

3325
01:15:21,520 --> 01:15:23,940
it after the rebalancing is done if
these read-only replicas directly read

3326
01:15:23,940 --> 01:15:23,950
these read-only replicas directly read
 

3327
01:15:23,950 --> 01:15:25,380
these read-only replicas directly read
the pages out of the database there's a

3328
01:15:25,380 --> 01:15:25,390
the pages out of the database there's a
 

3329
01:15:25,390 --> 01:15:28,110
the pages out of the database there's a
risk they might see the be tree that the

3330
01:15:28,110 --> 01:15:28,120
risk they might see the be tree that the
 

3331
01:15:28,120 --> 01:15:30,180
risk they might see the be tree that the
database that's being stored here in

3332
01:15:30,180 --> 01:15:30,190
database that's being stored here in
 

3333
01:15:30,190 --> 01:15:31,800
database that's being stored here in
these data pages they may see the bee

3334
01:15:31,800 --> 01:15:31,810
these data pages they may see the bee
 

3335
01:15:31,810 --> 01:15:34,020
these data pages they may see the bee
tree in the middle of a rebalancing or

3336
01:15:34,020 --> 01:15:34,030
tree in the middle of a rebalancing or
 

3337
01:15:34,030 --> 01:15:37,440
tree in the middle of a rebalancing or
some other operation and the data is

3338
01:15:37,440 --> 01:15:37,450
some other operation and the data is
 

3339
01:15:37,450 --> 01:15:39,060
some other operation and the data is
just totally illegal and they might

3340
01:15:39,060 --> 01:15:39,070
just totally illegal and they might
 

3341
01:15:39,070 --> 01:15:43,350
just totally illegal and they might
crash or just malfunction and when the

3342
01:15:43,350 --> 01:15:43,360
crash or just malfunction and when the
 

3343
01:15:43,360 --> 01:15:45,630
crash or just malfunction and when the
paper talks about mini transactions and

3344
01:15:45,630 --> 01:15:45,640
paper talks about mini transactions and
 

3345
01:15:45,640 --> 01:15:49,710
paper talks about mini transactions and
the vdl verses vcl distinction what it's

3346
01:15:49,710 --> 01:15:49,720
the vdl verses vcl distinction what it's
 

3347
01:15:49,720 --> 01:15:51,750
the vdl verses vcl distinction what it's
talking about is the machinery by which

3348
01:15:51,750 --> 01:15:51,760
talking about is the machinery by which
 

3349
01:15:51,760 --> 01:15:54,690
talking about is the machinery by which
the database server can tell the storage

3350
01:15:54,690 --> 01:15:54,700
the database server can tell the storage
 

3351
01:15:54,700 --> 01:15:57,540
the database server can tell the storage
servers look this complex sequence of

3352
01:15:57,540 --> 01:15:57,550
servers look this complex sequence of
 

3353
01:15:57,550 --> 01:16:02,550
servers look this complex sequence of
log entries must only be revealed all or

3354
01:16:02,550 --> 01:16:02,560
log entries must only be revealed all or
 

3355
01:16:02,560 --> 01:16:04,680
log entries must only be revealed all or
nothing' atomically to any read-only

3356
01:16:04,680 --> 01:16:04,690
nothing' atomically to any read-only
 

3357
01:16:04,690 --> 01:16:07,410
nothing' atomically to any read-only
transactions that's what the mini

3358
01:16:07,410 --> 01:16:07,420
transactions that's what the mini
 

3359
01:16:07,420 --> 01:16:09,240
transactions that's what the mini
transactions and VDL are about and

3360
01:16:09,240 --> 01:16:09,250
transactions and VDL are about and
 

3361
01:16:09,250 --> 01:16:10,770
transactions and VDL are about and
basically the read when a read only

3362
01:16:10,770 --> 01:16:10,780
basically the read when a read only
 

3363
01:16:10,780 --> 01:16:13,590
basically the read when a read only
database asks to see data a data page

3364
01:16:13,590 --> 01:16:13,600
database asks to see data a data page
 

3365
01:16:13,600 --> 01:16:15,570
database asks to see data a data page
from a storage server the storage server

3366
01:16:15,570 --> 01:16:15,580
from a storage server the storage server
 

3367
01:16:15,580 --> 01:16:17,790
from a storage server the storage server
is careful to either show it data from

3368
01:16:17,790 --> 01:16:17,800
is careful to either show it data from
 

3369
01:16:17,800 --> 01:16:20,640
is careful to either show it data from
just before one of these sequence many

3370
01:16:20,640 --> 01:16:20,650
just before one of these sequence many
 

3371
01:16:20,650 --> 01:16:23,730
just before one of these sequence many
transaction sequences of log entries or

3372
01:16:23,730 --> 01:16:23,740
transaction sequences of log entries or
 

3373
01:16:23,740 --> 01:16:28,620
transaction sequences of log entries or
just after but not in the middle all

3374
01:16:28,620 --> 01:16:28,630
just after but not in the middle all
 

3375
01:16:28,630 --> 01:16:33,360
just after but not in the middle all
right so that's the all the technical

3376
01:16:33,360 --> 01:16:33,370
right so that's the all the technical
 

3377
01:16:33,370 --> 01:16:34,830
right so that's the all the technical
stuff I have to talk about just to kind

3378
01:16:34,830 --> 01:16:34,840
stuff I have to talk about just to kind
 

3379
01:16:34,840 --> 01:16:36,420
stuff I have to talk about just to kind
of summarize what's interesting about

3380
01:16:36,420 --> 01:16:36,430
of summarize what's interesting about
 

3381
01:16:36,430 --> 01:16:37,710
of summarize what's interesting about
the paper and what can be learned from

3382
01:16:37,710 --> 01:16:37,720
the paper and what can be learned from
 

3383
01:16:37,720 --> 01:16:41,460
the paper and what can be learned from
the paper one thing to learn which is

3384
01:16:41,460 --> 01:16:41,470
the paper one thing to learn which is
 

3385
01:16:41,470 --> 01:16:43,530
the paper one thing to learn which is
just good in general not specific to

3386
01:16:43,530 --> 01:16:43,540
just good in general not specific to
 

3387
01:16:43,540 --> 01:16:45,390
just good in general not specific to
this paper but everybody in systems

3388
01:16:45,390 --> 01:16:45,400
this paper but everybody in systems
 

3389
01:16:45,400 --> 01:16:48,350
this paper but everybody in systems
should know is the basics of how

3390
01:16:48,350 --> 01:16:48,360
should know is the basics of how
 

3391
01:16:48,360 --> 01:16:50,610
should know is the basics of how
transaction processing databases work

3392
01:16:50,610 --> 01:16:50,620
transaction processing databases work
 

3393
01:16:50,620 --> 01:16:53,510
transaction processing databases work
and the sort of impact that the

3394
01:16:53,510 --> 01:16:53,520
and the sort of impact that the
 

3395
01:16:53,520 --> 01:16:55,910
and the sort of impact that the
interaction between transaction

3396
01:16:55,910 --> 01:16:55,920
interaction between transaction
 

3397
01:16:55,920 --> 01:16:58,440
interaction between transaction
processing databases and the storage

3398
01:16:58,440 --> 01:16:58,450
processing databases and the storage
 

3399
01:16:58,450 --> 01:17:00,330
processing databases and the storage
systems because this comes up a lot it's

3400
01:17:00,330 --> 01:17:00,340
systems because this comes up a lot it's
 

3401
01:17:00,340 --> 01:17:01,890
systems because this comes up a lot it's
like a pervasive you know the

3402
01:17:01,890 --> 01:17:01,900
like a pervasive you know the
 

3403
01:17:01,900 --> 01:17:05,150
like a pervasive you know the
performance and crash recoverability

3404
01:17:05,150 --> 01:17:05,160
performance and crash recoverability
 

3405
01:17:05,160 --> 01:17:07,230
performance and crash recoverability
complexity of running a real database

3406
01:17:07,230 --> 01:17:07,240
complexity of running a real database
 

3407
01:17:07,240 --> 01:17:10,040
complexity of running a real database
just comes up over and over again in

3408
01:17:10,040 --> 01:17:10,050
just comes up over and over again in
 

3409
01:17:10,050 --> 01:17:13,200
just comes up over and over again in
systems design another thing to learn

3410
01:17:13,200 --> 01:17:13,210
systems design another thing to learn
 

3411
01:17:13,210 --> 01:17:15,810
systems design another thing to learn
this paper is this idea of quorums and

3412
01:17:15,810 --> 01:17:15,820
this paper is this idea of quorums and
 

3413
01:17:15,820 --> 01:17:18,690
this paper is this idea of quorums and
overlap the technique of overlapping

3414
01:17:18,690 --> 01:17:18,700
overlap the technique of overlapping
 

3415
01:17:18,700 --> 01:17:20,940
overlap the technique of overlapping
read/write quorums in order to always be

3416
01:17:20,940 --> 01:17:20,950
read/write quorums in order to always be
 

3417
01:17:20,950 --> 01:17:22,530
read/write quorums in order to always be
able to see the latest data but also get

3418
01:17:22,530 --> 01:17:22,540
able to see the latest data but also get
 

3419
01:17:22,540 --> 01:17:24,240
able to see the latest data but also get
fault tolerance and of course this comes

3420
01:17:24,240 --> 01:17:24,250
fault tolerance and of course this comes
 

3421
01:17:24,250 --> 01:17:27,240
fault tolerance and of course this comes
up in raft also raft has a strong kind

3422
01:17:27,240 --> 01:17:27,250
up in raft also raft has a strong kind
 

3423
01:17:27,250 --> 01:17:29,060
up in raft also raft has a strong kind
of quorum flavor to it

3424
01:17:29,060 --> 01:17:29,070
of quorum flavor to it
 

3425
01:17:29,070 --> 01:17:31,560
of quorum flavor to it
another interesting thought from this

3426
01:17:31,560 --> 01:17:31,570
another interesting thought from this
 

3427
01:17:31,570 --> 01:17:33,750
another interesting thought from this
paper is that the database and the

3428
01:17:33,750 --> 01:17:33,760
paper is that the database and the
 

3429
01:17:33,760 --> 01:17:35,820
paper is that the database and the
storage system are basically Co designed

3430
01:17:35,820 --> 01:17:35,830
storage system are basically Co designed
 

3431
01:17:35,830 --> 01:17:37,860
storage system are basically Co designed
as kind of an integrated there's

3432
01:17:37,860 --> 01:17:37,870
as kind of an integrated there's
 

3433
01:17:37,870 --> 01:17:39,450
as kind of an integrated there's
integration across the database layer

3434
01:17:39,450 --> 01:17:39,460
integration across the database layer
 

3435
01:17:39,460 --> 01:17:41,160
integration across the database layer
and the storage layer or nearly

3436
01:17:41,160 --> 01:17:41,170
and the storage layer or nearly
 

3437
01:17:41,170 --> 01:17:43,470
and the storage layer or nearly
redesigned to try to design systems so

3438
01:17:43,470 --> 01:17:43,480
redesigned to try to design systems so
 

3439
01:17:43,480 --> 01:17:45,360
redesigned to try to design systems so
they have you know good separation

3440
01:17:45,360 --> 01:17:45,370
they have you know good separation
 

3441
01:17:45,370 --> 01:17:49,170
they have you know good separation
between consumers of services and the

3442
01:17:49,170 --> 01:17:49,180
between consumers of services and the
 

3443
01:17:49,180 --> 01:17:50,760
between consumers of services and the
sort of infrastructure services like

3444
01:17:50,760 --> 01:17:50,770
sort of infrastructure services like
 

3445
01:17:50,770 --> 01:17:52,830
sort of infrastructure services like
typically storage is very

3446
01:17:52,830 --> 01:17:52,840
typically storage is very
 

3447
01:17:52,840 --> 01:17:54,870
typically storage is very
general-purpose not aimed at a

3448
01:17:54,870 --> 01:17:54,880
general-purpose not aimed at a
 

3449
01:17:54,880 --> 01:17:57,770
general-purpose not aimed at a
particular application just you know

3450
01:17:57,770 --> 01:17:57,780
particular application just you know
 

3451
01:17:57,780 --> 01:18:00,000
particular application just you know
because that's a pleasant design and it

3452
01:18:00,000 --> 01:18:00,010
because that's a pleasant design and it
 

3453
01:18:00,010 --> 01:18:01,920
because that's a pleasant design and it
also means that lots of different uses

3454
01:18:01,920 --> 01:18:01,930
also means that lots of different uses
 

3455
01:18:01,930 --> 01:18:03,450
also means that lots of different uses
can be made of the same infrastructure

3456
01:18:03,450 --> 01:18:03,460
can be made of the same infrastructure
 

3457
01:18:03,460 --> 01:18:06,090
can be made of the same infrastructure
but here the performance issues were so

3458
01:18:06,090 --> 01:18:06,100
but here the performance issues were so
 

3459
01:18:06,100 --> 01:18:07,350
but here the performance issues were so
extreme you know they would have to get

3460
01:18:07,350 --> 01:18:07,360
extreme you know they would have to get
 

3461
01:18:07,360 --> 01:18:09,810
extreme you know they would have to get
a 35 times performance improvement by

3462
01:18:09,810 --> 01:18:09,820
a 35 times performance improvement by
 

3463
01:18:09,820 --> 01:18:13,530
a 35 times performance improvement by
sort of blurring this boundary this was

3464
01:18:13,530 --> 01:18:13,540
sort of blurring this boundary this was
 

3465
01:18:13,540 --> 01:18:14,820
sort of blurring this boundary this was
a situation in which general-purpose

3466
01:18:14,820 --> 01:18:14,830
a situation in which general-purpose
 

3467
01:18:14,830 --> 01:18:16,890
a situation in which general-purpose
storage was actually really not

3468
01:18:16,890 --> 01:18:16,900
storage was actually really not
 

3469
01:18:16,900 --> 01:18:19,250
storage was actually really not
advantageous and they got a big win by

3470
01:18:19,250 --> 01:18:19,260
advantageous and they got a big win by
 

3471
01:18:19,260 --> 01:18:22,920
advantageous and they got a big win by
abandoning that idea and a final set of

3472
01:18:22,920 --> 01:18:22,930
abandoning that idea and a final set of
 

3473
01:18:22,930 --> 01:18:24,530
abandoning that idea and a final set of
things to get out of the papers all the

3474
01:18:24,530 --> 01:18:24,540
things to get out of the papers all the
 

3475
01:18:24,540 --> 01:18:26,760
things to get out of the papers all the
interesting sometimes kind of implicit

3476
01:18:26,760 --> 01:18:26,770
interesting sometimes kind of implicit
 

3477
01:18:26,770 --> 01:18:30,030
interesting sometimes kind of implicit
information about what was valuable to

3478
01:18:30,030 --> 01:18:30,040
information about what was valuable to
 

3479
01:18:30,040 --> 01:18:32,550
information about what was valuable to
these Amazon engineers who you know

3480
01:18:32,550 --> 01:18:32,560
these Amazon engineers who you know
 

3481
01:18:32,560 --> 01:18:35,310
these Amazon engineers who you know
really know what they're doing about

3482
01:18:35,310 --> 01:18:35,320
really know what they're doing about
 

3483
01:18:35,320 --> 01:18:37,290
really know what they're doing about
what concerns they had about cloud

3484
01:18:37,290 --> 01:18:37,300
what concerns they had about cloud
 

3485
01:18:37,300 --> 01:18:41,040
what concerns they had about cloud
infrastructure like the amount of worry

3486
01:18:41,040 --> 01:18:41,050
infrastructure like the amount of worry
 

3487
01:18:41,050 --> 01:18:42,960
infrastructure like the amount of worry
that they put into the possibility of an

3488
01:18:42,960 --> 01:18:42,970
that they put into the possibility of an
 

3489
01:18:42,970 --> 01:18:45,600
that they put into the possibility of an
entire availability zone might fail it's

3490
01:18:45,600 --> 01:18:45,610
entire availability zone might fail it's
 

3491
01:18:45,610 --> 01:18:48,240
entire availability zone might fail it's
an important tidbit the fact that

3492
01:18:48,240 --> 01:18:48,250
an important tidbit the fact that
 

3493
01:18:48,250 --> 01:18:51,540
an important tidbit the fact that
transient slowness of individual storage

3494
01:18:51,540 --> 01:18:51,550
transient slowness of individual storage
 

3495
01:18:51,550 --> 01:18:53,970
transient slowness of individual storage
servers was important is another thing

3496
01:18:53,970 --> 01:18:53,980
servers was important is another thing
 

3497
01:18:53,980 --> 01:18:57,710
servers was important is another thing
that actually also comes up a lot and

3498
01:18:57,710 --> 01:18:57,720
that actually also comes up a lot and
 

3499
01:18:57,720 --> 01:19:00,480
that actually also comes up a lot and
finally the implication that the network

3500
01:19:00,480 --> 01:19:00,490
finally the implication that the network
 

3501
01:19:00,490 --> 01:19:02,520
finally the implication that the network
is the main bottleneck because after all

3502
01:19:02,520 --> 01:19:02,530
is the main bottleneck because after all
 

3503
01:19:02,530 --> 01:19:04,650
is the main bottleneck because after all
they were it went to extreme lengths to

3504
01:19:04,650 --> 01:19:04,660
they were it went to extreme lengths to
 

3505
01:19:04,660 --> 01:19:06,600
they were it went to extreme lengths to
send less data over the network

3506
01:19:06,600 --> 01:19:06,610
send less data over the network
 

3507
01:19:06,610 --> 01:19:08,040
send less data over the network
but in return the storage servers have

3508
01:19:08,040 --> 01:19:08,050
but in return the storage servers have
 

3509
01:19:08,050 --> 01:19:10,800
but in return the storage servers have
to do more work and they put it they're

3510
01:19:10,800 --> 01:19:10,810
to do more work and they put it they're
 

3511
01:19:10,810 --> 01:19:12,600
to do more work and they put it they're
willing to you know 6 copies the data

3512
01:19:12,600 --> 01:19:12,610
willing to you know 6 copies the data
 

3513
01:19:12,610 --> 01:19:16,790
willing to you know 6 copies the data
and have 6 CPUs all replicating the

3514
01:19:16,790 --> 01:19:16,800
and have 6 CPUs all replicating the
 

3515
01:19:16,800 --> 01:19:19,470
and have 6 CPUs all replicating the
execution of applying these redo log

3516
01:19:19,470 --> 01:19:19,480
execution of applying these redo log
 

3517
01:19:19,480 --> 01:19:21,390
execution of applying these redo log
entries apparently CPU is relatively

3518
01:19:21,390 --> 01:19:21,400
entries apparently CPU is relatively
 

3519
01:19:21,400 --> 01:19:24,450
entries apparently CPU is relatively
cheap for them whereas the network

3520
01:19:24,450 --> 01:19:24,460
cheap for them whereas the network
 

3521
01:19:24,460 --> 01:19:26,550
cheap for them whereas the network
capacity was extremely important

3522
01:19:26,550 --> 01:19:26,560
capacity was extremely important
 

3523
01:19:26,560 --> 01:19:31,890
capacity was extremely important
all right that's all I have to say and

3524
01:19:31,890 --> 01:19:31,900

 

3525
01:19:31,900 --> 01:19:35,290

see you next week

