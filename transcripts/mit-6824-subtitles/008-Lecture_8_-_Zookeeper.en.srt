1
00:00:01,600 --> 00:00:04,990

alright last time I started talking

2
00:00:04,990 --> 00:00:05,000
alright last time I started talking
 

3
00:00:05,000 --> 00:00:06,760
alright last time I started talking
about linearize ability and I want to

4
00:00:06,760 --> 00:00:06,770
about linearize ability and I want to
 

5
00:00:06,770 --> 00:00:09,280
about linearize ability and I want to
finish up this time the reason why we're

6
00:00:09,280 --> 00:00:09,290
finish up this time the reason why we're
 

7
00:00:09,290 --> 00:00:11,650
finish up this time the reason why we're
talking about it again is that it's our

8
00:00:11,650 --> 00:00:11,660
talking about it again is that it's our
 

9
00:00:11,660 --> 00:00:13,990
talking about it again is that it's our
kind of standard definition for what

10
00:00:13,990 --> 00:00:14,000
kind of standard definition for what
 

11
00:00:14,000 --> 00:00:19,029
kind of standard definition for what
strong consistency means in storage

12
00:00:19,029 --> 00:00:19,039
strong consistency means in storage
 

13
00:00:19,039 --> 00:00:23,069
strong consistency means in storage
style systems so for example lab 3 is a

14
00:00:23,069 --> 00:00:23,079
style systems so for example lab 3 is a
 

15
00:00:23,079 --> 00:00:28,359
style systems so for example lab 3 is a
needs to obey your lab 3 needs to be

16
00:00:28,359 --> 00:00:28,369
needs to obey your lab 3 needs to be
 

17
00:00:28,369 --> 00:00:31,359
needs to obey your lab 3 needs to be
linearizable and sometimes this will

18
00:00:31,359 --> 00:00:31,369
linearizable and sometimes this will
 

19
00:00:31,369 --> 00:00:32,920
linearizable and sometimes this will
come up because we're talking about a

20
00:00:32,920 --> 00:00:32,930
come up because we're talking about a
 

21
00:00:32,930 --> 00:00:34,300
come up because we're talking about a
strongly consistent system and we're

22
00:00:34,300 --> 00:00:34,310
strongly consistent system and we're
 

23
00:00:34,310 --> 00:00:35,350
strongly consistent system and we're
wondering whether a particular behavior

24
00:00:35,350 --> 00:00:35,360
wondering whether a particular behavior
 

25
00:00:35,360 --> 00:00:39,160
wondering whether a particular behavior
is acceptable and other times linearize

26
00:00:39,160 --> 00:00:39,170
is acceptable and other times linearize
 

27
00:00:39,170 --> 00:00:40,750
is acceptable and other times linearize
ability will become come up because

28
00:00:40,750 --> 00:00:40,760
ability will become come up because
 

29
00:00:40,760 --> 00:00:42,130
ability will become come up because
we'll be talking about a system that

30
00:00:42,130 --> 00:00:42,140
we'll be talking about a system that
 

31
00:00:42,140 --> 00:00:43,990
we'll be talking about a system that
isn't linearizable and we'll be

32
00:00:43,990 --> 00:00:44,000
isn't linearizable and we'll be
 

33
00:00:44,000 --> 00:00:47,140
isn't linearizable and we'll be
wondering you know in what ways might it

34
00:00:47,140 --> 00:00:47,150
wondering you know in what ways might it
 

35
00:00:47,150 --> 00:00:49,510
wondering you know in what ways might it
fall short or deviate from linearize

36
00:00:49,510 --> 00:00:49,520
fall short or deviate from linearize
 

37
00:00:49,520 --> 00:00:51,340
fall short or deviate from linearize
ability so one thing you need to be able

38
00:00:51,340 --> 00:00:51,350
ability so one thing you need to be able
 

39
00:00:51,350 --> 00:00:55,150
ability so one thing you need to be able
to do is look at a particular sequence

40
00:00:55,150 --> 00:00:55,160
to do is look at a particular sequence
 

41
00:00:55,160 --> 00:00:59,140
to do is look at a particular sequence
of operations a particular execution of

42
00:00:59,140 --> 00:00:59,150
of operations a particular execution of
 

43
00:00:59,150 --> 00:01:00,940
of operations a particular execution of
some system that executes reads and

44
00:01:00,940 --> 00:01:00,950
some system that executes reads and
 

45
00:01:00,950 --> 00:01:03,250
some system that executes reads and
writes like your lab 3 and be able to

46
00:01:03,250 --> 00:01:03,260
writes like your lab 3 and be able to
 

47
00:01:03,260 --> 00:01:04,689
writes like your lab 3 and be able to
answer the question oh was that was that

48
00:01:04,689 --> 00:01:04,699
answer the question oh was that was that
 

49
00:01:04,699 --> 00:01:06,599
answer the question oh was that was that
Stevens of operations I just saw

50
00:01:06,599 --> 00:01:06,609
Stevens of operations I just saw
 

51
00:01:06,609 --> 00:01:10,480
Stevens of operations I just saw
linearizable or not I'm so we're going

52
00:01:10,480 --> 00:01:10,490
linearizable or not I'm so we're going
 

53
00:01:10,490 --> 00:01:11,919
linearizable or not I'm so we're going
to continue practicing that a little bit

54
00:01:11,919 --> 00:01:11,929
to continue practicing that a little bit
 

55
00:01:11,929 --> 00:01:16,539
to continue practicing that a little bit
now plus I'll try to actually establish

56
00:01:16,539 --> 00:01:16,549
now plus I'll try to actually establish
 

57
00:01:16,549 --> 00:01:17,709
now plus I'll try to actually establish
some interesting facts that will be

58
00:01:17,709 --> 00:01:17,719
some interesting facts that will be
 

59
00:01:17,719 --> 00:01:19,779
some interesting facts that will be
helpful for us about what it means about

60
00:01:19,779 --> 00:01:19,789
helpful for us about what it means about
 

61
00:01:19,789 --> 00:01:21,819
helpful for us about what it means about
the consequences for the systems we

62
00:01:21,819 --> 00:01:21,829
the consequences for the systems we
 

63
00:01:21,829 --> 00:01:26,620
the consequences for the systems we
build and look at linearize ability is

64
00:01:26,620 --> 00:01:26,630
build and look at linearize ability is
 

65
00:01:26,630 --> 00:01:28,719
build and look at linearize ability is
to find on particular operation history

66
00:01:28,719 --> 00:01:28,729
to find on particular operation history
 

67
00:01:28,729 --> 00:01:31,419
to find on particular operation history
so always the thing we're talking about

68
00:01:31,419 --> 00:01:31,429
so always the thing we're talking about
 

69
00:01:31,429 --> 00:01:34,870
so always the thing we're talking about
is oh we observed you know a sequence of

70
00:01:34,870 --> 00:01:34,880
is oh we observed you know a sequence of
 

71
00:01:34,880 --> 00:01:36,849
is oh we observed you know a sequence of
requests by clients and then they got

72
00:01:36,849 --> 00:01:36,859
requests by clients and then they got
 

73
00:01:36,859 --> 00:01:39,129
requests by clients and then they got
some responses at different times and

74
00:01:39,129 --> 00:01:39,139
some responses at different times and
 

75
00:01:39,139 --> 00:01:41,230
some responses at different times and
they asked for different different you

76
00:01:41,230 --> 00:01:41,240
they asked for different different you
 

77
00:01:41,240 --> 00:01:44,169
they asked for different different you
know to read different data and got

78
00:01:44,169 --> 00:01:44,179
know to read different data and got
 

79
00:01:44,179 --> 00:01:46,539
know to read different data and got
various answers back you know is that

80
00:01:46,539 --> 00:01:46,549
various answers back you know is that
 

81
00:01:46,549 --> 00:01:50,370
various answers back you know is that
history that we saw linearizable ok so

82
00:01:50,370 --> 00:01:50,380
history that we saw linearizable ok so
 

83
00:01:50,380 --> 00:01:53,289
history that we saw linearizable ok so
here's an example of a history that

84
00:01:53,289 --> 00:01:53,299
here's an example of a history that
 

85
00:01:53,299 --> 00:01:55,959
here's an example of a history that
might or might not be linearized able so

86
00:01:55,959 --> 00:01:55,969
might or might not be linearized able so
 

87
00:01:55,969 --> 00:01:57,760
might or might not be linearized able so
let's suppose at some point in time some

88
00:01:57,760 --> 00:01:57,770
let's suppose at some point in time some
 

89
00:01:57,770 --> 00:01:59,830
let's suppose at some point in time some
client groups of times gonna move to the

90
00:01:59,830 --> 00:01:59,840
client groups of times gonna move to the
 

91
00:01:59,840 --> 00:02:02,050
client groups of times gonna move to the
right this vertical bar marks the time

92
00:02:02,050 --> 00:02:02,060
right this vertical bar marks the time
 

93
00:02:02,060 --> 00:02:05,919
right this vertical bar marks the time
at which a client sent a request I'm

94
00:02:05,919 --> 00:02:05,929
at which a client sent a request I'm
 

95
00:02:05,929 --> 00:02:08,770
at which a client sent a request I'm
gonna use this notation to mean that the

96
00:02:08,770 --> 00:02:08,780
gonna use this notation to mean that the
 

97
00:02:08,780 --> 00:02:12,420
gonna use this notation to mean that the
request is a write and asks to set

98
00:02:12,420 --> 00:02:12,430
request is a write and asks to set
 

99
00:02:12,430 --> 00:02:17,970
request is a write and asks to set
variable or key or whatever x2 value 0

100
00:02:17,970 --> 00:02:17,980
variable or key or whatever x2 value 0
 

101
00:02:17,980 --> 00:02:20,649
variable or key or whatever x2 value 0
so sort of a key and a value this would

102
00:02:20,649 --> 00:02:20,659
so sort of a key and a value this would
 

103
00:02:20,659 --> 00:02:23,679
so sort of a key and a value this would
correspond to a put of key X and by zero

104
00:02:23,679 --> 00:02:23,689
correspond to a put of key X and by zero
 

105
00:02:23,689 --> 00:02:28,360
correspond to a put of key X and by zero
in lab 3 and then this is sort of we're

106
00:02:28,360 --> 00:02:28,370
in lab 3 and then this is sort of we're
 

107
00:02:28,370 --> 00:02:29,770
in lab 3 and then this is sort of we're
watching what the client send the client

108
00:02:29,770 --> 00:02:29,780
watching what the client send the client
 

109
00:02:29,780 --> 00:02:32,619
watching what the client send the client
sent this request to our service and at

110
00:02:32,619 --> 00:02:32,629
sent this request to our service and at
 

111
00:02:32,629 --> 00:02:34,660
sent this request to our service and at
some point the service responded and

112
00:02:34,660 --> 00:02:34,670
some point the service responded and
 

113
00:02:34,670 --> 00:02:37,149
some point the service responded and
said yes you're right is completed so

114
00:02:37,149 --> 00:02:37,159
said yes you're right is completed so
 

115
00:02:37,159 --> 00:02:38,500
said yes you're right is completed so
we're assuming the services of a nature

116
00:02:38,500 --> 00:02:38,510
we're assuming the services of a nature
 

117
00:02:38,510 --> 00:02:40,449
we're assuming the services of a nature
that actually tells you when the write

118
00:02:40,449 --> 00:02:40,459
that actually tells you when the write
 

119
00:02:40,459 --> 00:02:43,869
that actually tells you when the write
completes otherwise the definition isn't

120
00:02:43,869 --> 00:02:43,879
completes otherwise the definition isn't
 

121
00:02:43,879 --> 00:02:46,059
completes otherwise the definition isn't
very useful ok so we have this request

122
00:02:46,059 --> 00:02:46,069
very useful ok so we have this request
 

123
00:02:46,069 --> 00:02:49,929
very useful ok so we have this request
by somebody to write and then I'm

124
00:02:49,929 --> 00:02:49,939
by somebody to write and then I'm
 

125
00:02:49,939 --> 00:02:51,550
by somebody to write and then I'm
imagining in this example there's

126
00:02:51,550 --> 00:02:51,560
imagining in this example there's
 

127
00:02:51,560 --> 00:02:54,759
imagining in this example there's
another request that because I'm putting

128
00:02:54,759 --> 00:02:54,769
another request that because I'm putting
 

129
00:02:54,769 --> 00:02:56,259
another request that because I'm putting
this mark here this means the second

130
00:02:56,259 --> 00:02:56,269
this mark here this means the second
 

131
00:02:56,269 --> 00:02:59,679
this mark here this means the second
request started after the first request

132
00:02:59,679 --> 00:02:59,689
request started after the first request
 

133
00:02:59,689 --> 00:03:01,959
request started after the first request
finished and and you know reason why

134
00:03:01,959 --> 00:03:01,969
finished and and you know reason why
 

135
00:03:01,969 --> 00:03:04,750
finished and and you know reason why
that's important is because of this rule

136
00:03:04,750 --> 00:03:04,760
that's important is because of this rule
 

137
00:03:04,760 --> 00:03:07,360
that's important is because of this rule
that linearizable history must match

138
00:03:07,360 --> 00:03:07,370
that linearizable history must match
 

139
00:03:07,370 --> 00:03:10,119
that linearizable history must match
real time and what that really means is

140
00:03:10,119 --> 00:03:10,129
real time and what that really means is
 

141
00:03:10,129 --> 00:03:12,339
real time and what that really means is
that requests that are known in real

142
00:03:12,339 --> 00:03:12,349
that requests that are known in real
 

143
00:03:12,349 --> 00:03:15,369
that requests that are known in real
time to have started after some other

144
00:03:15,369 --> 00:03:15,379
time to have started after some other
 

145
00:03:15,379 --> 00:03:18,789
time to have started after some other
request finished the second request has

146
00:03:18,789 --> 00:03:18,799
request finished the second request has
 

147
00:03:18,799 --> 00:03:20,559
request finished the second request has
to occur after the first request in

148
00:03:20,559 --> 00:03:20,569
to occur after the first request in
 

149
00:03:20,569 --> 00:03:22,869
to occur after the first request in
whatever order we work out that's the

150
00:03:22,869 --> 00:03:22,879
whatever order we work out that's the
 

151
00:03:22,879 --> 00:03:24,459
whatever order we work out that's the
proof that the history was a linearized

152
00:03:24,459 --> 00:03:24,469
proof that the history was a linearized
 

153
00:03:24,469 --> 00:03:27,069
proof that the history was a linearized
linearize available ok so in this

154
00:03:27,069 --> 00:03:27,079
linearize available ok so in this
 

155
00:03:27,079 --> 00:03:28,990
linearize available ok so in this
example I'm imagining there's another

156
00:03:28,990 --> 00:03:29,000
example I'm imagining there's another
 

157
00:03:29,000 --> 00:03:31,899
example I'm imagining there's another
request that asks to write X to have

158
00:03:31,899 --> 00:03:31,909
request that asks to write X to have
 

159
00:03:31,909 --> 00:03:36,520
request that asks to write X to have
value 1 and then a concurrent request

160
00:03:36,520 --> 00:03:36,530
value 1 and then a concurrent request
 

161
00:03:36,530 --> 00:03:39,640
value 1 and then a concurrent request
may be started a little bit later as to

162
00:03:39,640 --> 00:03:39,650
may be started a little bit later as to
 

163
00:03:39,650 --> 00:03:44,319
may be started a little bit later as to
set X to 2 I said now we have two maybe

164
00:03:44,319 --> 00:03:44,329
set X to 2 I said now we have two maybe
 

165
00:03:44,329 --> 00:03:46,059
set X to 2 I said now we have two maybe
two different clients issued requests at

166
00:03:46,059 --> 00:03:46,069
two different clients issued requests at
 

167
00:03:46,069 --> 00:03:47,740
two different clients issued requests at
about the same time to set X to two

168
00:03:47,740 --> 00:03:47,750
about the same time to set X to two
 

169
00:03:47,750 --> 00:03:49,539
about the same time to set X to two
different values so of course we're

170
00:03:49,539 --> 00:03:49,549
different values so of course we're
 

171
00:03:49,549 --> 00:03:51,880
different values so of course we're
wondering which one is going to be the

172
00:03:51,880 --> 00:03:51,890
wondering which one is going to be the
 

173
00:03:51,890 --> 00:03:54,880
wondering which one is going to be the
real value and then we also have some

174
00:03:54,880 --> 00:03:54,890
real value and then we also have some
 

175
00:03:54,890 --> 00:04:01,440
real value and then we also have some
reads if all you have is writes well

176
00:04:01,440 --> 00:04:01,450

 

177
00:04:01,450 --> 00:04:04,000

well you have us right so it's it's hard

178
00:04:04,000 --> 00:04:04,010
well you have us right so it's it's hard
 

179
00:04:04,010 --> 00:04:05,649
well you have us right so it's it's hard
to say too much about linearizable

180
00:04:05,649 --> 00:04:05,659
to say too much about linearizable
 

181
00:04:05,659 --> 00:04:07,360
to say too much about linearizable
linearize ability because you don't know

182
00:04:07,360 --> 00:04:07,370
linearize ability because you don't know
 

183
00:04:07,370 --> 00:04:10,839
linearize ability because you don't know
you don't have any proof that the system

184
00:04:10,839 --> 00:04:10,849
you don't have any proof that the system
 

185
00:04:10,849 --> 00:04:12,610
you don't have any proof that the system
actually did anything or revealed any

186
00:04:12,610 --> 00:04:12,620
actually did anything or revealed any
 

187
00:04:12,620 --> 00:04:17,830
actually did anything or revealed any
values so we really need reads so let's

188
00:04:17,830 --> 00:04:17,840
values so we really need reads so let's
 

189
00:04:17,840 --> 00:04:21,039
values so we really need reads so let's
imagine we have some read unless you'll

190
00:04:21,039 --> 00:04:21,049
imagine we have some read unless you'll
 

191
00:04:21,049 --> 00:04:23,280
imagine we have some read unless you'll
be seeing our in the history

192
00:04:23,280 --> 00:04:23,290
be seeing our in the history
 

193
00:04:23,290 --> 00:04:27,060
be seeing our in the history
that a client said to read at this time

194
00:04:27,060 --> 00:04:27,070
that a client said to read at this time
 

195
00:04:27,070 --> 00:04:30,000
that a client said to read at this time
and the second time it got an answer for

196
00:04:30,000 --> 00:04:30,010
and the second time it got an answer for
 

197
00:04:30,010 --> 00:04:34,290
and the second time it got an answer for
red key accent got value to so

198
00:04:34,290 --> 00:04:34,300
red key accent got value to so
 

199
00:04:34,300 --> 00:04:37,440
red key accent got value to so
presumably actually saw this value and

200
00:04:37,440 --> 00:04:37,450
presumably actually saw this value and
 

201
00:04:37,450 --> 00:04:39,090
presumably actually saw this value and
then there was another request by maybe

202
00:04:39,090 --> 00:04:39,100
then there was another request by maybe
 

203
00:04:39,100 --> 00:04:40,380
then there was another request by maybe
the same client or a different client

204
00:04:40,380 --> 00:04:40,390
the same client or a different client
 

205
00:04:40,390 --> 00:04:43,050
the same client or a different client
but known to have started in time after

206
00:04:43,050 --> 00:04:43,060
but known to have started in time after
 

207
00:04:43,060 --> 00:04:46,260
but known to have started in time after
this request finished and this read of X

208
00:04:46,260 --> 00:04:46,270
this request finished and this read of X
 

209
00:04:46,270 --> 00:04:50,970
this request finished and this read of X
got value while and so the question in

210
00:04:50,970 --> 00:04:50,980
got value while and so the question in
 

211
00:04:50,980 --> 00:04:52,890
got value while and so the question in
front of us is is this history

212
00:04:52,890 --> 00:04:52,900
front of us is is this history
 

213
00:04:52,900 --> 00:04:55,290
front of us is is this history
linearizable and there's sort of two

214
00:04:55,290 --> 00:04:55,300
linearizable and there's sort of two
 

215
00:04:55,300 --> 00:04:58,440
linearizable and there's sort of two
strategies we can take we can either

216
00:04:58,440 --> 00:04:58,450
strategies we can take we can either
 

217
00:04:58,450 --> 00:05:00,810
strategies we can take we can either
cook up a sequence because if we can

218
00:05:00,810 --> 00:05:00,820
cook up a sequence because if we can
 

219
00:05:00,820 --> 00:05:03,690
cook up a sequence because if we can
come up with a total order of these five

220
00:05:03,690 --> 00:05:03,700
come up with a total order of these five
 

221
00:05:03,700 --> 00:05:06,780
come up with a total order of these five
operations that obeys real time and in

222
00:05:06,780 --> 00:05:06,790
operations that obeys real time and in
 

223
00:05:06,790 --> 00:05:09,390
operations that obeys real time and in
which each read sees the value written

224
00:05:09,390 --> 00:05:09,400
which each read sees the value written
 

225
00:05:09,400 --> 00:05:12,390
which each read sees the value written
by the priest most recently proceeding

226
00:05:12,390 --> 00:05:12,400
by the priest most recently proceeding
 

227
00:05:12,400 --> 00:05:13,680
by the priest most recently proceeding
right in the order if we can come up

228
00:05:13,680 --> 00:05:13,690
right in the order if we can come up
 

229
00:05:13,690 --> 00:05:15,480
right in the order if we can come up
with that order then that's a proof the

230
00:05:15,480 --> 00:05:15,490
with that order then that's a proof the
 

231
00:05:15,490 --> 00:05:17,760
with that order then that's a proof the
history is linearizable another strategy

232
00:05:17,760 --> 00:05:17,770
history is linearizable another strategy
 

233
00:05:17,770 --> 00:05:23,130
history is linearizable another strategy
is to observe that these rules each one

234
00:05:23,130 --> 00:05:23,140
is to observe that these rules each one
 

235
00:05:23,140 --> 00:05:26,720
is to observe that these rules each one
may imply certain this comes before that

236
00:05:26,720 --> 00:05:26,730
may imply certain this comes before that
 

237
00:05:26,730 --> 00:05:29,790
may imply certain this comes before that
edges in a graph and if we can find a

238
00:05:29,790 --> 00:05:29,800
edges in a graph and if we can find a
 

239
00:05:29,800 --> 00:05:32,130
edges in a graph and if we can find a
cycle in this operation must come before

240
00:05:32,130 --> 00:05:32,140
cycle in this operation must come before
 

241
00:05:32,140 --> 00:05:33,960
cycle in this operation must come before
that operation we can find a psych on

242
00:05:33,960 --> 00:05:33,970
that operation we can find a psych on
 

243
00:05:33,970 --> 00:05:35,970
that operation we can find a psych on
that graph and that's proof that the

244
00:05:35,970 --> 00:05:35,980
that graph and that's proof that the
 

245
00:05:35,980 --> 00:05:39,030
that graph and that's proof that the
history isn't linearizable and for small

246
00:05:39,030 --> 00:05:39,040
history isn't linearizable and for small
 

247
00:05:39,040 --> 00:05:40,230
history isn't linearizable and for small
histories we may actually be able to

248
00:05:40,230 --> 00:05:40,240
histories we may actually be able to
 

249
00:05:40,240 --> 00:05:42,270
histories we may actually be able to
enumerate every single order and use

250
00:05:42,270 --> 00:05:42,280
enumerate every single order and use
 

251
00:05:42,280 --> 00:05:45,540
enumerate every single order and use
that show this history isn't

252
00:05:45,540 --> 00:05:45,550
that show this history isn't
 

253
00:05:45,550 --> 00:05:51,270
that show this history isn't
linearizable anyway any any any thoughts

254
00:05:51,270 --> 00:05:51,280
linearizable anyway any any any thoughts
 

255
00:05:51,280 --> 00:05:53,970
linearizable anyway any any any thoughts
about whether this might be or might not

256
00:05:53,970 --> 00:05:53,980
about whether this might be or might not
 

257
00:05:53,980 --> 00:06:00,400
about whether this might be or might not
be linearizable

258
00:06:00,400 --> 00:06:00,410

 

259
00:06:00,410 --> 00:06:08,320

yes

260
00:06:08,320 --> 00:06:08,330

 

261
00:06:08,330 --> 00:06:11,320

yes okay so the observation is that um

262
00:06:11,320 --> 00:06:11,330
yes okay so the observation is that um
 

263
00:06:11,330 --> 00:06:15,550
yes okay so the observation is that um
it's a little bit troubling that we saw

264
00:06:15,550 --> 00:06:15,560
it's a little bit troubling that we saw
 

265
00:06:15,560 --> 00:06:17,320
it's a little bit troubling that we saw
read with IU - and then the read with

266
00:06:17,320 --> 00:06:17,330
read with IU - and then the read with
 

267
00:06:17,330 --> 00:06:21,089
read with IU - and then the read with
value want and maybe that contradicts

268
00:06:21,089 --> 00:06:21,099
value want and maybe that contradicts
 

269
00:06:21,099 --> 00:06:23,200
value want and maybe that contradicts
you know there were two rights one with

270
00:06:23,200 --> 00:06:23,210
you know there were two rights one with
 

271
00:06:23,210 --> 00:06:25,480
you know there were two rights one with
value one on one value - so that so we

272
00:06:25,480 --> 00:06:25,490
value one on one value - so that so we
 

273
00:06:25,490 --> 00:06:26,830
value one on one value - so that so we
certainly if we had to read with value

274
00:06:26,830 --> 00:06:26,840
certainly if we had to read with value
 

275
00:06:26,840 --> 00:06:28,960
certainly if we had to read with value
three that would obviously be something

276
00:06:28,960 --> 00:06:28,970
three that would obviously be something
 

277
00:06:28,970 --> 00:06:31,149
three that would obviously be something
I got terribly wrong you know but we got

278
00:06:31,149 --> 00:06:31,159
I got terribly wrong you know but we got
 

279
00:06:31,159 --> 00:06:32,710
I got terribly wrong you know but we got
there were a right of one in two and a

280
00:06:32,710 --> 00:06:32,720
there were a right of one in two and a
 

281
00:06:32,720 --> 00:06:34,839
there were a right of one in two and a
read of one and two so the question is

282
00:06:34,839 --> 00:06:34,849
read of one and two so the question is
 

283
00:06:34,849 --> 00:06:36,460
read of one and two so the question is
whether this order of reads could

284
00:06:36,460 --> 00:06:36,470
whether this order of reads could
 

285
00:06:36,470 --> 00:06:39,339
whether this order of reads could
possibly be reconciled with the way

286
00:06:39,339 --> 00:06:39,349
possibly be reconciled with the way
 

287
00:06:39,349 --> 00:06:59,279
possibly be reconciled with the way
these two rights show up in the history

288
00:06:59,279 --> 00:06:59,289

 

289
00:06:59,289 --> 00:07:04,570

okay so what I'm what I'm the game we're

290
00:07:04,570 --> 00:07:04,580
okay so what I'm what I'm the game we're
 

291
00:07:04,580 --> 00:07:07,510
okay so what I'm what I'm the game we're
playing is that we have a like maybe two

292
00:07:07,510 --> 00:07:07,520
playing is that we have a like maybe two
 

293
00:07:07,520 --> 00:07:08,950
playing is that we have a like maybe two
clients or three clients and they're

294
00:07:08,950 --> 00:07:08,960
clients or three clients and they're
 

295
00:07:08,960 --> 00:07:10,779
clients or three clients and they're
talking some service you know maybe a

296
00:07:10,779 --> 00:07:10,789
talking some service you know maybe a
 

297
00:07:10,789 --> 00:07:12,700
talking some service you know maybe a
raft last year something and what we are

298
00:07:12,700 --> 00:07:12,710
raft last year something and what we are
 

299
00:07:12,710 --> 00:07:15,519
raft last year something and what we are
seeing is requests and responses right

300
00:07:15,519 --> 00:07:15,529
seeing is requests and responses right
 

301
00:07:15,529 --> 00:07:18,249
seeing is requests and responses right
so what this means is that we saw

302
00:07:18,249 --> 00:07:18,259
so what this means is that we saw
 

303
00:07:18,259 --> 00:07:21,670
so what this means is that we saw
requests from a client to write X to the

304
00:07:21,670 --> 00:07:21,680
requests from a client to write X to the
 

305
00:07:21,680 --> 00:07:23,529
requests from a client to write X to the
you know put requests for X and one and

306
00:07:23,529 --> 00:07:23,539
you know put requests for X and one and
 

307
00:07:23,539 --> 00:07:25,209
you know put requests for X and one and
we saw the response here so what we know

308
00:07:25,209 --> 00:07:25,219
we saw the response here so what we know
 

309
00:07:25,219 --> 00:07:27,279
we saw the response here so what we know
is that somewhere during this interval

310
00:07:27,279 --> 00:07:27,289
is that somewhere during this interval
 

311
00:07:27,289 --> 00:07:29,309
is that somewhere during this interval
of time presumably the service actually

312
00:07:29,309 --> 00:07:29,319
of time presumably the service actually
 

313
00:07:29,319 --> 00:07:32,200
of time presumably the service actually
internally change the value of x - 1 and

314
00:07:32,200 --> 00:07:32,210
internally change the value of x - 1 and
 

315
00:07:32,210 --> 00:07:34,600
internally change the value of x - 1 and
what this means is that somewhere in

316
00:07:34,600 --> 00:07:34,610
what this means is that somewhere in
 

317
00:07:34,610 --> 00:07:38,909
what this means is that somewhere in
this interval of time the service

318
00:07:38,909 --> 00:07:38,919
this interval of time the service
 

319
00:07:38,919 --> 00:07:42,580
this interval of time the service
presumably changed its internal idea of

320
00:07:42,580 --> 00:07:42,590
presumably changed its internal idea of
 

321
00:07:42,590 --> 00:07:44,140
presumably changed its internal idea of
the value of x - 2 somewhere in this

322
00:07:44,140 --> 00:07:44,150
the value of x - 2 somewhere in this
 

323
00:07:44,150 --> 00:07:47,019
the value of x - 2 somewhere in this
time but you know it's just somewhere in

324
00:07:47,019 --> 00:07:47,029
time but you know it's just somewhere in
 

325
00:07:47,029 --> 00:07:48,879
time but you know it's just somewhere in
this time it doesn't mean it happened

326
00:07:48,879 --> 00:07:48,889
this time it doesn't mean it happened
 

327
00:07:48,889 --> 00:07:52,240
this time it doesn't mean it happened
here or here does that answer your

328
00:07:52,240 --> 00:07:52,250
here or here does that answer your
 

329
00:07:52,250 --> 00:07:53,580
here or here does that answer your
question

330
00:07:53,580 --> 00:07:53,590
question
 

331
00:07:53,590 --> 00:08:07,879
question
yes

332
00:08:07,879 --> 00:08:07,889

 

333
00:08:07,889 --> 00:08:10,610

yes okay so the observation is that is

334
00:08:10,610 --> 00:08:10,620
yes okay so the observation is that is
 

335
00:08:10,620 --> 00:08:13,490
yes okay so the observation is that is
linearizable and it's been accompanied

336
00:08:13,490 --> 00:08:13,500
linearizable and it's been accompanied
 

337
00:08:13,500 --> 00:08:15,679
linearizable and it's been accompanied
by an actual proof of the linearize

338
00:08:15,679 --> 00:08:15,689
by an actual proof of the linearize
 

339
00:08:15,689 --> 00:08:17,480
by an actual proof of the linearize
ability namely a demonstration of the

340
00:08:17,480 --> 00:08:17,490
ability namely a demonstration of the
 

341
00:08:17,490 --> 00:08:19,969
ability namely a demonstration of the
order that shows that it is linearizable

342
00:08:19,969 --> 00:08:19,979
order that shows that it is linearizable
 

343
00:08:19,979 --> 00:08:25,249
order that shows that it is linearizable
and the order is yes it's linearizable

344
00:08:25,249 --> 00:08:25,259
and the order is yes it's linearizable
 

345
00:08:25,259 --> 00:08:32,060
and the order is yes it's linearizable
and the order is first right of X with

346
00:08:32,060 --> 00:08:32,070
and the order is first right of X with
 

347
00:08:32,070 --> 00:08:36,920
and the order is first right of X with
value 0 and the server got both of these

348
00:08:36,920 --> 00:08:36,930
value 0 and the server got both of these
 

349
00:08:36,930 --> 00:08:38,480
value 0 and the server got both of these
rights at roughly the same time it's

350
00:08:38,480 --> 00:08:38,490
rights at roughly the same time it's
 

351
00:08:38,490 --> 00:08:40,519
rights at roughly the same time it's
still had to choose the order itself all

352
00:08:40,519 --> 00:08:40,529
still had to choose the order itself all
 

353
00:08:40,529 --> 00:08:43,130
still had to choose the order itself all
right so let's just say it could have

354
00:08:43,130 --> 00:08:43,140
right so let's just say it could have
 

355
00:08:43,140 --> 00:08:45,880
right so let's just say it could have
executed the right of x2 value 2 first

356
00:08:45,880 --> 00:08:45,890
executed the right of x2 value 2 first
 

357
00:08:45,890 --> 00:08:54,079
executed the right of x2 value 2 first
and then the read of X then executed the

358
00:08:54,079 --> 00:08:54,089
and then the read of X then executed the
 

359
00:08:54,089 --> 00:08:58,579
and then the read of X then executed the
read of X which would the first read of

360
00:08:58,579 --> 00:08:58,589
read of X which would the first read of
 

361
00:08:58,589 --> 00:09:01,220
read of X which would the first read of
X which at that point would yield 2 and

362
00:09:01,220 --> 00:09:01,230
X which at that point would yield 2 and
 

363
00:09:01,230 --> 00:09:03,440
X which at that point would yield 2 and
then we're gonna say the next operation

364
00:09:03,440 --> 00:09:03,450
then we're gonna say the next operation
 

365
00:09:03,450 --> 00:09:05,030
then we're gonna say the next operation
had executed it was the right of X to 1

366
00:09:05,030 --> 00:09:05,040
had executed it was the right of X to 1
 

367
00:09:05,040 --> 00:09:08,420
had executed it was the right of X to 1
and then the last operation in the

368
00:09:08,420 --> 00:09:08,430
and then the last operation in the
 

369
00:09:08,430 --> 00:09:16,250
and then the last operation in the
history is the read of X to 1 and so

370
00:09:16,250 --> 00:09:16,260
history is the read of X to 1 and so
 

371
00:09:16,260 --> 00:09:17,660
history is the read of X to 1 and so
this is proof that the history is

372
00:09:17,660 --> 00:09:17,670
this is proof that the history is
 

373
00:09:17,670 --> 00:09:19,420
this is proof that the history is
linearizable because here's an order

374
00:09:19,420 --> 00:09:19,430
linearizable because here's an order
 

375
00:09:19,430 --> 00:09:22,340
linearizable because here's an order
it's a total order of the operations and

376
00:09:22,340 --> 00:09:22,350
it's a total order of the operations and
 

377
00:09:22,350 --> 00:09:24,800
it's a total order of the operations and
this is the order it matches real time

378
00:09:24,800 --> 00:09:24,810
this is the order it matches real time
 

379
00:09:24,810 --> 00:09:29,300
this is the order it matches real time
so what that means is well just go

380
00:09:29,300 --> 00:09:29,310
so what that means is well just go
 

381
00:09:29,310 --> 00:09:31,160
so what that means is well just go
through it the the right of X to 0 comes

382
00:09:31,160 --> 00:09:31,170
through it the the right of X to 0 comes
 

383
00:09:31,170 --> 00:09:32,329
through it the the right of X to 0 comes
first and that's that's totally

384
00:09:32,329 --> 00:09:32,339
first and that's that's totally
 

385
00:09:32,339 --> 00:09:33,650
first and that's that's totally
intuitive since it's actually finished

386
00:09:33,650 --> 00:09:33,660
intuitive since it's actually finished
 

387
00:09:33,660 --> 00:09:37,550
intuitive since it's actually finished
before any other operations started the

388
00:09:37,550 --> 00:09:37,560
before any other operations started the
 

389
00:09:37,560 --> 00:09:40,310
before any other operations started the
right of X to 1 comes sorry the rate of

390
00:09:40,310 --> 00:09:40,320
right of X to 1 comes sorry the rate of
 

391
00:09:40,320 --> 00:09:42,050
right of X to 1 comes sorry the rate of
X to 2 comes second so we're gonna say

392
00:09:42,050 --> 00:09:42,060
X to 2 comes second so we're gonna say
 

393
00:09:42,060 --> 00:09:46,910
X to 2 comes second so we're gonna say
maybe that I'm gonna mark here that sort

394
00:09:46,910 --> 00:09:46,920
maybe that I'm gonna mark here that sort
 

395
00:09:46,920 --> 00:09:48,829
maybe that I'm gonna mark here that sort
of real time at which we imagine these

396
00:09:48,829 --> 00:09:48,839
of real time at which we imagine these
 

397
00:09:48,839 --> 00:09:50,689
of real time at which we imagine these
operations happen to demonstrate that

398
00:09:50,689 --> 00:09:50,699
operations happen to demonstrate that
 

399
00:09:50,699 --> 00:09:52,790
operations happen to demonstrate that
the order here does match real time so

400
00:09:52,790 --> 00:09:52,800
the order here does match real time so
 

401
00:09:52,800 --> 00:09:54,290
the order here does match real time so
it'll say I'll just write a big X here

402
00:09:54,290 --> 00:09:54,300
it'll say I'll just write a big X here
 

403
00:09:54,300 --> 00:09:56,210
it'll say I'll just write a big X here
to mark the time when we imagine this

404
00:09:56,210 --> 00:09:56,220
to mark the time when we imagine this
 

405
00:09:56,220 --> 00:09:59,150
to mark the time when we imagine this
operation happened all right so that's

406
00:09:59,150 --> 00:09:59,160
operation happened all right so that's
 

407
00:09:59,160 --> 00:10:01,939
operation happened all right so that's
the second operation then we're

408
00:10:01,939 --> 00:10:01,949
the second operation then we're
 

409
00:10:01,949 --> 00:10:03,710
the second operation then we're
imagining that the next operation is the

410
00:10:03,710 --> 00:10:03,720
imagining that the next operation is the
 

411
00:10:03,720 --> 00:10:07,370
imagining that the next operation is the
read of X of 2 we you know there's no

412
00:10:07,370 --> 00:10:07,380
read of X of 2 we you know there's no
 

413
00:10:07,380 --> 00:10:08,810
read of X of 2 we you know there's no
real time problem because the read of X

414
00:10:08,810 --> 00:10:08,820
real time problem because the read of X
 

415
00:10:08,820 --> 00:10:11,060
real time problem because the read of X
of 2 actually was this u concurrently

416
00:10:11,060 --> 00:10:11,070
of 2 actually was this u concurrently
 

417
00:10:11,070 --> 00:10:13,069
of 2 actually was this u concurrently
with the right of X of 2 you know it's

418
00:10:13,069 --> 00:10:13,079
with the right of X of 2 you know it's
 

419
00:10:13,079 --> 00:10:14,630
with the right of X of 2 you know it's
not like the right of X the read of X of

420
00:10:14,630 --> 00:10:14,640
not like the right of X the read of X of
 

421
00:10:14,640 --> 00:10:16,100
not like the right of X the read of X of
2 finished and only then did the right

422
00:10:16,100 --> 00:10:16,110
2 finished and only then did the right
 

423
00:10:16,110 --> 00:10:18,650
2 finished and only then did the right
of X right of X with to start there

424
00:10:18,650 --> 00:10:18,660
of X right of X with to start there
 

425
00:10:18,660 --> 00:10:20,059
of X right of X with to start there
really are concurrent we'll just imagine

426
00:10:20,059 --> 00:10:20,069
really are concurrent we'll just imagine
 

427
00:10:20,069 --> 00:10:21,230
really are concurrent we'll just imagine
that that

428
00:10:21,230 --> 00:10:21,240
that that
 

429
00:10:21,240 --> 00:10:23,509
that that
sort of point in time at which this

430
00:10:23,509 --> 00:10:23,519
sort of point in time at which this
 

431
00:10:23,519 --> 00:10:25,220
sort of point in time at which this
operation happened is right there so

432
00:10:25,220 --> 00:10:25,230
operation happened is right there so
 

433
00:10:25,230 --> 00:10:27,439
operation happened is right there so
this is the you know we don't care when

434
00:10:27,439 --> 00:10:27,449
this is the you know we don't care when
 

435
00:10:27,449 --> 00:10:28,579
this is the you know we don't care when
this one happened let's just say there's

436
00:10:28,579 --> 00:10:28,589
this one happened let's just say there's
 

437
00:10:28,589 --> 00:10:33,259
this one happened let's just say there's
the first operation second third now we

438
00:10:33,259 --> 00:10:33,269
the first operation second third now we
 

439
00:10:33,269 --> 00:10:36,650
the first operation second third now we
have a right of X of one let's just say

440
00:10:36,650 --> 00:10:36,660
have a right of X of one let's just say
 

441
00:10:36,660 --> 00:10:39,079
have a right of X of one let's just say
it happens here in real time just has to

442
00:10:39,079 --> 00:10:39,089
it happens here in real time just has to
 

443
00:10:39,089 --> 00:10:42,769
it happens here in real time just has to
happen after the operations that occur

444
00:10:42,769 --> 00:10:42,779
happen after the operations that occur
 

445
00:10:42,779 --> 00:10:43,939
happen after the operations that occur
before it in the order so that will say

446
00:10:43,939 --> 00:10:43,949
before it in the order so that will say
 

447
00:10:43,949 --> 00:10:45,590
before it in the order so that will say
there's the fourth operation and now we

448
00:10:45,590 --> 00:10:45,600
there's the fourth operation and now we
 

449
00:10:45,600 --> 00:10:46,999
there's the fourth operation and now we
have the read of x1 and it can pretty

450
00:10:46,999 --> 00:10:47,009
have the read of x1 and it can pretty
 

451
00:10:47,009 --> 00:10:48,919
have the read of x1 and it can pretty
much happen at any time but let's say it

452
00:10:48,919 --> 00:10:48,929
much happen at any time but let's say it
 

453
00:10:48,929 --> 00:10:52,429
much happen at any time but let's say it
happens here okay so this is the

454
00:10:52,429 --> 00:10:52,439
happens here okay so this is the
 

455
00:10:52,439 --> 00:10:52,879
happens here okay so this is the
Diamonds

456
00:10:52,879 --> 00:10:52,889
Diamonds
 

457
00:10:52,889 --> 00:10:54,350
Diamonds
so we have the order this is the

458
00:10:54,350 --> 00:10:54,360
so we have the order this is the
 

459
00:10:54,360 --> 00:10:56,359
so we have the order this is the
demonstration that the order is

460
00:10:56,359 --> 00:10:56,369
demonstration that the order is
 

461
00:10:56,369 --> 00:10:58,249
demonstration that the order is
consistent with real time that is we can

462
00:10:58,249 --> 00:10:58,259
consistent with real time that is we can
 

463
00:10:58,259 --> 00:11:00,079
consistent with real time that is we can
pick a time for each of the operations

464
00:11:00,079 --> 00:11:00,089
pick a time for each of the operations
 

465
00:11:00,089 --> 00:11:02,840
pick a time for each of the operations
that's within its start and end time

466
00:11:02,840 --> 00:11:02,850
that's within its start and end time
 

467
00:11:02,850 --> 00:11:06,590
that's within its start and end time
that would cause this total order to

468
00:11:06,590 --> 00:11:06,600
that would cause this total order to
 

469
00:11:06,600 --> 00:11:08,900
that would cause this total order to
match our real time order and so the

470
00:11:08,900 --> 00:11:08,910
match our real time order and so the
 

471
00:11:08,910 --> 00:11:12,259
match our real time order and so the
final question is did each read see the

472
00:11:12,259 --> 00:11:12,269
final question is did each read see the
 

473
00:11:12,269 --> 00:11:14,239
final question is did each read see the
value written by the most closely

474
00:11:14,239 --> 00:11:14,249
value written by the most closely
 

475
00:11:14,249 --> 00:11:16,929
value written by the most closely
preceding right of the same variable so

476
00:11:16,929 --> 00:11:16,939
preceding right of the same variable so
 

477
00:11:16,939 --> 00:11:20,179
preceding right of the same variable so
there's two V's this read preceded by a

478
00:11:20,179 --> 00:11:20,189
there's two V's this read preceded by a
 

479
00:11:20,189 --> 00:11:21,889
there's two V's this read preceded by a
right with that correct value so that's

480
00:11:21,889 --> 00:11:21,899
right with that correct value so that's
 

481
00:11:21,899 --> 00:11:23,540
right with that correct value so that's
good and this read is preceded by a

482
00:11:23,540 --> 00:11:23,550
good and this read is preceded by a
 

483
00:11:23,550 --> 00:11:26,539
good and this read is preceded by a
right most closely preceded by a right

484
00:11:26,539 --> 00:11:26,549
right most closely preceded by a right
 

485
00:11:26,549 --> 00:11:32,660
right most closely preceded by a right
of the same value also okay so this this

486
00:11:32,660 --> 00:11:32,670
of the same value also okay so this this
 

487
00:11:32,670 --> 00:11:34,639
of the same value also okay so this this
is a demonstration that this history was

488
00:11:34,639 --> 00:11:34,649
is a demonstration that this history was
 

489
00:11:34,649 --> 00:11:39,079
is a demonstration that this history was
linearizable and you know the you know

490
00:11:39,079 --> 00:11:39,089
linearizable and you know the you know
 

491
00:11:39,089 --> 00:11:40,759
linearizable and you know the you know
depends on what you thought when you

492
00:11:40,759 --> 00:11:40,769
depends on what you thought when you
 

493
00:11:40,769 --> 00:11:42,980
depends on what you thought when you
first saw the history but it's not

494
00:11:42,980 --> 00:11:42,990
first saw the history but it's not
 

495
00:11:42,990 --> 00:11:44,809
first saw the history but it's not
always immediately clear that set up

496
00:11:44,809 --> 00:11:44,819
always immediately clear that set up
 

497
00:11:44,819 --> 00:11:47,480
always immediately clear that set up
this complicated is you know it's easy

498
00:11:47,480 --> 00:11:47,490
this complicated is you know it's easy
 

499
00:11:47,490 --> 00:11:50,419
this complicated is you know it's easy
to be tricked when looking at these

500
00:11:50,419 --> 00:11:50,429
to be tricked when looking at these
 

501
00:11:50,429 --> 00:11:51,530
to be tricked when looking at these
histories which do you think oh the

502
00:11:51,530 --> 00:11:51,540
histories which do you think oh the
 

503
00:11:51,540 --> 00:11:53,689
histories which do you think oh the
right of x1 started first so we just

504
00:11:53,689 --> 00:11:53,699
right of x1 started first so we just
 

505
00:11:53,699 --> 00:11:56,059
right of x1 started first so we just
sort of assumed that the first value

506
00:11:56,059 --> 00:11:56,069
sort of assumed that the first value
 

507
00:11:56,069 --> 00:11:57,679
sort of assumed that the first value
written must be one but that's actually

508
00:11:57,679 --> 00:11:57,689
written must be one but that's actually
 

509
00:11:57,689 --> 00:12:03,530
written must be one but that's actually
not required here any questions about

510
00:12:03,530 --> 00:12:03,540
not required here any questions about
 

511
00:12:03,540 --> 00:12:15,079
not required here any questions about
this

512
00:12:15,079 --> 00:12:15,089

 

513
00:12:15,089 --> 00:12:18,229

if the you mean if these two were moved

514
00:12:18,229 --> 00:12:18,239
if the you mean if these two were moved
 

515
00:12:18,239 --> 00:12:23,209
if the you mean if these two were moved
like this the okay so if if if this if

516
00:12:23,209 --> 00:12:23,219
like this the okay so if if if this if
 

517
00:12:23,219 --> 00:12:26,089
like this the okay so if if if this if
the right with value to was only issued

518
00:12:26,089 --> 00:12:26,099
the right with value to was only issued
 

519
00:12:26,099 --> 00:12:30,319
the right with value to was only issued
by the client after the read of accent

520
00:12:30,319 --> 00:12:30,329
by the client after the read of accent
 

521
00:12:30,329 --> 00:12:33,769
by the client after the read of accent
value to returned that wouldn't be

522
00:12:33,769 --> 00:12:33,779
value to returned that wouldn't be
 

523
00:12:33,779 --> 00:12:37,309
value to returned that wouldn't be
linearizable because in whatever order

524
00:12:37,309 --> 00:12:37,319
linearizable because in whatever order
 

525
00:12:37,319 --> 00:12:39,079
linearizable because in whatever order
you know any order we come up with has

526
00:12:39,079 --> 00:12:39,089
you know any order we come up with has
 

527
00:12:39,089 --> 00:12:41,119
you know any order we come up with has
to obey the real-time ordering so any

528
00:12:41,119 --> 00:12:41,129
to obey the real-time ordering so any
 

529
00:12:41,129 --> 00:12:42,619
to obey the real-time ordering so any
order we come up with would have had to

530
00:12:42,619 --> 00:12:42,629
order we come up with would have had to
 

531
00:12:42,629 --> 00:12:46,279
order we come up with would have had to
have the read of X with to precede the

532
00:12:46,279 --> 00:12:46,289
have the read of X with to precede the
 

533
00:12:46,289 --> 00:12:48,889
have the read of X with to precede the
right of X with 2 and since there's no

534
00:12:48,889 --> 00:12:48,899
right of X with 2 and since there's no
 

535
00:12:48,899 --> 00:12:52,789
right of X with 2 and since there's no
other right of X of 2 insight here that

536
00:12:52,789 --> 00:12:52,799
other right of X of 2 insight here that
 

537
00:12:52,799 --> 00:12:55,069
other right of X of 2 insight here that
means that a read at this point could

538
00:12:55,069 --> 00:12:55,079
means that a read at this point could
 

539
00:12:55,079 --> 00:12:57,019
means that a read at this point could
only see 0 or 1 because those are the

540
00:12:57,019 --> 00:12:57,029
only see 0 or 1 because those are the
 

541
00:12:57,029 --> 00:12:59,539
only see 0 or 1 because those are the
only other 2 rights that could possibly

542
00:12:59,539 --> 00:12:59,549
only other 2 rights that could possibly
 

543
00:12:59,549 --> 00:13:03,319
only other 2 rights that could possibly
come before this read so moving you know

544
00:13:03,319 --> 00:13:03,329
come before this read so moving you know
 

545
00:13:03,329 --> 00:13:06,079
come before this read so moving you know
shifting these that much makes the would

546
00:13:06,079 --> 00:13:06,089
shifting these that much makes the would
 

547
00:13:06,089 --> 00:13:19,080
shifting these that much makes the would
make the example not linearizable

548
00:13:19,080 --> 00:13:19,090

 

549
00:13:19,090 --> 00:13:24,660

yes

550
00:13:24,660 --> 00:13:24,670

 

551
00:13:24,670 --> 00:13:27,250

I'm saying that the first vertical line

552
00:13:27,250 --> 00:13:27,260
I'm saying that the first vertical line
 

553
00:13:27,260 --> 00:13:29,680
I'm saying that the first vertical line
is the moment the client sends the

554
00:13:29,680 --> 00:13:29,690
is the moment the client sends the
 

555
00:13:29,690 --> 00:13:32,350
is the moment the client sends the
request and the second vertical line is

556
00:13:32,350 --> 00:13:32,360
request and the second vertical line is
 

557
00:13:32,360 --> 00:13:34,120
request and the second vertical line is
the moment the client receives the

558
00:13:34,120 --> 00:13:34,130
the moment the client receives the
 

559
00:13:34,130 --> 00:13:39,550
the moment the client receives the
request yes yeah yeah so this is a very

560
00:13:39,550 --> 00:13:39,560
request yes yeah yeah so this is a very
 

561
00:13:39,560 --> 00:13:42,880
request yes yeah yeah so this is a very
client centric kind of definition it

562
00:13:42,880 --> 00:13:42,890
client centric kind of definition it
 

563
00:13:42,890 --> 00:13:44,530
client centric kind of definition it
says you know clients should see the

564
00:13:44,530 --> 00:13:44,540
says you know clients should see the
 

565
00:13:44,540 --> 00:13:46,570
says you know clients should see the
following behavior and what happens

566
00:13:46,570 --> 00:13:46,580
following behavior and what happens
 

567
00:13:46,580 --> 00:13:48,370
following behavior and what happens
after us send a request in maybe there's

568
00:13:48,370 --> 00:13:48,380
after us send a request in maybe there's
 

569
00:13:48,380 --> 00:13:49,960
after us send a request in maybe there's
a lot of replicas maybe a complicated

570
00:13:49,960 --> 00:13:49,970
a lot of replicas maybe a complicated
 

571
00:13:49,970 --> 00:13:51,730
a lot of replicas maybe a complicated
network who knows what it's almost none

572
00:13:51,730 --> 00:13:51,740
network who knows what it's almost none
 

573
00:13:51,740 --> 00:13:53,560
network who knows what it's almost none
of our business we're only the

574
00:13:53,560 --> 00:13:53,570
of our business we're only the
 

575
00:13:53,570 --> 00:13:56,170
of our business we're only the
definition is only about what clients

576
00:13:56,170 --> 00:13:56,180
definition is only about what clients
 

577
00:13:56,180 --> 00:13:59,230
definition is only about what clients
see there's some gray areas which we'll

578
00:13:59,230 --> 00:13:59,240
see there's some gray areas which we'll
 

579
00:13:59,240 --> 00:14:01,030
see there's some gray areas which we'll
come to in a moment like if the client

580
00:14:01,030 --> 00:14:01,040
come to in a moment like if the client
 

581
00:14:01,040 --> 00:14:03,910
come to in a moment like if the client
should need to retransmit a request then

582
00:14:03,910 --> 00:14:03,920
should need to retransmit a request then
 

583
00:14:03,920 --> 00:14:05,620
should need to retransmit a request then
we also have to you know that's

584
00:14:05,620 --> 00:14:05,630
we also have to you know that's
 

585
00:14:05,630 --> 00:14:12,670
we also have to you know that's
something we have to think about okay so

586
00:14:12,670 --> 00:14:12,680
something we have to think about okay so
 

587
00:14:12,680 --> 00:14:16,390
something we have to think about okay so
this one is linearizable here's another

588
00:14:16,390 --> 00:14:16,400
this one is linearizable here's another
 

589
00:14:16,400 --> 00:14:19,690
this one is linearizable here's another
example I'm actually going to start out

590
00:14:19,690 --> 00:14:19,700
example I'm actually going to start out
 

591
00:14:19,700 --> 00:14:22,390
example I'm actually going to start out
with it being almost identical I'm gonna

592
00:14:22,390 --> 00:14:22,400
with it being almost identical I'm gonna
 

593
00:14:22,400 --> 00:14:23,440
with it being almost identical I'm gonna
start out with you being identical for

594
00:14:23,440 --> 00:14:23,450
start out with you being identical for
 

595
00:14:23,450 --> 00:14:25,090
start out with you being identical for
the first example so again we have a

596
00:14:25,090 --> 00:14:25,100
the first example so again we have a
 

597
00:14:25,100 --> 00:14:28,450
the first example so again we have a
right of X with 0 we have these two

598
00:14:28,450 --> 00:14:28,460
right of X with 0 we have these two
 

599
00:14:28,460 --> 00:14:38,140
right of X with 0 we have these two
concurrent rights and we have the same

600
00:14:38,140 --> 00:14:38,150
concurrent rights and we have the same
 

601
00:14:38,150 --> 00:14:52,810
concurrent rights and we have the same
two reads those are so far identical to

602
00:14:52,810 --> 00:14:52,820
two reads those are so far identical to
 

603
00:14:52,820 --> 00:14:54,520
two reads those are so far identical to
the previous example so therefore we

604
00:14:54,520 --> 00:14:54,530
the previous example so therefore we
 

605
00:14:54,530 --> 00:14:56,080
the previous example so therefore we
know this must be this alone must be

606
00:14:56,080 --> 00:14:56,090
know this must be this alone must be
 

607
00:14:56,090 --> 00:14:58,240
know this must be this alone must be
minimal but I'm going to add let's let's

608
00:14:58,240 --> 00:14:58,250
minimal but I'm going to add let's let's
 

609
00:14:58,250 --> 00:15:02,410
minimal but I'm going to add let's let's
imagine that client 1 issued these two

610
00:15:02,410 --> 00:15:02,420
imagine that client 1 issued these two
 

611
00:15:02,420 --> 00:15:04,300
imagine that client 1 issued these two
requests the definition doesn't really

612
00:15:04,300 --> 00:15:04,310
requests the definition doesn't really
 

613
00:15:04,310 --> 00:15:06,220
requests the definition doesn't really
care about clients but her own sanity

614
00:15:06,220 --> 00:15:06,230
care about clients but her own sanity
 

615
00:15:06,230 --> 00:15:08,560
care about clients but her own sanity
will assume client 1 red X and saw two

616
00:15:08,560 --> 00:15:08,570
will assume client 1 red X and saw two
 

617
00:15:08,570 --> 00:15:11,440
will assume client 1 red X and saw two
and then later red X and saw one but

618
00:15:11,440 --> 00:15:11,450
and then later red X and saw one but
 

619
00:15:11,450 --> 00:15:13,870
and then later red X and saw one but
that's okay so far I say there's another

620
00:15:13,870 --> 00:15:13,880
that's okay so far I say there's another
 

621
00:15:13,880 --> 00:15:17,620
that's okay so far I say there's another
client and the other client does a read

622
00:15:17,620 --> 00:15:17,630
client and the other client does a read
 

623
00:15:17,630 --> 00:15:23,080
client and the other client does a read
of X and it sees a 1 and then the other

624
00:15:23,080 --> 00:15:23,090
of X and it sees a 1 and then the other
 

625
00:15:23,090 --> 00:15:25,690
of X and it sees a 1 and then the other
client is a second read of X and it sees

626
00:15:25,690 --> 00:15:25,700
client is a second read of X and it sees
 

627
00:15:25,700 --> 00:15:31,270
client is a second read of X and it sees
- so this is linearizable and we either

628
00:15:31,270 --> 00:15:31,280
- so this is linearizable and we either
 

629
00:15:31,280 --> 00:15:33,250
- so this is linearizable and we either
have to come up with an order

630
00:15:33,250 --> 00:15:33,260
have to come up with an order
 

631
00:15:33,260 --> 00:15:39,880
have to come up with an order
or this comes before that graph that has

632
00:15:39,880 --> 00:15:39,890
or this comes before that graph that has
 

633
00:15:39,890 --> 00:15:50,200
or this comes before that graph that has
a cycle in it

634
00:15:50,200 --> 00:15:50,210

 

635
00:15:50,210 --> 00:15:54,400

so you know that thing this is getting

636
00:15:54,400 --> 00:15:54,410
so you know that thing this is getting
 

637
00:15:54,410 --> 00:15:57,100
so you know that thing this is getting
at the puzzle is if one client saw

638
00:15:57,100 --> 00:15:57,110
at the puzzle is if one client saw
 

639
00:15:57,110 --> 00:15:59,980
at the puzzle is if one client saw
there's only two rights here so they you

640
00:15:59,980 --> 00:15:59,990
there's only two rights here so they you
 

641
00:15:59,990 --> 00:16:01,690
there's only two rights here so they you
know in any order or one of the rights

642
00:16:01,690 --> 00:16:01,700
know in any order or one of the rights
 

643
00:16:01,700 --> 00:16:03,310
know in any order or one of the rights
comes first or the other rate comes

644
00:16:03,310 --> 00:16:03,320
comes first or the other rate comes
 

645
00:16:03,320 --> 00:16:08,079
comes first or the other rate comes
first and intuitively client one

646
00:16:08,079 --> 00:16:08,089
first and intuitively client one
 

647
00:16:08,089 --> 00:16:10,360
first and intuitively client one
observed that the right with value to

648
00:16:10,360 --> 00:16:10,370
observed that the right with value to
 

649
00:16:10,370 --> 00:16:14,860
observed that the right with value to
came first and then the right of value

650
00:16:14,860 --> 00:16:14,870
came first and then the right of value
 

651
00:16:14,870 --> 00:16:19,000
came first and then the right of value
one right these two reads mean that has

652
00:16:19,000 --> 00:16:19,010
one right these two reads mean that has
 

653
00:16:19,010 --> 00:16:21,550
one right these two reads mean that has
to be the case that in any legal order

654
00:16:21,550 --> 00:16:21,560
to be the case that in any legal order
 

655
00:16:21,560 --> 00:16:22,990
to be the case that in any legal order
of the right of two has to come before

656
00:16:22,990 --> 00:16:23,000
of the right of two has to come before
 

657
00:16:23,000 --> 00:16:25,180
of the right of two has to come before
the right of one in order for the climb

658
00:16:25,180 --> 00:16:25,190
the right of one in order for the climb
 

659
00:16:25,190 --> 00:16:27,570
the right of one in order for the climb
when to have seen this and it's the same

660
00:16:27,570 --> 00:16:27,580
when to have seen this and it's the same
 

661
00:16:27,580 --> 00:16:31,090
when to have seen this and it's the same
order we saw over here but symmetrically

662
00:16:31,090 --> 00:16:31,100
order we saw over here but symmetrically
 

663
00:16:31,100 --> 00:16:33,820
order we saw over here but symmetrically
client one's experience clearly shows

664
00:16:33,820 --> 00:16:33,830
client one's experience clearly shows
 

665
00:16:33,830 --> 00:16:39,060
client one's experience clearly shows
the opposite right sorry huh fine to

666
00:16:39,060 --> 00:16:39,070
the opposite right sorry huh fine to
 

667
00:16:39,070 --> 00:16:41,199
the opposite right sorry huh fine to
client who's experience was the opposite

668
00:16:41,199 --> 00:16:41,209
client who's experience was the opposite
 

669
00:16:41,209 --> 00:16:44,199
client who's experience was the opposite
clients to saw the right of one first

670
00:16:44,199 --> 00:16:44,209
clients to saw the right of one first
 

671
00:16:44,209 --> 00:16:47,790
clients to saw the right of one first
and then the right with value too and

672
00:16:47,790 --> 00:16:47,800
and then the right with value too and
 

673
00:16:47,800 --> 00:16:52,030
and then the right with value too and
one of the rules here is that there's

674
00:16:52,030 --> 00:16:52,040
one of the rules here is that there's
 

675
00:16:52,040 --> 00:16:56,079
one of the rules here is that there's
just one total order of operations not

676
00:16:56,079 --> 00:16:56,089
just one total order of operations not
 

677
00:16:56,089 --> 00:16:58,120
just one total order of operations not
allowed to have different clients see

678
00:16:58,120 --> 00:16:58,130
allowed to have different clients see
 

679
00:16:58,130 --> 00:17:00,900
allowed to have different clients see
different histories or different

680
00:17:00,900 --> 00:17:00,910
different histories or different
 

681
00:17:00,910 --> 00:17:03,670
different histories or different
different progressions evolutions of the

682
00:17:03,670 --> 00:17:03,680
different progressions evolutions of the
 

683
00:17:03,680 --> 00:17:05,410
different progressions evolutions of the
values that are stored in the system

684
00:17:05,410 --> 00:17:05,420
values that are stored in the system
 

685
00:17:05,420 --> 00:17:07,059
values that are stored in the system
there can only be one total of order

686
00:17:07,059 --> 00:17:07,069
there can only be one total of order
 

687
00:17:07,069 --> 00:17:09,960
there can only be one total of order
that all clients have to experience

688
00:17:09,960 --> 00:17:09,970
that all clients have to experience
 

689
00:17:09,970 --> 00:17:11,799
that all clients have to experience
operations that are consistent with the

690
00:17:11,799 --> 00:17:11,809
operations that are consistent with the
 

691
00:17:11,809 --> 00:17:16,270
operations that are consistent with the
one order and if one this one client

692
00:17:16,270 --> 00:17:16,280
one order and if one this one client
 

693
00:17:16,280 --> 00:17:18,309
one order and if one this one client
clearly implies that the order is right

694
00:17:18,309 --> 00:17:18,319
clearly implies that the order is right
 

695
00:17:18,319 --> 00:17:21,040
clearly implies that the order is right
- and then right one and so we should

696
00:17:21,040 --> 00:17:21,050
- and then right one and so we should
 

697
00:17:21,050 --> 00:17:23,710
- and then right one and so we should
not be able to have any other client who

698
00:17:23,710 --> 00:17:23,720
not be able to have any other client who
 

699
00:17:23,720 --> 00:17:25,780
not be able to have any other client who
observes proof that the order was

700
00:17:25,780 --> 00:17:25,790
observes proof that the order was
 

701
00:17:25,790 --> 00:17:29,549
observes proof that the order was
anything else which is what we have here

702
00:17:29,549 --> 00:17:29,559
anything else which is what we have here
 

703
00:17:29,559 --> 00:17:34,380
anything else which is what we have here
and so that's a bit of a intuitive

704
00:17:34,380 --> 00:17:34,390
and so that's a bit of a intuitive
 

705
00:17:34,390 --> 00:17:37,360
and so that's a bit of a intuitive
explanation for what's going wrong here

706
00:17:37,360 --> 00:17:37,370
explanation for what's going wrong here
 

707
00:17:37,370 --> 00:17:38,890
explanation for what's going wrong here
and and by the way the reason why this

708
00:17:38,890 --> 00:17:38,900
and and by the way the reason why this
 

709
00:17:38,900 --> 00:17:41,290
and and by the way the reason why this
could come up in the systems that we

710
00:17:41,290 --> 00:17:41,300
could come up in the systems that we
 

711
00:17:41,300 --> 00:17:43,419
could come up in the systems that we
build and look at is that we're building

712
00:17:43,419 --> 00:17:43,429
build and look at is that we're building
 

713
00:17:43,429 --> 00:17:46,060
build and look at is that we're building
replicated systems either you know raft

714
00:17:46,060 --> 00:17:46,070
replicated systems either you know raft
 

715
00:17:46,070 --> 00:17:48,850
replicated systems either you know raft
replicas or maybe systems with caching

716
00:17:48,850 --> 00:17:48,860
replicas or maybe systems with caching
 

717
00:17:48,860 --> 00:17:50,290
replicas or maybe systems with caching
in them but we're building systems that

718
00:17:50,290 --> 00:17:50,300
in them but we're building systems that
 

719
00:17:50,300 --> 00:17:52,210
in them but we're building systems that
have many copies of the data and so

720
00:17:52,210 --> 00:17:52,220
have many copies of the data and so
 

721
00:17:52,220 --> 00:17:54,940
have many copies of the data and so
there may be many servers with copies of

722
00:17:54,940 --> 00:17:54,950
there may be many servers with copies of
 

723
00:17:54,950 --> 00:17:57,669
there may be many servers with copies of
X in them possibly with different values

724
00:17:57,669 --> 00:17:57,679
X in them possibly with different values
 

725
00:17:57,679 --> 00:17:59,200
X in them possibly with different values
at different times right if they haven't

726
00:17:59,200 --> 00:17:59,210
at different times right if they haven't
 

727
00:17:59,210 --> 00:18:01,180
at different times right if they haven't
gotten the commits yet or something some

728
00:18:01,180 --> 00:18:01,190
gotten the commits yet or something some
 

729
00:18:01,190 --> 00:18:03,460
gotten the commits yet or something some
replicas may have one value some may of

730
00:18:03,460 --> 00:18:03,470
replicas may have one value some may of
 

731
00:18:03,470 --> 00:18:03,850
replicas may have one value some may of
the other

732
00:18:03,850 --> 00:18:03,860
the other
 

733
00:18:03,860 --> 00:18:07,060
the other
but in spite of that if our system is

734
00:18:07,060 --> 00:18:07,070
but in spite of that if our system is
 

735
00:18:07,070 --> 00:18:09,430
but in spite of that if our system is
linearizable or strongly consistent it

736
00:18:09,430 --> 00:18:09,440
linearizable or strongly consistent it
 

737
00:18:09,440 --> 00:18:13,120
linearizable or strongly consistent it
must behave as if there was only one

738
00:18:13,120 --> 00:18:13,130
must behave as if there was only one
 

739
00:18:13,130 --> 00:18:16,450
must behave as if there was only one
copy of the data and one linear sequence

740
00:18:16,450 --> 00:18:16,460
copy of the data and one linear sequence
 

741
00:18:16,460 --> 00:18:18,730
copy of the data and one linear sequence
of operations applied to the data that's

742
00:18:18,730 --> 00:18:18,740
of operations applied to the data that's
 

743
00:18:18,740 --> 00:18:20,410
of operations applied to the data that's
why this is an interesting example

744
00:18:20,410 --> 00:18:20,420
why this is an interesting example
 

745
00:18:20,420 --> 00:18:22,650
why this is an interesting example
because this could come up in a sort of

746
00:18:22,650 --> 00:18:22,660
because this could come up in a sort of
 

747
00:18:22,660 --> 00:18:25,000
because this could come up in a sort of
buggy system that had two copies of the

748
00:18:25,000 --> 00:18:25,010
buggy system that had two copies of the
 

749
00:18:25,010 --> 00:18:27,250
buggy system that had two copies of the
data and one copy executed these rights

750
00:18:27,250 --> 00:18:27,260
data and one copy executed these rights
 

751
00:18:27,260 --> 00:18:28,750
data and one copy executed these rights
in one order and the other replicas

752
00:18:28,750 --> 00:18:28,760
in one order and the other replicas
 

753
00:18:28,760 --> 00:18:30,310
in one order and the other replicas
executed the rights in the other order

754
00:18:30,310 --> 00:18:30,320
executed the rights in the other order
 

755
00:18:30,320 --> 00:18:32,560
executed the rights in the other order
and then we could see this and linearize

756
00:18:32,560 --> 00:18:32,570
and then we could see this and linearize
 

757
00:18:32,570 --> 00:18:34,870
and then we could see this and linearize
ability says no we can't see that we're

758
00:18:34,870 --> 00:18:34,880
ability says no we can't see that we're
 

759
00:18:34,880 --> 00:18:35,919
ability says no we can't see that we're
not allowed to see that in the correct

760
00:18:35,919 --> 00:18:35,929
not allowed to see that in the correct
 

761
00:18:35,929 --> 00:18:39,669
not allowed to see that in the correct
system so the the cycle in the graph in

762
00:18:39,669 --> 00:18:39,679
system so the the cycle in the graph in
 

763
00:18:39,679 --> 00:18:44,080
system so the the cycle in the graph in
the this comes before that graph that

764
00:18:44,080 --> 00:18:44,090
the this comes before that graph that
 

765
00:18:44,090 --> 00:18:45,789
the this comes before that graph that
would be a sort of slightly more proof e

766
00:18:45,789 --> 00:18:45,799
would be a sort of slightly more proof e
 

767
00:18:45,799 --> 00:18:47,650
would be a sort of slightly more proof e
proof that this is not linearizable is

768
00:18:47,650 --> 00:18:47,660
proof that this is not linearizable is
 

769
00:18:47,660 --> 00:18:51,250
proof that this is not linearizable is
that the right of two has to come before

770
00:18:51,250 --> 00:18:51,260
that the right of two has to come before
 

771
00:18:51,260 --> 00:18:55,330
that the right of two has to come before
client ones read of two so there's one

772
00:18:55,330 --> 00:18:55,340
client ones read of two so there's one
 

773
00:18:55,340 --> 00:18:59,200
client ones read of two so there's one
arrow like this so this right has to

774
00:18:59,200 --> 00:18:59,210
arrow like this so this right has to
 

775
00:18:59,210 --> 00:19:05,250
arrow like this so this right has to
come before that read client ones read

776
00:19:05,250 --> 00:19:05,260
come before that read client ones read
 

777
00:19:05,260 --> 00:19:09,370
come before that read client ones read
has to come before the right of X with

778
00:19:09,370 --> 00:19:09,380
has to come before the right of X with
 

779
00:19:09,380 --> 00:19:13,690
has to come before the right of X with
value one otherwise this read wouldn't

780
00:19:13,690 --> 00:19:13,700
value one otherwise this read wouldn't
 

781
00:19:13,700 --> 00:19:15,820
value one otherwise this read wouldn't
be able to see one right if this you can

782
00:19:15,820 --> 00:19:15,830
be able to see one right if this you can
 

783
00:19:15,830 --> 00:19:17,020
be able to see one right if this you can
imagine this right might happen very

784
00:19:17,020 --> 00:19:17,030
imagine this right might happen very
 

785
00:19:17,030 --> 00:19:19,990
imagine this right might happen very
early in the order but in that case this

786
00:19:19,990 --> 00:19:20,000
early in the order but in that case this
 

787
00:19:20,000 --> 00:19:21,730
early in the order but in that case this
read of X wouldn't see one it would see

788
00:19:21,730 --> 00:19:21,740
read of X wouldn't see one it would see
 

789
00:19:21,740 --> 00:19:25,080
read of X wouldn't see one it would see
two since we know this guy saw two so

790
00:19:25,080 --> 00:19:25,090
two since we know this guy saw two so
 

791
00:19:25,090 --> 00:19:28,890
two since we know this guy saw two so
the read of X with two must come before

792
00:19:28,890 --> 00:19:28,900
the read of X with two must come before
 

793
00:19:28,900 --> 00:19:32,799
the read of X with two must come before
the right of X with one the right of X

794
00:19:32,799 --> 00:19:32,809
the right of X with one the right of X
 

795
00:19:32,809 --> 00:19:34,570
the right of X with one the right of X
of one must come before any read of X

796
00:19:34,570 --> 00:19:34,580
of one must come before any read of X
 

797
00:19:34,580 --> 00:19:37,180
of one must come before any read of X
with value 1 because including client

798
00:19:37,180 --> 00:19:37,190
with value 1 because including client
 

799
00:19:37,190 --> 00:19:42,669
with value 1 because including client
who's read of X with value 1 but in

800
00:19:42,669 --> 00:19:42,679
who's read of X with value 1 but in
 

801
00:19:42,679 --> 00:19:44,590
who's read of X with value 1 but in
order to get value 1 here and for this

802
00:19:44,590 --> 00:19:44,600
order to get value 1 here and for this
 

803
00:19:44,600 --> 00:19:47,020
order to get value 1 here and for this
read to see to the right of X with I too

804
00:19:47,020 --> 00:19:47,030
read to see to the right of X with I too
 

805
00:19:47,030 --> 00:19:50,159
read to see to the right of X with I too
must come between in in the order

806
00:19:50,159 --> 00:19:50,169
must come between in in the order
 

807
00:19:50,169 --> 00:19:52,810
must come between in in the order
between these two operations so we know

808
00:19:52,810 --> 00:19:52,820
between these two operations so we know
 

809
00:19:52,820 --> 00:19:55,830
between these two operations so we know
that the read of X 1 must come before

810
00:19:55,830 --> 00:19:55,840
that the read of X 1 must come before
 

811
00:19:55,840 --> 00:19:59,130
that the read of X 1 must come before
the right of X 2 and that's a cycle

812
00:19:59,130 --> 00:19:59,140
the right of X 2 and that's a cycle
 

813
00:19:59,140 --> 00:20:03,039
the right of X 2 and that's a cycle
alright so there's no there's no Vinnie

814
00:20:03,039 --> 00:20:03,049
alright so there's no there's no Vinnie
 

815
00:20:03,049 --> 00:20:06,130
alright so there's no there's no Vinnie
or order or that but there's no linear

816
00:20:06,130 --> 00:20:06,140
or order or that but there's no linear
 

817
00:20:06,140 --> 00:20:10,120
or order or that but there's no linear
order that can obey all of these time

818
00:20:10,120 --> 00:20:10,130
order that can obey all of these time
 

819
00:20:10,130 --> 00:20:14,049
order that can obey all of these time
and value rules and there isn't because

820
00:20:14,049 --> 00:20:14,059
and value rules and there isn't because
 

821
00:20:14,059 --> 00:20:16,520
and value rules and there isn't because
there's a cycle in the

822
00:20:16,520 --> 00:20:16,530
there's a cycle in the
 

823
00:20:16,530 --> 00:20:32,860
there's a cycle in the
in the graph yes

824
00:20:32,860 --> 00:20:32,870

 

825
00:20:32,870 --> 00:20:35,540

that's a good question this this

826
00:20:35,540 --> 00:20:35,550
that's a good question this this
 

827
00:20:35,550 --> 00:20:37,400
that's a good question this this
definitions the definition about

828
00:20:37,400 --> 00:20:37,410
definitions the definition about
 

829
00:20:37,410 --> 00:20:41,060
definitions the definition about
history's not about necessarily systems

830
00:20:41,060 --> 00:20:41,070
history's not about necessarily systems
 

831
00:20:41,070 --> 00:20:43,640
history's not about necessarily systems
so what it's not saying is that a system

832
00:20:43,640 --> 00:20:43,650
so what it's not saying is that a system
 

833
00:20:43,650 --> 00:20:46,940
so what it's not saying is that a system
design is linearizable if something

834
00:20:46,940 --> 00:20:46,950
design is linearizable if something
 

835
00:20:46,950 --> 00:20:50,450
design is linearizable if something
about the design it's really only

836
00:20:50,450 --> 00:20:50,460
about the design it's really only
 

837
00:20:50,460 --> 00:20:53,570
about the design it's really only
history by history so if we don't get to

838
00:20:53,570 --> 00:20:53,580
history by history so if we don't get to
 

839
00:20:53,580 --> 00:20:55,700
history by history so if we don't get to
know how the system operates internally

840
00:20:55,700 --> 00:20:55,710
know how the system operates internally
 

841
00:20:55,710 --> 00:20:57,440
know how the system operates internally
and the only thing we know is we get to

842
00:20:57,440 --> 00:20:57,450
and the only thing we know is we get to
 

843
00:20:57,450 --> 00:20:59,510
and the only thing we know is we get to
watch it while it executes then before

844
00:20:59,510 --> 00:20:59,520
watch it while it executes then before
 

845
00:20:59,520 --> 00:21:01,120
watch it while it executes then before
we've seen anything we just don't know

846
00:21:01,120 --> 00:21:01,130
we've seen anything we just don't know
 

847
00:21:01,130 --> 00:21:02,780
we've seen anything we just don't know
right we mean we'll assume it's

848
00:21:02,780 --> 00:21:02,790
right we mean we'll assume it's
 

849
00:21:02,790 --> 00:21:04,460
right we mean we'll assume it's
linearizable and then we see more and

850
00:21:04,460 --> 00:21:04,470
linearizable and then we see more and
 

851
00:21:04,470 --> 00:21:06,800
linearizable and then we see more and
more sequences of operations this Akash

852
00:21:06,800 --> 00:21:06,810
more sequences of operations this Akash
 

853
00:21:06,810 --> 00:21:08,540
more sequences of operations this Akash
they're all consistent with linearize

854
00:21:08,540 --> 00:21:08,550
they're all consistent with linearize
 

855
00:21:08,550 --> 00:21:10,550
they're all consistent with linearize
ability they all follow these rules so

856
00:21:10,550 --> 00:21:10,560
ability they all follow these rules so
 

857
00:21:10,560 --> 00:21:12,560
ability they all follow these rules so
you know we believe it's probably this

858
00:21:12,560 --> 00:21:12,570
you know we believe it's probably this
 

859
00:21:12,570 --> 00:21:14,330
you know we believe it's probably this
isn't linearize of all and if we ever

860
00:21:14,330 --> 00:21:14,340
isn't linearize of all and if we ever
 

861
00:21:14,340 --> 00:21:15,770
isn't linearize of all and if we ever
seen one that isn't then we realize it's

862
00:21:15,770 --> 00:21:15,780
seen one that isn't then we realize it's
 

863
00:21:15,780 --> 00:21:20,450
seen one that isn't then we realize it's
not linearizable so this is yeah it's

864
00:21:20,450 --> 00:21:20,460
not linearizable so this is yeah it's
 

865
00:21:20,460 --> 00:21:22,100
not linearizable so this is yeah it's
not a definition on the system design

866
00:21:22,100 --> 00:21:22,110
not a definition on the system design
 

867
00:21:22,110 --> 00:21:23,870
not a definition on the system design
it's a definition on what the what we

868
00:21:23,870 --> 00:21:23,880
it's a definition on what the what we
 

869
00:21:23,880 --> 00:21:25,520
it's a definition on what the what we
observe the system to do so in that

870
00:21:25,520 --> 00:21:25,530
observe the system to do so in that
 

871
00:21:25,530 --> 00:21:27,010
observe the system to do so in that
sense it's maybe a little bit

872
00:21:27,010 --> 00:21:27,020
sense it's maybe a little bit
 

873
00:21:27,020 --> 00:21:28,820
sense it's maybe a little bit
unsatisfying if you're trying to design

874
00:21:28,820 --> 00:21:28,830
unsatisfying if you're trying to design
 

875
00:21:28,830 --> 00:21:30,410
unsatisfying if you're trying to design
something right there's not a recipe for

876
00:21:30,410 --> 00:21:30,420
something right there's not a recipe for
 

877
00:21:30,420 --> 00:21:32,660
something right there's not a recipe for
how you design you know except in a

878
00:21:32,660 --> 00:21:32,670
how you design you know except in a
 

879
00:21:32,670 --> 00:21:33,950
how you design you know except in a
trivial sense that if you had a single

880
00:21:33,950 --> 00:21:33,960
trivial sense that if you had a single
 

881
00:21:33,960 --> 00:21:37,250
trivial sense that if you had a single
server in very simple systems one server

882
00:21:37,250 --> 00:21:37,260
server in very simple systems one server
 

883
00:21:37,260 --> 00:21:40,010
server in very simple systems one server
one copy of the data not threaded or

884
00:21:40,010 --> 00:21:40,020
one copy of the data not threaded or
 

885
00:21:40,020 --> 00:21:42,320
one copy of the data not threaded or
multi-core or anything it's a little bit

886
00:21:42,320 --> 00:21:42,330
multi-core or anything it's a little bit
 

887
00:21:42,330 --> 00:21:43,760
multi-core or anything it's a little bit
hard to build a system that violates

888
00:21:43,760 --> 00:21:43,770
hard to build a system that violates
 

889
00:21:43,770 --> 00:21:46,640
hard to build a system that violates
this in a very simple set up but super

890
00:21:46,640 --> 00:21:46,650
this in a very simple set up but super
 

891
00:21:46,650 --> 00:21:50,270
this in a very simple set up but super
easy to violate it in any kind of

892
00:21:50,270 --> 00:21:50,280
easy to violate it in any kind of
 

893
00:21:50,280 --> 00:21:55,760
easy to violate it in any kind of
distributed system okay so the lesson

894
00:21:55,760 --> 00:21:55,770
distributed system okay so the lesson
 

895
00:21:55,770 --> 00:21:59,540
distributed system okay so the lesson
from this is that there's only can only

896
00:21:59,540 --> 00:21:59,550
from this is that there's only can only
 

897
00:21:59,550 --> 00:22:04,790
from this is that there's only can only
be one order in which the system is

898
00:22:04,790 --> 00:22:04,800
be one order in which the system is
 

899
00:22:04,800 --> 00:22:07,250
be one order in which the system is
observed to execute the writes all

900
00:22:07,250 --> 00:22:07,260
observed to execute the writes all
 

901
00:22:07,260 --> 00:22:10,340
observed to execute the writes all
clients have to see value is consistent

902
00:22:10,340 --> 00:22:10,350
clients have to see value is consistent
 

903
00:22:10,350 --> 00:22:13,340
clients have to see value is consistent
with the system executing the writes in

904
00:22:13,340 --> 00:22:13,350
with the system executing the writes in
 

905
00:22:13,350 --> 00:22:18,010
with the system executing the writes in
the same order

906
00:22:18,010 --> 00:22:18,020

 

907
00:22:18,020 --> 00:22:19,750

here's a very simple history

908
00:22:19,750 --> 00:22:19,760
here's a very simple history
 

909
00:22:19,760 --> 00:22:24,370
here's a very simple history
another example supposing we write acts

910
00:22:24,370 --> 00:22:24,380
another example supposing we write acts
 

911
00:22:24,380 --> 00:22:27,490
another example supposing we write acts
with value 1 and then definitely

912
00:22:27,490 --> 00:22:27,500
with value 1 and then definitely
 

913
00:22:27,500 --> 00:22:29,320
with value 1 and then definitely
subsequently in time maybe with another

914
00:22:29,320 --> 00:22:29,330
subsequently in time maybe with another
 

915
00:22:29,330 --> 00:22:32,200
subsequently in time maybe with another
client another client launches a right

916
00:22:32,200 --> 00:22:32,210
client another client launches a right
 

917
00:22:32,210 --> 00:22:34,660
client another client launches a right
of X with value 2 and sees a response

918
00:22:34,660 --> 00:22:34,670
of X with value 2 and sees a response
 

919
00:22:34,670 --> 00:22:36,160
of X with value 2 and sees a response
back from the service saying yes I did

920
00:22:36,160 --> 00:22:36,170
back from the service saying yes I did
 

921
00:22:36,170 --> 00:22:38,530
back from the service saying yes I did
the right and then a third client does a

922
00:22:38,530 --> 00:22:38,540
the right and then a third client does a
 

923
00:22:38,540 --> 00:22:45,790
the right and then a third client does a
read of X and gets got you one so this

924
00:22:45,790 --> 00:22:45,800
read of X and gets got you one so this
 

925
00:22:45,800 --> 00:22:47,620
read of X and gets got you one so this
is a very easy example it's clearly not

926
00:22:47,620 --> 00:22:47,630
is a very easy example it's clearly not
 

927
00:22:47,630 --> 00:22:50,640
is a very easy example it's clearly not
linearizable because the time rule means

928
00:22:50,640 --> 00:22:50,650
linearizable because the time rule means
 

929
00:22:50,650 --> 00:22:54,220
linearizable because the time rule means
that the only possible order is the

930
00:22:54,220 --> 00:22:54,230
that the only possible order is the
 

931
00:22:54,230 --> 00:22:55,960
that the only possible order is the
right of X with 1 the right of X is 2

932
00:22:55,960 --> 00:22:55,970
right of X with 1 the right of X is 2
 

933
00:22:55,970 --> 00:22:57,850
right of X with 1 the right of X is 2
the read of X with 1 so that has to be

934
00:22:57,850 --> 00:22:57,860
the read of X with 1 so that has to be
 

935
00:22:57,860 --> 00:22:59,860
the read of X with 1 so that has to be
the order and that order clearly

936
00:22:59,860 --> 00:22:59,870
the order and that order clearly
 

937
00:22:59,870 --> 00:23:01,840
the order and that order clearly
violates this is the only one order that

938
00:23:01,840 --> 00:23:01,850
violates this is the only one order that
 

939
00:23:01,850 --> 00:23:03,610
violates this is the only one order that
order clearly violates the second rule

940
00:23:03,610 --> 00:23:03,620
order clearly violates the second rule
 

941
00:23:03,620 --> 00:23:06,610
order clearly violates the second rule
about values that is you know the most

942
00:23:06,610 --> 00:23:06,620
about values that is you know the most
 

943
00:23:06,620 --> 00:23:08,920
about values that is you know the most
value written by the most recent right

944
00:23:08,920 --> 00:23:08,930
value written by the most recent right
 

945
00:23:08,930 --> 00:23:10,900
value written by the most recent right
in the owned one order that's possible

946
00:23:10,900 --> 00:23:10,910
in the owned one order that's possible
 

947
00:23:10,910 --> 00:23:13,000
in the owned one order that's possible
is not 1 it's 2 so this is clearly not

948
00:23:13,000 --> 00:23:13,010
is not 1 it's 2 so this is clearly not
 

949
00:23:13,010 --> 00:23:18,310
is not 1 it's 2 so this is clearly not
linearizable and the reason I'm bringing

950
00:23:18,310 --> 00:23:18,320
linearizable and the reason I'm bringing
 

951
00:23:18,320 --> 00:23:20,800
linearizable and the reason I'm bringing
it up is because this is the argument

952
00:23:20,800 --> 00:23:20,810
it up is because this is the argument
 

953
00:23:20,810 --> 00:23:23,140
it up is because this is the argument
that a linearizable system a strongly

954
00:23:23,140 --> 00:23:23,150
that a linearizable system a strongly
 

955
00:23:23,150 --> 00:23:25,570
that a linearizable system a strongly
consistent system cannot serve up stale

956
00:23:25,570 --> 00:23:25,580
consistent system cannot serve up stale
 

957
00:23:25,580 --> 00:23:29,770
consistent system cannot serve up stale
data right and you know the reason why

958
00:23:29,770 --> 00:23:29,780
data right and you know the reason why
 

959
00:23:29,780 --> 00:23:31,450
data right and you know the reason why
this might come up is again you know

960
00:23:31,450 --> 00:23:31,460
this might come up is again you know
 

961
00:23:31,460 --> 00:23:34,330
this might come up is again you know
maybe you have lots of replicas each you

962
00:23:34,330 --> 00:23:34,340
maybe you have lots of replicas each you
 

963
00:23:34,340 --> 00:23:36,310
maybe you have lots of replicas each you
know maybe haven't seen all the rights

964
00:23:36,310 --> 00:23:36,320
know maybe haven't seen all the rights
 

965
00:23:36,320 --> 00:23:37,510
know maybe haven't seen all the rights
or all the committed rights or something

966
00:23:37,510 --> 00:23:37,520
or all the committed rights or something
 

967
00:23:37,520 --> 00:23:40,450
or all the committed rights or something
so maybe there's some maybe all the

968
00:23:40,450 --> 00:23:40,460
so maybe there's some maybe all the
 

969
00:23:40,460 --> 00:23:42,220
so maybe there's some maybe all the
replicas have seen this right but only

970
00:23:42,220 --> 00:23:42,230
replicas have seen this right but only
 

971
00:23:42,230 --> 00:23:43,840
replicas have seen this right but only
some replicas have seen this right and

972
00:23:43,840 --> 00:23:43,850
some replicas have seen this right and
 

973
00:23:43,850 --> 00:23:45,910
some replicas have seen this right and
so if you ask a replica that's lagging

974
00:23:45,910 --> 00:23:45,920
so if you ask a replica that's lagging
 

975
00:23:45,920 --> 00:23:47,350
so if you ask a replica that's lagging
behind a little bit it's still gonna

976
00:23:47,350 --> 00:23:47,360
behind a little bit it's still gonna
 

977
00:23:47,360 --> 00:23:50,580
behind a little bit it's still gonna
have value 1 for X but nevertheless

978
00:23:50,580 --> 00:23:50,590
have value 1 for X but nevertheless
 

979
00:23:50,590 --> 00:23:53,590
have value 1 for X but nevertheless
clients should never be able to see this

980
00:23:53,590 --> 00:23:53,600
clients should never be able to see this
 

981
00:23:53,600 --> 00:23:57,970
clients should never be able to see this
old value in a linearizable system are

982
00:23:57,970 --> 00:23:57,980
old value in a linearizable system are
 

983
00:23:57,980 --> 00:24:00,280
old value in a linearizable system are
there no stale data allowed no still

984
00:24:00,280 --> 00:24:00,290
there no stale data allowed no still
 

985
00:24:00,290 --> 00:24:21,500
there no stale data allowed no still
reads

986
00:24:21,500 --> 00:24:21,510

 

987
00:24:21,510 --> 00:24:23,850

yeah if there's overlap in the interval

988
00:24:23,850 --> 00:24:23,860
yeah if there's overlap in the interval
 

989
00:24:23,860 --> 00:24:26,130
yeah if there's overlap in the interval
then there's then you know that you

990
00:24:26,130 --> 00:24:26,140
then there's then you know that you
 

991
00:24:26,140 --> 00:24:29,040
then there's then you know that you
could the system could legally execute

992
00:24:29,040 --> 00:24:29,050
could the system could legally execute
 

993
00:24:29,050 --> 00:24:31,140
could the system could legally execute
either of them in a real-time and I in

994
00:24:31,140 --> 00:24:31,150
either of them in a real-time and I in
 

995
00:24:31,150 --> 00:24:32,790
either of them in a real-time and I in
the interval so that's the sense in

996
00:24:32,790 --> 00:24:32,800
the interval so that's the sense in
 

997
00:24:32,800 --> 00:24:35,940
the interval so that's the sense in
which they could system gonna execute

998
00:24:35,940 --> 00:24:35,950
which they could system gonna execute
 

999
00:24:35,950 --> 00:24:38,060
which they could system gonna execute
them in either order now you know other

1000
00:24:38,060 --> 00:24:38,070
them in either order now you know other
 

1001
00:24:38,070 --> 00:24:40,170
them in either order now you know other
you know if it weren't for these two

1002
00:24:40,170 --> 00:24:40,180
you know if it weren't for these two
 

1003
00:24:40,180 --> 00:24:43,430
you know if it weren't for these two
reads the system would have you know

1004
00:24:43,430 --> 00:24:43,440
reads the system would have you know
 

1005
00:24:43,440 --> 00:24:45,480
reads the system would have you know
total freedom execute that writes in

1006
00:24:45,480 --> 00:24:45,490
total freedom execute that writes in
 

1007
00:24:45,490 --> 00:24:47,430
total freedom execute that writes in
either order but because we saw the two

1008
00:24:47,430 --> 00:24:47,440
either order but because we saw the two
 

1009
00:24:47,440 --> 00:24:52,680
either order but because we saw the two
reads we know that you know the only

1010
00:24:52,680 --> 00:24:52,690
reads we know that you know the only
 

1011
00:24:52,690 --> 00:25:01,980
reads we know that you know the only
legal order is two and then one yeah so

1012
00:25:01,980 --> 00:25:01,990
legal order is two and then one yeah so
 

1013
00:25:01,990 --> 00:25:03,300
legal order is two and then one yeah so
if the two reserva laughing then and

1014
00:25:03,300 --> 00:25:03,310
if the two reserva laughing then and
 

1015
00:25:03,310 --> 00:25:04,680
if the two reserva laughing then and
then any order then the reads could have

1016
00:25:04,680 --> 00:25:04,690
then any order then the reads could have
 

1017
00:25:04,690 --> 00:25:07,140
then any order then the reads could have
seen either in fact you know Toby saw

1018
00:25:07,140 --> 00:25:07,150
seen either in fact you know Toby saw
 

1019
00:25:07,150 --> 00:25:08,310
seen either in fact you know Toby saw
the two and the one words all from the

1020
00:25:08,310 --> 00:25:08,320
the two and the one words all from the
 

1021
00:25:08,320 --> 00:25:11,240
the two and the one words all from the
reads these doobies could have you know

1022
00:25:11,240 --> 00:25:11,250
reads these doobies could have you know
 

1023
00:25:11,250 --> 00:25:13,560
reads these doobies could have you know
the system until it committed to the

1024
00:25:13,560 --> 00:25:13,570
the system until it committed to the
 

1025
00:25:13,570 --> 00:25:15,420
the system until it committed to the
values for the read it still had freedom

1026
00:25:15,420 --> 00:25:15,430
values for the read it still had freedom
 

1027
00:25:15,430 --> 00:25:23,659
values for the read it still had freedom
to return them in either order

1028
00:25:23,659 --> 00:25:23,669

 

1029
00:25:23,669 --> 00:25:28,770

I'm using them as synonyms yeah yeah you

1030
00:25:28,770 --> 00:25:28,780
I'm using them as synonyms yeah yeah you
 

1031
00:25:28,780 --> 00:25:31,470
I'm using them as synonyms yeah yeah you
know for most people although possibly

1032
00:25:31,470 --> 00:25:31,480
know for most people although possibly
 

1033
00:25:31,480 --> 00:25:34,650
know for most people although possibly
not today's paper linearize ability is

1034
00:25:34,650 --> 00:25:34,660
not today's paper linearize ability is
 

1035
00:25:34,660 --> 00:25:37,890
not today's paper linearize ability is
is well defined and and people's

1036
00:25:37,890 --> 00:25:37,900
is well defined and and people's
 

1037
00:25:37,900 --> 00:25:39,450
is well defined and and people's
definitions really deviate very much

1038
00:25:39,450 --> 00:25:39,460
definitions really deviate very much
 

1039
00:25:39,460 --> 00:25:43,740
definitions really deviate very much
from this strong consistency though is

1040
00:25:43,740 --> 00:25:43,750
from this strong consistency though is
 

1041
00:25:43,750 --> 00:25:45,690
from this strong consistency though is
less I think there's less sort of

1042
00:25:45,690 --> 00:25:45,700
less I think there's less sort of
 

1043
00:25:45,700 --> 00:25:47,880
less I think there's less sort of
consensus about exactly what the

1044
00:25:47,880 --> 00:25:47,890
consensus about exactly what the
 

1045
00:25:47,890 --> 00:25:49,680
consensus about exactly what the
definition might be if you meant strong

1046
00:25:49,680 --> 00:25:49,690
definition might be if you meant strong
 

1047
00:25:49,690 --> 00:25:53,190
definition might be if you meant strong
consistency it's often men it's usually

1048
00:25:53,190 --> 00:25:53,200
consistency it's often men it's usually
 

1049
00:25:53,200 --> 00:25:55,110
consistency it's often men it's usually
men too in ways that are quite close to

1050
00:25:55,110 --> 00:25:55,120
men too in ways that are quite close to
 

1051
00:25:55,120 --> 00:25:55,770
men too in ways that are quite close to
this

1052
00:25:55,770 --> 00:25:55,780
this
 

1053
00:25:55,780 --> 00:25:57,840
this
like for example that oh the system

1054
00:25:57,840 --> 00:25:57,850
like for example that oh the system
 

1055
00:25:57,850 --> 00:26:00,630
like for example that oh the system
behaves the same way that a system with

1056
00:26:00,630 --> 00:26:00,640
behaves the same way that a system with
 

1057
00:26:00,640 --> 00:26:02,580
behaves the same way that a system with
only one copy of the data would behave

1058
00:26:02,580 --> 00:26:02,590
only one copy of the data would behave
 

1059
00:26:02,590 --> 00:26:05,159
only one copy of the data would behave
all right which is quite close to what

1060
00:26:05,159 --> 00:26:05,169
all right which is quite close to what
 

1061
00:26:05,169 --> 00:26:06,210
all right which is quite close to what
we're getting at with this definition

1062
00:26:06,210 --> 00:26:06,220
we're getting at with this definition
 

1063
00:26:06,220 --> 00:26:10,140
we're getting at with this definition
but yeah for you know it's reasonable to

1064
00:26:10,140 --> 00:26:10,150
but yeah for you know it's reasonable to
 

1065
00:26:10,150 --> 00:26:12,060
but yeah for you know it's reasonable to
assume that strong strong consistency is

1066
00:26:12,060 --> 00:26:12,070
assume that strong strong consistency is
 

1067
00:26:12,070 --> 00:26:18,440
assume that strong strong consistency is
the same as serializable okay so this is

1068
00:26:18,440 --> 00:26:18,450
the same as serializable okay so this is
 

1069
00:26:18,450 --> 00:26:21,390
the same as serializable okay so this is
not linearizable and the you know the

1070
00:26:21,390 --> 00:26:21,400
not linearizable and the you know the
 

1071
00:26:21,400 --> 00:26:26,340
not linearizable and the you know the
the lesson is weeds are not allowed to

1072
00:26:26,340 --> 00:26:26,350
the lesson is weeds are not allowed to
 

1073
00:26:26,350 --> 00:26:29,820
the lesson is weeds are not allowed to
return stale data only only fresh data

1074
00:26:29,820 --> 00:26:29,830
return stale data only only fresh data
 

1075
00:26:29,830 --> 00:26:33,090
return stale data only only fresh data
or you can only return the results of

1076
00:26:33,090 --> 00:26:33,100
or you can only return the results of
 

1077
00:26:33,100 --> 00:26:44,690
or you can only return the results of
the most recently completed right

1078
00:26:44,690 --> 00:26:44,700

 

1079
00:26:44,700 --> 00:26:51,600

okay I have a final final little example

1080
00:26:51,600 --> 00:26:51,610
okay I have a final final little example
 

1081
00:26:51,610 --> 00:26:54,650
okay I have a final final little example
so we have two clients one of them

1082
00:26:54,650 --> 00:26:54,660
so we have two clients one of them
 

1083
00:26:54,660 --> 00:26:58,050
so we have two clients one of them
submits a write to X with value three

1084
00:26:58,050 --> 00:26:58,060
submits a write to X with value three
 

1085
00:26:58,060 --> 00:27:04,440
submits a write to X with value three
and then write two acts with value 4 and

1086
00:27:04,440 --> 00:27:04,450
and then write two acts with value 4 and
 

1087
00:27:04,450 --> 00:27:07,920
and then write two acts with value 4 and
we have another client and you know at

1088
00:27:07,920 --> 00:27:07,930
we have another client and you know at
 

1089
00:27:07,930 --> 00:27:10,620
we have another client and you know at
this point in time the client issues a

1090
00:27:10,620 --> 00:27:10,630
this point in time the client issues a
 

1091
00:27:10,630 --> 00:27:15,540
this point in time the client issues a
read of X but and this is a question you

1092
00:27:15,540 --> 00:27:15,550
read of X but and this is a question you
 

1093
00:27:15,550 --> 00:27:18,510
read of X but and this is a question you
asked the the client doesn't get a

1094
00:27:18,510 --> 00:27:18,520
asked the the client doesn't get a
 

1095
00:27:18,520 --> 00:27:21,900
asked the the client doesn't get a
response right you know who knows like

1096
00:27:21,900 --> 00:27:21,910
response right you know who knows like
 

1097
00:27:21,910 --> 00:27:23,670
response right you know who knows like
it in the sort of actual implementation

1098
00:27:23,670 --> 00:27:23,680
it in the sort of actual implementation
 

1099
00:27:23,680 --> 00:27:25,410
it in the sort of actual implementation
may be the leader crashed at some point

1100
00:27:25,410 --> 00:27:25,420
may be the leader crashed at some point
 

1101
00:27:25,420 --> 00:27:27,780
may be the leader crashed at some point
maybe the his client to sent in the read

1102
00:27:27,780 --> 00:27:27,790
maybe the his client to sent in the read
 

1103
00:27:27,790 --> 00:27:29,880
maybe the his client to sent in the read
request so the leader maybe didn't get

1104
00:27:29,880 --> 00:27:29,890
request so the leader maybe didn't get
 

1105
00:27:29,890 --> 00:27:31,830
request so the leader maybe didn't get
it because the request was dropped or

1106
00:27:31,830 --> 00:27:31,840
it because the request was dropped or
 

1107
00:27:31,840 --> 00:27:34,530
it because the request was dropped or
maybe the leader got the request and

1108
00:27:34,530 --> 00:27:34,540
maybe the leader got the request and
 

1109
00:27:34,540 --> 00:27:36,690
maybe the leader got the request and
executed it but the response the network

1110
00:27:36,690 --> 00:27:36,700
executed it but the response the network
 

1111
00:27:36,700 --> 00:27:38,880
executed it but the response the network
dropped the response or maybe the leader

1112
00:27:38,880 --> 00:27:38,890
dropped the response or maybe the leader
 

1113
00:27:38,890 --> 00:27:40,860
dropped the response or maybe the leader
got it and started to process up and

1114
00:27:40,860 --> 00:27:40,870
got it and started to process up and
 

1115
00:27:40,870 --> 00:27:42,690
got it and started to process up and
then crash before finished processing

1116
00:27:42,690 --> 00:27:42,700
then crash before finished processing
 

1117
00:27:42,700 --> 00:27:44,670
then crash before finished processing
and or maybe did process it and crash

1118
00:27:44,670 --> 00:27:44,680
and or maybe did process it and crash
 

1119
00:27:44,680 --> 00:27:45,930
and or maybe did process it and crash
before saying the response who knows

1120
00:27:45,930 --> 00:27:45,940
before saying the response who knows
 

1121
00:27:45,940 --> 00:27:48,150
before saying the response who knows
when the clients point of view like sent

1122
00:27:48,150 --> 00:27:48,160
when the clients point of view like sent
 

1123
00:27:48,160 --> 00:27:50,130
when the clients point of view like sent
a request and never got a response so in

1124
00:27:50,130 --> 00:27:50,140
a request and never got a response so in
 

1125
00:27:50,140 --> 00:27:52,290
a request and never got a response so in
the interior machinery of the client for

1126
00:27:52,290 --> 00:27:52,300
the interior machinery of the client for
 

1127
00:27:52,300 --> 00:27:53,640
the interior machinery of the client for
most of the systems we're talking about

1128
00:27:53,640 --> 00:27:53,650
most of the systems we're talking about
 

1129
00:27:53,650 --> 00:27:55,020
most of the systems we're talking about
the client is going to resend the

1130
00:27:55,020 --> 00:27:55,030
the client is going to resend the
 

1131
00:27:55,030 --> 00:27:57,690
the client is going to resend the
request maybe do a different leader

1132
00:27:57,690 --> 00:27:57,700
request maybe do a different leader
 

1133
00:27:57,700 --> 00:27:59,790
request maybe do a different leader
maybe the same leader who knows what so

1134
00:27:59,790 --> 00:27:59,800
maybe the same leader who knows what so
 

1135
00:27:59,800 --> 00:28:01,940
maybe the same leader who knows what so
it sent the first question quest here

1136
00:28:01,940 --> 00:28:01,950
it sent the first question quest here
 

1137
00:28:01,950 --> 00:28:05,460
it sent the first question quest here
and maybe it sends the second request at

1138
00:28:05,460 --> 00:28:05,470
and maybe it sends the second request at
 

1139
00:28:05,470 --> 00:28:07,140
and maybe it sends the second request at
this point in time it times out you know

1140
00:28:07,140 --> 00:28:07,150
this point in time it times out you know
 

1141
00:28:07,150 --> 00:28:10,440
this point in time it times out you know
no response sends the second request at

1142
00:28:10,440 --> 00:28:10,450
no response sends the second request at
 

1143
00:28:10,450 --> 00:28:12,750
no response sends the second request at
this point and then finally gets a

1144
00:28:12,750 --> 00:28:12,760
this point and then finally gets a
 

1145
00:28:12,760 --> 00:28:19,380
this point and then finally gets a
response it turns out that and you're

1146
00:28:19,380 --> 00:28:19,390
response it turns out that and you're
 

1147
00:28:19,390 --> 00:28:22,310
response it turns out that and you're
going to implement this in lab 3 that a

1148
00:28:22,310 --> 00:28:22,320
going to implement this in lab 3 that a
 

1149
00:28:22,320 --> 00:28:26,820
going to implement this in lab 3 that a
reasonable way of servers dealing with

1150
00:28:26,820 --> 00:28:26,830
reasonable way of servers dealing with
 

1151
00:28:26,830 --> 00:28:28,350
reasonable way of servers dealing with
repeated requests is for their servers

1152
00:28:28,350 --> 00:28:28,360
repeated requests is for their servers
 

1153
00:28:28,360 --> 00:28:31,530
repeated requests is for their servers
to keep tables sort of indexed by some

1154
00:28:31,530 --> 00:28:31,540
to keep tables sort of indexed by some
 

1155
00:28:31,540 --> 00:28:32,910
to keep tables sort of indexed by some
kind of unique request number or

1156
00:28:32,910 --> 00:28:32,920
kind of unique request number or
 

1157
00:28:32,920 --> 00:28:35,070
kind of unique request number or
something from the clients in which the

1158
00:28:35,070 --> 00:28:35,080
something from the clients in which the
 

1159
00:28:35,080 --> 00:28:36,390
something from the clients in which the
servers remember oh I already saw that

1160
00:28:36,390 --> 00:28:36,400
servers remember oh I already saw that
 

1161
00:28:36,400 --> 00:28:38,880
servers remember oh I already saw that
request and executed it and this was the

1162
00:28:38,880 --> 00:28:38,890
request and executed it and this was the
 

1163
00:28:38,890 --> 00:28:41,100
request and executed it and this was the
response that I sent back because you

1164
00:28:41,100 --> 00:28:41,110
response that I sent back because you
 

1165
00:28:41,110 --> 00:28:42,680
response that I sent back because you
don't want to execute a request twice

1166
00:28:42,680 --> 00:28:42,690
don't want to execute a request twice
 

1167
00:28:42,690 --> 00:28:45,390
don't want to execute a request twice
you know if it's a for example if it's a

1168
00:28:45,390 --> 00:28:45,400
you know if it's a for example if it's a
 

1169
00:28:45,400 --> 00:28:47,400
you know if it's a for example if it's a
write request you don't want to execute

1170
00:28:47,400 --> 00:28:47,410
write request you don't want to execute
 

1171
00:28:47,410 --> 00:28:49,290
write request you don't want to execute
requests right so the server's have to

1172
00:28:49,290 --> 00:28:49,300
requests right so the server's have to
 

1173
00:28:49,300 --> 00:28:50,990
requests right so the server's have to
be able to filter out duplicate requests

1174
00:28:50,990 --> 00:28:51,000
be able to filter out duplicate requests
 

1175
00:28:51,000 --> 00:28:53,940
be able to filter out duplicate requests
and they have to be able to return the

1176
00:28:53,940 --> 00:28:53,950
and they have to be able to return the
 

1177
00:28:53,950 --> 00:28:56,010
and they have to be able to return the
reply to repeat the reply that the

1178
00:28:56,010 --> 00:28:56,020
reply to repeat the reply that the
 

1179
00:28:56,020 --> 00:28:57,120
reply to repeat the reply that the
originally

1180
00:28:57,120 --> 00:28:57,130
originally
 

1181
00:28:57,130 --> 00:28:59,039
originally
sent to that request which perhaps has

1182
00:28:59,039 --> 00:28:59,049
sent to that request which perhaps has
 

1183
00:28:59,049 --> 00:29:00,720
sent to that request which perhaps has
dropped by the network so that servers

1184
00:29:00,720 --> 00:29:00,730
dropped by the network so that servers
 

1185
00:29:00,730 --> 00:29:04,549
dropped by the network so that servers
remember the original pry and repeat it

1186
00:29:04,549 --> 00:29:04,559
remember the original pry and repeat it
 

1187
00:29:04,559 --> 00:29:07,860
remember the original pry and repeat it
in response to the resend and if you do

1188
00:29:07,860 --> 00:29:07,870
in response to the resend and if you do
 

1189
00:29:07,870 --> 00:29:12,570
in response to the resend and if you do
that which you will in lab 3 then if you

1190
00:29:12,570 --> 00:29:12,580
that which you will in lab 3 then if you
 

1191
00:29:12,580 --> 00:29:16,289
that which you will in lab 3 then if you
know since the server the leader could

1192
00:29:16,289 --> 00:29:16,299
know since the server the leader could
 

1193
00:29:16,299 --> 00:29:18,390
know since the server the leader could
have seen value 3 when it executed the

1194
00:29:18,390 --> 00:29:18,400
have seen value 3 when it executed the
 

1195
00:29:18,400 --> 00:29:20,789
have seen value 3 when it executed the
original read request from client to it

1196
00:29:20,789 --> 00:29:20,799
original read request from client to it
 

1197
00:29:20,799 --> 00:29:23,850
original read request from client to it
could return value 3 to the repeated

1198
00:29:23,850 --> 00:29:23,860
could return value 3 to the repeated
 

1199
00:29:23,860 --> 00:29:25,860
could return value 3 to the repeated
requests that was sent at this time and

1200
00:29:25,860 --> 00:29:25,870
requests that was sent at this time and
 

1201
00:29:25,870 --> 00:29:30,450
requests that was sent at this time and
completed at this time and so we have to

1202
00:29:30,450 --> 00:29:30,460
completed at this time and so we have to
 

1203
00:29:30,460 --> 00:29:33,440
completed at this time and so we have to
make a call on whether that is legal

1204
00:29:33,440 --> 00:29:33,450
make a call on whether that is legal
 

1205
00:29:33,450 --> 00:29:38,010
make a call on whether that is legal
right you could argue that oh gosh you

1206
00:29:38,010 --> 00:29:38,020
right you could argue that oh gosh you
 

1207
00:29:38,020 --> 00:29:39,630
right you could argue that oh gosh you
know the client we sent the request here

1208
00:29:39,630 --> 00:29:39,640
know the client we sent the request here
 

1209
00:29:39,640 --> 00:29:41,159
know the client we sent the request here
this was after the right of X 2 4

1210
00:29:41,159 --> 00:29:41,169
this was after the right of X 2 4
 

1211
00:29:41,169 --> 00:29:42,419
this was after the right of X 2 4
completed so Jesus what you really

1212
00:29:42,419 --> 00:29:42,429
completed so Jesus what you really
 

1213
00:29:42,429 --> 00:29:44,669
completed so Jesus what you really
should return for at this point instead

1214
00:29:44,669 --> 00:29:44,679
should return for at this point instead
 

1215
00:29:44,679 --> 00:29:52,010
should return for at this point instead
of 3 and this is like a little bit a

1216
00:29:52,010 --> 00:29:52,020
of 3 and this is like a little bit a
 

1217
00:29:52,020 --> 00:29:55,140
of 3 and this is like a little bit a
question of it's like a little bit up

1218
00:29:55,140 --> 00:29:55,150
question of it's like a little bit up
 

1219
00:29:55,150 --> 00:29:58,500
question of it's like a little bit up
the designer but if what you view is

1220
00:29:58,500 --> 00:29:58,510
the designer but if what you view is
 

1221
00:29:58,510 --> 00:30:00,450
the designer but if what you view is
going on is that the retransmissions are

1222
00:30:00,450 --> 00:30:00,460
going on is that the retransmissions are
 

1223
00:30:00,460 --> 00:30:05,070
going on is that the retransmissions are
a low-level concern that's you know part

1224
00:30:05,070 --> 00:30:05,080
a low-level concern that's you know part
 

1225
00:30:05,080 --> 00:30:07,110
a low-level concern that's you know part
of the RPC machinery or hidden in some

1226
00:30:07,110 --> 00:30:07,120
of the RPC machinery or hidden in some
 

1227
00:30:07,120 --> 00:30:08,669
of the RPC machinery or hidden in some
library or something and that from the

1228
00:30:08,669 --> 00:30:08,679
library or something and that from the
 

1229
00:30:08,679 --> 00:30:10,740
library or something and that from the
client applications point of view all

1230
00:30:10,740 --> 00:30:10,750
client applications point of view all
 

1231
00:30:10,750 --> 00:30:12,720
client applications point of view all
that happened was that it's sent a

1232
00:30:12,720 --> 00:30:12,730
that happened was that it's sent a
 

1233
00:30:12,730 --> 00:30:15,029
that happened was that it's sent a
request at this time and got a response

1234
00:30:15,029 --> 00:30:15,039
request at this time and got a response
 

1235
00:30:15,039 --> 00:30:17,279
request at this time and got a response
at this time and that's all that

1236
00:30:17,279 --> 00:30:17,289
at this time and that's all that
 

1237
00:30:17,289 --> 00:30:18,510
at this time and that's all that
happened from the clients point of view

1238
00:30:18,510 --> 00:30:18,520
happened from the clients point of view
 

1239
00:30:18,520 --> 00:30:21,659
happened from the clients point of view
then a value of 3 is totally legal here

1240
00:30:21,659 --> 00:30:21,669
then a value of 3 is totally legal here
 

1241
00:30:21,669 --> 00:30:24,140
then a value of 3 is totally legal here
because this request took a long time

1242
00:30:24,140 --> 00:30:24,150
because this request took a long time
 

1243
00:30:24,150 --> 00:30:26,340
because this request took a long time
it's completely concurrent with the

1244
00:30:26,340 --> 00:30:26,350
it's completely concurrent with the
 

1245
00:30:26,350 --> 00:30:28,770
it's completely concurrent with the
right not ordered in real time with the

1246
00:30:28,770 --> 00:30:28,780
right not ordered in real time with the
 

1247
00:30:28,780 --> 00:30:31,890
right not ordered in real time with the
right and therefore either the three or

1248
00:30:31,890 --> 00:30:31,900
right and therefore either the three or
 

1249
00:30:31,900 --> 00:30:34,320
right and therefore either the three or
the four is valid you know as if the

1250
00:30:34,320 --> 00:30:34,330
the four is valid you know as if the
 

1251
00:30:34,330 --> 00:30:36,480
the four is valid you know as if the
read requests that really executed here

1252
00:30:36,480 --> 00:30:36,490
read requests that really executed here
 

1253
00:30:36,490 --> 00:30:39,299
read requests that really executed here
in real time or or here in real time so

1254
00:30:39,299 --> 00:30:39,309
in real time or or here in real time so
 

1255
00:30:39,309 --> 00:30:42,720
in real time or or here in real time so
the larger lesson is if you have client

1256
00:30:42,720 --> 00:30:42,730
the larger lesson is if you have client
 

1257
00:30:42,730 --> 00:30:47,310
the larger lesson is if you have client
retransmissions the from the application

1258
00:30:47,310 --> 00:30:47,320
retransmissions the from the application
 

1259
00:30:47,320 --> 00:30:48,659
retransmissions the from the application
point of view if you're defining

1260
00:30:48,659 --> 00:30:48,669
point of view if you're defining
 

1261
00:30:48,669 --> 00:30:50,460
point of view if you're defining
linearize ability from the applications

1262
00:30:50,460 --> 00:30:50,470
linearize ability from the applications
 

1263
00:30:50,470 --> 00:30:53,340
linearize ability from the applications
point of view - even with

1264
00:30:53,340 --> 00:30:53,350
point of view - even with
 

1265
00:30:53,350 --> 00:30:56,190
point of view - even with
retransmissions the real time extent of

1266
00:30:56,190 --> 00:30:56,200
retransmissions the real time extent of
 

1267
00:30:56,200 --> 00:30:59,370
retransmissions the real time extent of
the requests like this is from the very

1268
00:30:59,370 --> 00:30:59,380
the requests like this is from the very
 

1269
00:30:59,380 --> 00:31:01,230
the requests like this is from the very
first transmission of the requests to

1270
00:31:01,230 --> 00:31:01,240
first transmission of the requests to
 

1271
00:31:01,240 --> 00:31:03,330
first transmission of the requests to
the final time at which the application

1272
00:31:03,330 --> 00:31:03,340
the final time at which the application
 

1273
00:31:03,340 --> 00:31:05,700
the final time at which the application
actually got the response maybe after

1274
00:31:05,700 --> 00:31:05,710
actually got the response maybe after
 

1275
00:31:05,710 --> 00:31:24,780
actually got the response maybe after
many reasons yes

1276
00:31:24,780 --> 00:31:24,790

 

1277
00:31:24,790 --> 00:31:27,580

you might rather you got fresh data than

1278
00:31:27,580 --> 00:31:27,590
you might rather you got fresh data than
 

1279
00:31:27,590 --> 00:31:30,550
you might rather you got fresh data than
stale data you know if I'm you know

1280
00:31:30,550 --> 00:31:30,560
stale data you know if I'm you know
 

1281
00:31:30,560 --> 00:31:32,350
stale data you know if I'm you know
supposing the request is what time it

1282
00:31:32,350 --> 00:31:32,360
supposing the request is what time it
 

1283
00:31:32,360 --> 00:31:34,510
supposing the request is what time it
what time is it that's a time server I

1284
00:31:34,510 --> 00:31:34,520
what time is it that's a time server I
 

1285
00:31:34,520 --> 00:31:35,980
what time is it that's a time server I
sent a request saying Oh what time is it

1286
00:31:35,980 --> 00:31:35,990
sent a request saying Oh what time is it
 

1287
00:31:35,990 --> 00:31:38,560
sent a request saying Oh what time is it
and it sends me a response you know yeah

1288
00:31:38,560 --> 00:31:38,570
and it sends me a response you know yeah
 

1289
00:31:38,570 --> 00:31:40,390
and it sends me a response you know yeah
if I send a request now and I don't get

1290
00:31:40,390 --> 00:31:40,400
if I send a request now and I don't get
 

1291
00:31:40,400 --> 00:31:42,970
if I send a request now and I don't get
the response until 2 minutes from now

1292
00:31:42,970 --> 00:31:42,980
the response until 2 minutes from now
 

1293
00:31:42,980 --> 00:31:46,540
the response until 2 minutes from now
dude some Network issue it may be that

1294
00:31:46,540 --> 00:31:46,550
dude some Network issue it may be that
 

1295
00:31:46,550 --> 00:31:48,910
dude some Network issue it may be that
the application would like prefer to see

1296
00:31:48,910 --> 00:31:48,920
the application would like prefer to see
 

1297
00:31:48,920 --> 00:31:50,830
the application would like prefer to see
we're gonna get the response it would

1298
00:31:50,830 --> 00:31:50,840
we're gonna get the response it would
 

1299
00:31:50,840 --> 00:31:53,500
we're gonna get the response it would
prefer to see a time that was close to

1300
00:31:53,500 --> 00:31:53,510
prefer to see a time that was close to
 

1301
00:31:53,510 --> 00:31:54,580
prefer to see a time that was close to
the time at which had actually got the

1302
00:31:54,580 --> 00:31:54,590
the time at which had actually got the
 

1303
00:31:54,590 --> 00:31:56,740
the time at which had actually got the
response rather than a time deep in the

1304
00:31:56,740 --> 00:31:56,750
response rather than a time deep in the
 

1305
00:31:56,750 --> 00:31:58,180
response rather than a time deep in the
past when it originally sent the request

1306
00:31:58,180 --> 00:31:58,190
past when it originally sent the request
 

1307
00:31:58,190 --> 00:32:02,710
past when it originally sent the request
now the fact is that if you you know if

1308
00:32:02,710 --> 00:32:02,720
now the fact is that if you you know if
 

1309
00:32:02,720 --> 00:32:03,970
now the fact is that if you you know if
you're using a system like this you have

1310
00:32:03,970 --> 00:32:03,980
you're using a system like this you have
 

1311
00:32:03,980 --> 00:32:05,290
you're using a system like this you have
to write applications that are tolerant

1312
00:32:05,290 --> 00:32:05,300
to write applications that are tolerant
 

1313
00:32:05,300 --> 00:32:09,460
to write applications that are tolerant
of these rules you're using a

1314
00:32:09,460 --> 00:32:09,470
of these rules you're using a
 

1315
00:32:09,470 --> 00:32:11,230
of these rules you're using a
linearizable system like these are the

1316
00:32:11,230 --> 00:32:11,240
linearizable system like these are the
 

1317
00:32:11,240 --> 00:32:13,720
linearizable system like these are the
rules and so you must write you know

1318
00:32:13,720 --> 00:32:13,730
rules and so you must write you know
 

1319
00:32:13,730 --> 00:32:15,870
rules and so you must write you know
correct applications must be tolerant of

1320
00:32:15,870 --> 00:32:15,880
correct applications must be tolerant of
 

1321
00:32:15,880 --> 00:32:17,890
correct applications must be tolerant of
you know if they send a request and they

1322
00:32:17,890 --> 00:32:17,900
you know if they send a request and they
 

1323
00:32:17,900 --> 00:32:19,330
you know if they send a request and they
get a response a while later they just

1324
00:32:19,330 --> 00:32:19,340
get a response a while later they just
 

1325
00:32:19,340 --> 00:32:22,330
get a response a while later they just
you know you can't are not allowed to

1326
00:32:22,330 --> 00:32:22,340
you know you can't are not allowed to
 

1327
00:32:22,340 --> 00:32:25,180
you know you can't are not allowed to
write the application as if oh gosh if I

1328
00:32:25,180 --> 00:32:25,190
write the application as if oh gosh if I
 

1329
00:32:25,190 --> 00:32:27,280
write the application as if oh gosh if I
get a response that means that the value

1330
00:32:27,280 --> 00:32:27,290
get a response that means that the value
 

1331
00:32:27,290 --> 00:32:30,070
get a response that means that the value
at the time I got the response was equal

1332
00:32:30,070 --> 00:32:30,080
at the time I got the response was equal
 

1333
00:32:30,080 --> 00:32:32,230
at the time I got the response was equal
to 3 that is not OK for applications to

1334
00:32:32,230 --> 00:32:32,240
to 3 that is not OK for applications to
 

1335
00:32:32,240 --> 00:32:34,270
to 3 that is not OK for applications to
think you know what that I have that

1336
00:32:34,270 --> 00:32:34,280
think you know what that I have that
 

1337
00:32:34,280 --> 00:32:35,370
think you know what that I have that
plays out for a given application

1338
00:32:35,370 --> 00:32:35,380
plays out for a given application
 

1339
00:32:35,380 --> 00:32:40,590
plays out for a given application
depends on what the application is doing

1340
00:32:40,590 --> 00:32:40,600

 

1341
00:32:40,600 --> 00:32:42,550

the reason I bring this up is because

1342
00:32:42,550 --> 00:32:42,560
the reason I bring this up is because
 

1343
00:32:42,560 --> 00:32:45,520
the reason I bring this up is because
it's a common question in 6 6 8 to 4 you

1344
00:32:45,520 --> 00:32:45,530
it's a common question in 6 6 8 to 4 you
 

1345
00:32:45,530 --> 00:32:47,770
it's a common question in 6 6 8 to 4 you
guys will implement the machinery by

1346
00:32:47,770 --> 00:32:47,780
guys will implement the machinery by
 

1347
00:32:47,780 --> 00:32:51,070
guys will implement the machinery by
which servers detect duplicates and

1348
00:32:51,070 --> 00:32:51,080
which servers detect duplicates and
 

1349
00:32:51,080 --> 00:32:56,170
which servers detect duplicates and
resend the previous answer that the

1350
00:32:56,170 --> 00:32:56,180
resend the previous answer that the
 

1351
00:32:56,180 --> 00:32:57,490
resend the previous answer that the
server originally sent and the question

1352
00:32:57,490 --> 00:32:57,500
server originally sent and the question
 

1353
00:32:57,500 --> 00:33:00,790
server originally sent and the question
will come up is it ok if you originally

1354
00:33:00,790 --> 00:33:00,800
will come up is it ok if you originally
 

1355
00:33:00,800 --> 00:33:02,800
will come up is it ok if you originally
saw the request here to return at this

1356
00:33:02,800 --> 00:33:02,810
saw the request here to return at this
 

1357
00:33:02,810 --> 00:33:05,440
saw the request here to return at this
point in time the response that you

1358
00:33:05,440 --> 00:33:05,450
point in time the response that you
 

1359
00:33:05,450 --> 00:33:08,050
point in time the response that you
would have sent back here if the network

1360
00:33:08,050 --> 00:33:08,060
would have sent back here if the network
 

1361
00:33:08,060 --> 00:33:11,710
would have sent back here if the network
hadn't dropped it and it's it's handy to

1362
00:33:11,710 --> 00:33:11,720
hadn't dropped it and it's it's handy to
 

1363
00:33:11,720 --> 00:33:13,900
hadn't dropped it and it's it's handy to
have a kind of way of reasoning I mean

1364
00:33:13,900 --> 00:33:13,910
have a kind of way of reasoning I mean
 

1365
00:33:13,910 --> 00:33:15,010
have a kind of way of reasoning I mean
one reason to have definitions like

1366
00:33:15,010 --> 00:33:15,020
one reason to have definitions like
 

1367
00:33:15,020 --> 00:33:16,390
one reason to have definitions like
linearize abilities to be able to reason

1368
00:33:16,390 --> 00:33:16,400
linearize abilities to be able to reason
 

1369
00:33:16,400 --> 00:33:18,280
linearize abilities to be able to reason
about questions like that right i'm

1370
00:33:18,280 --> 00:33:18,290
about questions like that right i'm
 

1371
00:33:18,290 --> 00:33:21,910
about questions like that right i'm
using using this scheme we can say well

1372
00:33:21,910 --> 00:33:21,920
using using this scheme we can say well
 

1373
00:33:21,920 --> 00:33:26,200
using using this scheme we can say well
it actually is okay by those rules

1374
00:33:26,200 --> 00:33:26,210

 

1375
00:33:26,210 --> 00:33:28,070

all right that's all i want to say about

1376
00:33:28,070 --> 00:33:28,080
all right that's all i want to say about
 

1377
00:33:28,080 --> 00:33:32,000
all right that's all i want to say about
linearize ability of any any lingering

1378
00:33:32,000 --> 00:33:32,010
linearize ability of any any lingering
 

1379
00:33:32,010 --> 00:33:45,220
linearize ability of any any lingering
questions yeah

1380
00:33:45,220 --> 00:33:45,230

 

1381
00:33:45,230 --> 00:33:49,029

well you know maybe I'm taking liberties

1382
00:33:49,029 --> 00:33:49,039
well you know maybe I'm taking liberties
 

1383
00:33:49,039 --> 00:33:55,450
well you know maybe I'm taking liberties
here but what's going on is that in real

1384
00:33:55,450 --> 00:33:55,460
here but what's going on is that in real
 

1385
00:33:55,460 --> 00:33:57,610
here but what's going on is that in real
time we have a read of - and a read of

1386
00:33:57,610 --> 00:33:57,620
time we have a read of - and a read of
 

1387
00:33:57,620 --> 00:33:59,889
time we have a read of - and a read of
one and the read of one really came

1388
00:33:59,889 --> 00:33:59,899
one and the read of one really came
 

1389
00:33:59,899 --> 00:34:01,720
one and the read of one really came
after in real time the read of two and

1390
00:34:01,720 --> 00:34:01,730
after in real time the read of two and
 

1391
00:34:01,730 --> 00:34:04,509
after in real time the read of two and
so must come must be in this order in

1392
00:34:04,509 --> 00:34:04,519
so must come must be in this order in
 

1393
00:34:04,519 --> 00:34:07,570
so must come must be in this order in
the final order that means there must

1394
00:34:07,570 --> 00:34:07,580
the final order that means there must
 

1395
00:34:07,580 --> 00:34:11,440
the final order that means there must
have been a right of - somewhere in here

1396
00:34:11,440 --> 00:34:11,450
have been a right of - somewhere in here
 

1397
00:34:11,450 --> 00:34:13,119
have been a right of - somewhere in here
it's our right with value one somewhere

1398
00:34:13,119 --> 00:34:13,129
it's our right with value one somewhere
 

1399
00:34:13,129 --> 00:34:15,760
it's our right with value one somewhere
in here that is after the read of - in

1400
00:34:15,760 --> 00:34:15,770
in here that is after the read of - in
 

1401
00:34:15,770 --> 00:34:17,770
in here that is after the read of - in
the final order right after the read of

1402
00:34:17,770 --> 00:34:17,780
the final order right after the read of
 

1403
00:34:17,780 --> 00:34:20,440
the final order right after the read of
- and before the read of one in that

1404
00:34:20,440 --> 00:34:20,450
- and before the read of one in that
 

1405
00:34:20,450 --> 00:34:22,030
- and before the read of one in that
order there must be a right with value

1406
00:34:22,030 --> 00:34:22,040
order there must be a right with value
 

1407
00:34:22,040 --> 00:34:23,859
order there must be a right with value
one there's only one right with a value

1408
00:34:23,859 --> 00:34:23,869
one there's only one right with a value
 

1409
00:34:23,869 --> 00:34:25,329
one there's only one right with a value
unavailable you know if there were more

1410
00:34:25,329 --> 00:34:25,339
unavailable you know if there were more
 

1411
00:34:25,339 --> 00:34:27,069
unavailable you know if there were more
than one we maybe could play games but

1412
00:34:27,069 --> 00:34:27,079
than one we maybe could play games but
 

1413
00:34:27,079 --> 00:34:29,290
than one we maybe could play games but
there's only one available so this right

1414
00:34:29,290 --> 00:34:29,300
there's only one available so this right
 

1415
00:34:29,300 --> 00:34:31,780
there's only one available so this right
must slip in here in the final order or

1416
00:34:31,780 --> 00:34:31,790
must slip in here in the final order or
 

1417
00:34:31,790 --> 00:34:38,760
must slip in here in the final order or
therefore I felt able to draw this arrow

1418
00:34:38,760 --> 00:34:38,770
therefore I felt able to draw this arrow
 

1419
00:34:38,770 --> 00:34:42,129
therefore I felt able to draw this arrow
and these arrows just capture the sort

1420
00:34:42,129 --> 00:34:42,139
and these arrows just capture the sort
 

1421
00:34:42,139 --> 00:34:44,169
and these arrows just capture the sort
of one by one implication of the rules

1422
00:34:44,169 --> 00:34:44,179
of one by one implication of the rules
 

1423
00:34:44,179 --> 00:35:02,480
of one by one implication of the rules
on what the order must look like yeah

1424
00:35:02,480 --> 00:35:02,490

 

1425
00:35:02,490 --> 00:35:06,810

all right yeah I mean any hour or X so

1426
00:35:06,810 --> 00:35:06,820
all right yeah I mean any hour or X so
 

1427
00:35:06,820 --> 00:35:16,550
all right yeah I mean any hour or X so
which sorry which which yeah his own rx1

1428
00:35:16,550 --> 00:35:16,560
which sorry which which yeah his own rx1
 

1429
00:35:16,560 --> 00:35:19,950
which sorry which which yeah his own rx1
he sees it before his own rx1 okay so

1430
00:35:19,950 --> 00:35:19,960
he sees it before his own rx1 okay so
 

1431
00:35:19,960 --> 00:35:32,780
he sees it before his own rx1 okay so
the via yep well we're not we're not

1432
00:35:32,780 --> 00:35:32,790
the via yep well we're not we're not
 

1433
00:35:32,790 --> 00:35:35,880
the via yep well we're not we're not
we're not really able to say which of

1434
00:35:35,880 --> 00:35:35,890
we're not really able to say which of
 

1435
00:35:35,890 --> 00:35:39,570
we're not really able to say which of
these two wheats came first so we can't

1436
00:35:39,570 --> 00:35:39,580
these two wheats came first so we can't
 

1437
00:35:39,580 --> 00:35:41,460
these two wheats came first so we can't
quite for all this error if we mean this

1438
00:35:41,460 --> 00:35:41,470
quite for all this error if we mean this
 

1439
00:35:41,470 --> 00:35:43,800
quite for all this error if we mean this
arrow to constrain the ultimate order

1440
00:35:43,800 --> 00:35:43,810
arrow to constrain the ultimate order
 

1441
00:35:43,810 --> 00:35:46,290
arrow to constrain the ultimate order
we're not you know the these two weeds

1442
00:35:46,290 --> 00:35:46,300
we're not you know the these two weeds
 

1443
00:35:46,300 --> 00:35:48,210
we're not you know the these two weeds
could come in either order so we're not

1444
00:35:48,210 --> 00:35:48,220
could come in either order so we're not
 

1445
00:35:48,220 --> 00:35:49,680
could come in either order so we're not
allowed to say this one came before that

1446
00:35:49,680 --> 00:35:49,690
allowed to say this one came before that
 

1447
00:35:49,690 --> 00:35:52,410
allowed to say this one came before that
one it could be there's a simpler cycle

1448
00:35:52,410 --> 00:35:52,420
one it could be there's a simpler cycle
 

1449
00:35:52,420 --> 00:35:55,290
one it could be there's a simpler cycle
actually then I've drawn so I mean it

1450
00:35:55,290 --> 00:35:55,300
actually then I've drawn so I mean it
 

1451
00:35:55,300 --> 00:35:58,350
actually then I've drawn so I mean it
may be because certainly the that the

1452
00:35:58,350 --> 00:35:58,360
may be because certainly the that the
 

1453
00:35:58,360 --> 00:36:02,550
may be because certainly the that the
damage is in these four items I agree

1454
00:36:02,550 --> 00:36:02,560
damage is in these four items I agree
 

1455
00:36:02,560 --> 00:36:05,370
damage is in these four items I agree
with that these two these four items

1456
00:36:05,370 --> 00:36:05,380
with that these two these four items
 

1457
00:36:05,380 --> 00:36:08,850
with that these two these four items
kind of are the main evidence that

1458
00:36:08,850 --> 00:36:08,860
kind of are the main evidence that
 

1459
00:36:08,860 --> 00:36:09,690
kind of are the main evidence that
something is wrong

1460
00:36:09,690 --> 00:36:09,700
something is wrong
 

1461
00:36:09,700 --> 00:36:11,850
something is wrong
now whether a cycle I'm not sure whether

1462
00:36:11,850 --> 00:36:11,860
now whether a cycle I'm not sure whether
 

1463
00:36:11,860 --> 00:36:13,230
now whether a cycle I'm not sure whether
there's a cycle that just involves that

1464
00:36:13,230 --> 00:36:13,240
there's a cycle that just involves that
 

1465
00:36:13,240 --> 00:36:16,920
there's a cycle that just involves that
there could be okay this is worth

1466
00:36:16,920 --> 00:36:16,930
there could be okay this is worth
 

1467
00:36:16,930 --> 00:36:19,530
there could be okay this is worth
thinking about cuz you know if I can't

1468
00:36:19,530 --> 00:36:19,540
thinking about cuz you know if I can't
 

1469
00:36:19,540 --> 00:36:20,430
thinking about cuz you know if I can't
think of anything better or I'll

1470
00:36:20,430 --> 00:36:20,440
think of anything better or I'll
 

1471
00:36:20,440 --> 00:36:21,450
think of anything better or I'll
certainly ask you a question about

1472
00:36:21,450 --> 00:36:21,460
certainly ask you a question about
 

1473
00:36:21,460 --> 00:36:31,000
certainly ask you a question about
linearizable histories on midterm

1474
00:36:31,000 --> 00:36:31,010

 

1475
00:36:31,010 --> 00:36:36,730

okay so today's paper today's paper

1476
00:36:36,730 --> 00:36:36,740
okay so today's paper today's paper
 

1477
00:36:36,740 --> 00:36:43,660
okay so today's paper today's paper
zookeeper and I mean part of the reason

1478
00:36:43,660 --> 00:36:43,670
zookeeper and I mean part of the reason
 

1479
00:36:43,670 --> 00:36:45,099
zookeeper and I mean part of the reason
we're even zookeeper paper is that it's

1480
00:36:45,099 --> 00:36:45,109
we're even zookeeper paper is that it's
 

1481
00:36:45,109 --> 00:36:46,780
we're even zookeeper paper is that it's
a successful real world system it's an

1482
00:36:46,780 --> 00:36:46,790
a successful real world system it's an
 

1483
00:36:46,790 --> 00:36:50,650
a successful real world system it's an
open source you know service that

1484
00:36:50,650 --> 00:36:50,660
open source you know service that
 

1485
00:36:50,660 --> 00:36:51,910
open source you know service that
actually a lot of people ron has been

1486
00:36:51,910 --> 00:36:51,920
actually a lot of people ron has been
 

1487
00:36:51,920 --> 00:36:53,500
actually a lot of people ron has been
incorporated into a lot of real world

1488
00:36:53,500 --> 00:36:53,510
incorporated into a lot of real world
 

1489
00:36:53,510 --> 00:36:55,450
incorporated into a lot of real world
software so there's a certain kind of

1490
00:36:55,450 --> 00:36:55,460
software so there's a certain kind of
 

1491
00:36:55,460 --> 00:36:59,770
software so there's a certain kind of
reality and success to it but you know

1492
00:36:59,770 --> 00:36:59,780
reality and success to it but you know
 

1493
00:36:59,780 --> 00:37:00,880
reality and success to it but you know
that makes attractive from the point of

1494
00:37:00,880 --> 00:37:00,890
that makes attractive from the point of
 

1495
00:37:00,890 --> 00:37:04,300
that makes attractive from the point of
view of kind of supporting the idea that

1496
00:37:04,300 --> 00:37:04,310
view of kind of supporting the idea that
 

1497
00:37:04,310 --> 00:37:05,650
view of kind of supporting the idea that
the zookeepers design might actually be

1498
00:37:05,650 --> 00:37:05,660
the zookeepers design might actually be
 

1499
00:37:05,660 --> 00:37:08,200
the zookeepers design might actually be
a reasonable design but the reason we're

1500
00:37:08,200 --> 00:37:08,210
a reasonable design but the reason we're
 

1501
00:37:08,210 --> 00:37:10,210
a reasonable design but the reason we're
interested in in it I'm interested in it

1502
00:37:10,210 --> 00:37:10,220
interested in in it I'm interested in it
 

1503
00:37:10,220 --> 00:37:12,400
interested in in it I'm interested in it
is for to somewhat more precise

1504
00:37:12,400 --> 00:37:12,410
is for to somewhat more precise
 

1505
00:37:12,410 --> 00:37:18,310
is for to somewhat more precise
technical points so why are we looking

1506
00:37:18,310 --> 00:37:18,320
technical points so why are we looking
 

1507
00:37:18,320 --> 00:37:23,080
technical points so why are we looking
at this paper so one of them is that in

1508
00:37:23,080 --> 00:37:23,090
at this paper so one of them is that in
 

1509
00:37:23,090 --> 00:37:25,510
at this paper so one of them is that in
contrast to raft like the raft you've

1510
00:37:25,510 --> 00:37:25,520
contrast to raft like the raft you've
 

1511
00:37:25,520 --> 00:37:27,340
contrast to raft like the raft you've
written and raft as that's defined it's

1512
00:37:27,340 --> 00:37:27,350
written and raft as that's defined it's
 

1513
00:37:27,350 --> 00:37:29,170
written and raft as that's defined it's
really a library you know you can use a

1514
00:37:29,170 --> 00:37:29,180
really a library you know you can use a
 

1515
00:37:29,180 --> 00:37:31,660
really a library you know you can use a
raft library as a part of some larger

1516
00:37:31,660 --> 00:37:31,670
raft library as a part of some larger
 

1517
00:37:31,670 --> 00:37:34,390
raft library as a part of some larger
replicated system but raft isn't like a

1518
00:37:34,390 --> 00:37:34,400
replicated system but raft isn't like a
 

1519
00:37:34,400 --> 00:37:36,430
replicated system but raft isn't like a
standalone service or something that you

1520
00:37:36,430 --> 00:37:36,440
standalone service or something that you
 

1521
00:37:36,440 --> 00:37:38,320
standalone service or something that you
can talk to it's you really have to

1522
00:37:38,320 --> 00:37:38,330
can talk to it's you really have to
 

1523
00:37:38,330 --> 00:37:40,420
can talk to it's you really have to
design your application to interact at

1524
00:37:40,420 --> 00:37:40,430
design your application to interact at
 

1525
00:37:40,430 --> 00:37:45,160
design your application to interact at
the raft library explicitly so you might

1526
00:37:45,160 --> 00:37:45,170
the raft library explicitly so you might
 

1527
00:37:45,170 --> 00:37:46,810
the raft library explicitly so you might
wonder it's an interesting question

1528
00:37:46,810 --> 00:37:46,820
wonder it's an interesting question
 

1529
00:37:46,820 --> 00:37:52,050
wonder it's an interesting question
whether some useful system sort of

1530
00:37:52,050 --> 00:37:52,060
whether some useful system sort of
 

1531
00:37:52,060 --> 00:37:54,520
whether some useful system sort of
standalone general-purpose system could

1532
00:37:54,520 --> 00:37:54,530
standalone general-purpose system could
 

1533
00:37:54,530 --> 00:37:56,590
standalone general-purpose system could
be defined that would be helpful for

1534
00:37:56,590 --> 00:37:56,600
be defined that would be helpful for
 

1535
00:37:56,600 --> 00:37:59,230
be defined that would be helpful for
people building separate distributed

1536
00:37:59,230 --> 00:37:59,240
people building separate distributed
 

1537
00:37:59,240 --> 00:38:00,910
people building separate distributed
systems like is there serve some service

1538
00:38:00,910 --> 00:38:00,920
systems like is there serve some service
 

1539
00:38:00,920 --> 00:38:02,770
systems like is there serve some service
that can bite off a significant portion

1540
00:38:02,770 --> 00:38:02,780
that can bite off a significant portion
 

1541
00:38:02,780 --> 00:38:04,510
that can bite off a significant portion
of why it's painful to build distributed

1542
00:38:04,510 --> 00:38:04,520
of why it's painful to build distributed
 

1543
00:38:04,520 --> 00:38:06,430
of why it's painful to build distributed
systems and sort of package it up in a

1544
00:38:06,430 --> 00:38:06,440
systems and sort of package it up in a
 

1545
00:38:06,440 --> 00:38:09,130
systems and sort of package it up in a
standalone service that you know anybody

1546
00:38:09,130 --> 00:38:09,140
standalone service that you know anybody
 

1547
00:38:09,140 --> 00:38:14,080
standalone service that you know anybody
can use so this is really the question

1548
00:38:14,080 --> 00:38:14,090
can use so this is really the question
 

1549
00:38:14,090 --> 00:38:16,720
can use so this is really the question
of what would an API look like for a

1550
00:38:16,720 --> 00:38:16,730
of what would an API look like for a
 

1551
00:38:16,730 --> 00:38:24,220
of what would an API look like for a
general purpose I'll call it I'm not

1552
00:38:24,220 --> 00:38:24,230
general purpose I'll call it I'm not
 

1553
00:38:24,230 --> 00:38:25,660
general purpose I'll call it I'm not
sure what the right name for things like

1554
00:38:25,660 --> 00:38:25,670
sure what the right name for things like
 

1555
00:38:25,670 --> 00:38:27,730
sure what the right name for things like
zookeeper is but you've got a general

1556
00:38:27,730 --> 00:38:27,740
zookeeper is but you've got a general
 

1557
00:38:27,740 --> 00:38:33,920
zookeeper is but you've got a general
purpose coordination service

1558
00:38:33,920 --> 00:38:33,930

 

1559
00:38:33,930 --> 00:38:37,470

and the other question the other

1560
00:38:37,470 --> 00:38:37,480
and the other question the other
 

1561
00:38:37,480 --> 00:38:41,750
and the other question the other
interesting aspect of zookeeper is that

1562
00:38:41,750 --> 00:38:41,760
interesting aspect of zookeeper is that
 

1563
00:38:41,760 --> 00:38:44,069
interesting aspect of zookeeper is that
when we build replicated systems and

1564
00:38:44,069 --> 00:38:44,079
when we build replicated systems and
 

1565
00:38:44,079 --> 00:38:45,450
when we build replicated systems and
zookeepers a replicated system because

1566
00:38:45,450 --> 00:38:45,460
zookeepers a replicated system because
 

1567
00:38:45,460 --> 00:38:47,250
zookeepers a replicated system because
among other things it's it's like a

1568
00:38:47,250 --> 00:38:47,260
among other things it's it's like a
 

1569
00:38:47,260 --> 00:38:48,620
among other things it's it's like a
fault-tolerant

1570
00:38:48,620 --> 00:38:48,630
fault-tolerant
 

1571
00:38:48,630 --> 00:38:51,599
fault-tolerant
general-purpose coordination service and

1572
00:38:51,599 --> 00:38:51,609
general-purpose coordination service and
 

1573
00:38:51,609 --> 00:38:53,490
general-purpose coordination service and
it gets fault tolerance like most

1574
00:38:53,490 --> 00:38:53,500
it gets fault tolerance like most
 

1575
00:38:53,500 --> 00:38:55,589
it gets fault tolerance like most
systems by replication that is there's a

1576
00:38:55,589 --> 00:38:55,599
systems by replication that is there's a
 

1577
00:38:55,599 --> 00:38:57,569
systems by replication that is there's a
bunch of you know maybe three or five or

1578
00:38:57,569 --> 00:38:57,579
bunch of you know maybe three or five or
 

1579
00:38:57,579 --> 00:38:58,770
bunch of you know maybe three or five or
seven or who knows what

1580
00:38:58,770 --> 00:38:58,780
seven or who knows what
 

1581
00:38:58,780 --> 00:39:03,029
seven or who knows what
zookeeper servers it takes money to buy

1582
00:39:03,029 --> 00:39:03,039
zookeeper servers it takes money to buy
 

1583
00:39:03,039 --> 00:39:05,039
zookeeper servers it takes money to buy
those servers right like a 7 server

1584
00:39:05,039 --> 00:39:05,049
those servers right like a 7 server
 

1585
00:39:05,049 --> 00:39:09,150
those servers right like a 7 server
zookeeper setup is 7 times expensive as

1586
00:39:09,150 --> 00:39:09,160
zookeeper setup is 7 times expensive as
 

1587
00:39:09,160 --> 00:39:13,500
zookeeper setup is 7 times expensive as
a sort of simple single server so it's

1588
00:39:13,500 --> 00:39:13,510
a sort of simple single server so it's
 

1589
00:39:13,510 --> 00:39:16,230
a sort of simple single server so it's
very tempting to ask if you buy 7

1590
00:39:16,230 --> 00:39:16,240
very tempting to ask if you buy 7
 

1591
00:39:16,240 --> 00:39:17,910
very tempting to ask if you buy 7
servers to run your replicated service

1592
00:39:17,910 --> 00:39:17,920
servers to run your replicated service
 

1593
00:39:17,920 --> 00:39:20,309
servers to run your replicated service
can you get 7 times the performance out

1594
00:39:20,309 --> 00:39:20,319
can you get 7 times the performance out
 

1595
00:39:20,319 --> 00:39:24,000
can you get 7 times the performance out
of your 7 servers right and you know how

1596
00:39:24,000 --> 00:39:24,010
of your 7 servers right and you know how
 

1597
00:39:24,010 --> 00:39:29,099
of your 7 servers right and you know how
could we possibly do that so the

1598
00:39:29,099 --> 00:39:29,109
could we possibly do that so the
 

1599
00:39:29,109 --> 00:39:31,890
could we possibly do that so the
question is you know we have n times as

1600
00:39:31,890 --> 00:39:31,900
question is you know we have n times as
 

1601
00:39:31,900 --> 00:39:35,520
question is you know we have n times as
many servers can that yield us n times

1602
00:39:35,520 --> 00:39:35,530
many servers can that yield us n times
 

1603
00:39:35,530 --> 00:39:42,180
many servers can that yield us n times
the performance so I'm gonna talk about

1604
00:39:42,180 --> 00:39:42,190
the performance so I'm gonna talk about
 

1605
00:39:42,190 --> 00:39:46,440
the performance so I'm gonna talk about
the second question first so from the

1606
00:39:46,440 --> 00:39:46,450
the second question first so from the
 

1607
00:39:46,450 --> 00:39:47,519
the second question first so from the
point of view this discussion about

1608
00:39:47,519 --> 00:39:47,529
point of view this discussion about
 

1609
00:39:47,529 --> 00:39:50,789
point of view this discussion about
performance I'm just going to view

1610
00:39:50,789 --> 00:39:50,799
performance I'm just going to view
 

1611
00:39:50,799 --> 00:39:53,130
performance I'm just going to view
zookeeper as just some service we don't

1612
00:39:53,130 --> 00:39:53,140
zookeeper as just some service we don't
 

1613
00:39:53,140 --> 00:39:54,599
zookeeper as just some service we don't
really care what the service is but

1614
00:39:54,599 --> 00:39:54,609
really care what the service is but
 

1615
00:39:54,609 --> 00:39:57,569
really care what the service is but
replicated with a raft like replication

1616
00:39:57,569 --> 00:39:57,579
replicated with a raft like replication
 

1617
00:39:57,579 --> 00:39:59,460
replicated with a raft like replication
system zookeeper actually runs on top of

1618
00:39:59,460 --> 00:39:59,470
system zookeeper actually runs on top of
 

1619
00:39:59,470 --> 00:40:03,059
system zookeeper actually runs on top of
this thing called Zab which for our

1620
00:40:03,059 --> 00:40:03,069
this thing called Zab which for our
 

1621
00:40:03,069 --> 00:40:06,310
this thing called Zab which for our
purposes

1622
00:40:06,310 --> 00:40:06,320

 

1623
00:40:06,320 --> 00:40:09,470

we'll just treat as being almost

1624
00:40:09,470 --> 00:40:09,480
we'll just treat as being almost
 

1625
00:40:09,480 --> 00:40:14,839
we'll just treat as being almost
identical to the raft and I'm just

1626
00:40:14,839 --> 00:40:14,849
identical to the raft and I'm just
 

1627
00:40:14,849 --> 00:40:15,980
identical to the raft and I'm just
worried about the performance of the

1628
00:40:15,980 --> 00:40:15,990
worried about the performance of the
 

1629
00:40:15,990 --> 00:40:17,630
worried about the performance of the
replication I'm not really worried about

1630
00:40:17,630 --> 00:40:17,640
replication I'm not really worried about
 

1631
00:40:17,640 --> 00:40:20,150
replication I'm not really worried about
what zookeepers specifically is up to so

1632
00:40:20,150 --> 00:40:20,160
what zookeepers specifically is up to so
 

1633
00:40:20,160 --> 00:40:22,130
what zookeepers specifically is up to so
the general picture is that you know we

1634
00:40:22,130 --> 00:40:22,140
the general picture is that you know we
 

1635
00:40:22,140 --> 00:40:24,230
the general picture is that you know we
have a bunch of clients maybe hundreds

1636
00:40:24,230 --> 00:40:24,240
have a bunch of clients maybe hundreds
 

1637
00:40:24,240 --> 00:40:27,830
have a bunch of clients maybe hundreds
maybe hundreds of clients and we have

1638
00:40:27,830 --> 00:40:27,840
maybe hundreds of clients and we have
 

1639
00:40:27,840 --> 00:40:35,390
maybe hundreds of clients and we have
just as in the lads we have a leader the

1640
00:40:35,390 --> 00:40:35,400
just as in the lads we have a leader the
 

1641
00:40:35,400 --> 00:40:37,730
just as in the lads we have a leader the
leader has a zookeeper layer that

1642
00:40:37,730 --> 00:40:37,740
leader has a zookeeper layer that
 

1643
00:40:37,740 --> 00:40:39,800
leader has a zookeeper layer that
clients talk to and then under the

1644
00:40:39,800 --> 00:40:39,810
clients talk to and then under the
 

1645
00:40:39,810 --> 00:40:42,500
clients talk to and then under the
zookeeper layer is the xab system that

1646
00:40:42,500 --> 00:40:42,510
zookeeper layer is the xab system that
 

1647
00:40:42,510 --> 00:40:44,720
zookeeper layer is the xab system that
manages replication then just like rafts

1648
00:40:44,720 --> 00:40:44,730
manages replication then just like rafts
 

1649
00:40:44,730 --> 00:40:47,180
manages replication then just like rafts
what was a a lot of what's that is doing

1650
00:40:47,180 --> 00:40:47,190
what was a a lot of what's that is doing
 

1651
00:40:47,190 --> 00:40:49,849
what was a a lot of what's that is doing
is maintaining a log that contains the

1652
00:40:49,849 --> 00:40:49,859
is maintaining a log that contains the
 

1653
00:40:49,859 --> 00:40:51,500
is maintaining a log that contains the
sequence of operations that clients have

1654
00:40:51,500 --> 00:40:51,510
sequence of operations that clients have
 

1655
00:40:51,510 --> 00:40:57,920
sequence of operations that clients have
sent in really very similar to raft may

1656
00:40:57,920 --> 00:40:57,930
sent in really very similar to raft may
 

1657
00:40:57,930 --> 00:41:01,490
sent in really very similar to raft may
have a bunch of these and each of them

1658
00:41:01,490 --> 00:41:01,500
have a bunch of these and each of them
 

1659
00:41:01,500 --> 00:41:10,359
have a bunch of these and each of them
has a log but it's a pending new request

1660
00:41:10,359 --> 00:41:10,369

 

1661
00:41:10,369 --> 00:41:15,400

that's a familiar set up so the

1662
00:41:15,400 --> 00:41:15,410
that's a familiar set up so the
 

1663
00:41:15,410 --> 00:41:18,109
that's a familiar set up so the
Clinton's in a request and the Zab layer

1664
00:41:18,109 --> 00:41:18,119
Clinton's in a request and the Zab layer
 

1665
00:41:18,119 --> 00:41:21,820
Clinton's in a request and the Zab layer
you know sends a copy of that request to

1666
00:41:21,820 --> 00:41:21,830
you know sends a copy of that request to
 

1667
00:41:21,830 --> 00:41:24,200
you know sends a copy of that request to
each of the replicas and the replicas

1668
00:41:24,200 --> 00:41:24,210
each of the replicas and the replicas
 

1669
00:41:24,210 --> 00:41:25,430
each of the replicas and the replicas
append this to their in-memory law I'd

1670
00:41:25,430 --> 00:41:25,440
append this to their in-memory law I'd
 

1671
00:41:25,440 --> 00:41:28,430
append this to their in-memory law I'd
probably persisted onto a disk so they

1672
00:41:28,430 --> 00:41:28,440
probably persisted onto a disk so they
 

1673
00:41:28,440 --> 00:41:29,510
probably persisted onto a disk so they
can get it back if they crash and

1674
00:41:29,510 --> 00:41:29,520
can get it back if they crash and
 

1675
00:41:29,520 --> 00:41:35,180
can get it back if they crash and
restart so the question is as we add

1676
00:41:35,180 --> 00:41:35,190
restart so the question is as we add
 

1677
00:41:35,190 --> 00:41:36,650
restart so the question is as we add
more servers you know we could have four

1678
00:41:36,650 --> 00:41:36,660
more servers you know we could have four
 

1679
00:41:36,660 --> 00:41:38,480
more servers you know we could have four
servers or five or seven or whatever

1680
00:41:38,480 --> 00:41:38,490
servers or five or seven or whatever
 

1681
00:41:38,490 --> 00:41:41,089
servers or five or seven or whatever
does the system get faster as we add

1682
00:41:41,089 --> 00:41:41,099
does the system get faster as we add
 

1683
00:41:41,099 --> 00:41:48,950
does the system get faster as we add
more more CPUs more horsepower to it do

1684
00:41:48,950 --> 00:41:48,960
more more CPUs more horsepower to it do
 

1685
00:41:48,960 --> 00:41:50,420
more more CPUs more horsepower to it do
you think your labs will get faster as

1686
00:41:50,420 --> 00:41:50,430
you think your labs will get faster as
 

1687
00:41:50,430 --> 00:41:53,810
you think your labs will get faster as
you have more replicas assuming they're

1688
00:41:53,810 --> 00:41:53,820
you have more replicas assuming they're
 

1689
00:41:53,820 --> 00:41:56,060
you have more replicas assuming they're
each replicas its own computer right so

1690
00:41:56,060 --> 00:41:56,070
each replicas its own computer right so
 

1691
00:41:56,070 --> 00:41:58,010
each replicas its own computer right so
that you really do get more CPU cycles

1692
00:41:58,010 --> 00:41:58,020
that you really do get more CPU cycles
 

1693
00:41:58,020 --> 00:42:09,430
that you really do get more CPU cycles
as you add more revenues

1694
00:42:09,430 --> 00:42:09,440

 

1695
00:42:09,440 --> 00:42:17,270

between all the

1696
00:42:17,270 --> 00:42:17,280

 

1697
00:42:17,280 --> 00:42:19,320

yeah yeah there's nothing about this

1698
00:42:19,320 --> 00:42:19,330
yeah yeah there's nothing about this
 

1699
00:42:19,330 --> 00:42:20,520
yeah yeah there's nothing about this
that makes it faster as you add more

1700
00:42:20,520 --> 00:42:20,530
that makes it faster as you add more
 

1701
00:42:20,530 --> 00:42:23,100
that makes it faster as you add more
servers right it's absolutely true like

1702
00:42:23,100 --> 00:42:23,110
servers right it's absolutely true like
 

1703
00:42:23,110 --> 00:42:25,770
servers right it's absolutely true like
as we have more servers you know the

1704
00:42:25,770 --> 00:42:25,780
as we have more servers you know the
 

1705
00:42:25,780 --> 00:42:27,090
as we have more servers you know the
leader is almost certainly a bottleneck

1706
00:42:27,090 --> 00:42:27,100
leader is almost certainly a bottleneck
 

1707
00:42:27,100 --> 00:42:28,320
leader is almost certainly a bottleneck
cuz the leader has to process every

1708
00:42:28,320 --> 00:42:28,330
cuz the leader has to process every
 

1709
00:42:28,330 --> 00:42:30,120
cuz the leader has to process every
request and it sends a copy of every

1710
00:42:30,120 --> 00:42:30,130
request and it sends a copy of every
 

1711
00:42:30,130 --> 00:42:31,620
request and it sends a copy of every
request to every other server as you add

1712
00:42:31,620 --> 00:42:31,630
request to every other server as you add
 

1713
00:42:31,630 --> 00:42:33,750
request to every other server as you add
more servers it just adds more work to

1714
00:42:33,750 --> 00:42:33,760
more servers it just adds more work to
 

1715
00:42:33,760 --> 00:42:36,210
more servers it just adds more work to
this bottleneck node right you're not

1716
00:42:36,210 --> 00:42:36,220
this bottleneck node right you're not
 

1717
00:42:36,220 --> 00:42:37,710
this bottleneck node right you're not
getting any benefit any performance

1718
00:42:37,710 --> 00:42:37,720
getting any benefit any performance
 

1719
00:42:37,720 --> 00:42:39,060
getting any benefit any performance
benefit out of the added servers because

1720
00:42:39,060 --> 00:42:39,070
benefit out of the added servers because
 

1721
00:42:39,070 --> 00:42:40,110
benefit out of the added servers because
they're not really doing anything

1722
00:42:40,110 --> 00:42:40,120
they're not really doing anything
 

1723
00:42:40,120 --> 00:42:42,900
they're not really doing anything
they're just all happily doing whatever

1724
00:42:42,900 --> 00:42:42,910
they're just all happily doing whatever
 

1725
00:42:42,910 --> 00:42:45,920
they're just all happily doing whatever
the leader tells them to do they're not

1726
00:42:45,920 --> 00:42:45,930
the leader tells them to do they're not
 

1727
00:42:45,930 --> 00:42:48,150
the leader tells them to do they're not
you know subtracting from the leaders

1728
00:42:48,150 --> 00:42:48,160
you know subtracting from the leaders
 

1729
00:42:48,160 --> 00:42:50,190
you know subtracting from the leaders
work and every single operation goes to

1730
00:42:50,190 --> 00:42:50,200
work and every single operation goes to
 

1731
00:42:50,200 --> 00:42:54,210
work and every single operation goes to
the leader so for here you know the

1732
00:42:54,210 --> 00:42:54,220
the leader so for here you know the
 

1733
00:42:54,220 --> 00:42:56,010
the leader so for here you know the
performance is you know inversely

1734
00:42:56,010 --> 00:42:56,020
performance is you know inversely
 

1735
00:42:56,020 --> 00:42:58,290
performance is you know inversely
proportional to the number of servers

1736
00:42:58,290 --> 00:42:58,300
proportional to the number of servers
 

1737
00:42:58,300 --> 00:42:59,580
proportional to the number of servers
that you add you add more servers this

1738
00:42:59,580 --> 00:42:59,590
that you add you add more servers this
 

1739
00:42:59,590 --> 00:43:02,340
that you add you add more servers this
almost certainly gets lower because the

1740
00:43:02,340 --> 00:43:02,350
almost certainly gets lower because the
 

1741
00:43:02,350 --> 00:43:04,770
almost certainly gets lower because the
leader just has more work so in this

1742
00:43:04,770 --> 00:43:04,780
leader just has more work so in this
 

1743
00:43:04,780 --> 00:43:06,780
leader just has more work so in this
system we have the problem that more

1744
00:43:06,780 --> 00:43:06,790
system we have the problem that more
 

1745
00:43:06,790 --> 00:43:15,360
system we have the problem that more
servers makes the system slower that's

1746
00:43:15,360 --> 00:43:15,370
servers makes the system slower that's
 

1747
00:43:15,370 --> 00:43:16,710
servers makes the system slower that's
too bad you know these servers cost a

1748
00:43:16,710 --> 00:43:16,720
too bad you know these servers cost a
 

1749
00:43:16,720 --> 00:43:18,360
too bad you know these servers cost a
couple thousand bucks each and you would

1750
00:43:18,360 --> 00:43:18,370
couple thousand bucks each and you would
 

1751
00:43:18,370 --> 00:43:20,310
couple thousand bucks each and you would
hope that you could use them to get

1752
00:43:20,310 --> 00:43:20,320
hope that you could use them to get
 

1753
00:43:20,320 --> 00:43:33,030
hope that you could use them to get
better performance yeah

1754
00:43:33,030 --> 00:43:33,040

 

1755
00:43:33,040 --> 00:43:35,700

okay so the question is what if the

1756
00:43:35,700 --> 00:43:35,710
okay so the question is what if the
 

1757
00:43:35,710 --> 00:43:38,070
okay so the question is what if the
requests may be from different clients

1758
00:43:38,070 --> 00:43:38,080
requests may be from different clients
 

1759
00:43:38,080 --> 00:43:39,600
requests may be from different clients
or successive requests and same client

1760
00:43:39,600 --> 00:43:39,610
or successive requests and same client
 

1761
00:43:39,610 --> 00:43:41,490
or successive requests and same client
or something what if the requests apply

1762
00:43:41,490 --> 00:43:41,500
or something what if the requests apply
 

1763
00:43:41,500 --> 00:43:43,440
or something what if the requests apply
two totally different parts of the state

1764
00:43:43,440 --> 00:43:43,450
two totally different parts of the state
 

1765
00:43:43,450 --> 00:43:45,330
two totally different parts of the state
so you know in a key value store maybe

1766
00:43:45,330 --> 00:43:45,340
so you know in a key value store maybe
 

1767
00:43:45,340 --> 00:43:46,950
so you know in a key value store maybe
one of them is a put on X and the other

1768
00:43:46,950 --> 00:43:46,960
one of them is a put on X and the other
 

1769
00:43:46,960 --> 00:43:48,720
one of them is a put on X and the other
was a put on Y like nothing to do with

1770
00:43:48,720 --> 00:43:48,730
was a put on Y like nothing to do with
 

1771
00:43:48,730 --> 00:43:52,260
was a put on Y like nothing to do with
each other you know can we take

1772
00:43:52,260 --> 00:43:52,270
each other you know can we take
 

1773
00:43:52,270 --> 00:43:54,990
each other you know can we take
advantage of that and the answer that is

1774
00:43:54,990 --> 00:43:55,000
advantage of that and the answer that is
 

1775
00:43:55,000 --> 00:43:57,780
advantage of that and the answer that is
absolutely now not in this framework

1776
00:43:57,780 --> 00:43:57,790
absolutely now not in this framework
 

1777
00:43:57,790 --> 00:44:00,780
absolutely now not in this framework
though or it's the center which we can

1778
00:44:00,780 --> 00:44:00,790
though or it's the center which we can
 

1779
00:44:00,790 --> 00:44:02,460
though or it's the center which we can
take advantage of it it's very limited

1780
00:44:02,460 --> 00:44:02,470
take advantage of it it's very limited
 

1781
00:44:02,470 --> 00:44:06,360
take advantage of it it's very limited
in this framework it could be well at a

1782
00:44:06,360 --> 00:44:06,370
in this framework it could be well at a
 

1783
00:44:06,370 --> 00:44:08,700
in this framework it could be well at a
high level the leader the requests all

1784
00:44:08,700 --> 00:44:08,710
high level the leader the requests all
 

1785
00:44:08,710 --> 00:44:11,910
high level the leader the requests all
still go through the leader and the

1786
00:44:11,910 --> 00:44:11,920
still go through the leader and the
 

1787
00:44:11,920 --> 00:44:13,380
still go through the leader and the
leader still has to send it out to all

1788
00:44:13,380 --> 00:44:13,390
leader still has to send it out to all
 

1789
00:44:13,390 --> 00:44:15,150
leader still has to send it out to all
the replicas and the more replicas there

1790
00:44:15,150 --> 00:44:15,160
the replicas and the more replicas there
 

1791
00:44:15,160 --> 00:44:17,190
the replicas and the more replicas there
are the more messages the leader has to

1792
00:44:17,190 --> 00:44:17,200
are the more messages the leader has to
 

1793
00:44:17,200 --> 00:44:19,980
are the more messages the leader has to
send so at a high level it's not likely

1794
00:44:19,980 --> 00:44:19,990
send so at a high level it's not likely
 

1795
00:44:19,990 --> 00:44:23,880
send so at a high level it's not likely
to this sort of commutative or community

1796
00:44:23,880 --> 00:44:23,890
to this sort of commutative or community
 

1797
00:44:23,890 --> 00:44:25,410
to this sort of commutative or community
of requests is not likely to help this

1798
00:44:25,410 --> 00:44:25,420
of requests is not likely to help this
 

1799
00:44:25,420 --> 00:44:28,110
of requests is not likely to help this
situation is a fantastic thought to keep

1800
00:44:28,110 --> 00:44:28,120
situation is a fantastic thought to keep
 

1801
00:44:28,120 --> 00:44:29,490
situation is a fantastic thought to keep
in mind though because it'll absolutely

1802
00:44:29,490 --> 00:44:29,500
in mind though because it'll absolutely
 

1803
00:44:29,500 --> 00:44:32,880
in mind though because it'll absolutely
come up in other systems and people will

1804
00:44:32,880 --> 00:44:32,890
come up in other systems and people will
 

1805
00:44:32,890 --> 00:44:34,260
come up in other systems and people will
be able to take advantage of it in other

1806
00:44:34,260 --> 00:44:34,270
be able to take advantage of it in other
 

1807
00:44:34,270 --> 00:44:39,720
be able to take advantage of it in other
systems okay so so there's a little bit

1808
00:44:39,720 --> 00:44:39,730
systems okay so so there's a little bit
 

1809
00:44:39,730 --> 00:44:41,550
systems okay so so there's a little bit
disappointing facts with server hardware

1810
00:44:41,550 --> 00:44:41,560
disappointing facts with server hardware
 

1811
00:44:41,560 --> 00:44:48,530
disappointing facts with server hardware
wasn't helping performance so a very

1812
00:44:48,530 --> 00:44:48,540
wasn't helping performance so a very
 

1813
00:44:48,540 --> 00:44:52,290
wasn't helping performance so a very
sort of obvious maybe the simplest way

1814
00:44:52,290 --> 00:44:52,300
sort of obvious maybe the simplest way
 

1815
00:44:52,300 --> 00:44:54,540
sort of obvious maybe the simplest way
that you might be able to harness these

1816
00:44:54,540 --> 00:44:54,550
that you might be able to harness these
 

1817
00:44:54,550 --> 00:44:57,420
that you might be able to harness these
other servers is build a system in which

1818
00:44:57,420 --> 00:44:57,430
other servers is build a system in which
 

1819
00:44:57,430 --> 00:44:59,850
other servers is build a system in which
ya write requests all have to go through

1820
00:44:59,850 --> 00:44:59,860
ya write requests all have to go through
 

1821
00:44:59,860 --> 00:45:03,210
ya write requests all have to go through
the leader but in the real world a huge

1822
00:45:03,210 --> 00:45:03,220
the leader but in the real world a huge
 

1823
00:45:03,220 --> 00:45:05,370
the leader but in the real world a huge
number of workloads are read heavy that

1824
00:45:05,370 --> 00:45:05,380
number of workloads are read heavy that
 

1825
00:45:05,380 --> 00:45:06,690
number of workloads are read heavy that
is there's many more reads like when you

1826
00:45:06,690 --> 00:45:06,700
is there's many more reads like when you
 

1827
00:45:06,700 --> 00:45:07,950
is there's many more reads like when you
look at web pages you know it's all

1828
00:45:07,950 --> 00:45:07,960
look at web pages you know it's all
 

1829
00:45:07,960 --> 00:45:09,960
look at web pages you know it's all
about reading data to produce the web

1830
00:45:09,960 --> 00:45:09,970
about reading data to produce the web
 

1831
00:45:09,970 --> 00:45:11,730
about reading data to produce the web
page and generally there are very

1832
00:45:11,730 --> 00:45:11,740
page and generally there are very
 

1833
00:45:11,740 --> 00:45:13,650
page and generally there are very
relatively few rights and that's true of

1834
00:45:13,650 --> 00:45:13,660
relatively few rights and that's true of
 

1835
00:45:13,660 --> 00:45:15,060
relatively few rights and that's true of
a lot of systems so maybe we'll send

1836
00:45:15,060 --> 00:45:15,070
a lot of systems so maybe we'll send
 

1837
00:45:15,070 --> 00:45:18,300
a lot of systems so maybe we'll send
rights to the leader but send weeds just

1838
00:45:18,300 --> 00:45:18,310
rights to the leader but send weeds just
 

1839
00:45:18,310 --> 00:45:21,630
rights to the leader but send weeds just
to one of the replicas right just pick

1840
00:45:21,630 --> 00:45:21,640
to one of the replicas right just pick
 

1841
00:45:21,640 --> 00:45:22,830
to one of the replicas right just pick
one of the replicas and if you have a

1842
00:45:22,830 --> 00:45:22,840
one of the replicas and if you have a
 

1843
00:45:22,840 --> 00:45:24,930
one of the replicas and if you have a
read-only request like a get in lab 3

1844
00:45:24,930 --> 00:45:24,940
read-only request like a get in lab 3
 

1845
00:45:24,940 --> 00:45:26,190
read-only request like a get in lab 3
just send it to one of the replicas and

1846
00:45:26,190 --> 00:45:26,200
just send it to one of the replicas and
 

1847
00:45:26,200 --> 00:45:29,340
just send it to one of the replicas and
not to the leader now if we do that we

1848
00:45:29,340 --> 00:45:29,350
not to the leader now if we do that we
 

1849
00:45:29,350 --> 00:45:30,510
not to the leader now if we do that we
haven't helped rights much although

1850
00:45:30,510 --> 00:45:30,520
haven't helped rights much although
 

1851
00:45:30,520 --> 00:45:32,010
haven't helped rights much although
we've gotten a lot of read workload off

1852
00:45:32,010 --> 00:45:32,020
we've gotten a lot of read workload off
 

1853
00:45:32,020 --> 00:45:33,690
we've gotten a lot of read workload off
the leader so maybe that helps but we

1854
00:45:33,690 --> 00:45:33,700
the leader so maybe that helps but we
 

1855
00:45:33,700 --> 00:45:36,390
the leader so maybe that helps but we
absolutely have made tremendous progress

1856
00:45:36,390 --> 00:45:36,400
absolutely have made tremendous progress
 

1857
00:45:36,400 --> 00:45:38,550
absolutely have made tremendous progress
with reads because now the more servers

1858
00:45:38,550 --> 00:45:38,560
with reads because now the more servers
 

1859
00:45:38,560 --> 00:45:42,540
with reads because now the more servers
we add the more clients we can support

1860
00:45:42,540 --> 00:45:42,550
we add the more clients we can support
 

1861
00:45:42,550 --> 00:45:44,070
we add the more clients we can support
right because we're just splitting the

1862
00:45:44,070 --> 00:45:44,080
right because we're just splitting the
 

1863
00:45:44,080 --> 00:45:45,380
right because we're just splitting the
client lead work

1864
00:45:45,380 --> 00:45:45,390
client lead work
 

1865
00:45:45,390 --> 00:45:48,170
client lead work
across the different replicas so the

1866
00:45:48,170 --> 00:45:48,180
across the different replicas so the
 

1867
00:45:48,180 --> 00:45:51,920
across the different replicas so the
question is if we have clients send

1868
00:45:51,920 --> 00:45:51,930
question is if we have clients send
 

1869
00:45:51,930 --> 00:45:55,700
question is if we have clients send
directly to the replicas are we going to

1870
00:45:55,700 --> 00:45:55,710
directly to the replicas are we going to
 

1871
00:45:55,710 --> 00:46:07,260
directly to the replicas are we going to
be happy

1872
00:46:07,260 --> 00:46:07,270

 

1873
00:46:07,270 --> 00:46:10,440

yeah so up-to-date does the right is the

1874
00:46:10,440 --> 00:46:10,450
yeah so up-to-date does the right is the
 

1875
00:46:10,450 --> 00:46:13,109
yeah so up-to-date does the right is the
right word in a raft like system which

1876
00:46:13,109 --> 00:46:13,119
right word in a raft like system which
 

1877
00:46:13,119 --> 00:46:17,960
right word in a raft like system which
zookeeper is if a client sends a request

1878
00:46:17,960 --> 00:46:17,970
zookeeper is if a client sends a request
 

1879
00:46:17,970 --> 00:46:20,790
zookeeper is if a client sends a request
to a random replica you know sure the

1880
00:46:20,790 --> 00:46:20,800
to a random replica you know sure the
 

1881
00:46:20,800 --> 00:46:22,859
to a random replica you know sure the
replica you know has a copy the log in

1882
00:46:22,859 --> 00:46:22,869
replica you know has a copy the log in
 

1883
00:46:22,869 --> 00:46:24,930
replica you know has a copy the log in
it you know it's been executing along

1884
00:46:24,930 --> 00:46:24,940
it you know it's been executing along
 

1885
00:46:24,940 --> 00:46:26,940
it you know it's been executing along
with the leader and you know for lab 3

1886
00:46:26,940 --> 00:46:26,950
with the leader and you know for lab 3
 

1887
00:46:26,950 --> 00:46:29,520
with the leader and you know for lab 3
it's got this key value table and you

1888
00:46:29,520 --> 00:46:29,530
it's got this key value table and you
 

1889
00:46:29,530 --> 00:46:31,980
it's got this key value table and you
know you do a get for key X and it's

1890
00:46:31,980 --> 00:46:31,990
know you do a get for key X and it's
 

1891
00:46:31,990 --> 00:46:34,500
know you do a get for key X and it's
gonna have some four key exodus table

1892
00:46:34,500 --> 00:46:34,510
gonna have some four key exodus table
 

1893
00:46:34,510 --> 00:46:36,089
gonna have some four key exodus table
and it can reply to you so sort of

1894
00:46:36,089 --> 00:46:36,099
and it can reply to you so sort of
 

1895
00:46:36,099 --> 00:46:38,970
and it can reply to you so sort of
functionally the replicas got all the

1896
00:46:38,970 --> 00:46:38,980
functionally the replicas got all the
 

1897
00:46:38,980 --> 00:46:40,859
functionally the replicas got all the
pieces it needs to respond to client to

1898
00:46:40,859 --> 00:46:40,869
pieces it needs to respond to client to
 

1899
00:46:40,869 --> 00:46:44,250
pieces it needs to respond to client to
read requests from clients the

1900
00:46:44,250 --> 00:46:44,260
read requests from clients the
 

1901
00:46:44,260 --> 00:46:47,099
read requests from clients the
difficulty is that there's no reason to

1902
00:46:47,099 --> 00:46:47,109
difficulty is that there's no reason to
 

1903
00:46:47,109 --> 00:46:49,290
difficulty is that there's no reason to
believe that anyone replicas other than

1904
00:46:49,290 --> 00:46:49,300
believe that anyone replicas other than
 

1905
00:46:49,300 --> 00:46:54,120
believe that anyone replicas other than
the leader is up to date because well

1906
00:46:54,120 --> 00:46:54,130
the leader is up to date because well
 

1907
00:46:54,130 --> 00:46:56,070
the leader is up to date because well
there's a bunch of reasons why why

1908
00:46:56,070 --> 00:46:56,080
there's a bunch of reasons why why
 

1909
00:46:56,080 --> 00:46:57,870
there's a bunch of reasons why why
replicas may not be up to date one of

1910
00:46:57,870 --> 00:46:57,880
replicas may not be up to date one of
 

1911
00:46:57,880 --> 00:46:59,640
replicas may not be up to date one of
them is that they may not be in the

1912
00:46:59,640 --> 00:46:59,650
them is that they may not be in the
 

1913
00:46:59,650 --> 00:47:02,220
them is that they may not be in the
majority that the leader was waiting for

1914
00:47:02,220 --> 00:47:02,230
majority that the leader was waiting for
 

1915
00:47:02,230 --> 00:47:04,079
majority that the leader was waiting for
you think about what raft is doing the

1916
00:47:04,079 --> 00:47:04,089
you think about what raft is doing the
 

1917
00:47:04,089 --> 00:47:05,730
you think about what raft is doing the
leader is only obliged to wait for

1918
00:47:05,730 --> 00:47:05,740
leader is only obliged to wait for
 

1919
00:47:05,740 --> 00:47:07,589
leader is only obliged to wait for
responses to its append entries from a

1920
00:47:07,589 --> 00:47:07,599
responses to its append entries from a
 

1921
00:47:07,599 --> 00:47:10,589
responses to its append entries from a
majority of the followers and then it

1922
00:47:10,589 --> 00:47:10,599
majority of the followers and then it
 

1923
00:47:10,599 --> 00:47:11,940
majority of the followers and then it
can commit the operation and go on to

1924
00:47:11,940 --> 00:47:11,950
can commit the operation and go on to
 

1925
00:47:11,950 --> 00:47:14,250
can commit the operation and go on to
the next operation so if this replica

1926
00:47:14,250 --> 00:47:14,260
the next operation so if this replica
 

1927
00:47:14,260 --> 00:47:16,320
the next operation so if this replica
wasn't in the majority it may never have

1928
00:47:16,320 --> 00:47:16,330
wasn't in the majority it may never have
 

1929
00:47:16,330 --> 00:47:18,780
wasn't in the majority it may never have
seen a riot it may be the network

1930
00:47:18,780 --> 00:47:18,790
seen a riot it may be the network
 

1931
00:47:18,790 --> 00:47:20,940
seen a riot it may be the network
dropped it and never got it and so yeah

1932
00:47:20,940 --> 00:47:20,950
dropped it and never got it and so yeah
 

1933
00:47:20,950 --> 00:47:25,520
dropped it and never got it and so yeah
you know the leader and you know a

1934
00:47:25,520 --> 00:47:25,530
you know the leader and you know a
 

1935
00:47:25,530 --> 00:47:27,810
you know the leader and you know a
majority of the servers have seen the

1936
00:47:27,810 --> 00:47:27,820
majority of the servers have seen the
 

1937
00:47:27,820 --> 00:47:29,990
majority of the servers have seen the
first three requests but you know this

1938
00:47:29,990 --> 00:47:30,000
first three requests but you know this
 

1939
00:47:30,000 --> 00:47:31,980
first three requests but you know this
server only saw the first two it's

1940
00:47:31,980 --> 00:47:31,990
server only saw the first two it's
 

1941
00:47:31,990 --> 00:47:35,250
server only saw the first two it's
missing B so read to be a read of you

1942
00:47:35,250 --> 00:47:35,260
missing B so read to be a read of you
 

1943
00:47:35,260 --> 00:47:37,290
missing B so read to be a read of you
know what should be there I'll just be

1944
00:47:37,290 --> 00:47:37,300
know what should be there I'll just be
 

1945
00:47:37,300 --> 00:47:40,730
know what should be there I'll just be
totally get a stale value from this one

1946
00:47:40,730 --> 00:47:40,740
totally get a stale value from this one
 

1947
00:47:40,740 --> 00:47:45,480
totally get a stale value from this one
even if this replica actually saw this

1948
00:47:45,480 --> 00:47:45,490
even if this replica actually saw this
 

1949
00:47:45,490 --> 00:47:47,310
even if this replica actually saw this
new log entry it might be missing the

1950
00:47:47,310 --> 00:47:47,320
new log entry it might be missing the
 

1951
00:47:47,320 --> 00:47:50,250
new log entry it might be missing the
commit command you know this zookeepers

1952
00:47:50,250 --> 00:47:50,260
commit command you know this zookeepers
 

1953
00:47:50,260 --> 00:47:52,170
commit command you know this zookeepers
app as much the same as raft it first

1954
00:47:52,170 --> 00:47:52,180
app as much the same as raft it first
 

1955
00:47:52,180 --> 00:47:54,329
app as much the same as raft it first
sends out a log entry and then when the

1956
00:47:54,329 --> 00:47:54,339
sends out a log entry and then when the
 

1957
00:47:54,339 --> 00:47:55,770
sends out a log entry and then when the
leader gets a majority of positive

1958
00:47:55,770 --> 00:47:55,780
leader gets a majority of positive
 

1959
00:47:55,780 --> 00:47:57,210
leader gets a majority of positive
replies the leader sends out a

1960
00:47:57,210 --> 00:47:57,220
replies the leader sends out a
 

1961
00:47:57,220 --> 00:47:58,920
replies the leader sends out a
notification saying yeah I'm gonna

1962
00:47:58,920 --> 00:47:58,930
notification saying yeah I'm gonna
 

1963
00:47:58,930 --> 00:48:01,140
notification saying yeah I'm gonna
committing that log entry I may not have

1964
00:48:01,140 --> 00:48:01,150
committing that log entry I may not have
 

1965
00:48:01,150 --> 00:48:03,270
committing that log entry I may not have
gotten the commit and the sort of worst

1966
00:48:03,270 --> 00:48:03,280
gotten the commit and the sort of worst
 

1967
00:48:03,280 --> 00:48:04,530
gotten the commit and the sort of worst
case version of this although its

1968
00:48:04,530 --> 00:48:04,540
case version of this although its
 

1969
00:48:04,540 --> 00:48:05,910
case version of this although its
equivalent to what I already said is

1970
00:48:05,910 --> 00:48:05,920
equivalent to what I already said is
 

1971
00:48:05,920 --> 00:48:08,640
equivalent to what I already said is
that for all this client for all client

1972
00:48:08,640 --> 00:48:08,650
that for all this client for all client
 

1973
00:48:08,650 --> 00:48:14,339
that for all this client for all client
to knows this replica may be partitioned

1974
00:48:14,339 --> 00:48:14,349
to knows this replica may be partitioned
 

1975
00:48:14,349 --> 00:48:15,990
to knows this replica may be partitioned
from the leader or may just absolutely

1976
00:48:15,990 --> 00:48:16,000
from the leader or may just absolutely
 

1977
00:48:16,000 --> 00:48:17,849
from the leader or may just absolutely
not be in contact with leader at all and

1978
00:48:17,849 --> 00:48:17,859
not be in contact with leader at all and
 

1979
00:48:17,859 --> 00:48:19,680
not be in contact with leader at all and
you know the follower doesn't really

1980
00:48:19,680 --> 00:48:19,690
you know the follower doesn't really
 

1981
00:48:19,690 --> 00:48:20,970
you know the follower doesn't really
have a way of knowing

1982
00:48:20,970 --> 00:48:20,980
have a way of knowing
 

1983
00:48:20,980 --> 00:48:23,490
have a way of knowing
that actually it's just been cut off a

1984
00:48:23,490 --> 00:48:23,500
that actually it's just been cut off a
 

1985
00:48:23,500 --> 00:48:25,710
that actually it's just been cut off a
moment ago from the leader and just not

1986
00:48:25,710 --> 00:48:25,720
moment ago from the leader and just not
 

1987
00:48:25,720 --> 00:48:29,220
moment ago from the leader and just not
getting anything so you know without

1988
00:48:29,220 --> 00:48:29,230
getting anything so you know without
 

1989
00:48:29,230 --> 00:48:32,609
getting anything so you know without
some further cleverness if we want to

1990
00:48:32,609 --> 00:48:32,619
some further cleverness if we want to
 

1991
00:48:32,619 --> 00:48:35,010
some further cleverness if we want to
build a linearizable system we can't

1992
00:48:35,010 --> 00:48:35,020
build a linearizable system we can't
 

1993
00:48:35,020 --> 00:48:36,990
build a linearizable system we can't
play this game of sending the attractive

1994
00:48:36,990 --> 00:48:37,000
play this game of sending the attractive
 

1995
00:48:37,000 --> 00:48:38,819
play this game of sending the attractive
it as it is for performance we can't

1996
00:48:38,819 --> 00:48:38,829
it as it is for performance we can't
 

1997
00:48:38,829 --> 00:48:40,200
it as it is for performance we can't
play this game at replicas sending a

1998
00:48:40,200 --> 00:48:40,210
play this game at replicas sending a
 

1999
00:48:40,210 --> 00:48:43,560
play this game at replicas sending a
read request to the replicas and you

2000
00:48:43,560 --> 00:48:43,570
read request to the replicas and you
 

2001
00:48:43,570 --> 00:48:44,910
read request to the replicas and you
shouldn't do it for lab 3 either because

2002
00:48:44,910 --> 00:48:44,920
shouldn't do it for lab 3 either because
 

2003
00:48:44,920 --> 00:48:47,010
shouldn't do it for lab 3 either because
that 3 is also supposed to be

2004
00:48:47,010 --> 00:48:47,020
that 3 is also supposed to be
 

2005
00:48:47,020 --> 00:48:53,430
that 3 is also supposed to be
linearizable it's any any questions

2006
00:48:53,430 --> 00:48:53,440
linearizable it's any any questions
 

2007
00:48:53,440 --> 00:48:57,569
linearizable it's any any questions
about why linearize ability forbids us

2008
00:48:57,569 --> 00:48:57,579
about why linearize ability forbids us
 

2009
00:48:57,579 --> 00:49:02,880
about why linearize ability forbids us
from having replicas serve clients ok

2010
00:49:02,880 --> 00:49:02,890
from having replicas serve clients ok
 

2011
00:49:02,890 --> 00:49:07,680
from having replicas serve clients ok
you know that the proof is the I lost it

2012
00:49:07,680 --> 00:49:07,690
you know that the proof is the I lost it
 

2013
00:49:07,690 --> 00:49:11,390
you know that the proof is the I lost it
now but the proof was that simple

2014
00:49:11,390 --> 00:49:11,400

 

2015
00:49:11,400 --> 00:49:13,980

reading you know right one right to read

2016
00:49:13,980 --> 00:49:13,990
reading you know right one right to read
 

2017
00:49:13,990 --> 00:49:16,970
reading you know right one right to read
one example I put on the board earlier

2018
00:49:16,970 --> 00:49:16,980
one example I put on the board earlier
 

2019
00:49:16,980 --> 00:49:19,890
one example I put on the board earlier
you not a lot just you know this is not

2020
00:49:19,890 --> 00:49:19,900
you not a lot just you know this is not
 

2021
00:49:19,900 --> 00:49:21,060
you not a lot just you know this is not
allowed to serve stale data in the

2022
00:49:21,060 --> 00:49:21,070
allowed to serve stale data in the
 

2023
00:49:21,070 --> 00:49:28,109
allowed to serve stale data in the
linear linearizable system ok so how

2024
00:49:28,109 --> 00:49:28,119
linear linearizable system ok so how
 

2025
00:49:28,119 --> 00:49:29,609
linear linearizable system ok so how
does how does ooh keep our deal with

2026
00:49:29,609 --> 00:49:29,619
does how does ooh keep our deal with
 

2027
00:49:29,619 --> 00:49:31,170
does how does ooh keep our deal with
this zookeeper actually does you can

2028
00:49:31,170 --> 00:49:31,180
this zookeeper actually does you can
 

2029
00:49:31,180 --> 00:49:33,030
this zookeeper actually does you can
tell from table two you look in Table

2030
00:49:33,030 --> 00:49:33,040
tell from table two you look in Table
 

2031
00:49:33,040 --> 00:49:35,460
tell from table two you look in Table
two zookeepers read performance goes up

2032
00:49:35,460 --> 00:49:35,470
two zookeepers read performance goes up
 

2033
00:49:35,470 --> 00:49:38,010
two zookeepers read performance goes up
dramatically as you add more servers so

2034
00:49:38,010 --> 00:49:38,020
dramatically as you add more servers so
 

2035
00:49:38,020 --> 00:49:39,780
dramatically as you add more servers so
clearly zookeepers playing some game

2036
00:49:39,780 --> 00:49:39,790
clearly zookeepers playing some game
 

2037
00:49:39,790 --> 00:49:41,640
clearly zookeepers playing some game
here which allows must be allowing it to

2038
00:49:41,640 --> 00:49:41,650
here which allows must be allowing it to
 

2039
00:49:41,650 --> 00:49:44,370
here which allows must be allowing it to
return read only to serve read only

2040
00:49:44,370 --> 00:49:44,380
return read only to serve read only
 

2041
00:49:44,380 --> 00:49:46,859
return read only to serve read only
requests from the additional servers the

2042
00:49:46,859 --> 00:49:46,869
requests from the additional servers the
 

2043
00:49:46,869 --> 00:49:50,040
requests from the additional servers the
replicas so how does ooh keeper make

2044
00:49:50,040 --> 00:49:50,050
replicas so how does ooh keeper make
 

2045
00:49:50,050 --> 00:49:59,000
replicas so how does ooh keeper make
this safe

2046
00:49:59,000 --> 00:49:59,010

 

2047
00:49:59,010 --> 00:50:01,050

that's right I mean in fact it's almost

2048
00:50:01,050 --> 00:50:01,060
that's right I mean in fact it's almost
 

2049
00:50:01,060 --> 00:50:02,190
that's right I mean in fact it's almost
not allowed to say it does need the

2050
00:50:02,190 --> 00:50:02,200
not allowed to say it does need the
 

2051
00:50:02,200 --> 00:50:05,100
not allowed to say it does need the
written latest yeah the way zookeeper

2052
00:50:05,100 --> 00:50:05,110
written latest yeah the way zookeeper
 

2053
00:50:05,110 --> 00:50:06,570
written latest yeah the way zookeeper
skins this cat is that it's not

2054
00:50:06,570 --> 00:50:06,580
skins this cat is that it's not
 

2055
00:50:06,580 --> 00:50:09,330
skins this cat is that it's not
linearizable right they just like to

2056
00:50:09,330 --> 00:50:09,340
linearizable right they just like to
 

2057
00:50:09,340 --> 00:50:10,680
linearizable right they just like to
find away this problem and say well

2058
00:50:10,680 --> 00:50:10,690
find away this problem and say well
 

2059
00:50:10,690 --> 00:50:12,210
find away this problem and say well
we're not gonna be we're not going to

2060
00:50:12,210 --> 00:50:12,220
we're not gonna be we're not going to
 

2061
00:50:12,220 --> 00:50:14,490
we're not gonna be we're not going to
provide linearizable reads and so

2062
00:50:14,490 --> 00:50:14,500
provide linearizable reads and so
 

2063
00:50:14,500 --> 00:50:17,460
provide linearizable reads and so
therefore you don't are not obliged

2064
00:50:17,460 --> 00:50:17,470
therefore you don't are not obliged
 

2065
00:50:17,470 --> 00:50:20,220
therefore you don't are not obliged
you know zookeepers not obliged to

2066
00:50:20,220 --> 00:50:20,230
you know zookeepers not obliged to
 

2067
00:50:20,230 --> 00:50:23,940
you know zookeepers not obliged to
provide fresh data to reads it's allowed

2068
00:50:23,940 --> 00:50:23,950
provide fresh data to reads it's allowed
 

2069
00:50:23,950 --> 00:50:25,680
provide fresh data to reads it's allowed
by its rules of consistency which are

2070
00:50:25,680 --> 00:50:25,690
by its rules of consistency which are
 

2071
00:50:25,690 --> 00:50:28,500
by its rules of consistency which are
not linearizable to produce stale data

2072
00:50:28,500 --> 00:50:28,510
not linearizable to produce stale data
 

2073
00:50:28,510 --> 00:50:31,710
not linearizable to produce stale data
for Wheaton's so it's sort of solved

2074
00:50:31,710 --> 00:50:31,720
for Wheaton's so it's sort of solved
 

2075
00:50:31,720 --> 00:50:33,890
for Wheaton's so it's sort of solved
this technical problem with a kind of

2076
00:50:33,890 --> 00:50:33,900
this technical problem with a kind of
 

2077
00:50:33,900 --> 00:50:37,290
this technical problem with a kind of
definitional wave of the wand by saying

2078
00:50:37,290 --> 00:50:37,300
definitional wave of the wand by saying
 

2079
00:50:37,300 --> 00:50:38,820
definitional wave of the wand by saying
well we never owed you them linearizable

2080
00:50:38,820 --> 00:50:38,830
well we never owed you them linearizable
 

2081
00:50:38,830 --> 00:50:41,160
well we never owed you them linearizable
it'll be in the first place so it's not

2082
00:50:41,160 --> 00:50:41,170
it'll be in the first place so it's not
 

2083
00:50:41,170 --> 00:50:45,750
it'll be in the first place so it's not
a bug if you don't provide it and that's

2084
00:50:45,750 --> 00:50:45,760
a bug if you don't provide it and that's
 

2085
00:50:45,760 --> 00:50:46,860
a bug if you don't provide it and that's
actually a pretty classic way to

2086
00:50:46,860 --> 00:50:46,870
actually a pretty classic way to
 

2087
00:50:46,870 --> 00:50:49,890
actually a pretty classic way to
approach this to approach the sort of

2088
00:50:49,890 --> 00:50:49,900
approach this to approach the sort of
 

2089
00:50:49,900 --> 00:50:53,610
approach this to approach the sort of
tension between performance and strict

2090
00:50:53,610 --> 00:50:53,620
tension between performance and strict
 

2091
00:50:53,620 --> 00:50:55,980
tension between performance and strict
and strong consistency is to just not

2092
00:50:55,980 --> 00:50:55,990
and strong consistency is to just not
 

2093
00:50:55,990 --> 00:50:58,170
and strong consistency is to just not
provide strong consistency nevertheless

2094
00:50:58,170 --> 00:50:58,180
provide strong consistency nevertheless
 

2095
00:50:58,180 --> 00:51:00,240
provide strong consistency nevertheless
we have to keep in the back of our minds

2096
00:51:00,240 --> 00:51:00,250
we have to keep in the back of our minds
 

2097
00:51:00,250 --> 00:51:03,750
we have to keep in the back of our minds
question of if the system doesn't

2098
00:51:03,750 --> 00:51:03,760
question of if the system doesn't
 

2099
00:51:03,760 --> 00:51:07,290
question of if the system doesn't
provide linearize ability is it still

2100
00:51:07,290 --> 00:51:07,300
provide linearize ability is it still
 

2101
00:51:07,300 --> 00:51:09,510
provide linearize ability is it still
going to be useful right and you do a

2102
00:51:09,510 --> 00:51:09,520
going to be useful right and you do a
 

2103
00:51:09,520 --> 00:51:11,370
going to be useful right and you do a
read and you just don't get the current

2104
00:51:11,370 --> 00:51:11,380
read and you just don't get the current
 

2105
00:51:11,380 --> 00:51:12,690
read and you just don't get the current
answer or current correct answer the

2106
00:51:12,690 --> 00:51:12,700
answer or current correct answer the
 

2107
00:51:12,700 --> 00:51:14,580
answer or current correct answer the
most latest data like why do we believe

2108
00:51:14,580 --> 00:51:14,590
most latest data like why do we believe
 

2109
00:51:14,590 --> 00:51:16,260
most latest data like why do we believe
that that's gonna produce a useful

2110
00:51:16,260 --> 00:51:16,270
that that's gonna produce a useful
 

2111
00:51:16,270 --> 00:51:22,770
that that's gonna produce a useful
system and so let me talk about that so

2112
00:51:22,770 --> 00:51:22,780
system and so let me talk about that so
 

2113
00:51:22,780 --> 00:51:26,430
system and so let me talk about that so
first of all any questions about about

2114
00:51:26,430 --> 00:51:26,440
first of all any questions about about
 

2115
00:51:26,440 --> 00:51:28,470
first of all any questions about about
the basic problem zookeeper really does

2116
00:51:28,470 --> 00:51:28,480
the basic problem zookeeper really does
 

2117
00:51:28,480 --> 00:51:30,450
the basic problem zookeeper really does
allow client to send read-only requests

2118
00:51:30,450 --> 00:51:30,460
allow client to send read-only requests
 

2119
00:51:30,460 --> 00:51:33,480
allow client to send read-only requests
to any replica and the replica responds

2120
00:51:33,480 --> 00:51:33,490
to any replica and the replica responds
 

2121
00:51:33,490 --> 00:51:35,370
to any replica and the replica responds
out of its current state and that

2122
00:51:35,370 --> 00:51:35,380
out of its current state and that
 

2123
00:51:35,380 --> 00:51:37,200
out of its current state and that
replicate may be lagging it's log may

2124
00:51:37,200 --> 00:51:37,210
replicate may be lagging it's log may
 

2125
00:51:37,210 --> 00:51:39,210
replicate may be lagging it's log may
not have the very latest log entries and

2126
00:51:39,210 --> 00:51:39,220
not have the very latest log entries and
 

2127
00:51:39,220 --> 00:51:42,510
not have the very latest log entries and
so it may return stale data even though

2128
00:51:42,510 --> 00:51:42,520
so it may return stale data even though
 

2129
00:51:42,520 --> 00:51:46,640
so it may return stale data even though
there's a more recent committed value

2130
00:51:46,640 --> 00:51:46,650

 

2131
00:51:46,650 --> 00:51:51,770

okay so what are we left with

2132
00:51:51,770 --> 00:51:51,780
okay so what are we left with
 

2133
00:51:51,780 --> 00:51:55,980
okay so what are we left with
zookeeper does actually have some it

2134
00:51:55,980 --> 00:51:55,990
zookeeper does actually have some it
 

2135
00:51:55,990 --> 00:51:57,660
zookeeper does actually have some it
does have a set of consistency

2136
00:51:57,660 --> 00:51:57,670
does have a set of consistency
 

2137
00:51:57,670 --> 00:52:01,170
does have a set of consistency
guarantees so to help people who write

2138
00:52:01,170 --> 00:52:01,180
guarantees so to help people who write
 

2139
00:52:01,180 --> 00:52:02,970
guarantees so to help people who write
zookeeper based applications reason

2140
00:52:02,970 --> 00:52:02,980
zookeeper based applications reason
 

2141
00:52:02,980 --> 00:52:04,530
zookeeper based applications reason
about what their applications what's

2142
00:52:04,530 --> 00:52:04,540
about what their applications what's
 

2143
00:52:04,540 --> 00:52:05,640
about what their applications what's
actually going to happen when they run

2144
00:52:05,640 --> 00:52:05,650
actually going to happen when they run
 

2145
00:52:05,650 --> 00:52:07,760
actually going to happen when they run
them so

2146
00:52:07,760 --> 00:52:07,770
them so
 

2147
00:52:07,770 --> 00:52:09,260
them so
and these guarantees have to do with

2148
00:52:09,260 --> 00:52:09,270
and these guarantees have to do with
 

2149
00:52:09,270 --> 00:52:10,970
and these guarantees have to do with
ordering as indeed linearise ability

2150
00:52:10,970 --> 00:52:10,980
ordering as indeed linearise ability
 

2151
00:52:10,980 --> 00:52:15,290
ordering as indeed linearise ability
does so zookeeper does have two main

2152
00:52:15,290 --> 00:52:15,300
does so zookeeper does have two main
 

2153
00:52:15,300 --> 00:52:17,980
does so zookeeper does have two main
guarantees that they state and this is

2154
00:52:17,980 --> 00:52:17,990
guarantees that they state and this is
 

2155
00:52:17,990 --> 00:52:22,390
guarantees that they state and this is
section 2.3 one of them is it says that

2156
00:52:22,390 --> 00:52:22,400
section 2.3 one of them is it says that
 

2157
00:52:22,400 --> 00:52:33,829
section 2.3 one of them is it says that
rights rights or linearizable now you

2158
00:52:33,829 --> 00:52:33,839
rights rights or linearizable now you
 

2159
00:52:33,839 --> 00:52:34,970
rights rights or linearizable now you
know there are notion of linearizable

2160
00:52:34,970 --> 00:52:34,980
know there are notion of linearizable
 

2161
00:52:34,980 --> 00:52:37,640
know there are notion of linearizable
isn't not quite the same in mine maybe

2162
00:52:37,640 --> 00:52:37,650
isn't not quite the same in mine maybe
 

2163
00:52:37,650 --> 00:52:40,430
isn't not quite the same in mine maybe
because they're talking about rights no

2164
00:52:40,430 --> 00:52:40,440
because they're talking about rights no
 

2165
00:52:40,440 --> 00:52:43,579
because they're talking about rights no
beads what they really mean here is that

2166
00:52:43,579 --> 00:52:43,589
beads what they really mean here is that
 

2167
00:52:43,589 --> 00:52:48,290
beads what they really mean here is that
the system behaves as if even though

2168
00:52:48,290 --> 00:52:48,300
the system behaves as if even though
 

2169
00:52:48,300 --> 00:52:50,380
the system behaves as if even though
clients might submit rights concurrently

2170
00:52:50,380 --> 00:52:50,390
clients might submit rights concurrently
 

2171
00:52:50,390 --> 00:52:52,880
clients might submit rights concurrently
nevertheless the system behaves as if it

2172
00:52:52,880 --> 00:52:52,890
nevertheless the system behaves as if it
 

2173
00:52:52,890 --> 00:52:55,220
nevertheless the system behaves as if it
executes the rights one at a time in

2174
00:52:55,220 --> 00:52:55,230
executes the rights one at a time in
 

2175
00:52:55,230 --> 00:52:59,480
executes the rights one at a time in
some order and indeed obeys real-time

2176
00:52:59,480 --> 00:52:59,490
some order and indeed obeys real-time
 

2177
00:52:59,490 --> 00:53:01,010
some order and indeed obeys real-time
ordering of right so if one right has

2178
00:53:01,010 --> 00:53:01,020
ordering of right so if one right has
 

2179
00:53:01,020 --> 00:53:03,260
ordering of right so if one right has
seen to have completed before another

2180
00:53:03,260 --> 00:53:03,270
seen to have completed before another
 

2181
00:53:03,270 --> 00:53:05,300
seen to have completed before another
right has issued then do keeper will

2182
00:53:05,300 --> 00:53:05,310
right has issued then do keeper will
 

2183
00:53:05,310 --> 00:53:07,310
right has issued then do keeper will
indeed act as if it executed the second

2184
00:53:07,310 --> 00:53:07,320
indeed act as if it executed the second
 

2185
00:53:07,320 --> 00:53:09,980
indeed act as if it executed the second
right after the first right so it's

2186
00:53:09,980 --> 00:53:09,990
right after the first right so it's
 

2187
00:53:09,990 --> 00:53:12,910
right after the first right so it's
rights but not reads are linearizable

2188
00:53:12,910 --> 00:53:12,920
rights but not reads are linearizable
 

2189
00:53:12,920 --> 00:53:17,210
rights but not reads are linearizable
and zookeeper isn't a strict readwrite

2190
00:53:17,210 --> 00:53:17,220
and zookeeper isn't a strict readwrite
 

2191
00:53:17,220 --> 00:53:20,079
and zookeeper isn't a strict readwrite
system there are actually rights that

2192
00:53:20,079 --> 00:53:20,089
system there are actually rights that
 

2193
00:53:20,089 --> 00:53:23,210
system there are actually rights that
imply reads also and for those sort of

2194
00:53:23,210 --> 00:53:23,220
imply reads also and for those sort of
 

2195
00:53:23,220 --> 00:53:26,660
imply reads also and for those sort of
mixed rights those those you know any

2196
00:53:26,660 --> 00:53:26,670
mixed rights those those you know any
 

2197
00:53:26,670 --> 00:53:29,480
mixed rights those those you know any
any operation that modifies the state is

2198
00:53:29,480 --> 00:53:29,490
any operation that modifies the state is
 

2199
00:53:29,490 --> 00:53:31,130
any operation that modifies the state is
linearizable with respect to all other

2200
00:53:31,130 --> 00:53:31,140
linearizable with respect to all other
 

2201
00:53:31,140 --> 00:53:37,310
linearizable with respect to all other
operations that modify the state the

2202
00:53:37,310 --> 00:53:37,320
operations that modify the state the
 

2203
00:53:37,320 --> 00:53:42,650
operations that modify the state the
other guarantee of gives is that any

2204
00:53:42,650 --> 00:53:42,660
other guarantee of gives is that any
 

2205
00:53:42,660 --> 00:53:47,240
other guarantee of gives is that any
given client its operations executes in

2206
00:53:47,240 --> 00:53:47,250
given client its operations executes in
 

2207
00:53:47,250 --> 00:53:49,550
given client its operations executes in
the order specified by the client

2208
00:53:49,550 --> 00:53:49,560
the order specified by the client
 

2209
00:53:49,560 --> 00:53:56,109
the order specified by the client
they call that FIFO client order

2210
00:53:56,109 --> 00:53:56,119

 

2211
00:53:56,119 --> 00:53:58,100

and what this means is that if a

2212
00:53:58,100 --> 00:53:58,110
and what this means is that if a
 

2213
00:53:58,110 --> 00:54:00,440
and what this means is that if a
particular client issues a right and

2214
00:54:00,440 --> 00:54:00,450
particular client issues a right and
 

2215
00:54:00,450 --> 00:54:02,210
particular client issues a right and
then a read and then a read and a right

2216
00:54:02,210 --> 00:54:02,220
then a read and then a read and a right
 

2217
00:54:02,220 --> 00:54:05,870
then a read and then a read and a right
or whatever that first of all the rights

2218
00:54:05,870 --> 00:54:05,880
or whatever that first of all the rights
 

2219
00:54:05,880 --> 00:54:09,980
or whatever that first of all the rights
from that sequence fit in in the client

2220
00:54:09,980 --> 00:54:09,990
from that sequence fit in in the client
 

2221
00:54:09,990 --> 00:54:13,100
from that sequence fit in in the client
specified order in the overall order of

2222
00:54:13,100 --> 00:54:13,110
specified order in the overall order of
 

2223
00:54:13,110 --> 00:54:15,950
specified order in the overall order of
all clients rights so if a client says

2224
00:54:15,950 --> 00:54:15,960
all clients rights so if a client says
 

2225
00:54:15,960 --> 00:54:18,140
all clients rights so if a client says
do this right then that right and the

2226
00:54:18,140 --> 00:54:18,150
do this right then that right and the
 

2227
00:54:18,150 --> 00:54:21,130
do this right then that right and the
third right in the final order of rights

2228
00:54:21,130 --> 00:54:21,140
third right in the final order of rights
 

2229
00:54:21,140 --> 00:54:24,200
third right in the final order of rights
will see the clients rates occur in the

2230
00:54:24,200 --> 00:54:24,210
will see the clients rates occur in the
 

2231
00:54:24,210 --> 00:54:26,270
will see the clients rates occur in the
order of the client specified so for

2232
00:54:26,270 --> 00:54:26,280
order of the client specified so for
 

2233
00:54:26,280 --> 00:54:32,330
order of the client specified so for
rights this is our client specified

2234
00:54:32,330 --> 00:54:32,340
rights this is our client specified
 

2235
00:54:32,340 --> 00:54:38,300
rights this is our client specified
order and this is particularly you know

2236
00:54:38,300 --> 00:54:38,310
order and this is particularly you know
 

2237
00:54:38,310 --> 00:54:40,910
order and this is particularly you know
this is a issue with the system because

2238
00:54:40,910 --> 00:54:40,920
this is a issue with the system because
 

2239
00:54:40,920 --> 00:54:41,870
this is a issue with the system because
clients are allowed to launch

2240
00:54:41,870 --> 00:54:41,880
clients are allowed to launch
 

2241
00:54:41,880 --> 00:54:44,600
clients are allowed to launch
asynchronous right requests that is a

2242
00:54:44,600 --> 00:54:44,610
asynchronous right requests that is a
 

2243
00:54:44,610 --> 00:54:46,280
asynchronous right requests that is a
client can fire off a whole sequence of

2244
00:54:46,280 --> 00:54:46,290
client can fire off a whole sequence of
 

2245
00:54:46,290 --> 00:54:49,130
client can fire off a whole sequence of
rights to the leader to the zookeeper

2246
00:54:49,130 --> 00:54:49,140
rights to the leader to the zookeeper
 

2247
00:54:49,140 --> 00:54:51,050
rights to the leader to the zookeeper
leader without waiting for any of them

2248
00:54:51,050 --> 00:54:51,060
leader without waiting for any of them
 

2249
00:54:51,060 --> 00:54:53,960
leader without waiting for any of them
to complete and in order resume the

2250
00:54:53,960 --> 00:54:53,970
to complete and in order resume the
 

2251
00:54:53,970 --> 00:54:55,490
to complete and in order resume the
paper doesn't exactly say this but

2252
00:54:55,490 --> 00:54:55,500
paper doesn't exactly say this but
 

2253
00:54:55,500 --> 00:54:57,470
paper doesn't exactly say this but
presumably in order for the leader to

2254
00:54:57,470 --> 00:54:57,480
presumably in order for the leader to
 

2255
00:54:57,480 --> 00:54:59,570
presumably in order for the leader to
actually be able to execute the clients

2256
00:54:59,570 --> 00:54:59,580
actually be able to execute the clients
 

2257
00:54:59,580 --> 00:55:00,920
actually be able to execute the clients
rights in the client specified order

2258
00:55:00,920 --> 00:55:00,930
rights in the client specified order
 

2259
00:55:00,930 --> 00:55:03,290
rights in the client specified order
we're imagining I'm imagining that the

2260
00:55:03,290 --> 00:55:03,300
we're imagining I'm imagining that the
 

2261
00:55:03,300 --> 00:55:04,910
we're imagining I'm imagining that the
client actually stamps its write

2262
00:55:04,910 --> 00:55:04,920
client actually stamps its write
 

2263
00:55:04,920 --> 00:55:07,670
client actually stamps its write
requests with numbers and saying you

2264
00:55:07,670 --> 00:55:07,680
requests with numbers and saying you
 

2265
00:55:07,680 --> 00:55:08,900
requests with numbers and saying you
know I'll do this one first this one

2266
00:55:08,900 --> 00:55:08,910
know I'll do this one first this one
 

2267
00:55:08,910 --> 00:55:11,660
know I'll do this one first this one
second this one third and the zookeeper

2268
00:55:11,660 --> 00:55:11,670
second this one third and the zookeeper
 

2269
00:55:11,670 --> 00:55:14,300
second this one third and the zookeeper
leader obeys that ordering right so this

2270
00:55:14,300 --> 00:55:14,310
leader obeys that ordering right so this
 

2271
00:55:14,310 --> 00:55:15,800
leader obeys that ordering right so this
is particularly interesting due to these

2272
00:55:15,800 --> 00:55:15,810
is particularly interesting due to these
 

2273
00:55:15,810 --> 00:55:19,160
is particularly interesting due to these
asynchronous write requests and for

2274
00:55:19,160 --> 00:55:19,170
asynchronous write requests and for
 

2275
00:55:19,170 --> 00:55:25,660
asynchronous write requests and for
reads this is a little more complicated

2276
00:55:25,660 --> 00:55:25,670
reads this is a little more complicated
 

2277
00:55:25,670 --> 00:55:27,980
reads this is a little more complicated
the reasons I said before don't go

2278
00:55:27,980 --> 00:55:27,990
the reasons I said before don't go
 

2279
00:55:27,990 --> 00:55:29,270
the reasons I said before don't go
through the writes all go through the

2280
00:55:29,270 --> 00:55:29,280
through the writes all go through the
 

2281
00:55:29,280 --> 00:55:31,460
through the writes all go through the
leader the reads just go to some

2282
00:55:31,460 --> 00:55:31,470
leader the reads just go to some
 

2283
00:55:31,470 --> 00:55:33,349
leader the reads just go to some
replicas and so all they see is the

2284
00:55:33,349 --> 00:55:33,359
replicas and so all they see is the
 

2285
00:55:33,359 --> 00:55:35,210
replicas and so all they see is the
stuff that happens to have made it to

2286
00:55:35,210 --> 00:55:35,220
stuff that happens to have made it to
 

2287
00:55:35,220 --> 00:55:38,270
stuff that happens to have made it to
that replicas log the way we're supposed

2288
00:55:38,270 --> 00:55:38,280
that replicas log the way we're supposed
 

2289
00:55:38,280 --> 00:55:41,510
that replicas log the way we're supposed
to think about the FIFO client order for

2290
00:55:41,510 --> 00:55:41,520
to think about the FIFO client order for
 

2291
00:55:41,520 --> 00:55:43,640
to think about the FIFO client order for
reads is that if the client issues a

2292
00:55:43,640 --> 00:55:43,650
reads is that if the client issues a
 

2293
00:55:43,650 --> 00:55:45,680
reads is that if the client issues a
sequence of reads again in some order

2294
00:55:45,680 --> 00:55:45,690
sequence of reads again in some order
 

2295
00:55:45,690 --> 00:55:47,330
sequence of reads again in some order
the client reads one thing and then

2296
00:55:47,330 --> 00:55:47,340
the client reads one thing and then
 

2297
00:55:47,340 --> 00:55:48,349
the client reads one thing and then
another thing and then a third thing

2298
00:55:48,349 --> 00:55:48,359
another thing and then a third thing
 

2299
00:55:48,359 --> 00:55:53,480
another thing and then a third thing
that relative to the log on the replicas

2300
00:55:53,480 --> 00:55:53,490
that relative to the log on the replicas
 

2301
00:55:53,490 --> 00:55:59,120
that relative to the log on the replicas
talking to those clients reads each have

2302
00:55:59,120 --> 00:55:59,130
talking to those clients reads each have
 

2303
00:55:59,130 --> 00:56:00,950
talking to those clients reads each have
to occur at some particular point in the

2304
00:56:00,950 --> 00:56:00,960
to occur at some particular point in the
 

2305
00:56:00,960 --> 00:56:05,210
to occur at some particular point in the
log or they need to sort of observe the

2306
00:56:05,210 --> 00:56:05,220
log or they need to sort of observe the
 

2307
00:56:05,220 --> 00:56:07,730
log or they need to sort of observe the
state as it as the state existed at a

2308
00:56:07,730 --> 00:56:07,740
state as it as the state existed at a
 

2309
00:56:07,740 --> 00:56:08,539
state as it as the state existed at a
particular point

2310
00:56:08,539 --> 00:56:08,549
particular point
 

2311
00:56:08,549 --> 00:56:11,269
particular point
the log and furthermore that the

2312
00:56:11,269 --> 00:56:11,279
the log and furthermore that the
 

2313
00:56:11,279 --> 00:56:14,689
the log and furthermore that the
successive reads have to observe points

2314
00:56:14,689 --> 00:56:14,699
successive reads have to observe points
 

2315
00:56:14,699 --> 00:56:17,179
successive reads have to observe points
that don't go backwards that is if a

2316
00:56:17,179 --> 00:56:17,189
that don't go backwards that is if a
 

2317
00:56:17,189 --> 00:56:18,739
that don't go backwards that is if a
client issues one read and then another

2318
00:56:18,739 --> 00:56:18,749
client issues one read and then another
 

2319
00:56:18,749 --> 00:56:20,359
client issues one read and then another
read and the first read executes at this

2320
00:56:20,359 --> 00:56:20,369
read and the first read executes at this
 

2321
00:56:20,369 --> 00:56:21,919
read and the first read executes at this
point in the log the second read is that

2322
00:56:21,919 --> 00:56:21,929
point in the log the second read is that
 

2323
00:56:21,929 --> 00:56:24,769
point in the log the second read is that
you know allowed to execute it the same

2324
00:56:24,769 --> 00:56:24,779
you know allowed to execute it the same
 

2325
00:56:24,779 --> 00:56:26,509
you know allowed to execute it the same
or later points in the log but not

2326
00:56:26,509 --> 00:56:26,519
or later points in the log but not
 

2327
00:56:26,519 --> 00:56:29,779
or later points in the log but not
allowed to see a previous state by issue

2328
00:56:29,779 --> 00:56:29,789
allowed to see a previous state by issue
 

2329
00:56:29,789 --> 00:56:30,949
allowed to see a previous state by issue
one read and then another read the

2330
00:56:30,949 --> 00:56:30,959
one read and then another read the
 

2331
00:56:30,959 --> 00:56:32,809
one read and then another read the
second read has to see a state that's at

2332
00:56:32,809 --> 00:56:32,819
second read has to see a state that's at
 

2333
00:56:32,819 --> 00:56:34,849
second read has to see a state that's at
least as up-to-date as the first state

2334
00:56:34,849 --> 00:56:34,859
least as up-to-date as the first state
 

2335
00:56:34,859 --> 00:56:41,150
least as up-to-date as the first state
and that's a significant fact in that

2336
00:56:41,150 --> 00:56:41,160
and that's a significant fact in that
 

2337
00:56:41,160 --> 00:56:43,009
and that's a significant fact in that
we're gonna harness when we're reasoning

2338
00:56:43,009 --> 00:56:43,019
we're gonna harness when we're reasoning
 

2339
00:56:43,019 --> 00:56:45,799
we're gonna harness when we're reasoning
about how to write correct zookeeper

2340
00:56:45,799 --> 00:56:45,809
about how to write correct zookeeper
 

2341
00:56:45,809 --> 00:56:47,719
about how to write correct zookeeper
applications and where this is

2342
00:56:47,719 --> 00:56:47,729
applications and where this is
 

2343
00:56:47,729 --> 00:56:50,479
applications and where this is
especially exciting is that if the

2344
00:56:50,479 --> 00:56:50,489
especially exciting is that if the
 

2345
00:56:50,489 --> 00:56:52,099
especially exciting is that if the
client is talking to one replica for a

2346
00:56:52,099 --> 00:56:52,109
client is talking to one replica for a
 

2347
00:56:52,109 --> 00:56:54,289
client is talking to one replica for a
while and it issues some reads issue to

2348
00:56:54,289 --> 00:56:54,299
while and it issues some reads issue to
 

2349
00:56:54,299 --> 00:56:56,719
while and it issues some reads issue to
read here and then I read there if this

2350
00:56:56,719 --> 00:56:56,729
read here and then I read there if this
 

2351
00:56:56,729 --> 00:56:59,059
read here and then I read there if this
replica fails and the client needs to

2352
00:56:59,059 --> 00:56:59,069
replica fails and the client needs to
 

2353
00:56:59,069 --> 00:57:00,259
replica fails and the client needs to
start sending its read to another

2354
00:57:00,259 --> 00:57:00,269
start sending its read to another
 

2355
00:57:00,269 --> 00:57:03,890
start sending its read to another
replica that guaranteed this FIFO client

2356
00:57:03,890 --> 00:57:03,900
replica that guaranteed this FIFO client
 

2357
00:57:03,900 --> 00:57:07,130
replica that guaranteed this FIFO client
or a guarantee still holds if the client

2358
00:57:07,130 --> 00:57:07,140
or a guarantee still holds if the client
 

2359
00:57:07,140 --> 00:57:08,989
or a guarantee still holds if the client
switches to a new replica and so that

2360
00:57:08,989 --> 00:57:08,999
switches to a new replica and so that
 

2361
00:57:08,999 --> 00:57:10,669
switches to a new replica and so that
means that if you know before a crash

2362
00:57:10,669 --> 00:57:10,679
means that if you know before a crash
 

2363
00:57:10,679 --> 00:57:13,039
means that if you know before a crash
the client did a read that sort of saw

2364
00:57:13,039 --> 00:57:13,049
the client did a read that sort of saw
 

2365
00:57:13,049 --> 00:57:16,759
the client did a read that sort of saw
state as of this point in the log that

2366
00:57:16,759 --> 00:57:16,769
state as of this point in the log that
 

2367
00:57:16,769 --> 00:57:18,109
state as of this point in the log that
means when the clients wishes to the new

2368
00:57:18,109 --> 00:57:18,119
means when the clients wishes to the new
 

2369
00:57:18,119 --> 00:57:20,900
means when the clients wishes to the new
replicas if it issues another read you

2370
00:57:20,900 --> 00:57:20,910
replicas if it issues another read you
 

2371
00:57:20,910 --> 00:57:22,699
replicas if it issues another read you
know it's its previous read executed

2372
00:57:22,699 --> 00:57:22,709
know it's its previous read executed
 

2373
00:57:22,709 --> 00:57:23,179
know it's its previous read executed
here

2374
00:57:23,179 --> 00:57:23,189
here
 

2375
00:57:23,189 --> 00:57:25,549
here
if a client issues another read that

2376
00:57:25,549 --> 00:57:25,559
if a client issues another read that
 

2377
00:57:25,559 --> 00:57:27,079
if a client issues another read that
read has to execute at this point or

2378
00:57:27,079 --> 00:57:27,089
read has to execute at this point or
 

2379
00:57:27,089 --> 00:57:29,589
read has to execute at this point or
later even though it's switched replicas

2380
00:57:29,589 --> 00:57:29,599
later even though it's switched replicas
 

2381
00:57:29,599 --> 00:57:32,509
later even though it's switched replicas
and you know the way this works is that

2382
00:57:32,509 --> 00:57:32,519
and you know the way this works is that
 

2383
00:57:32,519 --> 00:57:35,779
and you know the way this works is that
each of these log entries is tagged by

2384
00:57:35,779 --> 00:57:35,789
each of these log entries is tagged by
 

2385
00:57:35,789 --> 00:57:39,709
each of these log entries is tagged by
the leader tags it with a Z X ID which

2386
00:57:39,709 --> 00:57:39,719
the leader tags it with a Z X ID which
 

2387
00:57:39,719 --> 00:57:42,069
the leader tags it with a Z X ID which
is basically just a entry number

2388
00:57:42,069 --> 00:57:42,079
is basically just a entry number
 

2389
00:57:42,079 --> 00:57:45,380
is basically just a entry number
whenever a replica responds to a client

2390
00:57:45,380 --> 00:57:45,390
whenever a replica responds to a client
 

2391
00:57:45,390 --> 00:57:47,839
whenever a replica responds to a client
read request it you know executed the

2392
00:57:47,839 --> 00:57:47,849
read request it you know executed the
 

2393
00:57:47,849 --> 00:57:49,339
read request it you know executed the
request at a particular point and the

2394
00:57:49,339 --> 00:57:49,349
request at a particular point and the
 

2395
00:57:49,349 --> 00:57:52,969
request at a particular point and the
replica responds with the Z X ID of the

2396
00:57:52,969 --> 00:57:52,979
replica responds with the Z X ID of the
 

2397
00:57:52,979 --> 00:57:54,589
replica responds with the Z X ID of the
immediately preceding log entry back to

2398
00:57:54,589 --> 00:57:54,599
immediately preceding log entry back to
 

2399
00:57:54,599 --> 00:57:57,229
immediately preceding log entry back to
the client the client remembers this was

2400
00:57:57,229 --> 00:57:57,239
the client the client remembers this was
 

2401
00:57:57,239 --> 00:58:00,410
the client the client remembers this was
the exid of the most recent data you

2402
00:58:00,410 --> 00:58:00,420
the exid of the most recent data you
 

2403
00:58:00,420 --> 00:58:01,849
the exid of the most recent data you
know is the highest z x idea i've ever

2404
00:58:01,849 --> 00:58:01,859
know is the highest z x idea i've ever
 

2405
00:58:01,859 --> 00:58:04,819
know is the highest z x idea i've ever
seen and when the client sends a request

2406
00:58:04,819 --> 00:58:04,829
seen and when the client sends a request
 

2407
00:58:04,829 --> 00:58:07,489
seen and when the client sends a request
to the same or a different replica it

2408
00:58:07,489 --> 00:58:07,499
to the same or a different replica it
 

2409
00:58:07,499 --> 00:58:09,769
to the same or a different replica it
accompanies their request with that

2410
00:58:09,769 --> 00:58:09,779
accompanies their request with that
 

2411
00:58:09,779 --> 00:58:11,719
accompanies their request with that
highest CX ID has ever seen and that

2412
00:58:11,719 --> 00:58:11,729
highest CX ID has ever seen and that
 

2413
00:58:11,729 --> 00:58:14,150
highest CX ID has ever seen and that
tells this other replica aha you know i

2414
00:58:14,150 --> 00:58:14,160
tells this other replica aha you know i
 

2415
00:58:14,160 --> 00:58:16,669
tells this other replica aha you know i
need to respond to that request with

2416
00:58:16,669 --> 00:58:16,679
need to respond to that request with
 

2417
00:58:16,679 --> 00:58:19,669
need to respond to that request with
data that's at least relative to this

2418
00:58:19,669 --> 00:58:19,679
data that's at least relative to this
 

2419
00:58:19,679 --> 00:58:21,180
data that's at least relative to this
point in a log

2420
00:58:21,180 --> 00:58:21,190
point in a log
 

2421
00:58:21,190 --> 00:58:22,829
point in a log
and that's interesting if this you know

2422
00:58:22,829 --> 00:58:22,839
and that's interesting if this you know
 

2423
00:58:22,839 --> 00:58:25,079
and that's interesting if this you know
this replicas not up this second replica

2424
00:58:25,079 --> 00:58:25,089
this replicas not up this second replica
 

2425
00:58:25,089 --> 00:58:27,990
this replicas not up this second replica
is even less up to date yes was then

2426
00:58:27,990 --> 00:58:28,000
is even less up to date yes was then
 

2427
00:58:28,000 --> 00:58:29,910
is even less up to date yes was then
received any of these but it receives a

2428
00:58:29,910 --> 00:58:29,920
received any of these but it receives a
 

2429
00:58:29,920 --> 00:58:31,260
received any of these but it receives a
request from a client the client says oh

2430
00:58:31,260 --> 00:58:31,270
request from a client the client says oh
 

2431
00:58:31,270 --> 00:58:34,620
request from a client the client says oh
gosh the last read I did executed this

2432
00:58:34,620 --> 00:58:34,630
gosh the last read I did executed this
 

2433
00:58:34,630 --> 00:58:36,329
gosh the last read I did executed this
spot in the log and some other replica

2434
00:58:36,329 --> 00:58:36,339
spot in the log and some other replica
 

2435
00:58:36,339 --> 00:58:38,940
spot in the log and some other replica
this replica needs to wait until it's

2436
00:58:38,940 --> 00:58:38,950
this replica needs to wait until it's
 

2437
00:58:38,950 --> 00:58:41,279
this replica needs to wait until it's
gotten the entire log up to this point

2438
00:58:41,279 --> 00:58:41,289
gotten the entire log up to this point
 

2439
00:58:41,289 --> 00:58:42,809
gotten the entire log up to this point
before it's allowed to respond to the

2440
00:58:42,809 --> 00:58:42,819
before it's allowed to respond to the
 

2441
00:58:42,819 --> 00:58:46,529
before it's allowed to respond to the
client and I'm not sure exactly how that

2442
00:58:46,529 --> 00:58:46,539
client and I'm not sure exactly how that
 

2443
00:58:46,539 --> 00:58:48,299
client and I'm not sure exactly how that
works but either the replicas just

2444
00:58:48,299 --> 00:58:48,309
works but either the replicas just
 

2445
00:58:48,309 --> 00:58:51,059
works but either the replicas just
delays responding to the read or maybe

2446
00:58:51,059 --> 00:58:51,069
delays responding to the read or maybe
 

2447
00:58:51,069 --> 00:58:52,500
delays responding to the read or maybe
it rejects the read and says look I just

2448
00:58:52,500 --> 00:58:52,510
it rejects the read and says look I just
 

2449
00:58:52,510 --> 00:58:53,760
it rejects the read and says look I just
don't know the information talk to

2450
00:58:53,760 --> 00:58:53,770
don't know the information talk to
 

2451
00:58:53,770 --> 00:58:55,049
don't know the information talk to
somebody else or talk to me later

2452
00:58:55,049 --> 00:58:55,059
somebody else or talk to me later
 

2453
00:58:55,059 --> 00:58:57,270
somebody else or talk to me later
where's eventually the you know this

2454
00:58:57,270 --> 00:58:57,280
where's eventually the you know this
 

2455
00:58:57,280 --> 00:58:59,279
where's eventually the you know this
replica will catch up if it's connected

2456
00:58:59,279 --> 00:58:59,289
replica will catch up if it's connected
 

2457
00:58:59,289 --> 00:59:01,200
replica will catch up if it's connected
to the leader and then you won't be able

2458
00:59:01,200 --> 00:59:01,210
to the leader and then you won't be able
 

2459
00:59:01,210 --> 00:59:04,109
to the leader and then you won't be able
to respond

2460
00:59:04,109 --> 00:59:04,119

 

2461
00:59:04,119 --> 00:59:06,720

okay so reads are ordered they only go

2462
00:59:06,720 --> 00:59:06,730
okay so reads are ordered they only go
 

2463
00:59:06,730 --> 00:59:08,940
okay so reads are ordered they only go
forward in time or only go forward in

2464
00:59:08,940 --> 00:59:08,950
forward in time or only go forward in
 

2465
00:59:08,950 --> 00:59:12,660
forward in time or only go forward in
sort of log order and a further thing

2466
00:59:12,660 --> 00:59:12,670
sort of log order and a further thing
 

2467
00:59:12,670 --> 00:59:14,130
sort of log order and a further thing
which I believe is true about reason

2468
00:59:14,130 --> 00:59:14,140
which I believe is true about reason
 

2469
00:59:14,140 --> 00:59:18,029
which I believe is true about reason
rights is that reads and writes the FIFO

2470
00:59:18,029 --> 00:59:18,039
rights is that reads and writes the FIFO
 

2471
00:59:18,039 --> 00:59:20,370
rights is that reads and writes the FIFO
client order applies to all of a clients

2472
00:59:20,370 --> 00:59:20,380
client order applies to all of a clients
 

2473
00:59:20,380 --> 00:59:22,740
client order applies to all of a clients
all of a single clients requests so if I

2474
00:59:22,740 --> 00:59:22,750
all of a single clients requests so if I
 

2475
00:59:22,750 --> 00:59:25,349
all of a single clients requests so if I
do a write from a client and I send a

2476
00:59:25,349 --> 00:59:25,359
do a write from a client and I send a
 

2477
00:59:25,359 --> 00:59:28,200
do a write from a client and I send a
write to the leader it takes time before

2478
00:59:28,200 --> 00:59:28,210
write to the leader it takes time before
 

2479
00:59:28,210 --> 00:59:29,819
write to the leader it takes time before
that write is sent out committed

2480
00:59:29,819 --> 00:59:29,829
that write is sent out committed
 

2481
00:59:29,829 --> 00:59:31,349
that write is sent out committed
whatever so I may send it right to the

2482
00:59:31,349 --> 00:59:31,359
whatever so I may send it right to the
 

2483
00:59:31,359 --> 00:59:33,089
whatever so I may send it right to the
leader the leader hasn't processed it or

2484
00:59:33,089 --> 00:59:33,099
leader the leader hasn't processed it or
 

2485
00:59:33,099 --> 00:59:36,650
leader the leader hasn't processed it or
committed it yet and then I send a read

2486
00:59:36,650 --> 00:59:36,660
committed it yet and then I send a read
 

2487
00:59:36,660 --> 00:59:39,779
committed it yet and then I send a read
to a replica the read may have to stall

2488
00:59:39,779 --> 00:59:39,789
to a replica the read may have to stall
 

2489
00:59:39,789 --> 00:59:41,730
to a replica the read may have to stall
you know in order to guarantee FIFO

2490
00:59:41,730 --> 00:59:41,740
you know in order to guarantee FIFO
 

2491
00:59:41,740 --> 00:59:43,769
you know in order to guarantee FIFO
client order the read and they have to

2492
00:59:43,769 --> 00:59:43,779
client order the read and they have to
 

2493
00:59:43,779 --> 00:59:45,900
client order the read and they have to
stall until this client has actually

2494
00:59:45,900 --> 00:59:45,910
stall until this client has actually
 

2495
00:59:45,910 --> 00:59:48,720
stall until this client has actually
seen and executed the previous the

2496
00:59:48,720 --> 00:59:48,730
seen and executed the previous the
 

2497
00:59:48,730 --> 00:59:52,019
seen and executed the previous the
client's previous write operation so

2498
00:59:52,019 --> 00:59:52,029
client's previous write operation so
 

2499
00:59:52,029 --> 00:59:53,970
client's previous write operation so
that's a consequence of this type of

2500
00:59:53,970 --> 00:59:53,980
that's a consequence of this type of
 

2501
00:59:53,980 --> 00:59:55,920
that's a consequence of this type of
client order is that a reason rights are

2502
00:59:55,920 --> 00:59:55,930
client order is that a reason rights are
 

2503
00:59:55,930 --> 00:59:58,109
client order is that a reason rights are
in the same order and you know the way

2504
00:59:58,109 --> 00:59:58,119
in the same order and you know the way
 

2505
00:59:58,119 --> 01:00:00,750
in the same order and you know the way
the most obvious way to see this is if a

2506
01:00:00,750 --> 01:00:00,760
the most obvious way to see this is if a
 

2507
01:00:00,760 --> 01:00:03,390
the most obvious way to see this is if a
client writes a particular piece of data

2508
01:00:03,390 --> 01:00:03,400
client writes a particular piece of data
 

2509
01:00:03,400 --> 01:00:05,640
client writes a particular piece of data
you know sends a write to the leader and

2510
01:00:05,640 --> 01:00:05,650
you know sends a write to the leader and
 

2511
01:00:05,650 --> 01:00:07,680
you know sends a write to the leader and
then immediately does a read of the same

2512
01:00:07,680 --> 01:00:07,690
then immediately does a read of the same
 

2513
01:00:07,690 --> 01:00:09,420
then immediately does a read of the same
piece of data and sends that read to a

2514
01:00:09,420 --> 01:00:09,430
piece of data and sends that read to a
 

2515
01:00:09,430 --> 01:00:11,670
piece of data and sends that read to a
replica boy it better see its own

2516
01:00:11,670 --> 01:00:11,680
replica boy it better see its own
 

2517
01:00:11,680 --> 01:00:13,440
replica boy it better see its own
written value right if I write something

2518
01:00:13,440 --> 01:00:13,450
written value right if I write something
 

2519
01:00:13,450 --> 01:00:16,349
written value right if I write something
to have value 17 and then I do a read

2520
01:00:16,349 --> 01:00:16,359
to have value 17 and then I do a read
 

2521
01:00:16,359 --> 01:00:18,960
to have value 17 and then I do a read
and it doesn't have value 17 then that's

2522
01:00:18,960 --> 01:00:18,970
and it doesn't have value 17 then that's
 

2523
01:00:18,970 --> 01:00:21,660
and it doesn't have value 17 then that's
just bizarre and it's evidence that gosh

2524
01:00:21,660 --> 01:00:21,670
just bizarre and it's evidence that gosh
 

2525
01:00:21,670 --> 01:00:23,730
just bizarre and it's evidence that gosh
the system was not executing my requests

2526
01:00:23,730 --> 01:00:23,740
the system was not executing my requests
 

2527
01:00:23,740 --> 01:00:25,289
the system was not executing my requests
in order because then it would have

2528
01:00:25,289 --> 01:00:25,299
in order because then it would have
 

2529
01:00:25,299 --> 01:00:27,210
in order because then it would have
executed the write and then before the

2530
01:00:27,210 --> 01:00:27,220
executed the write and then before the
 

2531
01:00:27,220 --> 01:00:29,309
executed the write and then before the
read so there must be some funny

2532
01:00:29,309 --> 01:00:29,319
read so there must be some funny
 

2533
01:00:29,319 --> 01:00:31,440
read so there must be some funny
business with the replicas stalling

2534
01:00:31,440 --> 01:00:31,450
business with the replicas stalling
 

2535
01:00:31,450 --> 01:00:33,660
business with the replicas stalling
the client must when it sends a read and

2536
01:00:33,660 --> 01:00:33,670
the client must when it sends a read and
 

2537
01:00:33,670 --> 01:00:35,549
the client must when it sends a read and
say look you know I the last write

2538
01:00:35,549 --> 01:00:35,559
say look you know I the last write
 

2539
01:00:35,559 --> 01:00:37,259
say look you know I the last write
request I sent a leader with ZX ID

2540
01:00:37,259 --> 01:00:37,269
request I sent a leader with ZX ID
 

2541
01:00:37,269 --> 01:00:39,720
request I sent a leader with ZX ID
something in this replica has to wait

2542
01:00:39,720 --> 01:00:39,730
something in this replica has to wait
 

2543
01:00:39,730 --> 01:00:53,650
something in this replica has to wait
till it sees that I'm the leader yes

2544
01:00:53,650 --> 01:00:53,660

 

2545
01:00:53,660 --> 01:00:56,380

oh absolutely so I think what you're

2546
01:00:56,380 --> 01:00:56,390
oh absolutely so I think what you're
 

2547
01:00:56,390 --> 01:00:58,240
oh absolutely so I think what you're
observing is that a read from a replica

2548
01:00:58,240 --> 01:00:58,250
observing is that a read from a replica
 

2549
01:00:58,250 --> 01:01:00,870
observing is that a read from a replica
may not see the latest data so the

2550
01:01:00,870 --> 01:01:00,880
may not see the latest data so the
 

2551
01:01:00,880 --> 01:01:03,640
may not see the latest data so the
leader may have sent out C to a majority

2552
01:01:03,640 --> 01:01:03,650
leader may have sent out C to a majority
 

2553
01:01:03,650 --> 01:01:06,880
leader may have sent out C to a majority
of replicas and committed it and the

2554
01:01:06,880 --> 01:01:06,890
of replicas and committed it and the
 

2555
01:01:06,890 --> 01:01:08,920
of replicas and committed it and the
majority may have executed it but if our

2556
01:01:08,920 --> 01:01:08,930
majority may have executed it but if our
 

2557
01:01:08,930 --> 01:01:10,630
majority may have executed it but if our
replica that we're talking wasn't in

2558
01:01:10,630 --> 01:01:10,640
replica that we're talking wasn't in
 

2559
01:01:10,640 --> 01:01:12,700
replica that we're talking wasn't in
that majority maybe this replica doesn't

2560
01:01:12,700 --> 01:01:12,710
that majority maybe this replica doesn't
 

2561
01:01:12,710 --> 01:01:14,109
that majority maybe this replica doesn't
have the latest data and that just is

2562
01:01:14,109 --> 01:01:14,119
have the latest data and that just is
 

2563
01:01:14,119 --> 01:01:17,890
have the latest data and that just is
the way zoo keeper works and so it does

2564
01:01:17,890 --> 01:01:17,900
the way zoo keeper works and so it does
 

2565
01:01:17,900 --> 01:01:20,319
the way zoo keeper works and so it does
not guarantee that we'd see the latest

2566
01:01:20,319 --> 01:01:20,329
not guarantee that we'd see the latest
 

2567
01:01:20,329 --> 01:01:23,890
not guarantee that we'd see the latest
data so if there there is a guarantee

2568
01:01:23,890 --> 01:01:23,900
data so if there there is a guarantee
 

2569
01:01:23,900 --> 01:01:25,329
data so if there there is a guarantee
about readwrite ordering but it's only

2570
01:01:25,329 --> 01:01:25,339
about readwrite ordering but it's only
 

2571
01:01:25,339 --> 01:01:28,839
about readwrite ordering but it's only
per client so if I send a write in and

2572
01:01:28,839 --> 01:01:28,849
per client so if I send a write in and
 

2573
01:01:28,849 --> 01:01:31,870
per client so if I send a write in and
then I read that data the system

2574
01:01:31,870 --> 01:01:31,880
then I read that data the system
 

2575
01:01:31,880 --> 01:01:34,059
then I read that data the system
guarantees that my bead observes my

2576
01:01:34,059 --> 01:01:34,069
guarantees that my bead observes my
 

2577
01:01:34,069 --> 01:01:37,029
guarantees that my bead observes my
right if you send a right in and then I

2578
01:01:37,029 --> 01:01:37,039
right if you send a right in and then I
 

2579
01:01:37,039 --> 01:01:39,910
right if you send a right in and then I
read the data that you wrote this isn't

2580
01:01:39,910 --> 01:01:39,920
read the data that you wrote this isn't
 

2581
01:01:39,920 --> 01:01:43,019
read the data that you wrote this isn't
does not guarantee that I see your right

2582
01:01:43,019 --> 01:01:43,029
does not guarantee that I see your right
 

2583
01:01:43,029 --> 01:01:46,059
does not guarantee that I see your right
and that's and you know that's like the

2584
01:01:46,059 --> 01:01:46,069
and that's and you know that's like the
 

2585
01:01:46,069 --> 01:01:50,109
and that's and you know that's like the
foundation of how they get speed up for

2586
01:01:50,109 --> 01:01:50,119
foundation of how they get speed up for
 

2587
01:01:50,119 --> 01:01:51,460
foundation of how they get speed up for
reads proportional to the number of

2588
01:01:51,460 --> 01:01:51,470
reads proportional to the number of
 

2589
01:01:51,470 --> 01:01:58,550
reads proportional to the number of
replicas

2590
01:01:58,550 --> 01:01:58,560

 

2591
01:01:58,560 --> 01:02:00,890

but I would say the system isn't

2592
01:02:00,890 --> 01:02:00,900
but I would say the system isn't
 

2593
01:02:00,900 --> 01:02:04,550
but I would say the system isn't
linearizable and and but it is not that

2594
01:02:04,550 --> 01:02:04,560
linearizable and and but it is not that
 

2595
01:02:04,560 --> 01:02:07,070
linearizable and and but it is not that
it has no properties then the rights are

2596
01:02:07,070 --> 01:02:07,080
it has no properties then the rights are
 

2597
01:02:07,080 --> 01:02:09,110
it has no properties then the rights are
certainly many all right all rights from

2598
01:02:09,110 --> 01:02:09,120
certainly many all right all rights from
 

2599
01:02:09,120 --> 01:02:11,780
certainly many all right all rights from
all clients form some one at a time

2600
01:02:11,780 --> 01:02:11,790
all clients form some one at a time
 

2601
01:02:11,790 --> 01:02:13,940
all clients form some one at a time
sequence so that's a sense in which the

2602
01:02:13,940 --> 01:02:13,950
sequence so that's a sense in which the
 

2603
01:02:13,950 --> 01:02:16,160
sequence so that's a sense in which the
rights all rights are the knee risible

2604
01:02:16,160 --> 01:02:16,170
rights all rights are the knee risible
 

2605
01:02:16,170 --> 01:02:21,250
rights all rights are the knee risible
and each individual clients operations

2606
01:02:21,250 --> 01:02:21,260
and each individual clients operations
 

2607
01:02:21,260 --> 01:02:26,990
and each individual clients operations
may be this means linearizable also it

2608
01:02:26,990 --> 01:02:27,000
may be this means linearizable also it
 

2609
01:02:27,000 --> 01:02:29,330
may be this means linearizable also it
may you know this this probably means

2610
01:02:29,330 --> 01:02:29,340
may you know this this probably means
 

2611
01:02:29,340 --> 01:02:31,040
may you know this this probably means
that each individual clients operations

2612
01:02:31,040 --> 01:02:31,050
that each individual clients operations
 

2613
01:02:31,050 --> 01:02:32,270
that each individual clients operations
are linearize well though I'm not quite

2614
01:02:32,270 --> 01:02:32,280
are linearize well though I'm not quite
 

2615
01:02:32,280 --> 01:02:48,800
are linearize well though I'm not quite
sure you know I'm actually not sure how

2616
01:02:48,800 --> 01:02:48,810
sure you know I'm actually not sure how
 

2617
01:02:48,810 --> 01:02:50,810
sure you know I'm actually not sure how
it works but that's a reasonable

2618
01:02:50,810 --> 01:02:50,820
it works but that's a reasonable
 

2619
01:02:50,820 --> 01:02:52,190
it works but that's a reasonable
supposition then when I send in an

2620
01:02:52,190 --> 01:02:52,200
supposition then when I send in an
 

2621
01:02:52,200 --> 01:02:54,650
supposition then when I send in an
asynchronous right the system doesn't

2622
01:02:54,650 --> 01:02:54,660
asynchronous right the system doesn't
 

2623
01:02:54,660 --> 01:02:56,180
asynchronous right the system doesn't
execute it yet but it does reply to me

2624
01:02:56,180 --> 01:02:56,190
execute it yet but it does reply to me
 

2625
01:02:56,190 --> 01:02:57,260
execute it yet but it does reply to me
saying yeah you know I got your right

2626
01:02:57,260 --> 01:02:57,270
saying yeah you know I got your right
 

2627
01:02:57,270 --> 01:02:59,060
saying yeah you know I got your right
and here's this yaks ID that it will

2628
01:02:59,060 --> 01:02:59,070
and here's this yaks ID that it will
 

2629
01:02:59,070 --> 01:03:03,080
and here's this yaks ID that it will
have if it's committed I just like start

2630
01:03:03,080 --> 01:03:03,090
have if it's committed I just like start
 

2631
01:03:03,090 --> 01:03:04,910
have if it's committed I just like start
return so that's a reasonable theory I

2632
01:03:04,910 --> 01:03:04,920
return so that's a reasonable theory I
 

2633
01:03:04,920 --> 01:03:06,350
return so that's a reasonable theory I
don't actually know how it does it and

2634
01:03:06,350 --> 01:03:06,360
don't actually know how it does it and
 

2635
01:03:06,360 --> 01:03:11,030
don't actually know how it does it and
then the client if it doesn't read needs

2636
01:03:11,030 --> 01:03:11,040
then the client if it doesn't read needs
 

2637
01:03:11,040 --> 01:03:12,320
then the client if it doesn't read needs
to tell the replicas look you know

2638
01:03:12,320 --> 01:03:12,330
to tell the replicas look you know
 

2639
01:03:12,330 --> 01:03:31,820
to tell the replicas look you know
that's right I did you know if I do a

2640
01:03:31,820 --> 01:03:31,830
that's right I did you know if I do a
 

2641
01:03:31,830 --> 01:03:42,020
that's right I did you know if I do a
read of the data is of the operation

2642
01:03:42,020 --> 01:03:42,030
read of the data is of the operation
 

2643
01:03:42,030 --> 01:03:43,730
read of the data is of the operation
okay so if you send a read to a replica

2644
01:03:43,730 --> 01:03:43,740
okay so if you send a read to a replica
 

2645
01:03:43,740 --> 01:03:45,590
okay so if you send a read to a replica
the replicas in return you that you know

2646
01:03:45,590 --> 01:03:45,600
the replicas in return you that you know
 

2647
01:03:45,600 --> 01:03:47,300
the replicas in return you that you know
really it's a read from this table is

2648
01:03:47,300 --> 01:03:47,310
really it's a read from this table is
 

2649
01:03:47,310 --> 01:03:49,580
really it's a read from this table is
what your no way notionally what the

2650
01:03:49,580 --> 01:03:49,590
what your no way notionally what the
 

2651
01:03:49,590 --> 01:03:51,230
what your no way notionally what the
client thinks it's doing so you client

2652
01:03:51,230 --> 01:03:51,240
client thinks it's doing so you client
 

2653
01:03:51,240 --> 01:03:52,280
client thinks it's doing so you client
says all I want to read this row from

2654
01:03:52,280 --> 01:03:52,290
says all I want to read this row from
 

2655
01:03:52,290 --> 01:03:54,380
says all I want to read this row from
this table the server this replica sends

2656
01:03:54,380 --> 01:03:54,390
this table the server this replica sends
 

2657
01:03:54,390 --> 01:03:56,300
this table the server this replica sends
back its current value for that table

2658
01:03:56,300 --> 01:03:56,310
back its current value for that table
 

2659
01:03:56,310 --> 01:04:00,260
back its current value for that table
plus the GX ID of the last operation

2660
01:04:00,260 --> 01:04:00,270
plus the GX ID of the last operation
 

2661
01:04:00,270 --> 01:04:06,560
plus the GX ID of the last operation
that updated that table

2662
01:04:06,560 --> 01:04:06,570

 

2663
01:04:06,570 --> 01:04:10,100

yeah so there's so actually I'm I'm not

2664
01:04:10,100 --> 01:04:10,110
yeah so there's so actually I'm I'm not
 

2665
01:04:10,110 --> 01:04:13,550
yeah so there's so actually I'm I'm not
prepared to so the the two things that

2666
01:04:13,550 --> 01:04:13,560
prepared to so the the two things that
 

2667
01:04:13,560 --> 01:04:14,900
prepared to so the the two things that
would make sense and I think either of

2668
01:04:14,900 --> 01:04:14,910
would make sense and I think either of
 

2669
01:04:14,910 --> 01:04:17,330
would make sense and I think either of
them would be okay is the server could

2670
01:04:17,330 --> 01:04:17,340
them would be okay is the server could
 

2671
01:04:17,340 --> 01:04:20,300
them would be okay is the server could
track this yet for every table row the

2672
01:04:20,300 --> 01:04:20,310
track this yet for every table row the
 

2673
01:04:20,310 --> 01:04:22,370
track this yet for every table row the
ZX ID of the last right operation that

2674
01:04:22,370 --> 01:04:22,380
ZX ID of the last right operation that
 

2675
01:04:22,380 --> 01:04:25,130
ZX ID of the last right operation that
touched it or it could just to all read

2676
01:04:25,130 --> 01:04:25,140
touched it or it could just to all read
 

2677
01:04:25,140 --> 01:04:27,860
touched it or it could just to all read
requests returned the ZX ID as a last

2678
01:04:27,860 --> 01:04:27,870
requests returned the ZX ID as a last
 

2679
01:04:27,870 --> 01:04:29,090
requests returned the ZX ID as a last
committed operation in its log

2680
01:04:29,090 --> 01:04:29,100
committed operation in its log
 

2681
01:04:29,100 --> 01:04:31,580
committed operation in its log
regardless of whether that was the last

2682
01:04:31,580 --> 01:04:31,590
regardless of whether that was the last
 

2683
01:04:31,590 --> 01:04:34,100
regardless of whether that was the last
operation of touch that row because all

2684
01:04:34,100 --> 01:04:34,110
operation of touch that row because all
 

2685
01:04:34,110 --> 01:04:35,990
operation of touch that row because all
we need to do is make sure that client

2686
01:04:35,990 --> 01:04:36,000
we need to do is make sure that client
 

2687
01:04:36,000 --> 01:04:38,690
we need to do is make sure that client
requests move forward in the order so we

2688
01:04:38,690 --> 01:04:38,700
requests move forward in the order so we
 

2689
01:04:38,700 --> 01:04:40,160
requests move forward in the order so we
just need something to return something

2690
01:04:40,160 --> 01:04:40,170
just need something to return something
 

2691
01:04:40,170 --> 01:04:42,530
just need something to return something
that's greater than or equal to the

2692
01:04:42,530 --> 01:04:42,540
that's greater than or equal to the
 

2693
01:04:42,540 --> 01:04:45,710
that's greater than or equal to the
right that last touched the data that

2694
01:04:45,710 --> 01:04:45,720
right that last touched the data that
 

2695
01:04:45,720 --> 01:04:54,560
right that last touched the data that
the client read all right so these are

2696
01:04:54,560 --> 01:04:54,570
the client read all right so these are
 

2697
01:04:54,570 --> 01:05:01,430
the client read all right so these are
the guarantees so you know we still left

2698
01:05:01,430 --> 01:05:01,440
the guarantees so you know we still left
 

2699
01:05:01,440 --> 01:05:02,360
the guarantees so you know we still left
with a question of whether it's possible

2700
01:05:02,360 --> 01:05:02,370
with a question of whether it's possible
 

2701
01:05:02,370 --> 01:05:04,970
with a question of whether it's possible
to do reasonable programming with this

2702
01:05:04,970 --> 01:05:04,980
to do reasonable programming with this
 

2703
01:05:04,980 --> 01:05:06,770
to do reasonable programming with this
set of guarantees and the answer is well

2704
01:05:06,770 --> 01:05:06,780
set of guarantees and the answer is well
 

2705
01:05:06,780 --> 01:05:08,390
set of guarantees and the answer is well
this you know at a high level this is

2706
01:05:08,390 --> 01:05:08,400
this you know at a high level this is
 

2707
01:05:08,400 --> 01:05:11,030
this you know at a high level this is
not quite as good as linearizable it's a

2708
01:05:11,030 --> 01:05:11,040
not quite as good as linearizable it's a
 

2709
01:05:11,040 --> 01:05:12,320
not quite as good as linearizable it's a
little bit harder to reason about and

2710
01:05:12,320 --> 01:05:12,330
little bit harder to reason about and
 

2711
01:05:12,330 --> 01:05:14,000
little bit harder to reason about and
there's sort of more gotchas like reads

2712
01:05:14,000 --> 01:05:14,010
there's sort of more gotchas like reads
 

2713
01:05:14,010 --> 01:05:15,680
there's sort of more gotchas like reads
can return stale data just can't happen

2714
01:05:15,680 --> 01:05:15,690
can return stale data just can't happen
 

2715
01:05:15,690 --> 01:05:18,500
can return stale data just can't happen
in a linearizable system but it's

2716
01:05:18,500 --> 01:05:18,510
in a linearizable system but it's
 

2717
01:05:18,510 --> 01:05:21,080
in a linearizable system but it's
nevertheless good enough to do to make

2718
01:05:21,080 --> 01:05:21,090
nevertheless good enough to do to make
 

2719
01:05:21,090 --> 01:05:22,790
nevertheless good enough to do to make
it pretty straightforward to reason

2720
01:05:22,790 --> 01:05:22,800
it pretty straightforward to reason
 

2721
01:05:22,800 --> 01:05:27,890
it pretty straightforward to reason
about a lot of things you might want to

2722
01:05:27,890 --> 01:05:27,900
about a lot of things you might want to
 

2723
01:05:27,900 --> 01:05:33,980
about a lot of things you might want to
do with zookeeper so there's a so I'm

2724
01:05:33,980 --> 01:05:33,990
do with zookeeper so there's a so I'm
 

2725
01:05:33,990 --> 01:05:35,510
do with zookeeper so there's a so I'm
gonna try to construct an argument maybe

2726
01:05:35,510 --> 01:05:35,520
gonna try to construct an argument maybe
 

2727
01:05:35,520 --> 01:05:38,030
gonna try to construct an argument maybe
by example of why this is not such a bad

2728
01:05:38,030 --> 01:05:38,040
by example of why this is not such a bad
 

2729
01:05:38,040 --> 01:05:41,120
by example of why this is not such a bad
programming model one reason by the way

2730
01:05:41,120 --> 01:05:41,130
programming model one reason by the way
 

2731
01:05:41,130 --> 01:05:42,620
programming model one reason by the way
is that there's an out there's this

2732
01:05:42,620 --> 01:05:42,630
is that there's an out there's this
 

2733
01:05:42,630 --> 01:05:44,150
is that there's an out there's this
operation called sink which is

2734
01:05:44,150 --> 01:05:44,160
operation called sink which is
 

2735
01:05:44,160 --> 01:05:47,000
operation called sink which is
essentially a write operation and if a

2736
01:05:47,000 --> 01:05:47,010
essentially a write operation and if a
 

2737
01:05:47,010 --> 01:05:49,400
essentially a write operation and if a
client you know supposing I know that

2738
01:05:49,400 --> 01:05:49,410
client you know supposing I know that
 

2739
01:05:49,410 --> 01:05:51,650
client you know supposing I know that
you recently wrote something you being a

2740
01:05:51,650 --> 01:05:51,660
you recently wrote something you being a
 

2741
01:05:51,660 --> 01:05:53,090
you recently wrote something you being a
different client and I want to read what

2742
01:05:53,090 --> 01:05:53,100
different client and I want to read what
 

2743
01:05:53,100 --> 01:05:54,650
different client and I want to read what
you wrote so I actually want fresh data

2744
01:05:54,650 --> 01:05:54,660
you wrote so I actually want fresh data
 

2745
01:05:54,660 --> 01:05:57,770
you wrote so I actually want fresh data
I can send in one of these sink

2746
01:05:57,770 --> 01:05:57,780
I can send in one of these sink
 

2747
01:05:57,780 --> 01:06:03,170
I can send in one of these sink
operations which is effectively well the

2748
01:06:03,170 --> 01:06:03,180
operations which is effectively well the
 

2749
01:06:03,180 --> 01:06:04,550
operations which is effectively well the
sync operation makes its way through the

2750
01:06:04,550 --> 01:06:04,560
sync operation makes its way through the
 

2751
01:06:04,560 --> 01:06:07,880
sync operation makes its way through the
system as if it were a write and you

2752
01:06:07,880 --> 01:06:07,890
system as if it were a write and you
 

2753
01:06:07,890 --> 01:06:09,920
system as if it were a write and you
know finally showing up in the logs of

2754
01:06:09,920 --> 01:06:09,930
know finally showing up in the logs of
 

2755
01:06:09,930 --> 01:06:12,680
know finally showing up in the logs of
the replicas that really at least the

2756
01:06:12,680 --> 01:06:12,690
the replicas that really at least the
 

2757
01:06:12,690 --> 01:06:14,660
the replicas that really at least the
replicas that I'm talking to and then I

2758
01:06:14,660 --> 01:06:14,670
replicas that I'm talking to and then I
 

2759
01:06:14,670 --> 01:06:18,150
replicas that I'm talking to and then I
can come back and do a read and you know

2760
01:06:18,150 --> 01:06:18,160
can come back and do a read and you know
 

2761
01:06:18,160 --> 01:06:20,910
can come back and do a read and you know
I can I can tell the replica basically

2762
01:06:20,910 --> 01:06:20,920
I can I can tell the replica basically
 

2763
01:06:20,920 --> 01:06:23,069
I can I can tell the replica basically
don't serve this read until you've seen

2764
01:06:23,069 --> 01:06:23,079
don't serve this read until you've seen
 

2765
01:06:23,079 --> 01:06:26,069
don't serve this read until you've seen
my last sink and that actually falls out

2766
01:06:26,069 --> 01:06:26,079
my last sink and that actually falls out
 

2767
01:06:26,079 --> 01:06:29,180
my last sink and that actually falls out
naturally from fifl client order if we

2768
01:06:29,180 --> 01:06:29,190
naturally from fifl client order if we
 

2769
01:06:29,190 --> 01:06:33,029
naturally from fifl client order if we
if we countersink as a right then five-o

2770
01:06:33,029 --> 01:06:33,039
if we countersink as a right then five-o
 

2771
01:06:33,039 --> 01:06:34,740
if we countersink as a right then five-o
client order says reads are required to

2772
01:06:34,740 --> 01:06:34,750
client order says reads are required to
 

2773
01:06:34,750 --> 01:06:37,499
client order says reads are required to
see state you know there's as least as

2774
01:06:37,499 --> 01:06:37,509
see state you know there's as least as
 

2775
01:06:37,509 --> 01:06:39,120
see state you know there's as least as
up to date is the last right from that

2776
01:06:39,120 --> 01:06:39,130
up to date is the last right from that
 

2777
01:06:39,130 --> 01:06:41,400
up to date is the last right from that
client and so if I send in a sink and

2778
01:06:41,400 --> 01:06:41,410
client and so if I send in a sink and
 

2779
01:06:41,410 --> 01:06:45,150
client and so if I send in a sink and
then I do read I'm the the system is

2780
01:06:45,150 --> 01:06:45,160
then I do read I'm the the system is
 

2781
01:06:45,160 --> 01:06:47,400
then I do read I'm the the system is
obliged to give me data that's visas up

2782
01:06:47,400 --> 01:06:47,410
obliged to give me data that's visas up
 

2783
01:06:47,410 --> 01:06:49,950
obliged to give me data that's visas up
to date as where my sink fell in the log

2784
01:06:49,950 --> 01:06:49,960
to date as where my sink fell in the log
 

2785
01:06:49,960 --> 01:06:52,259
to date as where my sink fell in the log
order anyway if I need to read

2786
01:06:52,259 --> 01:06:52,269
order anyway if I need to read
 

2787
01:06:52,269 --> 01:06:54,749
order anyway if I need to read
up-to-date data send in a sink then do a

2788
01:06:54,749 --> 01:06:54,759
up-to-date data send in a sink then do a
 

2789
01:06:54,759 --> 01:06:57,620
up-to-date data send in a sink then do a
read and the read is guaranteed to see

2790
01:06:57,620 --> 01:06:57,630
read and the read is guaranteed to see
 

2791
01:06:57,630 --> 01:07:01,410
read and the read is guaranteed to see
data as of the time the same was entered

2792
01:07:01,410 --> 01:07:01,420
data as of the time the same was entered
 

2793
01:07:01,420 --> 01:07:05,130
data as of the time the same was entered
into the log so reasonably fresh so

2794
01:07:05,130 --> 01:07:05,140
into the log so reasonably fresh so
 

2795
01:07:05,140 --> 01:07:06,720
into the log so reasonably fresh so
that's one out but it's an expensive one

2796
01:07:06,720 --> 01:07:06,730
that's one out but it's an expensive one
 

2797
01:07:06,730 --> 01:07:08,549
that's one out but it's an expensive one
because you now we converted a cheap

2798
01:07:08,549 --> 01:07:08,559
because you now we converted a cheap
 

2799
01:07:08,559 --> 01:07:11,490
because you now we converted a cheap
read into the sink operation which

2800
01:07:11,490 --> 01:07:11,500
read into the sink operation which
 

2801
01:07:11,500 --> 01:07:14,099
read into the sink operation which
burned up time on the leader so it's a

2802
01:07:14,099 --> 01:07:14,109
burned up time on the leader so it's a
 

2803
01:07:14,109 --> 01:07:17,849
burned up time on the leader so it's a
no-no if you don't have to do but here's

2804
01:07:17,849 --> 01:07:17,859
no-no if you don't have to do but here's
 

2805
01:07:17,859 --> 01:07:19,440
no-no if you don't have to do but here's
a couple of examples of scenarios that

2806
01:07:19,440 --> 01:07:19,450
a couple of examples of scenarios that
 

2807
01:07:19,450 --> 01:07:23,339
a couple of examples of scenarios that
the paper talks about that the reasoning

2808
01:07:23,339 --> 01:07:23,349
the paper talks about that the reasoning
 

2809
01:07:23,349 --> 01:07:25,650
the paper talks about that the reasoning
about them is simplified or reasonably

2810
01:07:25,650 --> 01:07:25,660
about them is simplified or reasonably
 

2811
01:07:25,660 --> 01:07:27,749
about them is simplified or reasonably
simple given the rules that are here so

2812
01:07:27,749 --> 01:07:27,759
simple given the rules that are here so
 

2813
01:07:27,759 --> 01:07:29,339
simple given the rules that are here so
first I want to talk about the trick in

2814
01:07:29,339 --> 01:07:29,349
first I want to talk about the trick in
 

2815
01:07:29,349 --> 01:07:32,609
first I want to talk about the trick in
section 2.3 of with the ready file where

2816
01:07:32,609 --> 01:07:32,619
section 2.3 of with the ready file where
 

2817
01:07:32,619 --> 01:07:34,799
section 2.3 of with the ready file where
we assume there's some master and the

2818
01:07:34,799 --> 01:07:34,809
we assume there's some master and the
 

2819
01:07:34,809 --> 01:07:36,859
we assume there's some master and the
Masters maintaining a configuration in

2820
01:07:36,859 --> 01:07:36,869
Masters maintaining a configuration in
 

2821
01:07:36,869 --> 01:07:39,180
Masters maintaining a configuration in
zookeeper which is a bunch of files and

2822
01:07:39,180 --> 01:07:39,190
zookeeper which is a bunch of files and
 

2823
01:07:39,190 --> 01:07:41,009
zookeeper which is a bunch of files and
zookeeper that describe you know

2824
01:07:41,009 --> 01:07:41,019
zookeeper that describe you know
 

2825
01:07:41,019 --> 01:07:43,140
zookeeper that describe you know
something about our distributed system

2826
01:07:43,140 --> 01:07:43,150
something about our distributed system
 

2827
01:07:43,150 --> 01:07:45,180
something about our distributed system
like the IP addresses of all the workers

2828
01:07:45,180 --> 01:07:45,190
like the IP addresses of all the workers
 

2829
01:07:45,190 --> 01:07:48,900
like the IP addresses of all the workers
or who the master is or something so we

2830
01:07:48,900 --> 01:07:48,910
or who the master is or something so we
 

2831
01:07:48,910 --> 01:07:51,180
or who the master is or something so we
the master who's updating this

2832
01:07:51,180 --> 01:07:51,190
the master who's updating this
 

2833
01:07:51,190 --> 01:07:52,620
the master who's updating this
configuration and maybe a bunch of

2834
01:07:52,620 --> 01:07:52,630
configuration and maybe a bunch of
 

2835
01:07:52,630 --> 01:07:54,120
configuration and maybe a bunch of
readers that need to read the current

2836
01:07:54,120 --> 01:07:54,130
readers that need to read the current
 

2837
01:07:54,130 --> 01:07:55,950
readers that need to read the current
configuration and need to see it every

2838
01:07:55,950 --> 01:07:55,960
configuration and need to see it every
 

2839
01:07:55,960 --> 01:07:57,809
configuration and need to see it every
time it changes and so the question is

2840
01:07:57,809 --> 01:07:57,819
time it changes and so the question is
 

2841
01:07:57,819 --> 01:07:59,519
time it changes and so the question is
you know can we construct something that

2842
01:07:59,519 --> 01:07:59,529
you know can we construct something that
 

2843
01:07:59,529 --> 01:08:02,339
you know can we construct something that
even though updating the configure even

2844
01:08:02,339 --> 01:08:02,349
even though updating the configure even
 

2845
01:08:02,349 --> 01:08:03,450
even though updating the configure even
though the configuration is split across

2846
01:08:03,450 --> 01:08:03,460
though the configuration is split across
 

2847
01:08:03,460 --> 01:08:05,910
though the configuration is split across
many files in zookeeper we can have the

2848
01:08:05,910 --> 01:08:05,920
many files in zookeeper we can have the
 

2849
01:08:05,920 --> 01:08:09,450
many files in zookeeper we can have the
effect of an atomic update so that

2850
01:08:09,450 --> 01:08:09,460
effect of an atomic update so that
 

2851
01:08:09,460 --> 01:08:11,730
effect of an atomic update so that
workers don't see workers that look at

2852
01:08:11,730 --> 01:08:11,740
workers don't see workers that look at
 

2853
01:08:11,740 --> 01:08:13,109
workers don't see workers that look at
the configuration don't see a sort of

2854
01:08:13,109 --> 01:08:13,119
the configuration don't see a sort of
 

2855
01:08:13,119 --> 01:08:15,829
the configuration don't see a sort of
partially updated configuration but only

2856
01:08:15,829 --> 01:08:15,839
partially updated configuration but only
 

2857
01:08:15,839 --> 01:08:19,829
partially updated configuration but only
a completely updated that's a classic

2858
01:08:19,829 --> 01:08:19,839
a completely updated that's a classic
 

2859
01:08:19,839 --> 01:08:23,459
a completely updated that's a classic
kind of thing that this configuration

2860
01:08:23,459 --> 01:08:23,469
kind of thing that this configuration
 

2861
01:08:23,469 --> 01:08:25,910
kind of thing that this configuration
management that zookeeper people using

2862
01:08:25,910 --> 01:08:25,920
management that zookeeper people using
 

2863
01:08:25,920 --> 01:08:29,760
management that zookeeper people using
zookeeper for so you know looking at the

2864
01:08:29,760 --> 01:08:29,770
zookeeper for so you know looking at the
 

2865
01:08:29,770 --> 01:08:31,919
zookeeper for so you know looking at the
so we're copying what section 2.3

2866
01:08:31,919 --> 01:08:31,929
so we're copying what section 2.3
 

2867
01:08:31,929 --> 01:08:34,800
so we're copying what section 2.3
describes this will say the master is

2868
01:08:34,800 --> 01:08:34,810
describes this will say the master is
 

2869
01:08:34,810 --> 01:08:36,450
describes this will say the master is
doing a bunch of rites to update the

2870
01:08:36,450 --> 01:08:36,460
doing a bunch of rites to update the
 

2871
01:08:36,460 --> 01:08:38,870
doing a bunch of rites to update the
configuration and here's the order that

2872
01:08:38,870 --> 01:08:38,880
configuration and here's the order that
 

2873
01:08:38,880 --> 01:08:41,459
configuration and here's the order that
the master for our distributed system

2874
01:08:41,459 --> 01:08:41,469
the master for our distributed system
 

2875
01:08:41,469 --> 01:08:43,070
the master for our distributed system
does the rites

2876
01:08:43,070 --> 01:08:43,080
does the rites
 

2877
01:08:43,080 --> 01:08:44,939
does the rites
first we're assuming there's some ready

2878
01:08:44,939 --> 01:08:44,949
first we're assuming there's some ready
 

2879
01:08:44,949 --> 01:08:47,669
first we're assuming there's some ready
file a file named ready and if they're

2880
01:08:47,669 --> 01:08:47,679
file a file named ready and if they're
 

2881
01:08:47,679 --> 01:08:49,380
file a file named ready and if they're
ready file exists then the configuration

2882
01:08:49,380 --> 01:08:49,390
ready file exists then the configuration
 

2883
01:08:49,390 --> 01:08:50,669
ready file exists then the configuration
is we're allowed to read the

2884
01:08:50,669 --> 01:08:50,679
is we're allowed to read the
 

2885
01:08:50,679 --> 01:08:52,260
is we're allowed to read the
configuration if they're ready files

2886
01:08:52,260 --> 01:08:52,270
configuration if they're ready files
 

2887
01:08:52,270 --> 01:08:53,880
configuration if they're ready files
missing that means the configuration is

2888
01:08:53,880 --> 01:08:53,890
missing that means the configuration is
 

2889
01:08:53,890 --> 01:08:55,260
missing that means the configuration is
being updated and we shouldn't look at

2890
01:08:55,260 --> 01:08:55,270
being updated and we shouldn't look at
 

2891
01:08:55,270 --> 01:08:57,990
being updated and we shouldn't look at
it so if the master is gonna update the

2892
01:08:57,990 --> 01:08:58,000
it so if the master is gonna update the
 

2893
01:08:58,000 --> 01:08:59,340
it so if the master is gonna update the
configuration file the very first thing

2894
01:08:59,340 --> 01:08:59,350
configuration file the very first thing
 

2895
01:08:59,350 --> 01:09:07,229
configuration file the very first thing
it does is delete the ready file then it

2896
01:09:07,229 --> 01:09:07,239
it does is delete the ready file then it
 

2897
01:09:07,239 --> 01:09:10,559
it does is delete the ready file then it
writes the various files very zookeeper

2898
01:09:10,559 --> 01:09:10,569
writes the various files very zookeeper
 

2899
01:09:10,569 --> 01:09:13,829
writes the various files very zookeeper
files that hold the data for the

2900
01:09:13,829 --> 01:09:13,839
files that hold the data for the
 

2901
01:09:13,839 --> 01:09:15,510
files that hold the data for the
configuration might be a lot of files

2902
01:09:15,510 --> 01:09:15,520
configuration might be a lot of files
 

2903
01:09:15,520 --> 01:09:17,849
configuration might be a lot of files
nose and then when it's completely

2904
01:09:17,849 --> 01:09:17,859
nose and then when it's completely
 

2905
01:09:17,859 --> 01:09:19,530
nose and then when it's completely
updated all the files that make up the

2906
01:09:19,530 --> 01:09:19,540
updated all the files that make up the
 

2907
01:09:19,540 --> 01:09:24,140
updated all the files that make up the
configuration then it creates again

2908
01:09:24,140 --> 01:09:24,150
configuration then it creates again
 

2909
01:09:24,150 --> 01:09:28,370
configuration then it creates again
that's ready file

2910
01:09:28,370 --> 01:09:28,380

 

2911
01:09:28,380 --> 01:09:31,950

alright so so far the semantics are

2912
01:09:31,950 --> 01:09:31,960
alright so so far the semantics are
 

2913
01:09:31,960 --> 01:09:33,660
alright so so far the semantics are
extremely straightforward this is just

2914
01:09:33,660 --> 01:09:33,670
extremely straightforward this is just
 

2915
01:09:33,670 --> 01:09:35,130
extremely straightforward this is just
rights there's only rights here no reads

2916
01:09:35,130 --> 01:09:35,140
rights there's only rights here no reads
 

2917
01:09:35,140 --> 01:09:36,990
rights there's only rights here no reads
rights are guaranteed to execute in

2918
01:09:36,990 --> 01:09:37,000
rights are guaranteed to execute in
 

2919
01:09:37,000 --> 01:09:42,510
rights are guaranteed to execute in
linear order and I guess now we have to

2920
01:09:42,510 --> 01:09:42,520
linear order and I guess now we have to
 

2921
01:09:42,520 --> 01:09:44,399
linear order and I guess now we have to
appeal the fifl client order if the

2922
01:09:44,399 --> 01:09:44,409
appeal the fifl client order if the
 

2923
01:09:44,409 --> 01:09:46,620
appeal the fifl client order if the
master sort of tags these as oh you know

2924
01:09:46,620 --> 01:09:46,630
master sort of tags these as oh you know
 

2925
01:09:46,630 --> 01:09:48,390
master sort of tags these as oh you know
I want my rights to occur in this order

2926
01:09:48,390 --> 01:09:48,400
I want my rights to occur in this order
 

2927
01:09:48,400 --> 01:09:52,260
I want my rights to occur in this order
then the reader is obliged to enter them

2928
01:09:52,260 --> 01:09:52,270
then the reader is obliged to enter them
 

2929
01:09:52,270 --> 01:09:53,849
then the reader is obliged to enter them
into the replicated log in that order

2930
01:09:53,849 --> 01:09:53,859
into the replicated log in that order
 

2931
01:09:53,859 --> 01:09:56,070
into the replicated log in that order
and so though you know the replicas were

2932
01:09:56,070 --> 01:09:56,080
and so though you know the replicas were
 

2933
01:09:56,080 --> 01:09:57,510
and so though you know the replicas were
all dutifully execute these one at a

2934
01:09:57,510 --> 01:09:57,520
all dutifully execute these one at a
 

2935
01:09:57,520 --> 01:09:58,950
all dutifully execute these one at a
time they'll all delete the ready file

2936
01:09:58,950 --> 01:09:58,960
time they'll all delete the ready file
 

2937
01:09:58,960 --> 01:10:01,470
time they'll all delete the ready file
then apply this right in that right and

2938
01:10:01,470 --> 01:10:01,480
then apply this right in that right and
 

2939
01:10:01,480 --> 01:10:03,419
then apply this right in that right and
then create the ready file again so

2940
01:10:03,419 --> 01:10:03,429
then create the ready file again so
 

2941
01:10:03,429 --> 01:10:05,580
then create the ready file again so
these are rights the orders

2942
01:10:05,580 --> 01:10:05,590
these are rights the orders
 

2943
01:10:05,590 --> 01:10:08,760
these are rights the orders
straightforward for the reads though

2944
01:10:08,760 --> 01:10:08,770
straightforward for the reads though
 

2945
01:10:08,770 --> 01:10:13,410
straightforward for the reads though
it's it's maybe a little bit maybe a

2946
01:10:13,410 --> 01:10:13,420
it's it's maybe a little bit maybe a
 

2947
01:10:13,420 --> 01:10:14,399
it's it's maybe a little bit maybe a
little more thinking as required

2948
01:10:14,399 --> 01:10:14,409
little more thinking as required
 

2949
01:10:14,409 --> 01:10:16,140
little more thinking as required
supposing we have some worker that needs

2950
01:10:16,140 --> 01:10:16,150
supposing we have some worker that needs
 

2951
01:10:16,150 --> 01:10:21,899
supposing we have some worker that needs
to read the current configuration we're

2952
01:10:21,899 --> 01:10:21,909
to read the current configuration we're
 

2953
01:10:21,909 --> 01:10:25,229
to read the current configuration we're
going to assume that this worker first

2954
01:10:25,229 --> 01:10:25,239
going to assume that this worker first
 

2955
01:10:25,239 --> 01:10:28,860
going to assume that this worker first
checks to see whether the ready file

2956
01:10:28,860 --> 01:10:28,870
checks to see whether the ready file
 

2957
01:10:28,870 --> 01:10:31,740
checks to see whether the ready file
exists it doesn't exist it's gonna you

2958
01:10:31,740 --> 01:10:31,750
exists it doesn't exist it's gonna you
 

2959
01:10:31,750 --> 01:10:33,540
exists it doesn't exist it's gonna you
know sleep and try again so let's assume

2960
01:10:33,540 --> 01:10:33,550
know sleep and try again so let's assume
 

2961
01:10:33,550 --> 01:10:35,669
know sleep and try again so let's assume
it does exist let's assume we assume

2962
01:10:35,669 --> 01:10:35,679
it does exist let's assume we assume
 

2963
01:10:35,679 --> 01:10:41,189
it does exist let's assume we assume
that the worker checks to see

2964
01:10:41,189 --> 01:10:41,199
that the worker checks to see
 

2965
01:10:41,199 --> 01:10:44,050
that the worker checks to see
if the ready file exists after it's

2966
01:10:44,050 --> 01:10:44,060
if the ready file exists after it's
 

2967
01:10:44,060 --> 01:10:46,630
if the ready file exists after it's
recreated and so you know what this

2968
01:10:46,630 --> 01:10:46,640
recreated and so you know what this
 

2969
01:10:46,640 --> 01:10:48,040
recreated and so you know what this
means now these are all right requests

2970
01:10:48,040 --> 01:10:48,050
means now these are all right requests
 

2971
01:10:48,050 --> 01:10:49,419
means now these are all right requests
sent to the leader this is a read

2972
01:10:49,419 --> 01:10:49,429
sent to the leader this is a read
 

2973
01:10:49,429 --> 01:10:52,840
sent to the leader this is a read
request that's just centrally whatever

2974
01:10:52,840 --> 01:10:52,850
request that's just centrally whatever
 

2975
01:10:52,850 --> 01:10:56,830
request that's just centrally whatever
replica the clients talking to and then

2976
01:10:56,830 --> 01:10:56,840
replica the clients talking to and then
 

2977
01:10:56,840 --> 01:11:00,280
replica the clients talking to and then
if it exists you know it's gonna read f1

2978
01:11:00,280 --> 01:11:00,290
if it exists you know it's gonna read f1
 

2979
01:11:00,290 --> 01:11:07,630
if it exists you know it's gonna read f1
and B that - the interesting thing that

2980
01:11:07,630 --> 01:11:07,640
and B that - the interesting thing that
 

2981
01:11:07,640 --> 01:11:10,419
and B that - the interesting thing that
FIFO client order guarantees here is

2982
01:11:10,419 --> 01:11:10,429
FIFO client order guarantees here is
 

2983
01:11:10,429 --> 01:11:17,590
FIFO client order guarantees here is
that if this returned true that is if

2984
01:11:17,590 --> 01:11:17,600
that if this returned true that is if
 

2985
01:11:17,600 --> 01:11:18,850
that if this returned true that is if
the replica the client was talking to

2986
01:11:18,850 --> 01:11:18,860
the replica the client was talking to
 

2987
01:11:18,860 --> 01:11:21,130
the replica the client was talking to
said yes that file exists then you know

2988
01:11:21,130 --> 01:11:21,140
said yes that file exists then you know
 

2989
01:11:21,140 --> 01:11:24,750
said yes that file exists then you know
as were as that what that means is that

2990
01:11:24,750 --> 01:11:24,760
as were as that what that means is that
 

2991
01:11:24,760 --> 01:11:27,669
as were as that what that means is that
at least with this setup is that as that

2992
01:11:27,669 --> 01:11:27,679
at least with this setup is that as that
 

2993
01:11:27,679 --> 01:11:32,110
at least with this setup is that as that
replica that that replica had actually

2994
01:11:32,110 --> 01:11:32,120
replica that that replica had actually
 

2995
01:11:32,120 --> 01:11:33,870
replica that that replica had actually
seen the recreate of the ready file

2996
01:11:33,870 --> 01:11:33,880
seen the recreate of the ready file
 

2997
01:11:33,880 --> 01:11:38,169
seen the recreate of the ready file
right in order for this exist to see to

2998
01:11:38,169 --> 01:11:38,179
right in order for this exist to see to
 

2999
01:11:38,179 --> 01:11:41,280
right in order for this exist to see to
see the ready file exists and because

3000
01:11:41,280 --> 01:11:41,290
see the ready file exists and because
 

3001
01:11:41,290 --> 01:11:44,260
see the ready file exists and because
successive read operations are required

3002
01:11:44,260 --> 01:11:44,270
successive read operations are required
 

3003
01:11:44,270 --> 01:11:47,439
successive read operations are required
to march along only forwards in the long

3004
01:11:47,439 --> 01:11:47,449
to march along only forwards in the long
 

3005
01:11:47,449 --> 01:11:49,780
to march along only forwards in the long
and never backwards that means that you

3006
01:11:49,780 --> 01:11:49,790
and never backwards that means that you
 

3007
01:11:49,790 --> 01:11:52,180
and never backwards that means that you
know if the replicas the client was

3008
01:11:52,180 --> 01:11:52,190
know if the replicas the client was
 

3009
01:11:52,190 --> 01:11:54,729
know if the replicas the client was
talking to if it's log actually

3010
01:11:54,729 --> 01:11:54,739
talking to if it's log actually
 

3011
01:11:54,739 --> 01:11:56,439
talking to if it's log actually
contained and then it executes this

3012
01:11:56,439 --> 01:11:56,449
contained and then it executes this
 

3013
01:11:56,449 --> 01:11:58,360
contained and then it executes this
creative the ready file that means that

3014
01:11:58,360 --> 01:11:58,370
creative the ready file that means that
 

3015
01:11:58,370 --> 01:12:02,050
creative the ready file that means that
subsequent client reads must move only

3016
01:12:02,050 --> 01:12:02,060
subsequent client reads must move only
 

3017
01:12:02,060 --> 01:12:07,330
subsequent client reads must move only
forward in the sequence of rights you

3018
01:12:07,330 --> 01:12:07,340
forward in the sequence of rights you
 

3019
01:12:07,340 --> 01:12:09,189
forward in the sequence of rights you
know that the leader put into the log so

3020
01:12:09,189 --> 01:12:09,199
know that the leader put into the log so
 

3021
01:12:09,199 --> 01:12:11,560
know that the leader put into the log so
if we saw this ready that means that the

3022
01:12:11,560 --> 01:12:11,570
if we saw this ready that means that the
 

3023
01:12:11,570 --> 01:12:13,600
if we saw this ready that means that the
read occurs that the replica excuse to

3024
01:12:13,600 --> 01:12:13,610
read occurs that the replica excuse to
 

3025
01:12:13,610 --> 01:12:16,149
read occurs that the replica excuse to
read down here somewhere after the right

3026
01:12:16,149 --> 01:12:16,159
read down here somewhere after the right
 

3027
01:12:16,159 --> 01:12:18,130
read down here somewhere after the right
that created the ready and that means

3028
01:12:18,130 --> 01:12:18,140
that created the ready and that means
 

3029
01:12:18,140 --> 01:12:19,689
that created the ready and that means
that the reads are guaranteed to observe

3030
01:12:19,689 --> 01:12:19,699
that the reads are guaranteed to observe
 

3031
01:12:19,699 --> 01:12:22,330
that the reads are guaranteed to observe
the effects of these rights so we do

3032
01:12:22,330 --> 01:12:22,340
the effects of these rights so we do
 

3033
01:12:22,340 --> 01:12:24,160
the effects of these rights so we do
actually get some benefit here some

3034
01:12:24,160 --> 01:12:24,170
actually get some benefit here some
 

3035
01:12:24,170 --> 01:12:25,680
actually get some benefit here some
reasoning benefit from the fact that

3036
01:12:25,680 --> 01:12:25,690
reasoning benefit from the fact that
 

3037
01:12:25,690 --> 01:12:28,149
reasoning benefit from the fact that
even though it's not fully linearizable

3038
01:12:28,149 --> 01:12:28,159
even though it's not fully linearizable
 

3039
01:12:28,159 --> 01:12:30,700
even though it's not fully linearizable
the rights are linearizable and the

3040
01:12:30,700 --> 01:12:30,710
the rights are linearizable and the
 

3041
01:12:30,710 --> 01:12:32,709
the rights are linearizable and the
reads have to read sort of monotonically

3042
01:12:32,709 --> 01:12:32,719
reads have to read sort of monotonically
 

3043
01:12:32,719 --> 01:12:38,110
reads have to read sort of monotonically
move forward in time to the log yes

3044
01:12:38,110 --> 01:12:38,120

 

3045
01:12:38,120 --> 01:12:49,390

[Music]

3046
01:12:49,390 --> 01:12:49,400

 

3047
01:12:49,400 --> 01:12:52,100

yeah so that's a great question so your

3048
01:12:52,100 --> 01:12:52,110
yeah so that's a great question so your
 

3049
01:12:52,110 --> 01:12:54,740
yeah so that's a great question so your
question is well in all this client

3050
01:12:54,740 --> 01:12:54,750
question is well in all this client
 

3051
01:12:54,750 --> 01:12:56,660
question is well in all this client
knows you know if this is the real

3052
01:12:56,660 --> 01:12:56,670
knows you know if this is the real
 

3053
01:12:56,670 --> 01:12:58,460
knows you know if this is the real
scenario that the creators entered in

3054
01:12:58,460 --> 01:12:58,470
scenario that the creators entered in
 

3055
01:12:58,470 --> 01:13:01,790
scenario that the creators entered in
the log and then the read arrives at the

3056
01:13:01,790 --> 01:13:01,800
the log and then the read arrives at the
 

3057
01:13:01,800 --> 01:13:03,500
the log and then the read arrives at the
replica after that replica executed this

3058
01:13:03,500 --> 01:13:03,510
replica after that replica executed this
 

3059
01:13:03,510 --> 01:13:04,550
replica after that replica executed this
creepy ready then everything's

3060
01:13:04,550 --> 01:13:04,560
creepy ready then everything's
 

3061
01:13:04,560 --> 01:13:06,020
creepy ready then everything's
straightforward but there's other

3062
01:13:06,020 --> 01:13:06,030
straightforward but there's other
 

3063
01:13:06,030 --> 01:13:07,520
straightforward but there's other
possibilities for how this stuff was

3064
01:13:07,520 --> 01:13:07,530
possibilities for how this stuff was
 

3065
01:13:07,530 --> 01:13:08,060
possibilities for how this stuff was
interleaved

3066
01:13:08,060 --> 01:13:08,070
interleaved
 

3067
01:13:08,070 --> 01:13:11,650
interleaved
so let's look at a much more troubling

3068
01:13:11,650 --> 01:13:11,660
so let's look at a much more troubling
 

3069
01:13:11,660 --> 01:13:21,560
so let's look at a much more troubling
scenario so the scenario you brought up

3070
01:13:21,560 --> 01:13:21,570
scenario so the scenario you brought up
 

3071
01:13:21,570 --> 01:13:24,740
scenario so the scenario you brought up
which I happen to be prepared to talk

3072
01:13:24,740 --> 01:13:24,750
which I happen to be prepared to talk
 

3073
01:13:24,750 --> 01:13:28,520
which I happen to be prepared to talk
about is that yeah you know the the

3074
01:13:28,520 --> 01:13:28,530
about is that yeah you know the the
 

3075
01:13:28,530 --> 01:13:31,790
about is that yeah you know the the
master at some point executed to a

3076
01:13:31,790 --> 01:13:31,800
master at some point executed to a
 

3077
01:13:31,800 --> 01:13:36,830
master at some point executed to a
delete of ready or you know way back in

3078
01:13:36,830 --> 01:13:36,840
delete of ready or you know way back in
 

3079
01:13:36,840 --> 01:13:40,700
delete of ready or you know way back in
time some previous master this master

3080
01:13:40,700 --> 01:13:40,710
time some previous master this master
 

3081
01:13:40,710 --> 01:13:41,980
time some previous master this master
created the ready file

3082
01:13:41,980 --> 01:13:41,990
created the ready file
 

3083
01:13:41,990 --> 01:13:44,780
created the ready file
you know after it finished updating the

3084
01:13:44,780 --> 01:13:44,790
you know after it finished updating the
 

3085
01:13:44,790 --> 01:13:46,670
you know after it finished updating the
state I say ready for I existed for a

3086
01:13:46,670 --> 01:13:46,680
state I say ready for I existed for a
 

3087
01:13:46,680 --> 01:13:48,020
state I say ready for I existed for a
while then some new master or this

3088
01:13:48,020 --> 01:13:48,030
while then some new master or this
 

3089
01:13:48,030 --> 01:13:48,860
while then some new master or this
master needs to change the

3090
01:13:48,860 --> 01:13:48,870
master needs to change the
 

3091
01:13:48,870 --> 01:13:50,270
master needs to change the
configurations release the ready file

3092
01:13:50,270 --> 01:13:50,280
configurations release the ready file
 

3093
01:13:50,280 --> 01:13:56,260
configurations release the ready file
you know it doesn't right right and

3094
01:13:56,260 --> 01:13:56,270
you know it doesn't right right and
 

3095
01:13:56,270 --> 01:13:58,550
you know it doesn't right right and
what's really troubling is that the

3096
01:13:58,550 --> 01:13:58,560
what's really troubling is that the
 

3097
01:13:58,560 --> 01:14:00,620
what's really troubling is that the
client that needs to read this

3098
01:14:00,620 --> 01:14:00,630
client that needs to read this
 

3099
01:14:00,630 --> 01:14:02,980
client that needs to read this
configuration might have called exists

3100
01:14:02,980 --> 01:14:02,990
configuration might have called exists
 

3101
01:14:02,990 --> 01:14:06,620
configuration might have called exists
to see whether the ready file exists at

3102
01:14:06,620 --> 01:14:06,630
to see whether the ready file exists at
 

3103
01:14:06,630 --> 01:14:12,740
to see whether the ready file exists at
this time all right and you know at this

3104
01:14:12,740 --> 01:14:12,750
this time all right and you know at this
 

3105
01:14:12,750 --> 01:14:14,090
this time all right and you know at this
point in time yeah sure the ready file

3106
01:14:14,090 --> 01:14:14,100
point in time yeah sure the ready file
 

3107
01:14:14,100 --> 01:14:16,400
point in time yeah sure the ready file
exists then time passes and the client

3108
01:14:16,400 --> 01:14:16,410
exists then time passes and the client
 

3109
01:14:16,410 --> 01:14:18,890
exists then time passes and the client
issues the reads for the maybe the

3110
01:14:18,890 --> 01:14:18,900
issues the reads for the maybe the
 

3111
01:14:18,900 --> 01:14:22,190
issues the reads for the maybe the
client reads the first file that makes

3112
01:14:22,190 --> 01:14:22,200
client reads the first file that makes
 

3113
01:14:22,200 --> 01:14:25,490
client reads the first file that makes
up the configuration but maybe it you

3114
01:14:25,490 --> 01:14:25,500
up the configuration but maybe it you
 

3115
01:14:25,500 --> 01:14:26,570
up the configuration but maybe it you
know and then it reads the second file

3116
01:14:26,570 --> 01:14:26,580
know and then it reads the second file
 

3117
01:14:26,580 --> 01:14:29,600
know and then it reads the second file
maybe this file this read comes totally

3118
01:14:29,600 --> 01:14:29,610
maybe this file this read comes totally
 

3119
01:14:29,610 --> 01:14:32,680
maybe this file this read comes totally
after the master has been changing the

3120
01:14:32,680 --> 01:14:32,690
after the master has been changing the
 

3121
01:14:32,690 --> 01:14:35,210
after the master has been changing the
configurations so now this reader has

3122
01:14:35,210 --> 01:14:35,220
configurations so now this reader has
 

3123
01:14:35,220 --> 01:14:38,870
configurations so now this reader has
read this damaged mix of f1 from the old

3124
01:14:38,870 --> 01:14:38,880
read this damaged mix of f1 from the old
 

3125
01:14:38,880 --> 01:14:40,790
read this damaged mix of f1 from the old
configuration and f2 from the new

3126
01:14:40,790 --> 01:14:40,800
configuration and f2 from the new
 

3127
01:14:40,800 --> 01:14:42,020
configuration and f2 from the new
configuration there's no reason to

3128
01:14:42,020 --> 01:14:42,030
configuration there's no reason to
 

3129
01:14:42,030 --> 01:14:44,200
configuration there's no reason to
believe that that's going to contain

3130
01:14:44,200 --> 01:14:44,210
believe that that's going to contain
 

3131
01:14:44,210 --> 01:14:46,340
believe that that's going to contain
anything other than broken information

3132
01:14:46,340 --> 01:14:46,350
anything other than broken information
 

3133
01:14:46,350 --> 01:14:49,310
anything other than broken information
so so this first scenario was great the

3134
01:14:49,310 --> 01:14:49,320
so so this first scenario was great the
 

3135
01:14:49,320 --> 01:14:52,820
so so this first scenario was great the
scenario is a disaster and so now we're

3136
01:14:52,820 --> 01:14:52,830
scenario is a disaster and so now we're
 

3137
01:14:52,830 --> 01:14:54,369
scenario is a disaster and so now we're
starting to get into

3138
01:14:54,369 --> 01:14:54,379
starting to get into
 

3139
01:14:54,379 --> 01:14:57,969
starting to get into
of like serious challenges which a

3140
01:14:57,969 --> 01:14:57,979
of like serious challenges which a
 

3141
01:14:57,979 --> 01:15:01,859
of like serious challenges which a
carefully designed API for coordination

3142
01:15:01,859 --> 01:15:01,869
carefully designed API for coordination
 

3143
01:15:01,869 --> 01:15:05,020
carefully designed API for coordination
between machines in a distributed system

3144
01:15:05,020 --> 01:15:05,030
between machines in a distributed system
 

3145
01:15:05,030 --> 01:15:07,659
between machines in a distributed system
might actually help us solve right

3146
01:15:07,659 --> 01:15:07,669
might actually help us solve right
 

3147
01:15:07,669 --> 01:15:09,699
might actually help us solve right
because like for lab 3 you know you're

3148
01:15:09,699 --> 01:15:09,709
because like for lab 3 you know you're
 

3149
01:15:09,709 --> 01:15:11,589
because like for lab 3 you know you're
gonna build a put get system and a

3150
01:15:11,589 --> 01:15:11,599
gonna build a put get system and a
 

3151
01:15:11,599 --> 01:15:13,889
gonna build a put get system and a
simple lab 3 style put guessed system

3152
01:15:13,889 --> 01:15:13,899
simple lab 3 style put guessed system
 

3153
01:15:13,899 --> 01:15:15,729
simple lab 3 style put guessed system
you know it would run into this problem

3154
01:15:15,729 --> 01:15:15,739
you know it would run into this problem
 

3155
01:15:15,739 --> 01:15:17,679
you know it would run into this problem
too and just does not have any tools to

3156
01:15:17,679 --> 01:15:17,689
too and just does not have any tools to
 

3157
01:15:17,689 --> 01:15:18,310
too and just does not have any tools to
deal with it

3158
01:15:18,310 --> 01:15:18,320
deal with it
 

3159
01:15:18,320 --> 01:15:21,849
deal with it
but the zookeeper API actually is more

3160
01:15:21,849 --> 01:15:21,859
but the zookeeper API actually is more
 

3161
01:15:21,859 --> 01:15:23,919
but the zookeeper API actually is more
clever than this and it can cope with it

3162
01:15:23,919 --> 01:15:23,929
clever than this and it can cope with it
 

3163
01:15:23,929 --> 01:15:27,969
clever than this and it can cope with it
and so what actually happens the way you

3164
01:15:27,969 --> 01:15:27,979
and so what actually happens the way you
 

3165
01:15:27,979 --> 01:15:29,770
and so what actually happens the way you
would actually use ooh keeper is that

3166
01:15:29,770 --> 01:15:29,780
would actually use ooh keeper is that
 

3167
01:15:29,780 --> 01:15:32,589
would actually use ooh keeper is that
when the client sent in this exists

3168
01:15:32,589 --> 01:15:32,599
when the client sent in this exists
 

3169
01:15:32,599 --> 01:15:35,709
when the client sent in this exists
request to ask does this file exist and

3170
01:15:35,709 --> 01:15:35,719
request to ask does this file exist and
 

3171
01:15:35,719 --> 01:15:37,239
request to ask does this file exist and
would say not only does this file exist

3172
01:15:37,239 --> 01:15:37,249
would say not only does this file exist
 

3173
01:15:37,249 --> 01:15:41,560
would say not only does this file exist
but it would say you know tell me if it

3174
01:15:41,560 --> 01:15:41,570
but it would say you know tell me if it
 

3175
01:15:41,570 --> 01:15:44,020
but it would say you know tell me if it
exists even set a watch on that file

3176
01:15:44,020 --> 01:15:44,030
exists even set a watch on that file
 

3177
01:15:44,030 --> 01:15:47,169
exists even set a watch on that file
which means if the files ever deleted or

3178
01:15:47,169 --> 01:15:47,179
which means if the files ever deleted or
 

3179
01:15:47,179 --> 01:15:48,879
which means if the files ever deleted or
if it doesn't exist if it's ever created

3180
01:15:48,879 --> 01:15:48,889
if it doesn't exist if it's ever created
 

3181
01:15:48,889 --> 01:15:51,429
if it doesn't exist if it's ever created
but in this case if it if it is ever

3182
01:15:51,429 --> 01:15:51,439
but in this case if it if it is ever
 

3183
01:15:51,439 --> 01:15:56,489
but in this case if it if it is ever
deleted please send me a notification

3184
01:15:56,489 --> 01:15:56,499

 

3185
01:15:56,499 --> 01:16:01,750

and furthermore the notifications that

3186
01:16:01,750 --> 01:16:01,760
and furthermore the notifications that
 

3187
01:16:01,760 --> 01:16:04,569
and furthermore the notifications that
zookeeper sends you know it's a the

3188
01:16:04,569 --> 01:16:04,579
zookeeper sends you know it's a the
 

3189
01:16:04,579 --> 01:16:05,949
zookeeper sends you know it's a the
reader here it's only talking to some

3190
01:16:05,949 --> 01:16:05,959
reader here it's only talking to some
 

3191
01:16:05,959 --> 01:16:08,199
reader here it's only talking to some
replicas this is all the replicas doing

3192
01:16:08,199 --> 01:16:08,209
replicas this is all the replicas doing
 

3193
01:16:08,209 --> 01:16:09,719
replicas this is all the replicas doing
these things for it the replica

3194
01:16:09,719 --> 01:16:09,729
these things for it the replica
 

3195
01:16:09,729 --> 01:16:13,839
these things for it the replica
guarantees to send a notification for

3196
01:16:13,839 --> 01:16:13,849
guarantees to send a notification for
 

3197
01:16:13,849 --> 01:16:16,659
guarantees to send a notification for
some change to this ready file at the

3198
01:16:16,659 --> 01:16:16,669
some change to this ready file at the
 

3199
01:16:16,669 --> 01:16:20,429
some change to this ready file at the
correct point relative to the responses

3200
01:16:20,429 --> 01:16:20,439
correct point relative to the responses
 

3201
01:16:20,439 --> 01:16:25,629
correct point relative to the responses
to the clients reads and so what that

3202
01:16:25,629 --> 01:16:25,639
to the clients reads and so what that
 

3203
01:16:25,639 --> 01:16:32,379
to the clients reads and so what that
means so you know because that the the

3204
01:16:32,379 --> 01:16:32,389
means so you know because that the the
 

3205
01:16:32,389 --> 01:16:34,509
means so you know because that the the
implication of that is that in this

3206
01:16:34,509 --> 01:16:34,519
implication of that is that in this
 

3207
01:16:34,519 --> 01:16:38,439
implication of that is that in this
scenario in which you know these these

3208
01:16:38,439 --> 01:16:38,449
scenario in which you know these these
 

3209
01:16:38,449 --> 01:16:40,770
scenario in which you know these these
rights sort of fit in here in real time

3210
01:16:40,770 --> 01:16:40,780
rights sort of fit in here in real time
 

3211
01:16:40,780 --> 01:16:44,020
rights sort of fit in here in real time
the guarantee is that if you ask for a

3212
01:16:44,020 --> 01:16:44,030
the guarantee is that if you ask for a
 

3213
01:16:44,030 --> 01:16:45,669
the guarantee is that if you ask for a
watch on something and then you issue

3214
01:16:45,669 --> 01:16:45,679
watch on something and then you issue
 

3215
01:16:45,679 --> 01:16:49,359
watch on something and then you issue
some reads if that replica you're

3216
01:16:49,359 --> 01:16:49,369
some reads if that replica you're
 

3217
01:16:49,369 --> 01:16:51,369
some reads if that replica you're
talking to execute something that should

3218
01:16:51,369 --> 01:16:51,379
talking to execute something that should
 

3219
01:16:51,379 --> 01:16:53,619
talking to execute something that should
trigger the watch in during your

3220
01:16:53,619 --> 01:16:53,629
trigger the watch in during your
 

3221
01:16:53,629 --> 01:16:57,669
trigger the watch in during your
sequence of reads then the replica

3222
01:16:57,669 --> 01:16:57,679
sequence of reads then the replica
 

3223
01:16:57,679 --> 01:16:59,439
sequence of reads then the replica
guarantees to deliver the notification

3224
01:16:59,439 --> 01:16:59,449
guarantees to deliver the notification
 

3225
01:16:59,449 --> 01:17:02,080
guarantees to deliver the notification
about the watch before it responds to

3226
01:17:02,080 --> 01:17:02,090
about the watch before it responds to
 

3227
01:17:02,090 --> 01:17:05,290
about the watch before it responds to
any read that came that you know saw the

3228
01:17:05,290 --> 01:17:05,300
any read that came that you know saw the
 

3229
01:17:05,300 --> 01:17:07,830
any read that came that you know saw the
log after the point

3230
01:17:07,830 --> 01:17:07,840
log after the point
 

3231
01:17:07,840 --> 01:17:10,530
log after the point
of the OP where the operation that

3232
01:17:10,530 --> 01:17:10,540
of the OP where the operation that
 

3233
01:17:10,540 --> 01:17:12,840
of the OP where the operation that
triggered the watch notification

3234
01:17:12,840 --> 01:17:12,850
triggered the watch notification
 

3235
01:17:12,850 --> 01:17:15,310
triggered the watch notification
executed and so this is the log on the

3236
01:17:15,310 --> 01:17:15,320
executed and so this is the log on the
 

3237
01:17:15,320 --> 01:17:18,940
executed and so this is the log on the
replica and so you know if the so that

3238
01:17:18,940 --> 01:17:18,950
replica and so you know if the so that
 

3239
01:17:18,950 --> 01:17:21,640
replica and so you know if the so that
you know the FIFO client ordering will

3240
01:17:21,640 --> 01:17:21,650
you know the FIFO client ordering will
 

3241
01:17:21,650 --> 01:17:23,590
you know the FIFO client ordering will
say you know each client requests must

3242
01:17:23,590 --> 01:17:23,600
say you know each client requests must
 

3243
01:17:23,600 --> 01:17:25,270
say you know each client requests must
fit somewhere into the log apparently

3244
01:17:25,270 --> 01:17:25,280
fit somewhere into the log apparently
 

3245
01:17:25,280 --> 01:17:27,790
fit somewhere into the log apparently
these fit in here in the log what we're

3246
01:17:27,790 --> 01:17:27,800
these fit in here in the log what we're
 

3247
01:17:27,800 --> 01:17:29,920
these fit in here in the log what we're
worried about is that this read occurs

3248
01:17:29,920 --> 01:17:29,930
worried about is that this read occurs
 

3249
01:17:29,930 --> 01:17:32,080
worried about is that this read occurs
here in the log but we set up this watch

3250
01:17:32,080 --> 01:17:32,090
here in the log but we set up this watch
 

3251
01:17:32,090 --> 01:17:34,390
here in the log but we set up this watch
and the guarantee is that will receive

3252
01:17:34,390 --> 01:17:34,400
and the guarantee is that will receive
 

3253
01:17:34,400 --> 01:17:36,490
and the guarantee is that will receive
the note if if somebody deletes this

3254
01:17:36,490 --> 01:17:36,500
the note if if somebody deletes this
 

3255
01:17:36,500 --> 01:17:39,190
the note if if somebody deletes this
file and we can notified then that

3256
01:17:39,190 --> 01:17:39,200
file and we can notified then that
 

3257
01:17:39,200 --> 01:17:40,930
file and we can notified then that
notification will will appear at the

3258
01:17:40,930 --> 01:17:40,940
notification will will appear at the
 

3259
01:17:40,940 --> 01:17:43,600
notification will will appear at the
client before a read that yields

3260
01:17:43,600 --> 01:17:43,610
client before a read that yields
 

3261
01:17:43,610 --> 01:17:48,460
client before a read that yields
anything subsequently in the log will

3262
01:17:48,460 --> 01:17:48,470
anything subsequently in the log will
 

3263
01:17:48,470 --> 01:17:49,930
anything subsequently in the log will
get the notification before we get the

3264
01:17:49,930 --> 01:17:49,940
get the notification before we get the
 

3265
01:17:49,940 --> 01:17:52,360
get the notification before we get the
results of any read that's that saw

3266
01:17:52,360 --> 01:17:52,370
results of any read that's that saw
 

3267
01:17:52,370 --> 01:17:54,880
results of any read that's that saw
something in log after the operation

3268
01:17:54,880 --> 01:17:54,890
something in log after the operation
 

3269
01:17:54,890 --> 01:17:57,070
something in log after the operation
that produced the notification so what

3270
01:17:57,070 --> 01:17:57,080
that produced the notification so what
 

3271
01:17:57,080 --> 01:17:58,810
that produced the notification so what
this means that the delete ready is

3272
01:17:58,810 --> 01:17:58,820
this means that the delete ready is
 

3273
01:17:58,820 --> 01:18:00,640
this means that the delete ready is
gonna since we have a watch on the ready

3274
01:18:00,640 --> 01:18:00,650
gonna since we have a watch on the ready
 

3275
01:18:00,650 --> 01:18:02,320
gonna since we have a watch on the ready
file that elite ready is going to

3276
01:18:02,320 --> 01:18:02,330
file that elite ready is going to
 

3277
01:18:02,330 --> 01:18:05,410
file that elite ready is going to
generate a notification and that

3278
01:18:05,410 --> 01:18:05,420
generate a notification and that
 

3279
01:18:05,420 --> 01:18:07,120
generate a notification and that
notification is guaranteed to be

3280
01:18:07,120 --> 01:18:07,130
notification is guaranteed to be
 

3281
01:18:07,130 --> 01:18:09,990
notification is guaranteed to be
delivered before the read result of f2

3282
01:18:09,990 --> 01:18:10,000
delivered before the read result of f2
 

3283
01:18:10,000 --> 01:18:13,330
delivered before the read result of f2
if f2 was gonna see this second right

3284
01:18:13,330 --> 01:18:13,340
if f2 was gonna see this second right
 

3285
01:18:13,340 --> 01:18:15,370
if f2 was gonna see this second right
and that means that before the reading

3286
01:18:15,370 --> 01:18:15,380
and that means that before the reading
 

3287
01:18:15,380 --> 01:18:17,500
and that means that before the reading
client has finished the sequence in

3288
01:18:17,500 --> 01:18:17,510
client has finished the sequence in
 

3289
01:18:17,510 --> 01:18:19,210
client has finished the sequence in
which it looks at the configuration it's

3290
01:18:19,210 --> 01:18:19,220
which it looks at the configuration it's
 

3291
01:18:19,220 --> 01:18:23,220
which it looks at the configuration it's
guaranteed to see the watch notification

3292
01:18:23,220 --> 01:18:23,230
guaranteed to see the watch notification
 

3293
01:18:23,230 --> 01:18:26,890
guaranteed to see the watch notification
before it sees the results of any write

3294
01:18:26,890 --> 01:18:26,900
before it sees the results of any write
 

3295
01:18:26,900 --> 01:18:29,830
before it sees the results of any write
that happened after this delete that

3296
01:18:29,830 --> 01:18:29,840
that happened after this delete that
 

3297
01:18:29,840 --> 01:18:39,310
that happened after this delete that
triggered the notification

3298
01:18:39,310 --> 01:18:39,320

 

3299
01:18:39,320 --> 01:18:42,500

who generates the watch as well the

3300
01:18:42,500 --> 01:18:42,510
who generates the watch as well the
 

3301
01:18:42,510 --> 01:18:43,760
who generates the watch as well the
replica let's say the client is talking

3302
01:18:43,760 --> 01:18:43,770
replica let's say the client is talking
 

3303
01:18:43,770 --> 01:18:45,649
replica let's say the client is talking
to this replica and it sends in the

3304
01:18:45,649 --> 01:18:45,659
to this replica and it sends in the
 

3305
01:18:45,659 --> 01:18:48,140
to this replica and it sends in the
exists request the exist room has a read

3306
01:18:48,140 --> 01:18:48,150
exists request the exist room has a read
 

3307
01:18:48,150 --> 01:18:49,669
exists request the exist room has a read
only request it sends with his replica

3308
01:18:49,669 --> 01:18:49,679
only request it sends with his replica
 

3309
01:18:49,679 --> 01:18:51,649
only request it sends with his replica
the replica is being painting on the

3310
01:18:51,649 --> 01:18:51,659
the replica is being painting on the
 

3311
01:18:51,659 --> 01:18:53,990
the replica is being painting on the
side a table of watches saying oh you

3312
01:18:53,990 --> 01:18:54,000
side a table of watches saying oh you
 

3313
01:18:54,000 --> 01:18:55,430
side a table of watches saying oh you
know such-and-such a client asked for a

3314
01:18:55,430 --> 01:18:55,440
know such-and-such a client asked for a
 

3315
01:18:55,440 --> 01:18:59,419
know such-and-such a client asked for a
watch on this file and furthermore the

3316
01:18:59,419 --> 01:18:59,429
watch on this file and furthermore the
 

3317
01:18:59,429 --> 01:19:01,580
watch on this file and furthermore the
watch was established at a particular Z

3318
01:19:01,580 --> 01:19:01,590
watch was established at a particular Z
 

3319
01:19:01,590 --> 01:19:03,830
watch was established at a particular Z
X ID that is did a read that client did

3320
01:19:03,830 --> 01:19:03,840
X ID that is did a read that client did
 

3321
01:19:03,840 --> 01:19:05,959
X ID that is did a read that client did
a read with the replica executed the

3322
01:19:05,959 --> 01:19:05,969
a read with the replica executed the
 

3323
01:19:05,969 --> 01:19:07,910
a read with the replica executed the
read at this point in the log and return

3324
01:19:07,910 --> 01:19:07,920
read at this point in the log and return
 

3325
01:19:07,920 --> 01:19:09,620
read at this point in the log and return
results are relative to this point in

3326
01:19:09,620 --> 01:19:09,630
results are relative to this point in
 

3327
01:19:09,630 --> 01:19:12,530
results are relative to this point in
the log members owe that watch is

3328
01:19:12,530 --> 01:19:12,540
the log members owe that watch is
 

3329
01:19:12,540 --> 01:19:14,060
the log members owe that watch is
relative to that point in the log and

3330
01:19:14,060 --> 01:19:14,070
relative to that point in the log and
 

3331
01:19:14,070 --> 01:19:17,390
relative to that point in the log and
then if a delete comes in you know for

3332
01:19:17,390 --> 01:19:17,400
then if a delete comes in you know for
 

3333
01:19:17,400 --> 01:19:20,270
then if a delete comes in you know for
every operation that there s Q so it

3334
01:19:20,270 --> 01:19:20,280
every operation that there s Q so it
 

3335
01:19:20,280 --> 01:19:21,530
every operation that there s Q so it
looks in this little table it says aha

3336
01:19:21,530 --> 01:19:21,540
looks in this little table it says aha
 

3337
01:19:21,540 --> 01:19:24,530
looks in this little table it says aha
you know the a there was a watch on that

3338
01:19:24,530 --> 01:19:24,540
you know the a there was a watch on that
 

3339
01:19:24,540 --> 01:19:26,990
you know the a there was a watch on that
file and maybe it's indexed by hash of

3340
01:19:26,990 --> 01:19:27,000
file and maybe it's indexed by hash of
 

3341
01:19:27,000 --> 01:19:37,430
file and maybe it's indexed by hash of
filename or something

3342
01:19:37,430 --> 01:19:37,440

 

3343
01:19:37,440 --> 01:19:39,810

okay so the question is oh yeah this

3344
01:19:39,810 --> 01:19:39,820
okay so the question is oh yeah this
 

3345
01:19:39,820 --> 01:19:41,879
okay so the question is oh yeah this
this replica has to have a watch table

3346
01:19:41,879 --> 01:19:41,889
this replica has to have a watch table
 

3347
01:19:41,889 --> 01:19:46,050
this replica has to have a watch table
you know if the replica crashes and the

3348
01:19:46,050 --> 01:19:46,060
you know if the replica crashes and the
 

3349
01:19:46,060 --> 01:19:48,569
you know if the replica crashes and the
client is officially different replica

3350
01:19:48,569 --> 01:19:48,579
client is officially different replica
 

3351
01:19:48,579 --> 01:19:50,160
client is officially different replica
you know what about the watch table

3352
01:19:50,160 --> 01:19:50,170
you know what about the watch table
 

3353
01:19:50,170 --> 01:19:51,149
you know what about the watch table
right it's already established these

3354
01:19:51,149 --> 01:19:51,159
right it's already established these
 

3355
01:19:51,159 --> 01:19:52,770
right it's already established these
watch and the answer to that is that no

3356
01:19:52,770 --> 01:19:52,780
watch and the answer to that is that no
 

3357
01:19:52,780 --> 01:19:56,729
watch and the answer to that is that no
the rep your replica crashes the new

3358
01:19:56,729 --> 01:19:56,739
the rep your replica crashes the new
 

3359
01:19:56,739 --> 01:19:58,560
the rep your replica crashes the new
replica you switch to won't have the

3360
01:19:58,560 --> 01:19:58,570
replica you switch to won't have the
 

3361
01:19:58,570 --> 01:20:01,350
replica you switch to won't have the
watch table and but the client gets a

3362
01:20:01,350 --> 01:20:01,360
watch table and but the client gets a
 

3363
01:20:01,360 --> 01:20:03,600
watch table and but the client gets a
notification at the appropriate point in

3364
01:20:03,600 --> 01:20:03,610
notification at the appropriate point in
 

3365
01:20:03,610 --> 01:20:06,419
notification at the appropriate point in
in the stream of responses it gets back

3366
01:20:06,419 --> 01:20:06,429
in the stream of responses it gets back
 

3367
01:20:06,429 --> 01:20:08,939
in the stream of responses it gets back
saying oops your replica you were

3368
01:20:08,939 --> 01:20:08,949
saying oops your replica you were
 

3369
01:20:08,949 --> 01:20:11,700
saying oops your replica you were
talking to you crashed and so the client

3370
01:20:11,700 --> 01:20:11,710
talking to you crashed and so the client
 

3371
01:20:11,710 --> 01:20:13,470
talking to you crashed and so the client
then knows it has to completely reset up

3372
01:20:13,470 --> 01:20:13,480
then knows it has to completely reset up
 

3373
01:20:13,480 --> 01:20:16,740
then knows it has to completely reset up
everything and so tucked away in in the

3374
01:20:16,740 --> 01:20:16,750
everything and so tucked away in in the
 

3375
01:20:16,750 --> 01:20:20,069
everything and so tucked away in in the
examples are missing event handlers to

3376
01:20:20,069 --> 01:20:20,079
examples are missing event handlers to
 

3377
01:20:20,079 --> 01:20:21,930
examples are missing event handlers to
say oh gosh you know we need to go back

3378
01:20:21,930 --> 01:20:21,940
say oh gosh you know we need to go back
 

3379
01:20:21,940 --> 01:20:24,540
say oh gosh you know we need to go back
and we establish everything if we get a

3380
01:20:24,540 --> 01:20:24,550
and we establish everything if we get a
 

3381
01:20:24,550 --> 01:20:26,490
and we establish everything if we get a
notification that our replicas crashed

3382
01:20:26,490 --> 01:20:26,500
notification that our replicas crashed
 

3383
01:20:26,500 --> 01:20:30,090
notification that our replicas crashed
all right I'll continuous

