1
00:00:02,649 --> 00:00:07,210

all right today I want to talk about bit

2
00:00:07,210 --> 00:00:07,220
all right today I want to talk about bit
 

3
00:00:07,220 --> 00:00:08,500
all right today I want to talk about bit
more about fault tolerance and

4
00:00:08,500 --> 00:00:08,510
more about fault tolerance and
 

5
00:00:08,510 --> 00:00:10,539
more about fault tolerance and
replication and then look into the

6
00:00:10,539 --> 00:00:10,549
replication and then look into the
 

7
00:00:10,549 --> 00:00:13,259
replication and then look into the
details of today's paper about vmware ft

8
00:00:13,259 --> 00:00:13,269
details of today's paper about vmware ft
 

9
00:00:13,269 --> 00:00:16,000
details of today's paper about vmware ft
the topics still fault tolerance to

10
00:00:16,000 --> 00:00:16,010
the topics still fault tolerance to
 

11
00:00:16,010 --> 00:00:19,030
the topics still fault tolerance to
provide high availability that is you

12
00:00:19,030 --> 00:00:19,040
provide high availability that is you
 

13
00:00:19,040 --> 00:00:20,590
provide high availability that is you
want to build a server that even if some

14
00:00:20,590 --> 00:00:20,600
want to build a server that even if some
 

15
00:00:20,600 --> 00:00:22,810
want to build a server that even if some
hardware you know computer crashes is

16
00:00:22,810 --> 00:00:22,820
hardware you know computer crashes is
 

17
00:00:22,820 --> 00:00:24,070
hardware you know computer crashes is
involved in the service we still like to

18
00:00:24,070 --> 00:00:24,080
involved in the service we still like to
 

19
00:00:24,080 --> 00:00:27,850
involved in the service we still like to
provide the service and to the extent we

20
00:00:27,850 --> 00:00:27,860
provide the service and to the extent we
 

21
00:00:27,860 --> 00:00:29,110
provide the service and to the extent we
can we'd like to provide our service

22
00:00:29,110 --> 00:00:29,120
can we'd like to provide our service
 

23
00:00:29,120 --> 00:00:31,240
can we'd like to provide our service
also if there's network problems and the

24
00:00:31,240 --> 00:00:31,250
also if there's network problems and the
 

25
00:00:31,250 --> 00:00:33,009
also if there's network problems and the
tool we're using its replication least

26
00:00:33,009 --> 00:00:33,019
tool we're using its replication least
 

27
00:00:33,019 --> 00:00:36,610
tool we're using its replication least
for this part of the course so it's

28
00:00:36,610 --> 00:00:36,620
for this part of the course so it's
 

29
00:00:36,620 --> 00:00:39,060
for this part of the course so it's
worth asking what kind of failures

30
00:00:39,060 --> 00:00:39,070
worth asking what kind of failures
 

31
00:00:39,070 --> 00:00:42,029
worth asking what kind of failures
replication can be expected to deal with

32
00:00:42,029 --> 00:00:42,039
replication can be expected to deal with
 

33
00:00:42,039 --> 00:00:52,500
replication can be expected to deal with
because it's not everything by any means

34
00:00:52,500 --> 00:00:52,510

 

35
00:00:52,510 --> 00:00:55,599

so maybe the easiest way to characterize

36
00:00:55,599 --> 00:00:55,609
so maybe the easiest way to characterize
 

37
00:00:55,609 --> 00:00:57,160
so maybe the easiest way to characterize
the kind of failures we're talking about

38
00:00:57,160 --> 00:00:57,170
the kind of failures we're talking about
 

39
00:00:57,170 --> 00:01:01,000
the kind of failures we're talking about
is fail stop failures of a single

40
00:01:01,000 --> 00:01:01,010
is fail stop failures of a single
 

41
00:01:01,010 --> 00:01:11,109
is fail stop failures of a single
computer and what I mean by fail stop

42
00:01:11,109 --> 00:01:11,119
computer and what I mean by fail stop
 

43
00:01:11,119 --> 00:01:14,830
computer and what I mean by fail stop
it's a sort of generic term and fault

44
00:01:14,830 --> 00:01:14,840
it's a sort of generic term and fault
 

45
00:01:14,840 --> 00:01:16,749
it's a sort of generic term and fault
tolerance is that if something goes

46
00:01:16,749 --> 00:01:16,759
tolerance is that if something goes
 

47
00:01:16,759 --> 00:01:18,340
tolerance is that if something goes
wrong would say the computer the

48
00:01:18,340 --> 00:01:18,350
wrong would say the computer the
 

49
00:01:18,350 --> 00:01:23,830
wrong would say the computer the
computer simply stops executing it just

50
00:01:23,830 --> 00:01:23,840
computer simply stops executing it just
 

51
00:01:23,840 --> 00:01:27,639
computer simply stops executing it just
stops if anything goes wrong and in

52
00:01:27,639 --> 00:01:27,649
stops if anything goes wrong and in
 

53
00:01:27,649 --> 00:01:29,230
stops if anything goes wrong and in
particular it doesn't compute incorrect

54
00:01:29,230 --> 00:01:29,240
particular it doesn't compute incorrect
 

55
00:01:29,240 --> 00:01:31,630
particular it doesn't compute incorrect
results so if somebody kicks the power

56
00:01:31,630 --> 00:01:31,640
results so if somebody kicks the power
 

57
00:01:31,640 --> 00:01:35,230
results so if somebody kicks the power
cable out of your server that's probably

58
00:01:35,230 --> 00:01:35,240
cable out of your server that's probably
 

59
00:01:35,240 --> 00:01:36,940
cable out of your server that's probably
gonna generate a fail stop failure

60
00:01:36,940 --> 00:01:36,950
gonna generate a fail stop failure
 

61
00:01:36,950 --> 00:01:41,080
gonna generate a fail stop failure
similarly if they unplug your servers

62
00:01:41,080 --> 00:01:41,090
similarly if they unplug your servers
 

63
00:01:41,090 --> 00:01:42,670
similarly if they unplug your servers
network connection even though the

64
00:01:42,670 --> 00:01:42,680
network connection even though the
 

65
00:01:42,680 --> 00:01:44,380
network connection even though the
server is still running so this is a

66
00:01:44,380 --> 00:01:44,390
server is still running so this is a
 

67
00:01:44,390 --> 00:01:46,090
server is still running so this is a
little bit funny you know be totally cut

68
00:01:46,090 --> 00:01:46,100
little bit funny you know be totally cut
 

69
00:01:46,100 --> 00:01:47,410
little bit funny you know be totally cut
off from the network so it looks at me

70
00:01:47,410 --> 00:01:47,420
off from the network so it looks at me
 

71
00:01:47,420 --> 00:01:50,469
off from the network so it looks at me
outside like it just stopped so it's

72
00:01:50,469 --> 00:01:50,479
outside like it just stopped so it's
 

73
00:01:50,479 --> 00:01:51,880
outside like it just stopped so it's
really these failures we can deal with

74
00:01:51,880 --> 00:01:51,890
really these failures we can deal with
 

75
00:01:51,890 --> 00:01:55,800
really these failures we can deal with
with replication this also covers some

76
00:01:55,800 --> 00:01:55,810
with replication this also covers some
 

77
00:01:55,810 --> 00:01:59,469
with replication this also covers some
hardware problems like you know maybe if

78
00:01:59,469 --> 00:01:59,479
hardware problems like you know maybe if
 

79
00:01:59,479 --> 00:02:02,289
hardware problems like you know maybe if
the fan on your server breaks because it

80
00:02:02,289 --> 00:02:02,299
the fan on your server breaks because it
 

81
00:02:02,299 --> 00:02:04,899
the fan on your server breaks because it
you know it cost 50 cents maybe that'll

82
00:02:04,899 --> 00:02:04,909
you know it cost 50 cents maybe that'll
 

83
00:02:04,909 --> 00:02:06,730
you know it cost 50 cents maybe that'll
cause the CPU to overheat and the CPU

84
00:02:06,730 --> 00:02:06,740
cause the CPU to overheat and the CPU
 

85
00:02:06,740 --> 00:02:10,029
cause the CPU to overheat and the CPU
will shut itself down cleanly and just

86
00:02:10,029 --> 00:02:10,039
will shut itself down cleanly and just
 

87
00:02:10,039 --> 00:02:14,069
will shut itself down cleanly and just
stop executing

88
00:02:14,069 --> 00:02:14,079

 

89
00:02:14,079 --> 00:02:18,459

what's not covered by the kind of

90
00:02:18,459 --> 00:02:18,469
what's not covered by the kind of
 

91
00:02:18,469 --> 00:02:20,490
what's not covered by the kind of
replication systems we're talking about

92
00:02:20,490 --> 00:02:20,500
replication systems we're talking about
 

93
00:02:20,500 --> 00:02:24,099
replication systems we're talking about
is things like bugs and software or

94
00:02:24,099 --> 00:02:24,109
is things like bugs and software or
 

95
00:02:24,109 --> 00:02:29,349
is things like bugs and software or
design defects in hardware so basically

96
00:02:29,349 --> 00:02:29,359
design defects in hardware so basically
 

97
00:02:29,359 --> 00:02:33,369
design defects in hardware so basically
not bugs because if we take some service

98
00:02:33,369 --> 00:02:33,379
not bugs because if we take some service
 

99
00:02:33,379 --> 00:02:35,649
not bugs because if we take some service
you know say you're a MapReduce master

100
00:02:35,649 --> 00:02:35,659
you know say you're a MapReduce master
 

101
00:02:35,659 --> 00:02:37,449
you know say you're a MapReduce master
for example you know we replicated and

102
00:02:37,449 --> 00:02:37,459
for example you know we replicated and
 

103
00:02:37,459 --> 00:02:39,520
for example you know we replicated and
run it on two computers you know if

104
00:02:39,520 --> 00:02:39,530
run it on two computers you know if
 

105
00:02:39,530 --> 00:02:41,170
run it on two computers you know if
there's a bug in your MapReduce master

106
00:02:41,170 --> 00:02:41,180
there's a bug in your MapReduce master
 

107
00:02:41,180 --> 00:02:43,530
there's a bug in your MapReduce master
or my MapReduce master let's say

108
00:02:43,530 --> 00:02:43,540
or my MapReduce master let's say
 

109
00:02:43,540 --> 00:02:45,369
or my MapReduce master let's say
replications not going to help us we're

110
00:02:45,369 --> 00:02:45,379
replications not going to help us we're
 

111
00:02:45,379 --> 00:02:46,750
replications not going to help us we're
going to compute the same incorrect

112
00:02:46,750 --> 00:02:46,760
going to compute the same incorrect
 

113
00:02:46,760 --> 00:02:50,159
going to compute the same incorrect
result on both of our copies of our

114
00:02:50,159 --> 00:02:50,169
result on both of our copies of our
 

115
00:02:50,169 --> 00:02:53,949
result on both of our copies of our
MapReduce master and everything looked

116
00:02:53,949 --> 00:02:53,959
MapReduce master and everything looked
 

117
00:02:53,959 --> 00:02:55,659
MapReduce master and everything looked
fine they'll agree you just happen to be

118
00:02:55,659 --> 00:02:55,669
fine they'll agree you just happen to be
 

119
00:02:55,669 --> 00:02:58,360
fine they'll agree you just happen to be
the wrong answer so we can't depending

120
00:02:58,360 --> 00:02:58,370
the wrong answer so we can't depending
 

121
00:02:58,370 --> 00:03:01,119
the wrong answer so we can't depending
against bugs in the replicated software

122
00:03:01,119 --> 00:03:01,129
against bugs in the replicated software
 

123
00:03:01,129 --> 00:03:02,770
against bugs in the replicated software
and we can't defend against bugs in the

124
00:03:02,770 --> 00:03:02,780
and we can't defend against bugs in the
 

125
00:03:02,780 --> 00:03:05,259
and we can't defend against bugs in the
whatever scheme we're using to manage

126
00:03:05,259 --> 00:03:05,269
whatever scheme we're using to manage
 

127
00:03:05,269 --> 00:03:08,170
whatever scheme we're using to manage
the replication and similarly as I

128
00:03:08,170 --> 00:03:08,180
the replication and similarly as I
 

129
00:03:08,180 --> 00:03:12,729
the replication and similarly as I
mentioned before we can't expect to deal

130
00:03:12,729 --> 00:03:12,739
mentioned before we can't expect to deal
 

131
00:03:12,739 --> 00:03:14,170
mentioned before we can't expect to deal
with bugs in the hardware the hardware

132
00:03:14,170 --> 00:03:14,180
with bugs in the hardware the hardware
 

133
00:03:14,180 --> 00:03:15,940
with bugs in the hardware the hardware
it computes incorrectly that's just

134
00:03:15,940 --> 00:03:15,950
it computes incorrectly that's just
 

135
00:03:15,950 --> 00:03:18,520
it computes incorrectly that's just
that's the end for us at least with this

136
00:03:18,520 --> 00:03:18,530
that's the end for us at least with this
 

137
00:03:18,530 --> 00:03:21,819
that's the end for us at least with this
kind of technique although you know that

138
00:03:21,819 --> 00:03:21,829
kind of technique although you know that
 

139
00:03:21,829 --> 00:03:23,920
kind of technique although you know that
said there are definitely hardware and

140
00:03:23,920 --> 00:03:23,930
said there are definitely hardware and
 

141
00:03:23,930 --> 00:03:26,530
said there are definitely hardware and
software bugs that that replication

142
00:03:26,530 --> 00:03:26,540
software bugs that that replication
 

143
00:03:26,540 --> 00:03:28,689
software bugs that that replication
might if you're lucky might be able to

144
00:03:28,689 --> 00:03:28,699
might if you're lucky might be able to
 

145
00:03:28,699 --> 00:03:30,460
might if you're lucky might be able to
cope it so if there's some unrelated

146
00:03:30,460 --> 00:03:30,470
cope it so if there's some unrelated
 

147
00:03:30,470 --> 00:03:32,229
cope it so if there's some unrelated
software running in your server and it

148
00:03:32,229 --> 00:03:32,239
software running in your server and it
 

149
00:03:32,239 --> 00:03:34,420
software running in your server and it
causes the server to crash maybe because

150
00:03:34,420 --> 00:03:34,430
causes the server to crash maybe because
 

151
00:03:34,430 --> 00:03:36,610
causes the server to crash maybe because
your kernel to panic and reboot or

152
00:03:36,610 --> 00:03:36,620
your kernel to panic and reboot or
 

153
00:03:36,620 --> 00:03:38,439
your kernel to panic and reboot or
something it has nothing to do with you

154
00:03:38,439 --> 00:03:38,449
something it has nothing to do with you
 

155
00:03:38,449 --> 00:03:40,629
something it has nothing to do with you
know with your with the service you're

156
00:03:40,629 --> 00:03:40,639
know with your with the service you're
 

157
00:03:40,639 --> 00:03:42,699
know with your with the service you're
replicating then that kind of failure

158
00:03:42,699 --> 00:03:42,709
replicating then that kind of failure
 

159
00:03:42,709 --> 00:03:45,640
replicating then that kind of failure
for us for your service will may well be

160
00:03:45,640 --> 00:03:45,650
for us for your service will may well be
 

161
00:03:45,650 --> 00:03:47,280
for us for your service will may well be
fail stop

162
00:03:47,280 --> 00:03:47,290
fail stop
 

163
00:03:47,290 --> 00:03:50,800
fail stop
you know the kernel will panic and the

164
00:03:50,800 --> 00:03:50,810
you know the kernel will panic and the
 

165
00:03:50,810 --> 00:03:56,469
you know the kernel will panic and the
backup replicas will take over similarly

166
00:03:56,469 --> 00:03:56,479
backup replicas will take over similarly
 

167
00:03:56,479 --> 00:03:59,050
backup replicas will take over similarly
some kinds of hardware errors can be

168
00:03:59,050 --> 00:03:59,060
some kinds of hardware errors can be
 

169
00:03:59,060 --> 00:04:03,250
some kinds of hardware errors can be
turned into fail stop errors for example

170
00:04:03,250 --> 00:04:03,260
turned into fail stop errors for example
 

171
00:04:03,260 --> 00:04:05,589
turned into fail stop errors for example
if you send a packet over the network

172
00:04:05,589 --> 00:04:05,599
if you send a packet over the network
 

173
00:04:05,599 --> 00:04:08,199
if you send a packet over the network
and the network corrupts it just flips a

174
00:04:08,199 --> 00:04:08,209
and the network corrupts it just flips a
 

175
00:04:08,209 --> 00:04:10,059
and the network corrupts it just flips a
bit in your packet that will almost

176
00:04:10,059 --> 00:04:10,069
bit in your packet that will almost
 

177
00:04:10,069 --> 00:04:11,920
bit in your packet that will almost
certainly be caught by the checksum on

178
00:04:11,920 --> 00:04:11,930
certainly be caught by the checksum on
 

179
00:04:11,930 --> 00:04:13,929
certainly be caught by the checksum on
the packet same thing for a disk block

180
00:04:13,929 --> 00:04:13,939
the packet same thing for a disk block
 

181
00:04:13,939 --> 00:04:15,939
the packet same thing for a disk block
if you write some data to disk and weand

182
00:04:15,939 --> 00:04:15,949
if you write some data to disk and weand
 

183
00:04:15,949 --> 00:04:18,189
if you write some data to disk and weand
it back a month later you know maybe the

184
00:04:18,189 --> 00:04:18,199
it back a month later you know maybe the
 

185
00:04:18,199 --> 00:04:20,769
it back a month later you know maybe the
magnetic surface isn't perfect and you

186
00:04:20,769 --> 00:04:20,779
magnetic surface isn't perfect and you
 

187
00:04:20,779 --> 00:04:22,000
magnetic surface isn't perfect and you
know one of the best couple of bits were

188
00:04:22,000 --> 00:04:22,010
know one of the best couple of bits were
 

189
00:04:22,010 --> 00:04:23,529
know one of the best couple of bits were
wrong in the block as it's right back

190
00:04:23,529 --> 00:04:23,539
wrong in the block as it's right back
 

191
00:04:23,539 --> 00:04:24,970
wrong in the block as it's right back
it's actually error correcting

192
00:04:24,970 --> 00:04:24,980
it's actually error correcting
 

193
00:04:24,980 --> 00:04:26,980
it's actually error correcting
that up to a certain point will fix

194
00:04:26,980 --> 00:04:26,990
that up to a certain point will fix
 

195
00:04:26,990 --> 00:04:28,450
that up to a certain point will fix
errors in disk blocks that you'll be

196
00:04:28,450 --> 00:04:28,460
errors in disk blocks that you'll be
 

197
00:04:28,460 --> 00:04:31,410
errors in disk blocks that you'll be
turning you know random hardware errors

198
00:04:31,410 --> 00:04:31,420
turning you know random hardware errors
 

199
00:04:31,420 --> 00:04:35,590
turning you know random hardware errors
into as either correcting them if you're

200
00:04:35,590 --> 00:04:35,600
into as either correcting them if you're
 

201
00:04:35,600 --> 00:04:39,130
into as either correcting them if you're
super lucky or at least detecting them

202
00:04:39,130 --> 00:04:39,140
super lucky or at least detecting them
 

203
00:04:39,140 --> 00:04:40,900
super lucky or at least detecting them
and turning random corruption into a

204
00:04:40,900 --> 00:04:40,910
and turning random corruption into a
 

205
00:04:40,910 --> 00:04:43,720
and turning random corruption into a
detected fault which you know the

206
00:04:43,720 --> 00:04:43,730
detected fault which you know the
 

207
00:04:43,730 --> 00:04:45,460
detected fault which you know the
software then knows that something that

208
00:04:45,460 --> 00:04:45,470
software then knows that something that
 

209
00:04:45,470 --> 00:04:47,680
software then knows that something that
wrong and can turn it into a fail stop

210
00:04:47,680 --> 00:04:47,690
wrong and can turn it into a fail stop
 

211
00:04:47,690 --> 00:04:49,900
wrong and can turn it into a fail stop
fault by stopping executing or take some

212
00:04:49,900 --> 00:04:49,910
fault by stopping executing or take some
 

213
00:04:49,910 --> 00:04:55,180
fault by stopping executing or take some
other remedial action but in general we

214
00:04:55,180 --> 00:04:55,190
other remedial action but in general we
 

215
00:04:55,190 --> 00:04:57,550
other remedial action but in general we
really can only expect to handle fail

216
00:04:57,550 --> 00:04:57,560
really can only expect to handle fail
 

217
00:04:57,560 --> 00:05:02,170
really can only expect to handle fail
stop faults there's other limits to

218
00:05:02,170 --> 00:05:02,180
stop faults there's other limits to
 

219
00:05:02,180 --> 00:05:06,460
stop faults there's other limits to
replication to you know the the failures

220
00:05:06,460 --> 00:05:06,470
replication to you know the the failures
 

221
00:05:06,470 --> 00:05:08,620
replication to you know the the failures
in the if we have a primary in the back

222
00:05:08,620 --> 00:05:08,630
in the if we have a primary in the back
 

223
00:05:08,630 --> 00:05:10,600
in the if we have a primary in the back
of our two replicas or whatever we're

224
00:05:10,600 --> 00:05:10,610
of our two replicas or whatever we're
 

225
00:05:10,610 --> 00:05:12,790
of our two replicas or whatever we're
really assuming that failures in the two

226
00:05:12,790 --> 00:05:12,800
really assuming that failures in the two
 

227
00:05:12,800 --> 00:05:16,150
really assuming that failures in the two
are independent right if there tend to

228
00:05:16,150 --> 00:05:16,160
are independent right if there tend to
 

229
00:05:16,160 --> 00:05:18,300
are independent right if there tend to
have correlated failures then

230
00:05:18,300 --> 00:05:18,310
have correlated failures then
 

231
00:05:18,310 --> 00:05:20,380
have correlated failures then
replication is not going to help us so

232
00:05:20,380 --> 00:05:20,390
replication is not going to help us so
 

233
00:05:20,390 --> 00:05:22,330
replication is not going to help us so
for example if we're a big outfit and we

234
00:05:22,330 --> 00:05:22,340
for example if we're a big outfit and we
 

235
00:05:22,340 --> 00:05:24,370
for example if we're a big outfit and we
buy thousands of computers batches of

236
00:05:24,370 --> 00:05:24,380
buy thousands of computers batches of
 

237
00:05:24,380 --> 00:05:26,380
buy thousands of computers batches of
thousands of computers identical

238
00:05:26,380 --> 00:05:26,390
thousands of computers identical
 

239
00:05:26,390 --> 00:05:28,300
thousands of computers identical
computers from the same manufacturer and

240
00:05:28,300 --> 00:05:28,310
computers from the same manufacturer and
 

241
00:05:28,310 --> 00:05:31,060
computers from the same manufacturer and
we run you know our replicas is on all

242
00:05:31,060 --> 00:05:31,070
we run you know our replicas is on all
 

243
00:05:31,070 --> 00:05:33,640
we run you know our replicas is on all
on those computers we bought at the same

244
00:05:33,640 --> 00:05:33,650
on those computers we bought at the same
 

245
00:05:33,650 --> 00:05:35,500
on those computers we bought at the same
time from the same place that's a bit of

246
00:05:35,500 --> 00:05:35,510
time from the same place that's a bit of
 

247
00:05:35,510 --> 00:05:35,980
time from the same place that's a bit of
a risk

248
00:05:35,980 --> 00:05:35,990
a risk
 

249
00:05:35,990 --> 00:05:39,010
a risk
maybe because presumably if one of them

250
00:05:39,010 --> 00:05:39,020
maybe because presumably if one of them
 

251
00:05:39,020 --> 00:05:40,720
maybe because presumably if one of them
has a manufacturing defect in it there's

252
00:05:40,720 --> 00:05:40,730
has a manufacturing defect in it there's
 

253
00:05:40,730 --> 00:05:43,120
has a manufacturing defect in it there's
a good chance that the other ones do too

254
00:05:43,120 --> 00:05:43,130
a good chance that the other ones do too
 

255
00:05:43,130 --> 00:05:44,380
a good chance that the other ones do too
you know one of them's prone to

256
00:05:44,380 --> 00:05:44,390
you know one of them's prone to
 

257
00:05:44,390 --> 00:05:47,800
you know one of them's prone to
overheating because the manufacturer you

258
00:05:47,800 --> 00:05:47,810
overheating because the manufacturer you
 

259
00:05:47,810 --> 00:05:49,210
overheating because the manufacturer you
know didn't provide enough airflow well

260
00:05:49,210 --> 00:05:49,220
know didn't provide enough airflow well
 

261
00:05:49,220 --> 00:05:51,490
know didn't provide enough airflow well
it probably all had that problem and so

262
00:05:51,490 --> 00:05:51,500
it probably all had that problem and so
 

263
00:05:51,500 --> 00:05:53,980
it probably all had that problem and so
one of them overheats and dies it's a

264
00:05:53,980 --> 00:05:53,990
one of them overheats and dies it's a
 

265
00:05:53,990 --> 00:05:56,340
one of them overheats and dies it's a
good chance that the other ones will too

266
00:05:56,340 --> 00:05:56,350
good chance that the other ones will too
 

267
00:05:56,350 --> 00:05:59,050
good chance that the other ones will too
so that's one kind of correlated failure

268
00:05:59,050 --> 00:05:59,060
so that's one kind of correlated failure
 

269
00:05:59,060 --> 00:06:01,030
so that's one kind of correlated failure
you just have to be careful of another

270
00:06:01,030 --> 00:06:01,040
you just have to be careful of another
 

271
00:06:01,040 --> 00:06:02,560
you just have to be careful of another
one is that you know if there's an

272
00:06:02,560 --> 00:06:02,570
one is that you know if there's an
 

273
00:06:02,570 --> 00:06:03,880
one is that you know if there's an
earthquake and the city where our

274
00:06:03,880 --> 00:06:03,890
earthquake and the city where our
 

275
00:06:03,890 --> 00:06:05,500
earthquake and the city where our
datacenter is probably gonna take out

276
00:06:05,500 --> 00:06:05,510
datacenter is probably gonna take out
 

277
00:06:05,510 --> 00:06:07,300
datacenter is probably gonna take out
the whole data center you know we can

278
00:06:07,300 --> 00:06:07,310
the whole data center you know we can
 

279
00:06:07,310 --> 00:06:08,620
the whole data center you know we can
have all the replication we like inside

280
00:06:08,620 --> 00:06:08,630
have all the replication we like inside
 

281
00:06:08,630 --> 00:06:10,000
have all the replication we like inside
that data center it's not going to help

282
00:06:10,000 --> 00:06:10,010
that data center it's not going to help
 

283
00:06:10,010 --> 00:06:12,070
that data center it's not going to help
us because the failure caused by an

284
00:06:12,070 --> 00:06:12,080
us because the failure caused by an
 

285
00:06:12,080 --> 00:06:14,050
us because the failure caused by an
earthquake or a citywide power failure

286
00:06:14,050 --> 00:06:14,060
earthquake or a citywide power failure
 

287
00:06:14,060 --> 00:06:15,940
earthquake or a citywide power failure
or something the building burning down

288
00:06:15,940 --> 00:06:15,950
or something the building burning down
 

289
00:06:15,950 --> 00:06:17,710
or something the building burning down
is like it's correlated failure between

290
00:06:17,710 --> 00:06:17,720
is like it's correlated failure between
 

291
00:06:17,720 --> 00:06:19,480
is like it's correlated failure between
our replicas if they're on that building

292
00:06:19,480 --> 00:06:19,490
our replicas if they're on that building
 

293
00:06:19,490 --> 00:06:21,280
our replicas if they're on that building
so if we care about dealing with

294
00:06:21,280 --> 00:06:21,290
so if we care about dealing with
 

295
00:06:21,290 --> 00:06:24,010
so if we care about dealing with
earthquakes then we need to put our

296
00:06:24,010 --> 00:06:24,020
earthquakes then we need to put our
 

297
00:06:24,020 --> 00:06:26,140
earthquakes then we need to put our
replicas in maybe in just different

298
00:06:26,140 --> 00:06:26,150
replicas in maybe in just different
 

299
00:06:26,150 --> 00:06:28,000
replicas in maybe in just different
cities at least physically separate

300
00:06:28,000 --> 00:06:28,010
cities at least physically separate
 

301
00:06:28,010 --> 00:06:29,710
cities at least physically separate
enough that they have separate power

302
00:06:29,710 --> 00:06:29,720
enough that they have separate power
 

303
00:06:29,720 --> 00:06:31,750
enough that they have separate power
unlikely to be affected by the same

304
00:06:31,750 --> 00:06:31,760
unlikely to be affected by the same
 

305
00:06:31,760 --> 00:06:35,130
unlikely to be affected by the same
natural disaster

306
00:06:35,130 --> 00:06:35,140

 

307
00:06:35,140 --> 00:06:37,780

okay but that's all sort of hovering in

308
00:06:37,780 --> 00:06:37,790
okay but that's all sort of hovering in
 

309
00:06:37,790 --> 00:06:39,160
okay but that's all sort of hovering in
the background for this discussion where

310
00:06:39,160 --> 00:06:39,170
the background for this discussion where
 

311
00:06:39,170 --> 00:06:41,500
the background for this discussion where
we're talking about the technology you

312
00:06:41,500 --> 00:06:41,510
we're talking about the technology you
 

313
00:06:41,510 --> 00:06:44,650
we're talking about the technology you
might use another question about

314
00:06:44,650 --> 00:06:44,660
might use another question about
 

315
00:06:44,660 --> 00:06:46,630
might use another question about
replication is whether it's worthwhile

316
00:06:46,630 --> 00:06:46,640
replication is whether it's worthwhile
 

317
00:06:46,640 --> 00:06:49,510
replication is whether it's worthwhile
you may ask yourself gosh you know this

318
00:06:49,510 --> 00:06:49,520
you may ask yourself gosh you know this
 

319
00:06:49,520 --> 00:06:51,750
you may ask yourself gosh you know this
literally uses these replication schemes

320
00:06:51,750 --> 00:06:51,760
literally uses these replication schemes
 

321
00:06:51,760 --> 00:06:55,180
literally uses these replication schemes
use twice as much or three times as much

322
00:06:55,180 --> 00:06:55,190
use twice as much or three times as much
 

323
00:06:55,190 --> 00:06:57,730
use twice as much or three times as much
computer resources right we need to have

324
00:06:57,730 --> 00:06:57,740
computer resources right we need to have
 

325
00:06:57,740 --> 00:06:59,470
computer resources right we need to have
you know GFS had three copies of every

326
00:06:59,470 --> 00:06:59,480
you know GFS had three copies of every
 

327
00:06:59,480 --> 00:07:01,120
you know GFS had three copies of every
box we have to buy three times as much

328
00:07:01,120 --> 00:07:01,130
box we have to buy three times as much
 

329
00:07:01,130 --> 00:07:03,580
box we have to buy three times as much
disk space the paper for today

330
00:07:03,580 --> 00:07:03,590
disk space the paper for today
 

331
00:07:03,590 --> 00:07:05,860
disk space the paper for today
you know replicates just once but that

332
00:07:05,860 --> 00:07:05,870
you know replicates just once but that
 

333
00:07:05,870 --> 00:07:07,750
you know replicates just once but that
means we have twice as many computers

334
00:07:07,750 --> 00:07:07,760
means we have twice as many computers
 

335
00:07:07,760 --> 00:07:10,510
means we have twice as many computers
and CPUs and RAM it's all for expensive

336
00:07:10,510 --> 00:07:10,520
and CPUs and RAM it's all for expensive
 

337
00:07:10,520 --> 00:07:11,980
and CPUs and RAM it's all for expensive
like is that really worth it that

338
00:07:11,980 --> 00:07:11,990
like is that really worth it that
 

339
00:07:11,990 --> 00:07:16,060
like is that really worth it that
expense and you know that's not

340
00:07:16,060 --> 00:07:16,070
expense and you know that's not
 

341
00:07:16,070 --> 00:07:17,530
expense and you know that's not
something we can answer technically

342
00:07:17,530 --> 00:07:17,540
something we can answer technically
 

343
00:07:17,540 --> 00:07:19,030
something we can answer technically
right it's an economic question it

344
00:07:19,030 --> 00:07:19,040
right it's an economic question it
 

345
00:07:19,040 --> 00:07:21,130
right it's an economic question it
depends on the value of having an

346
00:07:21,130 --> 00:07:21,140
depends on the value of having an
 

347
00:07:21,140 --> 00:07:22,930
depends on the value of having an
available service you know if you're

348
00:07:22,930 --> 00:07:22,940
available service you know if you're
 

349
00:07:22,940 --> 00:07:26,080
available service you know if you're
running a bank and if the consequence is

350
00:07:26,080 --> 00:07:26,090
running a bank and if the consequence is
 

351
00:07:26,090 --> 00:07:27,730
running a bank and if the consequence is
the computer failing is that your

352
00:07:27,730 --> 00:07:27,740
the computer failing is that your
 

353
00:07:27,740 --> 00:07:29,290
the computer failing is that your
customer you can't serve your customers

354
00:07:29,290 --> 00:07:29,300
customer you can't serve your customers
 

355
00:07:29,300 --> 00:07:31,210
customer you can't serve your customers
and you can't generate revenue and your

356
00:07:31,210 --> 00:07:31,220
and you can't generate revenue and your
 

357
00:07:31,220 --> 00:07:33,430
and you can't generate revenue and your
customers all hate you then it may well

358
00:07:33,430 --> 00:07:33,440
customers all hate you then it may well
 

359
00:07:33,440 --> 00:07:35,530
customers all hate you then it may well
be worth it to blow you know an extra

360
00:07:35,530 --> 00:07:35,540
be worth it to blow you know an extra
 

361
00:07:35,540 --> 00:07:37,360
be worth it to blow you know an extra
ten or twenty thousand bucks on a second

362
00:07:37,360 --> 00:07:37,370
ten or twenty thousand bucks on a second
 

363
00:07:37,370 --> 00:07:40,210
ten or twenty thousand bucks on a second
computer so you can have a replica on

364
00:07:40,210 --> 00:07:40,220
computer so you can have a replica on
 

365
00:07:40,220 --> 00:07:41,890
computer so you can have a replica on
the other hand if you're me and you're

366
00:07:41,890 --> 00:07:41,900
the other hand if you're me and you're
 

367
00:07:41,900 --> 00:07:46,210
the other hand if you're me and you're
running the 684 web server I don't

368
00:07:46,210 --> 00:07:46,220
running the 684 web server I don't
 

369
00:07:46,220 --> 00:07:48,670
running the 684 web server I don't
consider it worthwhile to have a hot

370
00:07:48,670 --> 00:07:48,680
consider it worthwhile to have a hot
 

371
00:07:48,680 --> 00:07:50,950
consider it worthwhile to have a hot
backup of the 84 web server because the

372
00:07:50,950 --> 00:07:50,960
backup of the 84 web server because the
 

373
00:07:50,960 --> 00:07:55,330
backup of the 84 web server because the
consequences of failure are very low so

374
00:07:55,330 --> 00:07:55,340
consequences of failure are very low so
 

375
00:07:55,340 --> 00:07:58,450
consequences of failure are very low so
the whether the replication is

376
00:07:58,450 --> 00:07:58,460
the whether the replication is
 

377
00:07:58,460 --> 00:08:00,220
the whether the replication is
worthwhile on how many replicas you

378
00:08:00,220 --> 00:08:00,230
worthwhile on how many replicas you
 

379
00:08:00,230 --> 00:08:02,080
worthwhile on how many replicas you
ought to have and how much you're

380
00:08:02,080 --> 00:08:02,090
ought to have and how much you're
 

381
00:08:02,090 --> 00:08:04,210
ought to have and how much you're
willing to spend on it is all about how

382
00:08:04,210 --> 00:08:04,220
willing to spend on it is all about how
 

383
00:08:04,220 --> 00:08:08,320
willing to spend on it is all about how
much cost and inconvenience failure

384
00:08:08,320 --> 00:08:08,330
much cost and inconvenience failure
 

385
00:08:08,330 --> 00:08:11,830
much cost and inconvenience failure
would call it cause you all right this

386
00:08:11,830 --> 00:08:11,840
would call it cause you all right this
 

387
00:08:11,840 --> 00:08:14,800
would call it cause you all right this
paper sort of in the beginning mentions

388
00:08:14,800 --> 00:08:14,810
paper sort of in the beginning mentions
 

389
00:08:14,810 --> 00:08:16,260
paper sort of in the beginning mentions
as there's a couple of different

390
00:08:16,260 --> 00:08:16,270
as there's a couple of different
 

391
00:08:16,270 --> 00:08:19,810
as there's a couple of different
approaches to replication really

392
00:08:19,810 --> 00:08:19,820
approaches to replication really
 

393
00:08:19,820 --> 00:08:21,730
approaches to replication really
mentions two one two calls state

394
00:08:21,730 --> 00:08:21,740
mentions two one two calls state
 

395
00:08:21,740 --> 00:08:30,340
mentions two one two calls state
transfer and the other calls replicated

396
00:08:30,340 --> 00:08:30,350
transfer and the other calls replicated
 

397
00:08:30,350 --> 00:08:35,140
transfer and the other calls replicated
state machine most of the schemes we're

398
00:08:35,140 --> 00:08:35,150
state machine most of the schemes we're
 

399
00:08:35,150 --> 00:08:36,220
state machine most of the schemes we're
going to talk about in this class are

400
00:08:36,220 --> 00:08:36,230
going to talk about in this class are
 

401
00:08:36,230 --> 00:08:39,779
going to talk about in this class are
replicated state machines

402
00:08:39,779 --> 00:08:39,789

 

403
00:08:39,789 --> 00:08:42,790

it'll talk about both anyway the idea

404
00:08:42,790 --> 00:08:42,800
it'll talk about both anyway the idea
 

405
00:08:42,800 --> 00:08:44,170
it'll talk about both anyway the idea
behind state transferor's that if we

406
00:08:44,170 --> 00:08:44,180
behind state transferor's that if we
 

407
00:08:44,180 --> 00:08:49,090
behind state transferor's that if we
have two replicas of a server the way

408
00:08:49,090 --> 00:08:49,100
have two replicas of a server the way
 

409
00:08:49,100 --> 00:08:51,460
have two replicas of a server the way
you cause them to be to stay in sync

410
00:08:51,460 --> 00:08:51,470
you cause them to be to stay in sync
 

411
00:08:51,470 --> 00:08:55,000
you cause them to be to stay in sync
that is to be actual replicas so that

412
00:08:55,000 --> 00:08:55,010
that is to be actual replicas so that
 

413
00:08:55,010 --> 00:08:57,519
that is to be actual replicas so that
the backup can has everything it needs

414
00:08:57,519 --> 00:08:57,529
the backup can has everything it needs
 

415
00:08:57,529 --> 00:08:59,620
the backup can has everything it needs
to take over if the primary fails in a

416
00:08:59,620 --> 00:08:59,630
to take over if the primary fails in a
 

417
00:08:59,630 --> 00:09:02,380
to take over if the primary fails in a
state transfer scheme the way that works

418
00:09:02,380 --> 00:09:02,390
state transfer scheme the way that works
 

419
00:09:02,390 --> 00:09:04,480
state transfer scheme the way that works
is that the primary sends a copy of its

420
00:09:04,480 --> 00:09:04,490
is that the primary sends a copy of its
 

421
00:09:04,490 --> 00:09:06,310
is that the primary sends a copy of its
entire state that is for example the

422
00:09:06,310 --> 00:09:06,320
entire state that is for example the
 

423
00:09:06,320 --> 00:09:09,130
entire state that is for example the
contents of its RAM to the backup and

424
00:09:09,130 --> 00:09:09,140
contents of its RAM to the backup and
 

425
00:09:09,140 --> 00:09:11,199
contents of its RAM to the backup and
the backup just sort of stores the

426
00:09:11,199 --> 00:09:11,209
the backup just sort of stores the
 

427
00:09:11,209 --> 00:09:13,269
the backup just sort of stores the
latest state and so it's all there

428
00:09:13,269 --> 00:09:13,279
latest state and so it's all there
 

429
00:09:13,279 --> 00:09:15,460
latest state and so it's all there
the primary fails in the backup can

430
00:09:15,460 --> 00:09:15,470
the primary fails in the backup can
 

431
00:09:15,470 --> 00:09:18,670
the primary fails in the backup can
start executing with this last state it

432
00:09:18,670 --> 00:09:18,680
start executing with this last state it
 

433
00:09:18,680 --> 00:09:20,889
start executing with this last state it
got if the primary fails so this is all

434
00:09:20,889 --> 00:09:20,899
got if the primary fails so this is all
 

435
00:09:20,899 --> 00:09:23,740
got if the primary fails so this is all
about sending the state of the of the

436
00:09:23,740 --> 00:09:23,750
about sending the state of the of the
 

437
00:09:23,750 --> 00:09:26,440
about sending the state of the of the
primary and for today's if today's paper

438
00:09:26,440 --> 00:09:26,450
primary and for today's if today's paper
 

439
00:09:26,450 --> 00:09:28,240
primary and for today's if today's paper
worked as a state transfer system which

440
00:09:28,240 --> 00:09:28,250
worked as a state transfer system which
 

441
00:09:28,250 --> 00:09:29,889
worked as a state transfer system which
it doesn't then the state we'd be

442
00:09:29,889 --> 00:09:29,899
it doesn't then the state we'd be
 

443
00:09:29,899 --> 00:09:31,329
it doesn't then the state we'd be
talking about would be the contents of

444
00:09:31,329 --> 00:09:31,339
talking about would be the contents of
 

445
00:09:31,339 --> 00:09:33,310
talking about would be the contents of
the RAM the contents of the memory of

446
00:09:33,310 --> 00:09:33,320
the RAM the contents of the memory of
 

447
00:09:33,320 --> 00:09:35,949
the RAM the contents of the memory of
the primary so maybe every once while

448
00:09:35,949 --> 00:09:35,959
the primary so maybe every once while
 

449
00:09:35,959 --> 00:09:38,380
the primary so maybe every once while
the primary would just you know make a

450
00:09:38,380 --> 00:09:38,390
the primary would just you know make a
 

451
00:09:38,390 --> 00:09:39,880
the primary would just you know make a
big copy of its memory and send it

452
00:09:39,880 --> 00:09:39,890
big copy of its memory and send it
 

453
00:09:39,890 --> 00:09:41,590
big copy of its memory and send it
across the network to the backup you can

454
00:09:41,590 --> 00:09:41,600
across the network to the backup you can
 

455
00:09:41,600 --> 00:09:42,850
across the network to the backup you can
imagine if you wanted to be efficient

456
00:09:42,850 --> 00:09:42,860
imagine if you wanted to be efficient
 

457
00:09:42,860 --> 00:09:44,079
imagine if you wanted to be efficient
you know maybe you would only send the

458
00:09:44,079 --> 00:09:44,089
you know maybe you would only send the
 

459
00:09:44,089 --> 00:09:45,940
you know maybe you would only send the
parts of the memory that it's changed

460
00:09:45,940 --> 00:09:45,950
parts of the memory that it's changed
 

461
00:09:45,950 --> 00:09:48,010
parts of the memory that it's changed
since the last time you sent in memory

462
00:09:48,010 --> 00:09:48,020
since the last time you sent in memory
 

463
00:09:48,020 --> 00:09:51,699
since the last time you sent in memory
to the backup the replicated state

464
00:09:51,699 --> 00:09:51,709
to the backup the replicated state
 

465
00:09:51,709 --> 00:09:52,930
to the backup the replicated state
machine

466
00:09:52,930 --> 00:09:52,940
machine
 

467
00:09:52,940 --> 00:09:55,840
machine
this approach observes that most

468
00:09:55,840 --> 00:09:55,850
this approach observes that most
 

469
00:09:55,850 --> 00:09:57,550
this approach observes that most
services are most computer things we

470
00:09:57,550 --> 00:09:57,560
services are most computer things we
 

471
00:09:57,560 --> 00:10:00,579
services are most computer things we
want to replicate have some internal

472
00:10:00,579 --> 00:10:00,589
want to replicate have some internal
 

473
00:10:00,589 --> 00:10:05,320
want to replicate have some internal
operation that's deterministic except

474
00:10:05,320 --> 00:10:05,330
operation that's deterministic except
 

475
00:10:05,330 --> 00:10:08,829
operation that's deterministic except
when external input comes in right you

476
00:10:08,829 --> 00:10:08,839
when external input comes in right you
 

477
00:10:08,839 --> 00:10:10,870
when external input comes in right you
know ordinarily if there's no external

478
00:10:10,870 --> 00:10:10,880
know ordinarily if there's no external
 

479
00:10:10,880 --> 00:10:12,760
know ordinarily if there's no external
influences on a computer it just

480
00:10:12,760 --> 00:10:12,770
influences on a computer it just
 

481
00:10:12,770 --> 00:10:14,320
influences on a computer it just
executes one instruction after another

482
00:10:14,320 --> 00:10:14,330
executes one instruction after another
 

483
00:10:14,330 --> 00:10:16,000
executes one instruction after another
and what each instruction does is a

484
00:10:16,000 --> 00:10:16,010
and what each instruction does is a
 

485
00:10:16,010 --> 00:10:18,760
and what each instruction does is a
deterministic function of what's in the

486
00:10:18,760 --> 00:10:18,770
deterministic function of what's in the
 

487
00:10:18,770 --> 00:10:20,380
deterministic function of what's in the
memory and the registers of the computer

488
00:10:20,380 --> 00:10:20,390
memory and the registers of the computer
 

489
00:10:20,390 --> 00:10:22,390
memory and the registers of the computer
and it's only when external events

490
00:10:22,390 --> 00:10:22,400
and it's only when external events
 

491
00:10:22,400 --> 00:10:25,180
and it's only when external events
intervene that something unexpected may

492
00:10:25,180 --> 00:10:25,190
intervene that something unexpected may
 

493
00:10:25,190 --> 00:10:27,430
intervene that something unexpected may
happen like a packet arrives of a some

494
00:10:27,430 --> 00:10:27,440
happen like a packet arrives of a some
 

495
00:10:27,440 --> 00:10:31,540
happen like a packet arrives of a some
random time and that causes the server

496
00:10:31,540 --> 00:10:31,550
random time and that causes the server
 

497
00:10:31,550 --> 00:10:33,790
random time and that causes the server
to start doing something differently I'm

498
00:10:33,790 --> 00:10:33,800
to start doing something differently I'm
 

499
00:10:33,800 --> 00:10:36,400
to start doing something differently I'm
so replicated state machine schemes

500
00:10:36,400 --> 00:10:36,410
so replicated state machine schemes
 

501
00:10:36,410 --> 00:10:39,250
so replicated state machine schemes
don't send the state between the

502
00:10:39,250 --> 00:10:39,260
don't send the state between the
 

503
00:10:39,260 --> 00:10:41,019
don't send the state between the
replicas instead they just send those

504
00:10:41,019 --> 00:10:41,029
replicas instead they just send those
 

505
00:10:41,029 --> 00:10:45,490
replicas instead they just send those
external events they just send maybe

506
00:10:45,490 --> 00:10:45,500
external events they just send maybe
 

507
00:10:45,500 --> 00:10:47,829
external events they just send maybe
from a primary to a backup again just

508
00:10:47,829 --> 00:10:47,839
from a primary to a backup again just
 

509
00:10:47,839 --> 00:10:50,410
from a primary to a backup again just
send things like arriving input from the

510
00:10:50,410 --> 00:10:50,420
send things like arriving input from the
 

511
00:10:50,420 --> 00:10:52,540
send things like arriving input from the
outside world that the backup needs to

512
00:10:52,540 --> 00:10:52,550
outside world that the backup needs to
 

513
00:10:52,550 --> 00:10:52,900
outside world that the backup needs to
know

514
00:10:52,900 --> 00:10:52,910
know
 

515
00:10:52,910 --> 00:10:55,360
know
and the observation is that you know if

516
00:10:55,360 --> 00:10:55,370
and the observation is that you know if
 

517
00:10:55,370 --> 00:10:57,040
and the observation is that you know if
you have to two computers and they start

518
00:10:57,040 --> 00:10:57,050
you have to two computers and they start
 

519
00:10:57,050 --> 00:11:00,100
you have to two computers and they start
from the same state and they see the

520
00:11:00,100 --> 00:11:00,110
from the same state and they see the
 

521
00:11:00,110 --> 00:11:03,730
from the same state and they see the
same inputs that that in the same order

522
00:11:03,730 --> 00:11:03,740
same inputs that that in the same order
 

523
00:11:03,740 --> 00:11:05,800
same inputs that that in the same order
or at the same time the two computers

524
00:11:05,800 --> 00:11:05,810
or at the same time the two computers
 

525
00:11:05,810 --> 00:11:08,140
or at the same time the two computers
will continue to be replicas of each

526
00:11:08,140 --> 00:11:08,150
will continue to be replicas of each
 

527
00:11:08,150 --> 00:11:10,480
will continue to be replicas of each
other and sort of execute identically as

528
00:11:10,480 --> 00:11:10,490
other and sort of execute identically as
 

529
00:11:10,490 --> 00:11:12,010
other and sort of execute identically as
long as they both see the same inputs at

530
00:11:12,010 --> 00:11:12,020
long as they both see the same inputs at
 

531
00:11:12,020 --> 00:11:17,350
long as they both see the same inputs at
the same time so this transfers probably

532
00:11:17,350 --> 00:11:17,360
the same time so this transfers probably
 

533
00:11:17,360 --> 00:11:21,370
the same time so this transfers probably
memory and this transfer some primary

534
00:11:21,370 --> 00:11:21,380
memory and this transfer some primary
 

535
00:11:21,380 --> 00:11:25,660
memory and this transfer some primary
backup just operations from clients or

536
00:11:25,660 --> 00:11:25,670
backup just operations from clients or
 

537
00:11:25,670 --> 00:11:27,880
backup just operations from clients or
external external inputs or external

538
00:11:27,880 --> 00:11:27,890
external external inputs or external
 

539
00:11:27,890 --> 00:11:33,220
external external inputs or external
events and you know the reason why

540
00:11:33,220 --> 00:11:33,230
events and you know the reason why
 

541
00:11:33,230 --> 00:11:35,800
events and you know the reason why
people tend to favor a replicated state

542
00:11:35,800 --> 00:11:35,810
people tend to favor a replicated state
 

543
00:11:35,810 --> 00:11:39,340
people tend to favor a replicated state
machine is that usually operations are

544
00:11:39,340 --> 00:11:39,350
machine is that usually operations are
 

545
00:11:39,350 --> 00:11:41,620
machine is that usually operations are
smaller than the state but this you know

546
00:11:41,620 --> 00:11:41,630
smaller than the state but this you know
 

547
00:11:41,630 --> 00:11:43,120
smaller than the state but this you know
the state of a server if it's a database

548
00:11:43,120 --> 00:11:43,130
the state of a server if it's a database
 

549
00:11:43,130 --> 00:11:44,620
the state of a server if it's a database
server might be the entire database

550
00:11:44,620 --> 00:11:44,630
server might be the entire database
 

551
00:11:44,630 --> 00:11:47,050
server might be the entire database
might be you know gigabytes whereas the

552
00:11:47,050 --> 00:11:47,060
might be you know gigabytes whereas the
 

553
00:11:47,060 --> 00:11:48,670
might be you know gigabytes whereas the
operations are just some clients sending

554
00:11:48,670 --> 00:11:48,680
operations are just some clients sending
 

555
00:11:48,680 --> 00:11:51,100
operations are just some clients sending
and you know please read or write key 27

556
00:11:51,100 --> 00:11:51,110
and you know please read or write key 27
 

557
00:11:51,110 --> 00:11:53,680
and you know please read or write key 27
operations are usually small the states

558
00:11:53,680 --> 00:11:53,690
operations are usually small the states
 

559
00:11:53,690 --> 00:11:55,180
operations are usually small the states
usually large so replicate a state

560
00:11:55,180 --> 00:11:55,190
usually large so replicate a state
 

561
00:11:55,190 --> 00:11:57,460
usually large so replicate a state
machine usually looks attractive and

562
00:11:57,460 --> 00:11:57,470
machine usually looks attractive and
 

563
00:11:57,470 --> 00:11:59,080
machine usually looks attractive and
slight downside is that the schemes tend

564
00:11:59,080 --> 00:11:59,090
slight downside is that the schemes tend
 

565
00:11:59,090 --> 00:12:01,480
slight downside is that the schemes tend
to be quite a bit more complicated and

566
00:12:01,480 --> 00:12:01,490
to be quite a bit more complicated and
 

567
00:12:01,490 --> 00:12:05,890
to be quite a bit more complicated and
rely on sort of more assumptions about

568
00:12:05,890 --> 00:12:05,900
rely on sort of more assumptions about
 

569
00:12:05,900 --> 00:12:08,920
rely on sort of more assumptions about
how the computers operate whereas this

570
00:12:08,920 --> 00:12:08,930
how the computers operate whereas this
 

571
00:12:08,930 --> 00:12:10,630
how the computers operate whereas this
is a really heavy-handed I'm just gonna

572
00:12:10,630 --> 00:12:10,640
is a really heavy-handed I'm just gonna
 

573
00:12:10,640 --> 00:12:12,370
is a really heavy-handed I'm just gonna
send you my whole state sort of a

574
00:12:12,370 --> 00:12:12,380
send you my whole state sort of a
 

575
00:12:12,380 --> 00:12:14,430
send you my whole state sort of a
nothing to worry about

576
00:12:14,430 --> 00:12:14,440
nothing to worry about
 

577
00:12:14,440 --> 00:12:27,639
nothing to worry about
any questions about these strategies yes

578
00:12:27,639 --> 00:12:27,649

 

579
00:12:27,649 --> 00:12:30,920

well the did ok so the question is

580
00:12:30,920 --> 00:12:30,930
well the did ok so the question is
 

581
00:12:30,930 --> 00:12:32,750
well the did ok so the question is
suppose something went wrong with our

582
00:12:32,750 --> 00:12:32,760
suppose something went wrong with our
 

583
00:12:32,760 --> 00:12:34,400
suppose something went wrong with our
scheme and the backup was not actually

584
00:12:34,400 --> 00:12:34,410
scheme and the backup was not actually
 

585
00:12:34,410 --> 00:12:40,569
scheme and the backup was not actually
identical to the primary so you know

586
00:12:40,569 --> 00:12:40,579
identical to the primary so you know
 

587
00:12:40,579 --> 00:12:44,780
identical to the primary so you know
you're suppose we were running GFS

588
00:12:44,780 --> 00:12:44,790
you're suppose we were running GFS
 

589
00:12:44,790 --> 00:12:47,210
you're suppose we were running GFS
master and it's the primary it just

590
00:12:47,210 --> 00:12:47,220
master and it's the primary it just
 

591
00:12:47,220 --> 00:12:49,939
master and it's the primary it just
handed out at least two chunks server

592
00:12:49,939 --> 00:12:49,949
handed out at least two chunks server
 

593
00:12:49,949 --> 00:12:55,009
handed out at least two chunks server
one but because the two you know because

594
00:12:55,009 --> 00:12:55,019
one but because the two you know because
 

595
00:12:55,019 --> 00:12:56,900
one but because the two you know because
we've allowed the states of the primary

596
00:12:56,900 --> 00:12:56,910
we've allowed the states of the primary
 

597
00:12:56,910 --> 00:12:59,900
we've allowed the states of the primary
back to drift out of sync the backup did

598
00:12:59,900 --> 00:12:59,910
back to drift out of sync the backup did
 

599
00:12:59,910 --> 00:13:01,460
back to drift out of sync the backup did
not issue at least to anybody it wasn't

600
00:13:01,460 --> 00:13:01,470
not issue at least to anybody it wasn't
 

601
00:13:01,470 --> 00:13:02,840
not issue at least to anybody it wasn't
even away or anybody had asked for these

602
00:13:02,840 --> 00:13:02,850
even away or anybody had asked for these
 

603
00:13:02,850 --> 00:13:04,370
even away or anybody had asked for these
so now the primary thinks you know

604
00:13:04,370 --> 00:13:04,380
so now the primary thinks you know
 

605
00:13:04,380 --> 00:13:05,870
so now the primary thinks you know
chunks everyone has lease for some chunk

606
00:13:05,870 --> 00:13:05,880
chunks everyone has lease for some chunk
 

607
00:13:05,880 --> 00:13:08,590
chunks everyone has lease for some chunk
in the backup doesn't the primary fails

608
00:13:08,590 --> 00:13:08,600
in the backup doesn't the primary fails
 

609
00:13:08,600 --> 00:13:11,240
in the backup doesn't the primary fails
backup takes over right now chunks over

610
00:13:11,240 --> 00:13:11,250
backup takes over right now chunks over
 

611
00:13:11,250 --> 00:13:13,610
backup takes over right now chunks over
one thinks it has a lease for some chunk

612
00:13:13,610 --> 00:13:13,620
one thinks it has a lease for some chunk
 

613
00:13:13,620 --> 00:13:17,840
one thinks it has a lease for some chunk
but then the current master doesn't and

614
00:13:17,840 --> 00:13:17,850
but then the current master doesn't and
 

615
00:13:17,850 --> 00:13:19,430
but then the current master doesn't and
is happy to hand out the lease to some

616
00:13:19,430 --> 00:13:19,440
is happy to hand out the lease to some
 

617
00:13:19,440 --> 00:13:20,870
is happy to hand out the lease to some
other trunk server now we have to chunk

618
00:13:20,870 --> 00:13:20,880
other trunk server now we have to chunk
 

619
00:13:20,880 --> 00:13:23,240
other trunk server now we have to chunk
servers serving the same beasts okay so

620
00:13:23,240 --> 00:13:23,250
servers serving the same beasts okay so
 

621
00:13:23,250 --> 00:13:25,220
servers serving the same beasts okay so
that's just a close to home example but

622
00:13:25,220 --> 00:13:25,230
that's just a close to home example but
 

623
00:13:25,230 --> 00:13:28,009
that's just a close to home example but
really you know almost any bad thing and

624
00:13:28,009 --> 00:13:28,019
really you know almost any bad thing and
 

625
00:13:28,019 --> 00:13:30,220
really you know almost any bad thing and
kind of I think you construct any bad

626
00:13:30,220 --> 00:13:30,230
kind of I think you construct any bad
 

627
00:13:30,230 --> 00:13:32,870
kind of I think you construct any bad
scenario by just imagining some service

628
00:13:32,870 --> 00:13:32,880
scenario by just imagining some service
 

629
00:13:32,880 --> 00:13:35,569
scenario by just imagining some service
that confuse the wrong answer because

630
00:13:35,569 --> 00:13:35,579
that confuse the wrong answer because
 

631
00:13:35,579 --> 00:13:42,730
that confuse the wrong answer because
the state's leverage

632
00:13:42,730 --> 00:13:42,740

 

633
00:13:42,740 --> 00:13:50,590

so you're asking about randomization

634
00:13:50,590 --> 00:13:50,600

 

635
00:13:50,600 --> 00:13:53,840

yeah oh y'all talk about this I'll talk

636
00:13:53,840 --> 00:13:53,850
yeah oh y'all talk about this I'll talk
 

637
00:13:53,850 --> 00:13:55,940
yeah oh y'all talk about this I'll talk
about this a bit later on but it is good

638
00:13:55,940 --> 00:13:55,950
about this a bit later on but it is good
 

639
00:13:55,950 --> 00:13:58,310
about this a bit later on but it is good
that the replicated state scheme

640
00:13:58,310 --> 00:13:58,320
that the replicated state scheme
 

641
00:13:58,320 --> 00:14:02,870
that the replicated state scheme
definitely makes the most sense when the

642
00:14:02,870 --> 00:14:02,880
definitely makes the most sense when the
 

643
00:14:02,880 --> 00:14:04,310
definitely makes the most sense when the
instructions that the primary in the

644
00:14:04,310 --> 00:14:04,320
instructions that the primary in the
 

645
00:14:04,320 --> 00:14:06,560
instructions that the primary in the
back of our executing do the same thing

646
00:14:06,560 --> 00:14:06,570
back of our executing do the same thing
 

647
00:14:06,570 --> 00:14:08,360
back of our executing do the same thing
as long as there's no external events

648
00:14:08,360 --> 00:14:08,370
as long as there's no external events
 

649
00:14:08,370 --> 00:14:10,730
as long as there's no external events
right and that's almost true right you

650
00:14:10,730 --> 00:14:10,740
right and that's almost true right you
 

651
00:14:10,740 --> 00:14:12,470
right and that's almost true right you
know for an add instruction or something

652
00:14:12,470 --> 00:14:12,480
know for an add instruction or something
 

653
00:14:12,480 --> 00:14:14,870
know for an add instruction or something
yeah you know if the starting if the

654
00:14:14,870 --> 00:14:14,880
yeah you know if the starting if the
 

655
00:14:14,880 --> 00:14:16,340
yeah you know if the starting if the
registers of memory of the same and they

656
00:14:16,340 --> 00:14:16,350
registers of memory of the same and they
 

657
00:14:16,350 --> 00:14:17,780
registers of memory of the same and they
both execute an add instruction they had

658
00:14:17,780 --> 00:14:17,790
both execute an add instruction they had
 

659
00:14:17,790 --> 00:14:19,070
both execute an add instruction they had
insurgents kind of the same inputs in

660
00:14:19,070 --> 00:14:19,080
insurgents kind of the same inputs in
 

661
00:14:19,080 --> 00:14:20,720
insurgents kind of the same inputs in
the same outputs but they're in some

662
00:14:20,720 --> 00:14:20,730
the same outputs but they're in some
 

663
00:14:20,730 --> 00:14:22,190
the same outputs but they're in some
instructions as you point out that don't

664
00:14:22,190 --> 00:14:22,200
instructions as you point out that don't
 

665
00:14:22,200 --> 00:14:23,870
instructions as you point out that don't
like maybe there's an instruction that

666
00:14:23,870 --> 00:14:23,880
like maybe there's an instruction that
 

667
00:14:23,880 --> 00:14:26,390
like maybe there's an instruction that
gets the current time of day now

668
00:14:26,390 --> 00:14:26,400
gets the current time of day now
 

669
00:14:26,400 --> 00:14:27,680
gets the current time of day now
probably be executed at slightly

670
00:14:27,680 --> 00:14:27,690
probably be executed at slightly
 

671
00:14:27,690 --> 00:14:29,780
probably be executed at slightly
different times or an instruction that

672
00:14:29,780 --> 00:14:29,790
different times or an instruction that
 

673
00:14:29,790 --> 00:14:32,240
different times or an instruction that
gets the current processors unique ID

674
00:14:32,240 --> 00:14:32,250
gets the current processors unique ID
 

675
00:14:32,250 --> 00:14:34,820
gets the current processors unique ID
and a serial number it's going to yield

676
00:14:34,820 --> 00:14:34,830
and a serial number it's going to yield
 

677
00:14:34,830 --> 00:14:38,390
and a serial number it's going to yield
the different answers and the the the

678
00:14:38,390 --> 00:14:38,400
the different answers and the the the
 

679
00:14:38,400 --> 00:14:39,920
the different answers and the the the
uniform answered the questions that

680
00:14:39,920 --> 00:14:39,930
uniform answered the questions that
 

681
00:14:39,930 --> 00:14:42,350
uniform answered the questions that
sound like this is that the primary does

682
00:14:42,350 --> 00:14:42,360
sound like this is that the primary does
 

683
00:14:42,360 --> 00:14:44,720
sound like this is that the primary does
it and sends the answer to the backup

684
00:14:44,720 --> 00:14:44,730
it and sends the answer to the backup
 

685
00:14:44,730 --> 00:14:46,820
it and sends the answer to the backup
and the backup does not execute that

686
00:14:46,820 --> 00:14:46,830
and the backup does not execute that
 

687
00:14:46,830 --> 00:14:48,890
and the backup does not execute that
instruction but instead at the point

688
00:14:48,890 --> 00:14:48,900
instruction but instead at the point
 

689
00:14:48,900 --> 00:14:50,110
instruction but instead at the point
where it would execute that instruction

690
00:14:50,110 --> 00:14:50,120
where it would execute that instruction
 

691
00:14:50,120 --> 00:14:52,730
where it would execute that instruction
it listens for the primary to tell it

692
00:14:52,730 --> 00:14:52,740
it listens for the primary to tell it
 

693
00:14:52,740 --> 00:14:54,080
it listens for the primary to tell it
what the right answer would be and just

694
00:14:54,080 --> 00:14:54,090
what the right answer would be and just
 

695
00:14:54,090 --> 00:14:56,660
what the right answer would be and just
sort of fakes that answer to the

696
00:14:56,660 --> 00:14:56,670
sort of fakes that answer to the
 

697
00:14:56,670 --> 00:15:00,800
sort of fakes that answer to the
software I'll talk about you know how

698
00:15:00,800 --> 00:15:00,810
software I'll talk about you know how
 

699
00:15:00,810 --> 00:15:04,540
software I'll talk about you know how
the VMware scheme does that okay

700
00:15:04,540 --> 00:15:04,550
the VMware scheme does that okay
 

701
00:15:04,550 --> 00:15:06,680
the VMware scheme does that okay
interestingly enough though today's

702
00:15:06,680 --> 00:15:06,690
interestingly enough though today's
 

703
00:15:06,690 --> 00:15:09,800
interestingly enough though today's
paper is all about a replicated state

704
00:15:09,800 --> 00:15:09,810
paper is all about a replicated state
 

705
00:15:09,810 --> 00:15:12,140
paper is all about a replicated state
machine you may have noticed that

706
00:15:12,140 --> 00:15:12,150
machine you may have noticed that
 

707
00:15:12,150 --> 00:15:13,670
machine you may have noticed that
today's paper only deals with you know

708
00:15:13,670 --> 00:15:13,680
today's paper only deals with you know
 

709
00:15:13,680 --> 00:15:15,320
today's paper only deals with you know
processors and it's not that clear how

710
00:15:15,320 --> 00:15:15,330
processors and it's not that clear how
 

711
00:15:15,330 --> 00:15:18,670
processors and it's not that clear how
it could be extended to a multi-core and

712
00:15:18,670 --> 00:15:18,680
it could be extended to a multi-core and
 

713
00:15:18,680 --> 00:15:21,800
it could be extended to a multi-core and
a multi-core machine where the

714
00:15:21,800 --> 00:15:21,810
a multi-core machine where the
 

715
00:15:21,810 --> 00:15:23,540
a multi-core machine where the
interleavings of the instructions from

716
00:15:23,540 --> 00:15:23,550
interleavings of the instructions from
 

717
00:15:23,550 --> 00:15:24,740
interleavings of the instructions from
the two cores organ are

718
00:15:24,740 --> 00:15:24,750
the two cores organ are
 

719
00:15:24,750 --> 00:15:26,600
the two cores organ are
non-deterministic all right so we no

720
00:15:26,600 --> 00:15:26,610
non-deterministic all right so we no
 

721
00:15:26,610 --> 00:15:27,710
non-deterministic all right so we no
longer have this situation on a

722
00:15:27,710 --> 00:15:27,720
longer have this situation on a
 

723
00:15:27,720 --> 00:15:29,660
longer have this situation on a
multi-core machine where if we just let

724
00:15:29,660 --> 00:15:29,670
multi-core machine where if we just let
 

725
00:15:29,670 --> 00:15:31,190
multi-core machine where if we just let
the primary and backup execute they're

726
00:15:31,190 --> 00:15:31,200
the primary and backup execute they're
 

727
00:15:31,200 --> 00:15:32,960
the primary and backup execute they're
you know all else being equal they're

728
00:15:32,960 --> 00:15:32,970
you know all else being equal they're
 

729
00:15:32,970 --> 00:15:34,660
you know all else being equal they're
going to be the same because they won't

730
00:15:34,660 --> 00:15:34,670
going to be the same because they won't
 

731
00:15:34,670 --> 00:15:37,520
going to be the same because they won't
execute on multiple cores VMware has

732
00:15:37,520 --> 00:15:37,530
execute on multiple cores VMware has
 

733
00:15:37,530 --> 00:15:39,590
execute on multiple cores VMware has
since come out with a new possibly

734
00:15:39,590 --> 00:15:39,600
since come out with a new possibly
 

735
00:15:39,600 --> 00:15:42,230
since come out with a new possibly
completely different replication system

736
00:15:42,230 --> 00:15:42,240
completely different replication system
 

737
00:15:42,240 --> 00:15:44,060
completely different replication system
that does work on multi-core and the new

738
00:15:44,060 --> 00:15:44,070
that does work on multi-core and the new
 

739
00:15:44,070 --> 00:15:46,880
that does work on multi-core and the new
system appears to me to be using state

740
00:15:46,880 --> 00:15:46,890
system appears to me to be using state
 

741
00:15:46,890 --> 00:15:49,520
system appears to me to be using state
transfer instead of replicated state

742
00:15:49,520 --> 00:15:49,530
transfer instead of replicated state
 

743
00:15:49,530 --> 00:15:50,930
transfer instead of replicated state
machine because state transferred is

744
00:15:50,930 --> 00:15:50,940
machine because state transferred is
 

745
00:15:50,940 --> 00:15:53,180
machine because state transferred is
more robust in the face

746
00:15:53,180 --> 00:15:53,190
more robust in the face
 

747
00:15:53,190 --> 00:15:56,330
more robust in the face
multi-core and parallelism if you use

748
00:15:56,330 --> 00:15:56,340
multi-core and parallelism if you use
 

749
00:15:56,340 --> 00:15:58,370
multi-core and parallelism if you use
the machine and send the memory over you

750
00:15:58,370 --> 00:15:58,380
the machine and send the memory over you
 

751
00:15:58,380 --> 00:16:00,680
the machine and send the memory over you
know that the memory image is just that

752
00:16:00,680 --> 00:16:00,690
know that the memory image is just that
 

753
00:16:00,690 --> 00:16:02,240
know that the memory image is just that
just is the state of the machine and

754
00:16:02,240 --> 00:16:02,250
just is the state of the machine and
 

755
00:16:02,250 --> 00:16:04,460
just is the state of the machine and
sort of it doesn't matter that there was

756
00:16:04,460 --> 00:16:04,470
sort of it doesn't matter that there was
 

757
00:16:04,470 --> 00:16:06,590
sort of it doesn't matter that there was
parallelism whereas the replicated state

758
00:16:06,590 --> 00:16:06,600
parallelism whereas the replicated state
 

759
00:16:06,600 --> 00:16:08,270
parallelism whereas the replicated state
machine scheme really has a problem with

760
00:16:08,270 --> 00:16:08,280
machine scheme really has a problem with
 

761
00:16:08,280 --> 00:16:12,770
machine scheme really has a problem with
the parallelism you know on the other

762
00:16:12,770 --> 00:16:12,780
the parallelism you know on the other
 

763
00:16:12,780 --> 00:16:14,990
the parallelism you know on the other
hand I'm guessing that this new

764
00:16:14,990 --> 00:16:15,000
hand I'm guessing that this new
 

765
00:16:15,000 --> 00:16:21,190
hand I'm guessing that this new
multi-core scheme is more expensive okay

766
00:16:21,190 --> 00:16:21,200

 

767
00:16:21,200 --> 00:16:24,650

all right so if we want to build a

768
00:16:24,650 --> 00:16:24,660
all right so if we want to build a
 

769
00:16:24,660 --> 00:16:26,240
all right so if we want to build a
replicated state machine scheme we got a

770
00:16:26,240 --> 00:16:26,250
replicated state machine scheme we got a
 

771
00:16:26,250 --> 00:16:31,190
replicated state machine scheme we got a
number of questions to answer so we need

772
00:16:31,190 --> 00:16:31,200
number of questions to answer so we need
 

773
00:16:31,200 --> 00:16:32,420
number of questions to answer so we need
to decide at what level we're gonna

774
00:16:32,420 --> 00:16:32,430
to decide at what level we're gonna
 

775
00:16:32,430 --> 00:16:36,350
to decide at what level we're gonna
replicate state right so what state what

776
00:16:36,350 --> 00:16:36,360
replicate state right so what state what
 

777
00:16:36,360 --> 00:16:44,420
replicate state right so what state what
do we mean by state we have to worry

778
00:16:44,420 --> 00:16:44,430
do we mean by state we have to worry
 

779
00:16:44,430 --> 00:16:47,660
do we mean by state we have to worry
about how how closely synchronized the

780
00:16:47,660 --> 00:16:47,670
about how how closely synchronized the
 

781
00:16:47,670 --> 00:16:49,700
about how how closely synchronized the
primary and backup have to be right

782
00:16:49,700 --> 00:16:49,710
primary and backup have to be right
 

783
00:16:49,710 --> 00:16:51,800
primary and backup have to be right
because it's likely the primary will

784
00:16:51,800 --> 00:16:51,810
because it's likely the primary will
 

785
00:16:51,810 --> 00:16:53,390
because it's likely the primary will
execute a little bit ahead of the backup

786
00:16:53,390 --> 00:16:53,400
execute a little bit ahead of the backup
 

787
00:16:53,400 --> 00:16:55,100
execute a little bit ahead of the backup
after all it it's the primary that sees

788
00:16:55,100 --> 00:16:55,110
after all it it's the primary that sees
 

789
00:16:55,110 --> 00:16:57,560
after all it it's the primary that sees
the inputs so the backup almost

790
00:16:57,560 --> 00:16:57,570
the inputs so the backup almost
 

791
00:16:57,570 --> 00:17:00,350
the inputs so the backup almost
necessarily must lag over that gives

792
00:17:00,350 --> 00:17:00,360
necessarily must lag over that gives
 

793
00:17:00,360 --> 00:17:01,940
necessarily must lag over that gives
that means there's an opportunity if the

794
00:17:01,940 --> 00:17:01,950
that means there's an opportunity if the
 

795
00:17:01,950 --> 00:17:04,490
that means there's an opportunity if the
primary fails for the prime for the

796
00:17:04,490 --> 00:17:04,500
primary fails for the prime for the
 

797
00:17:04,500 --> 00:17:08,840
primary fails for the prime for the
backup not to be fully caught up having

798
00:17:08,840 --> 00:17:08,850
backup not to be fully caught up having
 

799
00:17:08,850 --> 00:17:11,750
backup not to be fully caught up having
the backup actually executes really in

800
00:17:11,750 --> 00:17:11,760
the backup actually executes really in
 

801
00:17:11,760 --> 00:17:12,949
the backup actually executes really in
lockstep with the primaries for

802
00:17:12,949 --> 00:17:12,959
lockstep with the primaries for
 

803
00:17:12,959 --> 00:17:14,540
lockstep with the primaries for
expensive because it requires a lot of

804
00:17:14,540 --> 00:17:14,550
expensive because it requires a lot of
 

805
00:17:14,550 --> 00:17:16,310
expensive because it requires a lot of
chitchat so a lot of designs a lot of

806
00:17:16,310 --> 00:17:16,320
chitchat so a lot of designs a lot of
 

807
00:17:16,320 --> 00:17:19,460
chitchat so a lot of designs a lot of
what people sweat about is how close the

808
00:17:19,460 --> 00:17:19,470
what people sweat about is how close the
 

809
00:17:19,470 --> 00:17:27,800
what people sweat about is how close the
synchronization is if the primary fails

810
00:17:27,800 --> 00:17:27,810
synchronization is if the primary fails
 

811
00:17:27,810 --> 00:17:29,750
synchronization is if the primary fails
or you know actually if the backup fails

812
00:17:29,750 --> 00:17:29,760
or you know actually if the backup fails
 

813
00:17:29,760 --> 00:17:31,580
or you know actually if the backup fails
to but it's more exciting if the primary

814
00:17:31,580 --> 00:17:31,590
to but it's more exciting if the primary
 

815
00:17:31,590 --> 00:17:33,200
to but it's more exciting if the primary
fails there has to be some scheme for

816
00:17:33,200 --> 00:17:33,210
fails there has to be some scheme for
 

817
00:17:33,210 --> 00:17:34,640
fails there has to be some scheme for
switching over and the clients have to

818
00:17:34,640 --> 00:17:34,650
switching over and the clients have to
 

819
00:17:34,650 --> 00:17:37,820
switching over and the clients have to
know oh gosh I instead of talking to the

820
00:17:37,820 --> 00:17:37,830
know oh gosh I instead of talking to the
 

821
00:17:37,830 --> 00:17:39,770
know oh gosh I instead of talking to the
old primary on server one I should now

822
00:17:39,770 --> 00:17:39,780
old primary on server one I should now
 

823
00:17:39,780 --> 00:17:44,510
old primary on server one I should now
be talking to the

824
00:17:44,510 --> 00:17:44,520
be talking to the
 

825
00:17:44,520 --> 00:17:47,960
be talking to the
the backup on server to all the clients

826
00:17:47,960 --> 00:17:47,970
the backup on server to all the clients
 

827
00:17:47,970 --> 00:17:50,270
the backup on server to all the clients
have to somehow figure this out the

828
00:17:50,270 --> 00:17:50,280
have to somehow figure this out the
 

829
00:17:50,280 --> 00:17:53,330
have to somehow figure this out the
switch over almost certainly it's almost

830
00:17:53,330 --> 00:17:53,340
switch over almost certainly it's almost
 

831
00:17:53,340 --> 00:17:55,850
switch over almost certainly it's almost
impossible maybe impossible to design a

832
00:17:55,850 --> 00:17:55,860
impossible maybe impossible to design a
 

833
00:17:55,860 --> 00:17:58,550
impossible maybe impossible to design a
cut over system in which no anomalies

834
00:17:58,550 --> 00:17:58,560
cut over system in which no anomalies
 

835
00:17:58,560 --> 00:18:00,950
cut over system in which no anomalies
are every are ever visible you know in

836
00:18:00,950 --> 00:18:00,960
are every are ever visible you know in
 

837
00:18:00,960 --> 00:18:02,990
are every are ever visible you know in
this sort of ideal world if the primary

838
00:18:02,990 --> 00:18:03,000
this sort of ideal world if the primary
 

839
00:18:03,000 --> 00:18:05,060
this sort of ideal world if the primary
feels we'd like nobody to ever notice

840
00:18:05,060 --> 00:18:05,070
feels we'd like nobody to ever notice
 

841
00:18:05,070 --> 00:18:07,070
feels we'd like nobody to ever notice
none of the clients to notice turns out

842
00:18:07,070 --> 00:18:07,080
none of the clients to notice turns out
 

843
00:18:07,080 --> 00:18:10,910
none of the clients to notice turns out
that's basically unattainable so there's

844
00:18:10,910 --> 00:18:10,920
that's basically unattainable so there's
 

845
00:18:10,920 --> 00:18:15,110
that's basically unattainable so there's
going to be a mama leaves during the cut

846
00:18:15,110 --> 00:18:15,120
going to be a mama leaves during the cut
 

847
00:18:15,120 --> 00:18:16,490
going to be a mama leaves during the cut
over and we've gotta figure out a way to

848
00:18:16,490 --> 00:18:16,500
over and we've gotta figure out a way to
 

849
00:18:16,500 --> 00:18:19,550
over and we've gotta figure out a way to
cope with them and finally if the one of

850
00:18:19,550 --> 00:18:19,560
cope with them and finally if the one of
 

851
00:18:19,560 --> 00:18:21,740
cope with them and finally if the one of
the two if one of our replicas fails we

852
00:18:21,740 --> 00:18:21,750
the two if one of our replicas fails we
 

853
00:18:21,750 --> 00:18:23,780
the two if one of our replicas fails we
really need to have a new replica right

854
00:18:23,780 --> 00:18:23,790
really need to have a new replica right
 

855
00:18:23,790 --> 00:18:26,810
really need to have a new replica right
if we have a two replicas and one fails

856
00:18:26,810 --> 00:18:26,820
if we have a two replicas and one fails
 

857
00:18:26,820 --> 00:18:29,000
if we have a two replicas and one fails
we're just living on borrowed time right

858
00:18:29,000 --> 00:18:29,010
we're just living on borrowed time right
 

859
00:18:29,010 --> 00:18:31,700
we're just living on borrowed time right
because the second replica may fail at

860
00:18:31,700 --> 00:18:31,710
because the second replica may fail at
 

861
00:18:31,710 --> 00:18:33,980
because the second replica may fail at
some point so we absolutely need to get

862
00:18:33,980 --> 00:18:33,990
some point so we absolutely need to get
 

863
00:18:33,990 --> 00:18:36,230
some point so we absolutely need to get
a new replica back online as fast as

864
00:18:36,230 --> 00:18:36,240
a new replica back online as fast as
 

865
00:18:36,240 --> 00:18:41,240
a new replica back online as fast as
possible so and that can be very

866
00:18:41,240 --> 00:18:41,250
possible so and that can be very
 

867
00:18:41,250 --> 00:18:44,600
possible so and that can be very
expensive the state is big you know you

868
00:18:44,600 --> 00:18:44,610
expensive the state is big you know you
 

869
00:18:44,610 --> 00:18:45,680
expensive the state is big you know you
know but the reason we like to replicate

870
00:18:45,680 --> 00:18:45,690
know but the reason we like to replicate
 

871
00:18:45,690 --> 00:18:47,180
know but the reason we like to replicate
a state machine was because we thought

872
00:18:47,180 --> 00:18:47,190
a state machine was because we thought
 

873
00:18:47,190 --> 00:18:49,310
a state machine was because we thought
state transfer would be expensive but

874
00:18:49,310 --> 00:18:49,320
state transfer would be expensive but
 

875
00:18:49,320 --> 00:18:51,440
state transfer would be expensive but
the two replicas in a replicated state

876
00:18:51,440 --> 00:18:51,450
the two replicas in a replicated state
 

877
00:18:51,450 --> 00:18:53,030
the two replicas in a replicated state
machine still need to have full state

878
00:18:53,030 --> 00:18:53,040
machine still need to have full state
 

879
00:18:53,040 --> 00:18:55,220
machine still need to have full state
right we just had a cheap way of keeping

880
00:18:55,220 --> 00:18:55,230
right we just had a cheap way of keeping
 

881
00:18:55,230 --> 00:18:57,200
right we just had a cheap way of keeping
them both in sync if we need to create a

882
00:18:57,200 --> 00:18:57,210
them both in sync if we need to create a
 

883
00:18:57,210 --> 00:18:59,690
them both in sync if we need to create a
new replica we actually have no choice

884
00:18:59,690 --> 00:18:59,700
new replica we actually have no choice
 

885
00:18:59,700 --> 00:19:01,400
new replica we actually have no choice
but state transfer to create the new

886
00:19:01,400 --> 00:19:01,410
but state transfer to create the new
 

887
00:19:01,410 --> 00:19:03,080
but state transfer to create the new
replicas the new replica needs to have a

888
00:19:03,080 --> 00:19:03,090
replicas the new replica needs to have a
 

889
00:19:03,090 --> 00:19:06,080
replicas the new replica needs to have a
complete copy of the state so it's going

890
00:19:06,080 --> 00:19:06,090
complete copy of the state so it's going
 

891
00:19:06,090 --> 00:19:08,090
complete copy of the state so it's going
to be expensive to create new replicas

892
00:19:08,090 --> 00:19:08,100
to be expensive to create new replicas
 

893
00:19:08,100 --> 00:19:15,290
to be expensive to create new replicas
and this is often people spending well

894
00:19:15,290 --> 00:19:15,300
and this is often people spending well
 

895
00:19:15,300 --> 00:19:16,520
and this is often people spending well
actually people spend a lot of time

896
00:19:16,520 --> 00:19:16,530
actually people spend a lot of time
 

897
00:19:16,530 --> 00:19:18,740
actually people spend a lot of time
worrying about all these questions and

898
00:19:18,740 --> 00:19:18,750
worrying about all these questions and
 

899
00:19:18,750 --> 00:19:20,480
worrying about all these questions and
you know we'll see them again as we look

900
00:19:20,480 --> 00:19:20,490
you know we'll see them again as we look
 

901
00:19:20,490 --> 00:19:22,970
you know we'll see them again as we look
at other replicated state machine

902
00:19:22,970 --> 00:19:22,980
at other replicated state machine
 

903
00:19:22,980 --> 00:19:29,450
at other replicated state machine
schemes so on the topic of what state to

904
00:19:29,450 --> 00:19:29,460
schemes so on the topic of what state to
 

905
00:19:29,460 --> 00:19:33,710
schemes so on the topic of what state to
replicate the today's paper has a very

906
00:19:33,710 --> 00:19:33,720
replicate the today's paper has a very
 

907
00:19:33,720 --> 00:19:35,870
replicate the today's paper has a very
interesting answer to this question it

908
00:19:35,870 --> 00:19:35,880
interesting answer to this question it
 

909
00:19:35,880 --> 00:19:38,150
interesting answer to this question it
replicates the full state of the machine

910
00:19:38,150 --> 00:19:38,160
replicates the full state of the machine
 

911
00:19:38,160 --> 00:19:42,050
replicates the full state of the machine
that is all of memory and all the

912
00:19:42,050 --> 00:19:42,060
that is all of memory and all the
 

913
00:19:42,060 --> 00:19:45,020
that is all of memory and all the
Machine registers it's like a very very

914
00:19:45,020 --> 00:19:45,030
Machine registers it's like a very very
 

915
00:19:45,030 --> 00:19:48,770
Machine registers it's like a very very
detailed replication scheme just no

916
00:19:48,770 --> 00:19:48,780
detailed replication scheme just no
 

917
00:19:48,780 --> 00:19:51,110
detailed replication scheme just no
difference at the even of the lowest

918
00:19:51,110 --> 00:19:51,120
difference at the even of the lowest
 

919
00:19:51,120 --> 00:19:52,610
difference at the even of the lowest
levels between the primary in the backup

920
00:19:52,610 --> 00:19:52,620
levels between the primary in the backup
 

921
00:19:52,620 --> 00:19:55,550
levels between the primary in the backup
that's quite rare for replication

922
00:19:55,550 --> 00:19:55,560
that's quite rare for replication
 

923
00:19:55,560 --> 00:19:56,660
that's quite rare for replication
schemes

924
00:19:56,660 --> 00:19:56,670
schemes
 

925
00:19:56,670 --> 00:19:58,670
schemes
almost always you see something that's

926
00:19:58,670 --> 00:19:58,680
almost always you see something that's
 

927
00:19:58,680 --> 00:20:01,190
almost always you see something that's
more like GFS where GFS absolutely did

928
00:20:01,190 --> 00:20:01,200
more like GFS where GFS absolutely did
 

929
00:20:01,200 --> 00:20:03,620
more like GFS where GFS absolutely did
not replicate you know they had

930
00:20:03,620 --> 00:20:03,630
not replicate you know they had
 

931
00:20:03,630 --> 00:20:05,690
not replicate you know they had
replication but it wasn't replicating

932
00:20:05,690 --> 00:20:05,700
replication but it wasn't replicating
 

933
00:20:05,700 --> 00:20:08,210
replication but it wasn't replicating
every single you know bit of memory

934
00:20:08,210 --> 00:20:08,220
every single you know bit of memory
 

935
00:20:08,220 --> 00:20:10,160
every single you know bit of memory
between the primaries and the backups

936
00:20:10,160 --> 00:20:10,170
between the primaries and the backups
 

937
00:20:10,170 --> 00:20:12,170
between the primaries and the backups
it was replicating much more application

938
00:20:12,170 --> 00:20:12,180
it was replicating much more application
 

939
00:20:12,180 --> 00:20:14,900
it was replicating much more application
level table of chunks

940
00:20:14,900 --> 00:20:14,910
level table of chunks
 

941
00:20:14,910 --> 00:20:16,940
level table of chunks
I had this abstraction of you know

942
00:20:16,940 --> 00:20:16,950
I had this abstraction of you know
 

943
00:20:16,950 --> 00:20:18,620
I had this abstraction of you know
chunks and chunk identifiers and that's

944
00:20:18,620 --> 00:20:18,630
chunks and chunk identifiers and that's
 

945
00:20:18,630 --> 00:20:20,360
chunks and chunk identifiers and that's
what it was replicating it wasn't

946
00:20:20,360 --> 00:20:20,370
what it was replicating it wasn't
 

947
00:20:20,370 --> 00:20:22,280
what it was replicating it wasn't
replicating sort of everything else

948
00:20:22,280 --> 00:20:22,290
replicating sort of everything else
 

949
00:20:22,290 --> 00:20:24,560
replicating sort of everything else
wasn't going to the expense of

950
00:20:24,560 --> 00:20:24,570
wasn't going to the expense of
 

951
00:20:24,570 --> 00:20:26,420
wasn't going to the expense of
replicating every single other thing

952
00:20:26,420 --> 00:20:26,430
replicating every single other thing
 

953
00:20:26,430 --> 00:20:28,430
replicating every single other thing
that machines we're doing okay as long

954
00:20:28,430 --> 00:20:28,440
that machines we're doing okay as long
 

955
00:20:28,440 --> 00:20:31,400
that machines we're doing okay as long
as they had the same sort of application

956
00:20:31,400 --> 00:20:31,410
as they had the same sort of application
 

957
00:20:31,410 --> 00:20:37,400
as they had the same sort of application
visible set of of chunks so most

958
00:20:37,400 --> 00:20:37,410
visible set of of chunks so most
 

959
00:20:37,410 --> 00:20:40,520
visible set of of chunks so most
replication schemes out there go the GFS

960
00:20:40,520 --> 00:20:40,530
replication schemes out there go the GFS
 

961
00:20:40,530 --> 00:20:42,740
replication schemes out there go the GFS
route in fact almost everything except

962
00:20:42,740 --> 00:20:42,750
route in fact almost everything except
 

963
00:20:42,750 --> 00:20:46,790
route in fact almost everything except
pretty much this paper and a few handful

964
00:20:46,790 --> 00:20:46,800
pretty much this paper and a few handful
 

965
00:20:46,800 --> 00:20:48,740
pretty much this paper and a few handful
of similar systems almost everything

966
00:20:48,740 --> 00:20:48,750
of similar systems almost everything
 

967
00:20:48,750 --> 00:20:50,210
of similar systems almost everything
uses application at some level

968
00:20:50,210 --> 00:20:50,220
uses application at some level
 

969
00:20:50,220 --> 00:20:53,720
uses application at some level
application level of replication because

970
00:20:53,720 --> 00:20:53,730
application level of replication because
 

971
00:20:53,730 --> 00:20:56,930
application level of replication because
it can be much more efficient because we

972
00:20:56,930 --> 00:20:56,940
it can be much more efficient because we
 

973
00:20:56,940 --> 00:20:58,550
it can be much more efficient because we
don't have to go to the we don't have to

974
00:20:58,550 --> 00:20:58,560
don't have to go to the we don't have to
 

975
00:20:58,560 --> 00:21:00,950
don't have to go to the we don't have to
go to the trouble of for example making

976
00:21:00,950 --> 00:21:00,960
go to the trouble of for example making
 

977
00:21:00,960 --> 00:21:02,780
go to the trouble of for example making
sure that interrupts occur at exactly

978
00:21:02,780 --> 00:21:02,790
sure that interrupts occur at exactly
 

979
00:21:02,790 --> 00:21:04,970
sure that interrupts occur at exactly
the same point in the execution of the

980
00:21:04,970 --> 00:21:04,980
the same point in the execution of the
 

981
00:21:04,980 --> 00:21:07,250
the same point in the execution of the
primary and backup GFS does not sweat

982
00:21:07,250 --> 00:21:07,260
primary and backup GFS does not sweat
 

983
00:21:07,260 --> 00:21:09,410
primary and backup GFS does not sweat
that at all but this paper has to do

984
00:21:09,410 --> 00:21:09,420
that at all but this paper has to do
 

985
00:21:09,420 --> 00:21:11,330
that at all but this paper has to do
because it replicates at such a low

986
00:21:11,330 --> 00:21:11,340
because it replicates at such a low
 

987
00:21:11,340 --> 00:21:14,510
because it replicates at such a low
level so most people build efficient

988
00:21:14,510 --> 00:21:14,520
level so most people build efficient
 

989
00:21:14,520 --> 00:21:16,550
level so most people build efficient
systems with applications specific

990
00:21:16,550 --> 00:21:16,560
systems with applications specific
 

991
00:21:16,560 --> 00:21:18,830
systems with applications specific
replication the consequence of that

992
00:21:18,830 --> 00:21:18,840
replication the consequence of that
 

993
00:21:18,840 --> 00:21:20,870
replication the consequence of that
though is that the replication has to be

994
00:21:20,870 --> 00:21:20,880
though is that the replication has to be
 

995
00:21:20,880 --> 00:21:21,890
though is that the replication has to be
built into the right into the

996
00:21:21,890 --> 00:21:21,900
built into the right into the
 

997
00:21:21,900 --> 00:21:23,570
built into the right into the
application right if you're getting a

998
00:21:23,570 --> 00:21:23,580
application right if you're getting a
 

999
00:21:23,580 --> 00:21:26,780
application right if you're getting a
feed of application level operations for

1000
00:21:26,780 --> 00:21:26,790
feed of application level operations for
 

1001
00:21:26,790 --> 00:21:28,940
feed of application level operations for
example you really need to have the

1002
00:21:28,940 --> 00:21:28,950
example you really need to have the
 

1003
00:21:28,950 --> 00:21:31,000
example you really need to have the
application participate in that because

1004
00:21:31,000 --> 00:21:31,010
application participate in that because
 

1005
00:21:31,010 --> 00:21:33,710
application participate in that because
some generic replication thing like

1006
00:21:33,710 --> 00:21:33,720
some generic replication thing like
 

1007
00:21:33,720 --> 00:21:34,310
some generic replication thing like
today's paper

1008
00:21:34,310 --> 00:21:34,320
today's paper
 

1009
00:21:34,320 --> 00:21:37,430
today's paper
doesn't really can't understand the

1010
00:21:37,430 --> 00:21:37,440
doesn't really can't understand the
 

1011
00:21:37,440 --> 00:21:41,230
doesn't really can't understand the
semantics of what needs to be replicated

1012
00:21:41,230 --> 00:21:41,240

 

1013
00:21:41,240 --> 00:21:44,510

so anyways so most teams are application

1014
00:21:44,510 --> 00:21:44,520
so anyways so most teams are application
 

1015
00:21:44,520 --> 00:21:47,330
so anyways so most teams are application
specific like GFS and every other paper

1016
00:21:47,330 --> 00:21:47,340
specific like GFS and every other paper
 

1017
00:21:47,340 --> 00:21:49,300
specific like GFS and every other paper
we're going to read on this topic

1018
00:21:49,300 --> 00:21:49,310
we're going to read on this topic
 

1019
00:21:49,310 --> 00:21:52,310
we're going to read on this topic
today's paper is unique in that it

1020
00:21:52,310 --> 00:21:52,320
today's paper is unique in that it
 

1021
00:21:52,320 --> 00:21:54,410
today's paper is unique in that it
replicates at the level of the machine

1022
00:21:54,410 --> 00:21:54,420
replicates at the level of the machine
 

1023
00:21:54,420 --> 00:21:55,880
replicates at the level of the machine
and therefore does not care what

1024
00:21:55,880 --> 00:21:55,890
and therefore does not care what
 

1025
00:21:55,890 --> 00:21:57,860
and therefore does not care what
software you run on it right it

1026
00:21:57,860 --> 00:21:57,870
software you run on it right it
 

1027
00:21:57,870 --> 00:22:00,440
software you run on it right it
replicates the low-level memory and

1028
00:22:00,440 --> 00:22:00,450
replicates the low-level memory and
 

1029
00:22:00,450 --> 00:22:01,910
replicates the low-level memory and
machine registers you can run any

1030
00:22:01,910 --> 00:22:01,920
machine registers you can run any
 

1031
00:22:01,920 --> 00:22:03,590
machine registers you can run any
software you like on it as long as it

1032
00:22:03,590 --> 00:22:03,600
software you like on it as long as it
 

1033
00:22:03,600 --> 00:22:05,240
software you like on it as long as it
runs on that kind of microprocessor

1034
00:22:05,240 --> 00:22:05,250
runs on that kind of microprocessor
 

1035
00:22:05,250 --> 00:22:06,860
runs on that kind of microprocessor
that's being represented this

1036
00:22:06,860 --> 00:22:06,870
that's being represented this
 

1037
00:22:06,870 --> 00:22:08,720
that's being represented this
replication scheme applies to the

1038
00:22:08,720 --> 00:22:08,730
replication scheme applies to the
 

1039
00:22:08,730 --> 00:22:10,389
replication scheme applies to the
software can be anything

1040
00:22:10,389 --> 00:22:10,399
software can be anything
 

1041
00:22:10,399 --> 00:22:14,070
software can be anything
and you know the downside is that it's

1042
00:22:14,070 --> 00:22:14,080
and you know the downside is that it's
 

1043
00:22:14,080 --> 00:22:16,389
and you know the downside is that it's
not that efficient necessarily the

1044
00:22:16,389 --> 00:22:16,399
not that efficient necessarily the
 

1045
00:22:16,399 --> 00:22:18,549
not that efficient necessarily the
upside is that you can take any existing

1046
00:22:18,549 --> 00:22:18,559
upside is that you can take any existing
 

1047
00:22:18,559 --> 00:22:19,990
upside is that you can take any existing
piece of software maybe you don't even

1048
00:22:19,990 --> 00:22:20,000
piece of software maybe you don't even
 

1049
00:22:20,000 --> 00:22:21,879
piece of software maybe you don't even
have source code for it or understand

1050
00:22:21,879 --> 00:22:21,889
have source code for it or understand
 

1051
00:22:21,889 --> 00:22:26,019
have source code for it or understand
how it works and you know do within some

1052
00:22:26,019 --> 00:22:26,029
how it works and you know do within some
 

1053
00:22:26,029 --> 00:22:27,430
how it works and you know do within some
limits you can just run it under this

1054
00:22:27,430 --> 00:22:27,440
limits you can just run it under this
 

1055
00:22:27,440 --> 00:22:29,289
limits you can just run it under this
under VMware this replication scheme and

1056
00:22:29,289 --> 00:22:29,299
under VMware this replication scheme and
 

1057
00:22:29,299 --> 00:22:33,930
under VMware this replication scheme and
it'll just work which is sort of magic

1058
00:22:33,930 --> 00:22:33,940
it'll just work which is sort of magic
 

1059
00:22:33,940 --> 00:22:36,879
it'll just work which is sort of magic
fault-tolerance wand for arbitrary

1060
00:22:36,879 --> 00:22:36,889
fault-tolerance wand for arbitrary
 

1061
00:22:36,889 --> 00:22:44,250
fault-tolerance wand for arbitrary
software all right now let me talk about

1062
00:22:44,250 --> 00:22:44,260
software all right now let me talk about
 

1063
00:22:44,260 --> 00:22:51,220
software all right now let me talk about
how this is VMware or Ft first of all

1064
00:22:51,220 --> 00:22:51,230
how this is VMware or Ft first of all
 

1065
00:22:51,230 --> 00:22:53,019
how this is VMware or Ft first of all
VMware is a virtual machine company

1066
00:22:53,019 --> 00:22:53,029
VMware is a virtual machine company
 

1067
00:22:53,029 --> 00:22:56,950
VMware is a virtual machine company
they're what their business is a lot of

1068
00:22:56,950 --> 00:22:56,960
they're what their business is a lot of
 

1069
00:22:56,960 --> 00:22:58,330
they're what their business is a lot of
their business is selling virtual

1070
00:22:58,330 --> 00:22:58,340
their business is selling virtual
 

1071
00:22:58,340 --> 00:23:00,310
their business is selling virtual
machine technology and what virtual

1072
00:23:00,310 --> 00:23:00,320
machine technology and what virtual
 

1073
00:23:00,320 --> 00:23:04,269
machine technology and what virtual
machines refer to is the idea of you

1074
00:23:04,269 --> 00:23:04,279
machines refer to is the idea of you
 

1075
00:23:04,279 --> 00:23:07,259
machines refer to is the idea of you
know you buy a single computer and

1076
00:23:07,259 --> 00:23:07,269
know you buy a single computer and
 

1077
00:23:07,269 --> 00:23:09,279
know you buy a single computer and
instead of booting an operating system

1078
00:23:09,279 --> 00:23:09,289
instead of booting an operating system
 

1079
00:23:09,289 --> 00:23:12,279
instead of booting an operating system
like Linux on the hardware you boot

1080
00:23:12,279 --> 00:23:12,289
like Linux on the hardware you boot
 

1081
00:23:12,289 --> 00:23:16,180
like Linux on the hardware you boot
we'll call a virtual machine monitor or

1082
00:23:16,180 --> 00:23:16,190
we'll call a virtual machine monitor or
 

1083
00:23:16,190 --> 00:23:18,159
we'll call a virtual machine monitor or
hypervisor on the hardware and the

1084
00:23:18,159 --> 00:23:18,169
hypervisor on the hardware and the
 

1085
00:23:18,169 --> 00:23:19,659
hypervisor on the hardware and the
hypervisor is job is actually to

1086
00:23:19,659 --> 00:23:19,669
hypervisor is job is actually to
 

1087
00:23:19,669 --> 00:23:24,419
hypervisor is job is actually to
simulate multiple multiple computers

1088
00:23:24,419 --> 00:23:24,429
simulate multiple multiple computers
 

1089
00:23:24,429 --> 00:23:27,100
simulate multiple multiple computers
multiple virtual computers on this piece

1090
00:23:27,100 --> 00:23:27,110
multiple virtual computers on this piece
 

1091
00:23:27,110 --> 00:23:28,810
multiple virtual computers on this piece
of hardware so the virtual machine

1092
00:23:28,810 --> 00:23:28,820
of hardware so the virtual machine
 

1093
00:23:28,820 --> 00:23:31,210
of hardware so the virtual machine
monitor may boot up you know one

1094
00:23:31,210 --> 00:23:31,220
monitor may boot up you know one
 

1095
00:23:31,220 --> 00:23:34,570
monitor may boot up you know one
instance of Linux may be multiple

1096
00:23:34,570 --> 00:23:34,580
instance of Linux may be multiple
 

1097
00:23:34,580 --> 00:23:37,139
instance of Linux may be multiple
instances of Linux may be a Windows

1098
00:23:37,139 --> 00:23:37,149
instances of Linux may be a Windows
 

1099
00:23:37,149 --> 00:23:40,389
instances of Linux may be a Windows
machine you can the virtual machine

1100
00:23:40,389 --> 00:23:40,399
machine you can the virtual machine
 

1101
00:23:40,399 --> 00:23:42,250
machine you can the virtual machine
monitor on this one computer can run a

1102
00:23:42,250 --> 00:23:42,260
monitor on this one computer can run a
 

1103
00:23:42,260 --> 00:23:45,460
monitor on this one computer can run a
bunch of different operating systems you

1104
00:23:45,460 --> 00:23:45,470
bunch of different operating systems you
 

1105
00:23:45,470 --> 00:23:49,389
bunch of different operating systems you
know each of these as is itself some

1106
00:23:49,389 --> 00:23:49,399
know each of these as is itself some
 

1107
00:23:49,399 --> 00:23:51,539
know each of these as is itself some
sort of operating system kernel and then

1108
00:23:51,539 --> 00:23:51,549
sort of operating system kernel and then
 

1109
00:23:51,549 --> 00:23:55,899
sort of operating system kernel and then
applications so this is the technology

1110
00:23:55,899 --> 00:23:55,909
applications so this is the technology
 

1111
00:23:55,909 --> 00:23:58,690
applications so this is the technology
they're starting with and you know the

1112
00:23:58,690 --> 00:23:58,700
they're starting with and you know the
 

1113
00:23:58,700 --> 00:24:00,399
they're starting with and you know the
reason for this is that if you know you

1114
00:24:00,399 --> 00:24:00,409
reason for this is that if you know you
 

1115
00:24:00,409 --> 00:24:03,039
reason for this is that if you know you
need to it just turns out there's many

1116
00:24:03,039 --> 00:24:03,049
need to it just turns out there's many
 

1117
00:24:03,049 --> 00:24:04,750
need to it just turns out there's many
many reasons why it's very convenient to

1118
00:24:04,750 --> 00:24:04,760
many reasons why it's very convenient to
 

1119
00:24:04,760 --> 00:24:06,310
many reasons why it's very convenient to
kind of interpose this level of

1120
00:24:06,310 --> 00:24:06,320
kind of interpose this level of
 

1121
00:24:06,320 --> 00:24:08,409
kind of interpose this level of
indirection between the hardware and the

1122
00:24:08,409 --> 00:24:08,419
indirection between the hardware and the
 

1123
00:24:08,419 --> 00:24:10,029
indirection between the hardware and the
operating systems and means that we can

1124
00:24:10,029 --> 00:24:10,039
operating systems and means that we can
 

1125
00:24:10,039 --> 00:24:11,889
operating systems and means that we can
buy one computer and run lots of

1126
00:24:11,889 --> 00:24:11,899
buy one computer and run lots of
 

1127
00:24:11,899 --> 00:24:14,049
buy one computer and run lots of
different operating systems on it we can

1128
00:24:14,049 --> 00:24:14,059
different operating systems on it we can
 

1129
00:24:14,059 --> 00:24:16,120
different operating systems on it we can
have each if we run lots and lots of

1130
00:24:16,120 --> 00:24:16,130
have each if we run lots and lots of
 

1131
00:24:16,130 --> 00:24:18,129
have each if we run lots and lots of
little services instead of having to

1132
00:24:18,129 --> 00:24:18,139
little services instead of having to
 

1133
00:24:18,139 --> 00:24:19,720
little services instead of having to
have lots and lots of computers one per

1134
00:24:19,720 --> 00:24:19,730
have lots and lots of computers one per
 

1135
00:24:19,730 --> 00:24:21,669
have lots and lots of computers one per
service you can just buy one computer

1136
00:24:21,669 --> 00:24:21,679
service you can just buy one computer
 

1137
00:24:21,679 --> 00:24:23,650
service you can just buy one computer
and run each service in the operate

1138
00:24:23,650 --> 00:24:23,660
and run each service in the operate
 

1139
00:24:23,660 --> 00:24:25,840
and run each service in the operate
system that it needs I'm using his

1140
00:24:25,840 --> 00:24:25,850
system that it needs I'm using his
 

1141
00:24:25,850 --> 00:24:28,240
system that it needs I'm using his
personal machines so this was their

1142
00:24:28,240 --> 00:24:28,250
personal machines so this was their
 

1143
00:24:28,250 --> 00:24:29,290
personal machines so this was their
starting point they already had this

1144
00:24:29,290 --> 00:24:29,300
starting point they already had this
 

1145
00:24:29,300 --> 00:24:31,420
starting point they already had this
stuff and a lot of sophisticated things

1146
00:24:31,420 --> 00:24:31,430
stuff and a lot of sophisticated things
 

1147
00:24:31,430 --> 00:24:34,990
stuff and a lot of sophisticated things
built around it at the start of

1148
00:24:34,990 --> 00:24:35,000
built around it at the start of
 

1149
00:24:35,000 --> 00:24:38,680
built around it at the start of
designing vmware ft so this is just

1150
00:24:38,680 --> 00:24:38,690
designing vmware ft so this is just
 

1151
00:24:38,690 --> 00:24:43,060
designing vmware ft so this is just
virtual machines um what the papers

1152
00:24:43,060 --> 00:24:43,070
virtual machines um what the papers
 

1153
00:24:43,070 --> 00:24:46,900
virtual machines um what the papers
doing is that it's gonna set up one

1154
00:24:46,900 --> 00:24:46,910
doing is that it's gonna set up one
 

1155
00:24:46,910 --> 00:24:51,610
doing is that it's gonna set up one
machine or they did requires two

1156
00:24:51,610 --> 00:24:51,620
machine or they did requires two
 

1157
00:24:51,620 --> 00:24:54,930
machine or they did requires two
physical machines because there's no

1158
00:24:54,930 --> 00:24:54,940
physical machines because there's no
 

1159
00:24:54,940 --> 00:24:57,670
physical machines because there's no
point in running the primary and backup

1160
00:24:57,670 --> 00:24:57,680
point in running the primary and backup
 

1161
00:24:57,680 --> 00:24:59,710
point in running the primary and backup
software in different virtual machines

1162
00:24:59,710 --> 00:24:59,720
software in different virtual machines
 

1163
00:24:59,720 --> 00:25:01,390
software in different virtual machines
on the same physical machine because

1164
00:25:01,390 --> 00:25:01,400
on the same physical machine because
 

1165
00:25:01,400 --> 00:25:03,490
on the same physical machine because
we're trying to guard against hardware

1166
00:25:03,490 --> 00:25:03,500
we're trying to guard against hardware
 

1167
00:25:03,500 --> 00:25:06,700
we're trying to guard against hardware
failures so you're gonna to at least you

1168
00:25:06,700 --> 00:25:06,710
failures so you're gonna to at least you
 

1169
00:25:06,710 --> 00:25:08,890
failures so you're gonna to at least you
know you have two machines running their

1170
00:25:08,890 --> 00:25:08,900
know you have two machines running their
 

1171
00:25:08,900 --> 00:25:15,580
know you have two machines running their
virtual machine monitors and the primary

1172
00:25:15,580 --> 00:25:15,590
virtual machine monitors and the primary
 

1173
00:25:15,590 --> 00:25:16,960
virtual machine monitors and the primary
it's going to run on one the backups and

1174
00:25:16,960 --> 00:25:16,970
it's going to run on one the backups and
 

1175
00:25:16,970 --> 00:25:18,940
it's going to run on one the backups and
the other so on one of these machines we

1176
00:25:18,940 --> 00:25:18,950
the other so on one of these machines we
 

1177
00:25:18,950 --> 00:25:23,740
the other so on one of these machines we
have a guest you know we only it might

1178
00:25:23,740 --> 00:25:23,750
have a guest you know we only it might
 

1179
00:25:23,750 --> 00:25:25,030
have a guest you know we only it might
be running a lot of virtual machines we

1180
00:25:25,030 --> 00:25:25,040
be running a lot of virtual machines we
 

1181
00:25:25,040 --> 00:25:26,920
be running a lot of virtual machines we
only care about one of them it's gonna

1182
00:25:26,920 --> 00:25:26,930
only care about one of them it's gonna
 

1183
00:25:26,930 --> 00:25:28,660
only care about one of them it's gonna
be running some guest operating system

1184
00:25:28,660 --> 00:25:28,670
be running some guest operating system
 

1185
00:25:28,670 --> 00:25:32,320
be running some guest operating system
and some sort of server application

1186
00:25:32,320 --> 00:25:32,330
and some sort of server application
 

1187
00:25:32,330 --> 00:25:35,290
and some sort of server application
maybe a database server MapReduce master

1188
00:25:35,290 --> 00:25:35,300
maybe a database server MapReduce master
 

1189
00:25:35,300 --> 00:25:37,780
maybe a database server MapReduce master
or something so I'll call this the

1190
00:25:37,780 --> 00:25:37,790
or something so I'll call this the
 

1191
00:25:37,790 --> 00:25:40,240
or something so I'll call this the
primary and there'll be a second machine

1192
00:25:40,240 --> 00:25:40,250
primary and there'll be a second machine
 

1193
00:25:40,250 --> 00:25:43,480
primary and there'll be a second machine
that you know runs the same virtual

1194
00:25:43,480 --> 00:25:43,490
that you know runs the same virtual
 

1195
00:25:43,490 --> 00:25:47,590
that you know runs the same virtual
machine monitor and an identical virtual

1196
00:25:47,590 --> 00:25:47,600
machine monitor and an identical virtual
 

1197
00:25:47,600 --> 00:25:49,570
machine monitor and an identical virtual
machine holding the backup so we have

1198
00:25:49,570 --> 00:25:49,580
machine holding the backup so we have
 

1199
00:25:49,580 --> 00:25:50,950
machine holding the backup so we have
the same whatever the operating system

1200
00:25:50,950 --> 00:25:50,960
the same whatever the operating system
 

1201
00:25:50,960 --> 00:25:55,240
the same whatever the operating system
is exactly the same and the virtual

1202
00:25:55,240 --> 00:25:55,250
is exactly the same and the virtual
 

1203
00:25:55,250 --> 00:25:58,240
is exactly the same and the virtual
machine is you know giving these guest

1204
00:25:58,240 --> 00:25:58,250
machine is you know giving these guest
 

1205
00:25:58,250 --> 00:26:00,160
machine is you know giving these guest
operating systems the primary and backup

1206
00:26:00,160 --> 00:26:00,170
operating systems the primary and backup
 

1207
00:26:00,170 --> 00:26:02,260
operating systems the primary and backup
a each range of memory and this memory

1208
00:26:02,260 --> 00:26:02,270
a each range of memory and this memory
 

1209
00:26:02,270 --> 00:26:04,750
a each range of memory and this memory
images will be identical or the goal is

1210
00:26:04,750 --> 00:26:04,760
images will be identical or the goal is
 

1211
00:26:04,760 --> 00:26:07,180
images will be identical or the goal is
to make them identical in the primary in

1212
00:26:07,180 --> 00:26:07,190
to make them identical in the primary in
 

1213
00:26:07,190 --> 00:26:09,730
to make them identical in the primary in
the backup we have two physical machines

1214
00:26:09,730 --> 00:26:09,740
the backup we have two physical machines
 

1215
00:26:09,740 --> 00:26:13,060
the backup we have two physical machines
each one of them running a virtual

1216
00:26:13,060 --> 00:26:13,070
each one of them running a virtual
 

1217
00:26:13,070 --> 00:26:15,670
each one of them running a virtual
machine guest with a its own copy of the

1218
00:26:15,670 --> 00:26:15,680
machine guest with a its own copy of the
 

1219
00:26:15,680 --> 00:26:17,620
machine guest with a its own copy of the
service we care about we're assuming

1220
00:26:17,620 --> 00:26:17,630
service we care about we're assuming
 

1221
00:26:17,630 --> 00:26:22,630
service we care about we're assuming
that there's a network connecting these

1222
00:26:22,630 --> 00:26:22,640
that there's a network connecting these
 

1223
00:26:22,640 --> 00:26:25,230
that there's a network connecting these
two machines and in addition on this

1224
00:26:25,230 --> 00:26:25,240
two machines and in addition on this
 

1225
00:26:25,240 --> 00:26:27,520
two machines and in addition on this
local area network in addition on this

1226
00:26:27,520 --> 00:26:27,530
local area network in addition on this
 

1227
00:26:27,530 --> 00:26:29,470
local area network in addition on this
network there's some set of clients

1228
00:26:29,470 --> 00:26:29,480
network there's some set of clients
 

1229
00:26:29,480 --> 00:26:30,940
network there's some set of clients
really they don't have to be clients

1230
00:26:30,940 --> 00:26:30,950
really they don't have to be clients
 

1231
00:26:30,950 --> 00:26:33,150
really they don't have to be clients
they're just maybe other computers that

1232
00:26:33,150 --> 00:26:33,160
they're just maybe other computers that
 

1233
00:26:33,160 --> 00:26:35,740
they're just maybe other computers that
our replicated service needs to talk

1234
00:26:35,740 --> 00:26:35,750
our replicated service needs to talk
 

1235
00:26:35,750 --> 00:26:37,460
our replicated service needs to talk
with some of them our clients

1236
00:26:37,460 --> 00:26:37,470
with some of them our clients
 

1237
00:26:37,470 --> 00:26:39,260
with some of them our clients
sending requests it turns out in this

1238
00:26:39,260 --> 00:26:39,270
sending requests it turns out in this
 

1239
00:26:39,270 --> 00:26:44,810
sending requests it turns out in this
paper there the replicated service

1240
00:26:44,810 --> 00:26:44,820
paper there the replicated service
 

1241
00:26:44,820 --> 00:26:47,090
paper there the replicated service
actually doesn't use a local disk and

1242
00:26:47,090 --> 00:26:47,100
actually doesn't use a local disk and
 

1243
00:26:47,100 --> 00:26:49,520
actually doesn't use a local disk and
instead assumes that there's some sort

1244
00:26:49,520 --> 00:26:49,530
instead assumes that there's some sort
 

1245
00:26:49,530 --> 00:26:53,360
instead assumes that there's some sort
of disk server that it talks to him

1246
00:26:53,360 --> 00:26:53,370
of disk server that it talks to him
 

1247
00:26:53,370 --> 00:26:55,299
of disk server that it talks to him
although it's a little bit hard to

1248
00:26:55,299 --> 00:26:55,309
although it's a little bit hard to
 

1249
00:26:55,309 --> 00:26:59,750
although it's a little bit hard to
realize this from the paper the scheme

1250
00:26:59,750 --> 00:26:59,760
realize this from the paper the scheme
 

1251
00:26:59,760 --> 00:27:01,700
realize this from the paper the scheme
actually does not really treat the de

1252
00:27:01,700 --> 00:27:01,710
actually does not really treat the de
 

1253
00:27:01,710 --> 00:27:04,130
actually does not really treat the de
server particularly especially it's just

1254
00:27:04,130 --> 00:27:04,140
server particularly especially it's just
 

1255
00:27:04,140 --> 00:27:07,279
server particularly especially it's just
another external source of packets and

1256
00:27:07,279 --> 00:27:07,289
another external source of packets and
 

1257
00:27:07,289 --> 00:27:09,919
another external source of packets and
place that the replicated state machine

1258
00:27:09,919 --> 00:27:09,929
place that the replicated state machine
 

1259
00:27:09,929 --> 00:27:11,990
place that the replicated state machine
may send packets do not very much

1260
00:27:11,990 --> 00:27:12,000
may send packets do not very much
 

1261
00:27:12,000 --> 00:27:17,360
may send packets do not very much
different from clients okay so the basic

1262
00:27:17,360 --> 00:27:17,370
different from clients okay so the basic
 

1263
00:27:17,370 --> 00:27:20,360
different from clients okay so the basic
scheme is that the we assume that these

1264
00:27:20,360 --> 00:27:20,370
scheme is that the we assume that these
 

1265
00:27:20,370 --> 00:27:24,110
scheme is that the we assume that these
two replicas the two virtual machines

1266
00:27:24,110 --> 00:27:24,120
two replicas the two virtual machines
 

1267
00:27:24,120 --> 00:27:27,860
two replicas the two virtual machines
primary and backup are our exact

1268
00:27:27,860 --> 00:27:27,870
primary and backup are our exact
 

1269
00:27:27,870 --> 00:27:30,140
primary and backup are our exact
replicas some client you know database

1270
00:27:30,140 --> 00:27:30,150
replicas some client you know database
 

1271
00:27:30,150 --> 00:27:31,549
replicas some client you know database
client who knows who has some client of

1272
00:27:31,549 --> 00:27:31,559
client who knows who has some client of
 

1273
00:27:31,559 --> 00:27:33,590
client who knows who has some client of
our replicated server sends a request to

1274
00:27:33,590 --> 00:27:33,600
our replicated server sends a request to
 

1275
00:27:33,600 --> 00:27:37,070
our replicated server sends a request to
the primary and that really takes the

1276
00:27:37,070 --> 00:27:37,080
the primary and that really takes the
 

1277
00:27:37,080 --> 00:27:38,899
the primary and that really takes the
form of a network packet that's what

1278
00:27:38,899 --> 00:27:38,909
form of a network packet that's what
 

1279
00:27:38,909 --> 00:27:40,580
form of a network packet that's what
we're talking about that generates an

1280
00:27:40,580 --> 00:27:40,590
we're talking about that generates an
 

1281
00:27:40,590 --> 00:27:41,210
we're talking about that generates an
interrupt

1282
00:27:41,210 --> 00:27:41,220
interrupt
 

1283
00:27:41,220 --> 00:27:43,130
interrupt
and this interrupts actually goes to the

1284
00:27:43,130 --> 00:27:43,140
and this interrupts actually goes to the
 

1285
00:27:43,140 --> 00:27:45,260
and this interrupts actually goes to the
virtual machine monitor at least in the

1286
00:27:45,260 --> 00:27:45,270
virtual machine monitor at least in the
 

1287
00:27:45,270 --> 00:27:47,779
virtual machine monitor at least in the
first instance the virtual machine

1288
00:27:47,779 --> 00:27:47,789
first instance the virtual machine
 

1289
00:27:47,789 --> 00:27:50,000
first instance the virtual machine
monitor sees a hot here's the input for

1290
00:27:50,000 --> 00:27:50,010
monitor sees a hot here's the input for
 

1291
00:27:50,010 --> 00:27:54,049
monitor sees a hot here's the input for
this replicated service and so the

1292
00:27:54,049 --> 00:27:54,059
this replicated service and so the
 

1293
00:27:54,059 --> 00:27:55,669
this replicated service and so the
virtual machine monitor does two things

1294
00:27:55,669 --> 00:27:55,679
virtual machine monitor does two things
 

1295
00:27:55,679 --> 00:27:58,419
virtual machine monitor does two things
one is it sort of simulates a network

1296
00:27:58,419 --> 00:27:58,429
one is it sort of simulates a network
 

1297
00:27:58,429 --> 00:28:01,789
one is it sort of simulates a network
packet arrival interrupt into the

1298
00:28:01,789 --> 00:28:01,799
packet arrival interrupt into the
 

1299
00:28:01,799 --> 00:28:04,100
packet arrival interrupt into the
primary guest operating system to

1300
00:28:04,100 --> 00:28:04,110
primary guest operating system to
 

1301
00:28:04,110 --> 00:28:07,460
primary guest operating system to
deliver it to the primary copy of the

1302
00:28:07,460 --> 00:28:07,470
deliver it to the primary copy of the
 

1303
00:28:07,470 --> 00:28:09,590
deliver it to the primary copy of the
application and in addition the virtual

1304
00:28:09,590 --> 00:28:09,600
application and in addition the virtual
 

1305
00:28:09,600 --> 00:28:11,750
application and in addition the virtual
machine monitor you know knows that this

1306
00:28:11,750 --> 00:28:11,760
machine monitor you know knows that this
 

1307
00:28:11,760 --> 00:28:13,669
machine monitor you know knows that this
is an input to a replicated virtual

1308
00:28:13,669 --> 00:28:13,679
is an input to a replicated virtual
 

1309
00:28:13,679 --> 00:28:15,770
is an input to a replicated virtual
machine and it's so it sends back out on

1310
00:28:15,770 --> 00:28:15,780
machine and it's so it sends back out on
 

1311
00:28:15,780 --> 00:28:19,700
machine and it's so it sends back out on
the network a copy of that packet to the

1312
00:28:19,700 --> 00:28:19,710
the network a copy of that packet to the
 

1313
00:28:19,710 --> 00:28:23,000
the network a copy of that packet to the
backup virtual machine monitor it's also

1314
00:28:23,000 --> 00:28:23,010
backup virtual machine monitor it's also
 

1315
00:28:23,010 --> 00:28:26,270
backup virtual machine monitor it's also
guessing and backup virtual machine

1316
00:28:26,270 --> 00:28:26,280
guessing and backup virtual machine
 

1317
00:28:26,280 --> 00:28:28,460
guessing and backup virtual machine
monitor knows a hot is a packet for this

1318
00:28:28,460 --> 00:28:28,470
monitor knows a hot is a packet for this
 

1319
00:28:28,470 --> 00:28:30,020
monitor knows a hot is a packet for this
particular replicated state machine and

1320
00:28:30,020 --> 00:28:30,030
particular replicated state machine and
 

1321
00:28:30,030 --> 00:28:34,520
particular replicated state machine and
it also fakes a sort of network packet

1322
00:28:34,520 --> 00:28:34,530
it also fakes a sort of network packet
 

1323
00:28:34,530 --> 00:28:36,140
it also fakes a sort of network packet
arrival interrupt at the backup and

1324
00:28:36,140 --> 00:28:36,150
arrival interrupt at the backup and
 

1325
00:28:36,150 --> 00:28:39,080
arrival interrupt at the backup and
delivers the packet so now both the

1326
00:28:39,080 --> 00:28:39,090
delivers the packet so now both the
 

1327
00:28:39,090 --> 00:28:40,789
delivers the packet so now both the
primary and the back have a copy this

1328
00:28:40,789 --> 00:28:40,799
primary and the back have a copy this
 

1329
00:28:40,799 --> 00:28:42,770
primary and the back have a copy this
packet they looks at the same input you

1330
00:28:42,770 --> 00:28:42,780
packet they looks at the same input you
 

1331
00:28:42,780 --> 00:28:44,049
packet they looks at the same input you
know with a lot of details are gonna

1332
00:28:44,049 --> 00:28:44,059
know with a lot of details are gonna
 

1333
00:28:44,059 --> 00:28:48,049
know with a lot of details are gonna
process it in the same way and stay

1334
00:28:48,049 --> 00:28:48,059
process it in the same way and stay
 

1335
00:28:48,059 --> 00:28:50,740
process it in the same way and stay
synchronized

1336
00:28:50,740 --> 00:28:50,750

 

1337
00:28:50,750 --> 00:28:52,090

course the service is probably going to

1338
00:28:52,090 --> 00:28:52,100
course the service is probably going to
 

1339
00:28:52,100 --> 00:28:55,410
course the service is probably going to
reply to the client on the primary the

1340
00:28:55,410 --> 00:28:55,420
reply to the client on the primary the
 

1341
00:28:55,420 --> 00:28:58,020
reply to the client on the primary the
service will generate a reply packet and

1342
00:28:58,020 --> 00:28:58,030
service will generate a reply packet and
 

1343
00:28:58,030 --> 00:29:02,320
service will generate a reply packet and
send it on the NIC that the virtual

1344
00:29:02,320 --> 00:29:02,330
send it on the NIC that the virtual
 

1345
00:29:02,330 --> 00:29:06,220
send it on the NIC that the virtual
machine monitor is emulating and then

1346
00:29:06,220 --> 00:29:06,230
machine monitor is emulating and then
 

1347
00:29:06,230 --> 00:29:07,540
machine monitor is emulating and then
the virtual machine monitor or will

1348
00:29:07,540 --> 00:29:07,550
the virtual machine monitor or will
 

1349
00:29:07,550 --> 00:29:09,040
the virtual machine monitor or will
we'll see that output packet on the

1350
00:29:09,040 --> 00:29:09,050
we'll see that output packet on the
 

1351
00:29:09,050 --> 00:29:11,260
we'll see that output packet on the
primary they'll actually send the reply

1352
00:29:11,260 --> 00:29:11,270
primary they'll actually send the reply
 

1353
00:29:11,270 --> 00:29:13,920
primary they'll actually send the reply
back out on the network to the client

1354
00:29:13,920 --> 00:29:13,930
back out on the network to the client
 

1355
00:29:13,930 --> 00:29:16,330
back out on the network to the client
because the backup is running exactly

1356
00:29:16,330 --> 00:29:16,340
because the backup is running exactly
 

1357
00:29:16,340 --> 00:29:17,800
because the backup is running exactly
the same sequence of instructions it

1358
00:29:17,800 --> 00:29:17,810
the same sequence of instructions it
 

1359
00:29:17,810 --> 00:29:20,350
the same sequence of instructions it
also generates a reply packet back to

1360
00:29:20,350 --> 00:29:20,360
also generates a reply packet back to
 

1361
00:29:20,360 --> 00:29:23,260
also generates a reply packet back to
the client and sends that reply packet

1362
00:29:23,260 --> 00:29:23,270
the client and sends that reply packet
 

1363
00:29:23,270 --> 00:29:27,220
the client and sends that reply packet
on its emulated NIC it's the virtual

1364
00:29:27,220 --> 00:29:27,230
on its emulated NIC it's the virtual
 

1365
00:29:27,230 --> 00:29:28,540
on its emulated NIC it's the virtual
machine monitor that's emulating that

1366
00:29:28,540 --> 00:29:28,550
machine monitor that's emulating that
 

1367
00:29:28,550 --> 00:29:31,000
machine monitor that's emulating that
network interface card and it says aha

1368
00:29:31,000 --> 00:29:31,010
network interface card and it says aha
 

1369
00:29:31,010 --> 00:29:32,470
network interface card and it says aha
you know the virtual machine monitor

1370
00:29:32,470 --> 00:29:32,480
you know the virtual machine monitor
 

1371
00:29:32,480 --> 00:29:34,420
you know the virtual machine monitor
says I know this was the backup only the

1372
00:29:34,420 --> 00:29:34,430
says I know this was the backup only the
 

1373
00:29:34,430 --> 00:29:35,980
says I know this was the backup only the
primary is allowed to generate output

1374
00:29:35,980 --> 00:29:35,990
primary is allowed to generate output
 

1375
00:29:35,990 --> 00:29:39,040
primary is allowed to generate output
and the virtual machine monitor drops

1376
00:29:39,040 --> 00:29:39,050
and the virtual machine monitor drops
 

1377
00:29:39,050 --> 00:29:42,130
and the virtual machine monitor drops
the reply packet so both of them see

1378
00:29:42,130 --> 00:29:42,140
the reply packet so both of them see
 

1379
00:29:42,140 --> 00:29:44,230
the reply packet so both of them see
inputs and only the primary generates

1380
00:29:44,230 --> 00:29:44,240
inputs and only the primary generates
 

1381
00:29:44,240 --> 00:29:53,500
inputs and only the primary generates
outputs as far as terminology goes the

1382
00:29:53,500 --> 00:29:53,510
outputs as far as terminology goes the
 

1383
00:29:53,510 --> 00:29:59,680
outputs as far as terminology goes the
paper calls this stream of input events

1384
00:29:59,680 --> 00:29:59,690
paper calls this stream of input events
 

1385
00:29:59,690 --> 00:30:01,390
paper calls this stream of input events
and other things other events we'll talk

1386
00:30:01,390 --> 00:30:01,400
and other things other events we'll talk
 

1387
00:30:01,400 --> 00:30:04,300
and other things other events we'll talk
about from the stream is called the

1388
00:30:04,300 --> 00:30:04,310
about from the stream is called the
 

1389
00:30:04,310 --> 00:30:06,880
about from the stream is called the
logging Channel it all goes over the

1390
00:30:06,880 --> 00:30:06,890
logging Channel it all goes over the
 

1391
00:30:06,890 --> 00:30:10,540
logging Channel it all goes over the
same network presumably but these events

1392
00:30:10,540 --> 00:30:10,550
same network presumably but these events
 

1393
00:30:10,550 --> 00:30:12,040
same network presumably but these events
the primary since the back of our called

1394
00:30:12,040 --> 00:30:12,050
the primary since the back of our called
 

1395
00:30:12,050 --> 00:30:22,230
the primary since the back of our called
log events on the log Channel

1396
00:30:22,230 --> 00:30:22,240

 

1397
00:30:22,240 --> 00:30:24,730

where the fault tolerance comes in is

1398
00:30:24,730 --> 00:30:24,740
where the fault tolerance comes in is
 

1399
00:30:24,740 --> 00:30:29,020
where the fault tolerance comes in is
that those the primary crashes what the

1400
00:30:29,020 --> 00:30:29,030
that those the primary crashes what the
 

1401
00:30:29,030 --> 00:30:31,480
that those the primary crashes what the
backup is going to see is that it stops

1402
00:30:31,480 --> 00:30:31,490
backup is going to see is that it stops
 

1403
00:30:31,490 --> 00:30:34,030
backup is going to see is that it stops
getting stuff on the stops getting log

1404
00:30:34,030 --> 00:30:34,040
getting stuff on the stops getting log
 

1405
00:30:34,040 --> 00:30:37,300
getting stuff on the stops getting log
entries a log entry stops getting log

1406
00:30:37,300 --> 00:30:37,310
entries a log entry stops getting log
 

1407
00:30:37,310 --> 00:30:42,100
entries a log entry stops getting log
entries on the logging channel and we

1408
00:30:42,100 --> 00:30:42,110
entries on the logging channel and we
 

1409
00:30:42,110 --> 00:30:45,490
entries on the logging channel and we
know it it turns out that the backup can

1410
00:30:45,490 --> 00:30:45,500
know it it turns out that the backup can
 

1411
00:30:45,500 --> 00:30:47,200
know it it turns out that the backup can
expect to get many per second because

1412
00:30:47,200 --> 00:30:47,210
expect to get many per second because
 

1413
00:30:47,210 --> 00:30:49,750
expect to get many per second because
one of the things that generates log

1414
00:30:49,750 --> 00:30:49,760
one of the things that generates log
 

1415
00:30:49,760 --> 00:30:52,360
one of the things that generates log
entries is periodic timer interrupts in

1416
00:30:52,360 --> 00:30:52,370
entries is periodic timer interrupts in
 

1417
00:30:52,370 --> 00:30:55,300
entries is periodic timer interrupts in
the in the primary each one of which

1418
00:30:55,300 --> 00:30:55,310
the in the primary each one of which
 

1419
00:30:55,310 --> 00:30:57,280
the in the primary each one of which
turns out every interrupt generates a

1420
00:30:57,280 --> 00:30:57,290
turns out every interrupt generates a
 

1421
00:30:57,290 --> 00:30:59,500
turns out every interrupt generates a
log entries into the backup these timer

1422
00:30:59,500 --> 00:30:59,510
log entries into the backup these timer
 

1423
00:30:59,510 --> 00:31:01,120
log entries into the backup these timer
interrupts are going to happen like 100

1424
00:31:01,120 --> 00:31:01,130
interrupts are going to happen like 100
 

1425
00:31:01,130 --> 00:31:02,410
interrupts are going to happen like 100
times a second so the backups can

1426
00:31:02,410 --> 00:31:02,420
times a second so the backups can
 

1427
00:31:02,420 --> 00:31:04,270
times a second so the backups can
certainly expect to see

1428
00:31:04,270 --> 00:31:04,280
certainly expect to see
 

1429
00:31:04,280 --> 00:31:07,390
certainly expect to see
a lot of chitchat on the logging Channel

1430
00:31:07,390 --> 00:31:07,400
a lot of chitchat on the logging Channel
 

1431
00:31:07,400 --> 00:31:09,100
a lot of chitchat on the logging Channel
if the primaries up if the primary

1432
00:31:09,100 --> 00:31:09,110
if the primaries up if the primary
 

1433
00:31:09,110 --> 00:31:11,500
if the primaries up if the primary
crashes then the virtual machine

1434
00:31:11,500 --> 00:31:11,510
crashes then the virtual machine
 

1435
00:31:11,510 --> 00:31:12,970
crashes then the virtual machine
monitored over here will say gosh you

1436
00:31:12,970 --> 00:31:12,980
monitored over here will say gosh you
 

1437
00:31:12,980 --> 00:31:14,320
monitored over here will say gosh you
know I haven't received anything on the

1438
00:31:14,320 --> 00:31:14,330
know I haven't received anything on the
 

1439
00:31:14,330 --> 00:31:15,880
know I haven't received anything on the
logging channel for like a second or

1440
00:31:15,880 --> 00:31:15,890
logging channel for like a second or
 

1441
00:31:15,890 --> 00:31:19,470
logging channel for like a second or
however long the primary must be dead or

1442
00:31:19,470 --> 00:31:19,480
however long the primary must be dead or
 

1443
00:31:19,480 --> 00:31:25,300
however long the primary must be dead or
or something and in that case when the

1444
00:31:25,300 --> 00:31:25,310
or something and in that case when the
 

1445
00:31:25,310 --> 00:31:28,690
or something and in that case when the
backup stop seeing log entries from the

1446
00:31:28,690 --> 00:31:28,700
backup stop seeing log entries from the
 

1447
00:31:28,700 --> 00:31:31,270
backup stop seeing log entries from the
primary the paper the way the paper

1448
00:31:31,270 --> 00:31:31,280
primary the paper the way the paper
 

1449
00:31:31,280 --> 00:31:33,310
primary the paper the way the paper
freezes it is that the back of goes live

1450
00:31:33,310 --> 00:31:33,320
freezes it is that the back of goes live
 

1451
00:31:33,320 --> 00:31:35,770
freezes it is that the back of goes live
and what that means is that it stops

1452
00:31:35,770 --> 00:31:35,780
and what that means is that it stops
 

1453
00:31:35,780 --> 00:31:42,910
and what that means is that it stops
waiting for these input events on the

1454
00:31:42,910 --> 00:31:42,920
waiting for these input events on the
 

1455
00:31:42,920 --> 00:31:46,840
waiting for these input events on the
logging Channel from the primary and

1456
00:31:46,840 --> 00:31:46,850
logging Channel from the primary and
 

1457
00:31:46,850 --> 00:31:49,150
logging Channel from the primary and
instead this virtual machine monitor

1458
00:31:49,150 --> 00:31:49,160
instead this virtual machine monitor
 

1459
00:31:49,160 --> 00:31:51,780
instead this virtual machine monitor
just lets this backup execute freely

1460
00:31:51,780 --> 00:31:51,790
just lets this backup execute freely
 

1461
00:31:51,790 --> 00:31:54,580
just lets this backup execute freely
without waiting for without being driven

1462
00:31:54,580 --> 00:31:54,590
without waiting for without being driven
 

1463
00:31:54,590 --> 00:31:58,990
without waiting for without being driven
by input events from the primary the vmm

1464
00:31:58,990 --> 00:31:59,000
by input events from the primary the vmm
 

1465
00:31:59,000 --> 00:32:00,670
by input events from the primary the vmm
does something to the network to cause

1466
00:32:00,670 --> 00:32:00,680
does something to the network to cause
 

1467
00:32:00,680 --> 00:32:02,500
does something to the network to cause
future client requests to go to the

1468
00:32:02,500 --> 00:32:02,510
future client requests to go to the
 

1469
00:32:02,510 --> 00:32:04,990
future client requests to go to the
backup instead of the primary and the

1470
00:32:04,990 --> 00:32:05,000
backup instead of the primary and the
 

1471
00:32:05,000 --> 00:32:09,760
backup instead of the primary and the
VMM here stops discarding the backup

1472
00:32:09,760 --> 00:32:09,770
VMM here stops discarding the backup
 

1473
00:32:09,770 --> 00:32:11,140
VMM here stops discarding the backup
personnel it's the primary not the

1474
00:32:11,140 --> 00:32:11,150
personnel it's the primary not the
 

1475
00:32:11,150 --> 00:32:13,930
personnel it's the primary not the
backup stops discarding output from this

1476
00:32:13,930 --> 00:32:13,940
backup stops discarding output from this
 

1477
00:32:13,940 --> 00:32:15,760
backup stops discarding output from this
virtual machine so now this or machine

1478
00:32:15,760 --> 00:32:15,770
virtual machine so now this or machine
 

1479
00:32:15,770 --> 00:32:18,160
virtual machine so now this or machine
directly gets the inputs and there's a

1480
00:32:18,160 --> 00:32:18,170
directly gets the inputs and there's a
 

1481
00:32:18,170 --> 00:32:20,260
directly gets the inputs and there's a
lot of produce output and now our backup

1482
00:32:20,260 --> 00:32:20,270
lot of produce output and now our backup
 

1483
00:32:20,270 --> 00:32:22,510
lot of produce output and now our backup
is taken over and similarly you know

1484
00:32:22,510 --> 00:32:22,520
is taken over and similarly you know
 

1485
00:32:22,520 --> 00:32:25,270
is taken over and similarly you know
that this is less interesting but has to

1486
00:32:25,270 --> 00:32:25,280
that this is less interesting but has to
 

1487
00:32:25,280 --> 00:32:26,320
that this is less interesting but has to
work correctly

1488
00:32:26,320 --> 00:32:26,330
work correctly
 

1489
00:32:26,330 --> 00:32:29,380
work correctly
if the backup fails a similar primary

1490
00:32:29,380 --> 00:32:29,390
if the backup fails a similar primary
 

1491
00:32:29,390 --> 00:32:31,120
if the backup fails a similar primary
has to use a similar process to abandon

1492
00:32:31,120 --> 00:32:31,130
has to use a similar process to abandon
 

1493
00:32:31,130 --> 00:32:34,540
has to use a similar process to abandon
the backup stop sending it events and

1494
00:32:34,540 --> 00:32:34,550
the backup stop sending it events and
 

1495
00:32:34,550 --> 00:32:37,090
the backup stop sending it events and
just sort of act much more like a single

1496
00:32:37,090 --> 00:32:37,100
just sort of act much more like a single
 

1497
00:32:37,100 --> 00:32:39,070
just sort of act much more like a single
non replicated server so either one of

1498
00:32:39,070 --> 00:32:39,080
non replicated server so either one of
 

1499
00:32:39,080 --> 00:32:41,080
non replicated server so either one of
them can go live if the other one

1500
00:32:41,080 --> 00:32:41,090
them can go live if the other one
 

1501
00:32:41,090 --> 00:32:43,450
them can go live if the other one
appears to be dead stops you know stops

1502
00:32:43,450 --> 00:32:43,460
appears to be dead stops you know stops
 

1503
00:32:43,460 --> 00:32:51,210
appears to be dead stops you know stops
generating network traffic

1504
00:32:51,210 --> 00:32:51,220

 

1505
00:32:51,220 --> 00:32:57,220

magic now it depends you know depends on

1506
00:32:57,220 --> 00:32:57,230
magic now it depends you know depends on
 

1507
00:32:57,230 --> 00:33:01,540
magic now it depends you know depends on
what the networking technology is I

1508
00:33:01,540 --> 00:33:01,550
what the networking technology is I
 

1509
00:33:01,550 --> 00:33:04,930
what the networking technology is I
think with the paper one possibility is

1510
00:33:04,930 --> 00:33:04,940
think with the paper one possibility is
 

1511
00:33:04,940 --> 00:33:07,900
think with the paper one possibility is
that this is sitting on Ethernet every

1512
00:33:07,900 --> 00:33:07,910
that this is sitting on Ethernet every
 

1513
00:33:07,910 --> 00:33:09,520
that this is sitting on Ethernet every
physical computer on the Internet or

1514
00:33:09,520 --> 00:33:09,530
physical computer on the Internet or
 

1515
00:33:09,530 --> 00:33:16,710
physical computer on the Internet or
really every NIC has a 48 bit unique ID

1516
00:33:16,710 --> 00:33:16,720

 

1517
00:33:16,720 --> 00:33:21,310

I'm making this up now the it could be

1518
00:33:21,310 --> 00:33:21,320
I'm making this up now the it could be
 

1519
00:33:21,320 --> 00:33:22,900
I'm making this up now the it could be
that in fact instead of each physical

1520
00:33:22,900 --> 00:33:22,910
that in fact instead of each physical
 

1521
00:33:22,910 --> 00:33:25,390
that in fact instead of each physical
computer having a unique ID each virtual

1522
00:33:25,390 --> 00:33:25,400
computer having a unique ID each virtual
 

1523
00:33:25,400 --> 00:33:30,700
computer having a unique ID each virtual
machine does and when the backup takes

1524
00:33:30,700 --> 00:33:30,710
machine does and when the backup takes
 

1525
00:33:30,710 --> 00:33:36,420
machine does and when the backup takes
over it essentially claims the primary's

1526
00:33:36,420 --> 00:33:36,430
over it essentially claims the primary's
 

1527
00:33:36,430 --> 00:33:39,310
over it essentially claims the primary's
Ethernet ID as its own and it starts

1528
00:33:39,310 --> 00:33:39,320
Ethernet ID as its own and it starts
 

1529
00:33:39,320 --> 00:33:41,080
Ethernet ID as its own and it starts
saying you know I'm the owner of that ID

1530
00:33:41,080 --> 00:33:41,090
saying you know I'm the owner of that ID
 

1531
00:33:41,090 --> 00:33:42,610
saying you know I'm the owner of that ID
and then other people on the ethernet

1532
00:33:42,610 --> 00:33:42,620
and then other people on the ethernet
 

1533
00:33:42,620 --> 00:33:46,000
and then other people on the ethernet
will start sending us packets that's my

1534
00:33:46,000 --> 00:33:46,010
will start sending us packets that's my
 

1535
00:33:46,010 --> 00:34:02,680
will start sending us packets that's my
interpretation the designers believed

1536
00:34:02,680 --> 00:34:02,690
interpretation the designers believed
 

1537
00:34:02,690 --> 00:34:04,360
interpretation the designers believed
they had identified all such sources and

1538
00:34:04,360 --> 00:34:04,370
they had identified all such sources and
 

1539
00:34:04,370 --> 00:34:07,690
they had identified all such sources and
for each one of them the primary does

1540
00:34:07,690 --> 00:34:07,700
for each one of them the primary does
 

1541
00:34:07,700 --> 00:34:10,150
for each one of them the primary does
whatever it is you know executes the

1542
00:34:10,150 --> 00:34:10,160
whatever it is you know executes the
 

1543
00:34:10,160 --> 00:34:12,130
whatever it is you know executes the
random number generator instruction or

1544
00:34:12,130 --> 00:34:12,140
random number generator instruction or
 

1545
00:34:12,140 --> 00:34:14,350
random number generator instruction or
takes an interrupt at some time the

1546
00:34:14,350 --> 00:34:14,360
takes an interrupt at some time the
 

1547
00:34:14,360 --> 00:34:17,350
takes an interrupt at some time the
backup does not and the back of virtual

1548
00:34:17,350 --> 00:34:17,360
backup does not and the back of virtual
 

1549
00:34:17,360 --> 00:34:19,630
backup does not and the back of virtual
machine monitor sort of detects any such

1550
00:34:19,630 --> 00:34:19,640
machine monitor sort of detects any such
 

1551
00:34:19,640 --> 00:34:22,419
machine monitor sort of detects any such
instruction and and intercepts that and

1552
00:34:22,419 --> 00:34:22,429
instruction and and intercepts that and
 

1553
00:34:22,429 --> 00:34:24,550
instruction and and intercepts that and
doesn't do it and he said the backup

1554
00:34:24,550 --> 00:34:24,560
doesn't do it and he said the backup
 

1555
00:34:24,560 --> 00:34:26,260
doesn't do it and he said the backup
wheats for an event on the logging

1556
00:34:26,260 --> 00:34:26,270
wheats for an event on the logging
 

1557
00:34:26,270 --> 00:34:28,600
wheats for an event on the logging
Channel saying this instruction number

1558
00:34:28,600 --> 00:34:28,610
Channel saying this instruction number
 

1559
00:34:28,610 --> 00:34:30,970
Channel saying this instruction number
you know the random number was whatever

1560
00:34:30,970 --> 00:34:30,980
you know the random number was whatever
 

1561
00:34:30,980 --> 00:34:35,070
you know the random number was whatever
it was on the primary

1562
00:34:35,070 --> 00:34:35,080

 

1563
00:34:35,080 --> 00:34:37,410

Edwige

1564
00:34:37,410 --> 00:34:37,420
Edwige
 

1565
00:34:37,420 --> 00:34:42,660
Edwige
yes yes

1566
00:34:42,660 --> 00:34:42,670

 

1567
00:34:42,670 --> 00:34:46,630

yeah the paper hints that they got Intel

1568
00:34:46,630 --> 00:34:46,640
yeah the paper hints that they got Intel
 

1569
00:34:46,640 --> 00:34:50,830
yeah the paper hints that they got Intel
to add features to the microprocessor to

1570
00:34:50,830 --> 00:34:50,840
to add features to the microprocessor to
 

1571
00:34:50,840 --> 00:34:54,640
to add features to the microprocessor to
support exactly this but they don't say

1572
00:34:54,640 --> 00:34:54,650
support exactly this but they don't say
 

1573
00:34:54,650 --> 00:35:04,170
support exactly this but they don't say
what it was okay

1574
00:35:04,170 --> 00:35:04,180

 

1575
00:35:04,180 --> 00:35:08,080

okay so on that topic the so far that

1576
00:35:08,080 --> 00:35:08,090
okay so on that topic the so far that
 

1577
00:35:08,090 --> 00:35:09,310
okay so on that topic the so far that
you know the story is sort of assumed

1578
00:35:09,310 --> 00:35:09,320
you know the story is sort of assumed
 

1579
00:35:09,320 --> 00:35:16,000
you know the story is sort of assumed
that as long as the backup to sees the

1580
00:35:16,000 --> 00:35:16,010
that as long as the backup to sees the
 

1581
00:35:16,010 --> 00:35:17,440
that as long as the backup to sees the
package from the clients it'll execute

1582
00:35:17,440 --> 00:35:17,450
package from the clients it'll execute
 

1583
00:35:17,450 --> 00:35:21,010
package from the clients it'll execute
in identically to the primary and that's

1584
00:35:21,010 --> 00:35:21,020
in identically to the primary and that's
 

1585
00:35:21,020 --> 00:35:25,300
in identically to the primary and that's
actually glossing over some huge and

1586
00:35:25,300 --> 00:35:25,310
actually glossing over some huge and
 

1587
00:35:25,310 --> 00:35:30,040
actually glossing over some huge and
important details so one problem is that

1588
00:35:30,040 --> 00:35:30,050
important details so one problem is that
 

1589
00:35:30,050 --> 00:35:31,180
important details so one problem is that
as a couple of people have mentioned

1590
00:35:31,180 --> 00:35:31,190
as a couple of people have mentioned
 

1591
00:35:31,190 --> 00:35:33,700
as a couple of people have mentioned
there are some things that are

1592
00:35:33,700 --> 00:35:33,710
there are some things that are
 

1593
00:35:33,710 --> 00:35:36,010
there are some things that are
non-deterministic now it's not the case

1594
00:35:36,010 --> 00:35:36,020
non-deterministic now it's not the case
 

1595
00:35:36,020 --> 00:35:37,420
non-deterministic now it's not the case
that every single thing that happens in

1596
00:35:37,420 --> 00:35:37,430
that every single thing that happens in
 

1597
00:35:37,430 --> 00:35:39,430
that every single thing that happens in
the computer is a deterministic function

1598
00:35:39,430 --> 00:35:39,440
the computer is a deterministic function
 

1599
00:35:39,440 --> 00:35:41,320
the computer is a deterministic function
of the contents of the memory of the

1600
00:35:41,320 --> 00:35:41,330
of the contents of the memory of the
 

1601
00:35:41,330 --> 00:35:44,410
of the contents of the memory of the
computer it is for a sort of straight

1602
00:35:44,410 --> 00:35:44,420
computer it is for a sort of straight
 

1603
00:35:44,420 --> 00:35:46,270
computer it is for a sort of straight
line code execution often but certainly

1604
00:35:46,270 --> 00:35:46,280
line code execution often but certainly
 

1605
00:35:46,280 --> 00:35:49,420
line code execution often but certainly
not always so worried about is things

1606
00:35:49,420 --> 00:35:49,430
not always so worried about is things
 

1607
00:35:49,430 --> 00:35:51,280
not always so worried about is things
that may happen that are not a strict

1608
00:35:51,280 --> 00:35:51,290
that may happen that are not a strict
 

1609
00:35:51,290 --> 00:35:53,260
that may happen that are not a strict
function of the current state that is

1610
00:35:53,260 --> 00:35:53,270
function of the current state that is
 

1611
00:35:53,270 --> 00:35:54,910
function of the current state that is
that might be different if we're not

1612
00:35:54,910 --> 00:35:54,920
that might be different if we're not
 

1613
00:35:54,920 --> 00:35:56,950
that might be different if we're not
careful on the primary and backup so

1614
00:35:56,950 --> 00:35:56,960
careful on the primary and backup so
 

1615
00:35:56,960 --> 00:35:58,750
careful on the primary and backup so
these are sort of non-deterministic

1616
00:35:58,750 --> 00:35:58,760
these are sort of non-deterministic
 

1617
00:35:58,760 --> 00:36:04,030
these are sort of non-deterministic
events that may happen so the designers

1618
00:36:04,030 --> 00:36:04,040
events that may happen so the designers
 

1619
00:36:04,040 --> 00:36:05,530
events that may happen so the designers
had to sit down and like figure out what

1620
00:36:05,530 --> 00:36:05,540
had to sit down and like figure out what
 

1621
00:36:05,540 --> 00:36:10,560
had to sit down and like figure out what
they all work and here are the ones

1622
00:36:10,560 --> 00:36:10,570
they all work and here are the ones
 

1623
00:36:10,570 --> 00:36:12,340
they all work and here are the ones
here's the kind of stuff they talked

1624
00:36:12,340 --> 00:36:12,350
here's the kind of stuff they talked
 

1625
00:36:12,350 --> 00:36:16,510
here's the kind of stuff they talked
about so one is inputs from external

1626
00:36:16,510 --> 00:36:16,520
about so one is inputs from external
 

1627
00:36:16,520 --> 00:36:18,850
about so one is inputs from external
sources like clients which arrive just

1628
00:36:18,850 --> 00:36:18,860
sources like clients which arrive just
 

1629
00:36:18,860 --> 00:36:20,410
sources like clients which arrive just
whenever they arrive right they're not

1630
00:36:20,410 --> 00:36:20,420
whenever they arrive right they're not
 

1631
00:36:20,420 --> 00:36:21,880
whenever they arrive right they're not
predictable there are no sense in which

1632
00:36:21,880 --> 00:36:21,890
predictable there are no sense in which
 

1633
00:36:21,890 --> 00:36:24,160
predictable there are no sense in which
the time at which a client request

1634
00:36:24,160 --> 00:36:24,170
the time at which a client request
 

1635
00:36:24,170 --> 00:36:25,510
the time at which a client request
arrives or its content is a

1636
00:36:25,510 --> 00:36:25,520
arrives or its content is a
 

1637
00:36:25,520 --> 00:36:27,070
arrives or its content is a
deterministic function of the services

1638
00:36:27,070 --> 00:36:27,080
deterministic function of the services
 

1639
00:36:27,080 --> 00:36:31,080
deterministic function of the services
state because it's not so these actually

1640
00:36:31,080 --> 00:36:31,090
state because it's not so these actually
 

1641
00:36:31,090 --> 00:36:34,540
state because it's not so these actually
this system is really dedicated to a

1642
00:36:34,540 --> 00:36:34,550
this system is really dedicated to a
 

1643
00:36:34,550 --> 00:36:37,540
this system is really dedicated to a
world in which services only talk over

1644
00:36:37,540 --> 00:36:37,550
world in which services only talk over
 

1645
00:36:37,550 --> 00:36:39,820
world in which services only talk over
the network and so the only really

1646
00:36:39,820 --> 00:36:39,830
the network and so the only really
 

1647
00:36:39,830 --> 00:36:41,620
the network and so the only really
basically the only form of input or

1648
00:36:41,620 --> 00:36:41,630
basically the only form of input or
 

1649
00:36:41,630 --> 00:36:44,050
basically the only form of input or
output in this system is supported by

1650
00:36:44,050 --> 00:36:44,060
output in this system is supported by
 

1651
00:36:44,060 --> 00:36:46,230
output in this system is supported by
this system seems to be network packets

1652
00:36:46,230 --> 00:36:46,240
this system seems to be network packets
 

1653
00:36:46,240 --> 00:36:48,610
this system seems to be network packets
coming and going so we didn't put

1654
00:36:48,610 --> 00:36:48,620
coming and going so we didn't put
 

1655
00:36:48,620 --> 00:36:50,050
coming and going so we didn't put
arrives at what that really means it's a

1656
00:36:50,050 --> 00:36:50,060
arrives at what that really means it's a
 

1657
00:36:50,060 --> 00:36:50,530
arrives at what that really means it's a
packet

1658
00:36:50,530 --> 00:36:50,540
packet
 

1659
00:36:50,540 --> 00:36:53,800
packet
arrives and what a packet really

1660
00:36:53,800 --> 00:36:53,810
arrives and what a packet really
 

1661
00:36:53,810 --> 00:36:56,980
arrives and what a packet really
consists of for us is the data in the

1662
00:36:56,980 --> 00:36:56,990
consists of for us is the data in the
 

1663
00:36:56,990 --> 00:37:01,810
consists of for us is the data in the
packet plus the interrupt

1664
00:37:01,810 --> 00:37:01,820
packet plus the interrupt
 

1665
00:37:01,820 --> 00:37:05,560
packet plus the interrupt
that's signaled that the packet had

1666
00:37:05,560 --> 00:37:05,570
that's signaled that the packet had
 

1667
00:37:05,570 --> 00:37:08,080
that's signaled that the packet had
arrived so that's quite important so

1668
00:37:08,080 --> 00:37:08,090
arrived so that's quite important so
 

1669
00:37:08,090 --> 00:37:11,040
arrived so that's quite important so
when a packet arrives

1670
00:37:11,040 --> 00:37:11,050

 

1671
00:37:11,050 --> 00:37:16,240

I'm ordinarily the NIC DMA is the packet

1672
00:37:16,240 --> 00:37:16,250
I'm ordinarily the NIC DMA is the packet
 

1673
00:37:16,250 --> 00:37:20,710
I'm ordinarily the NIC DMA is the packet
contents into memory and then raises an

1674
00:37:20,710 --> 00:37:20,720
contents into memory and then raises an
 

1675
00:37:20,720 --> 00:37:22,060
contents into memory and then raises an
interrupt which the operating system

1676
00:37:22,060 --> 00:37:22,070
interrupt which the operating system
 

1677
00:37:22,070 --> 00:37:23,410
interrupt which the operating system
feels and the interrupt happens at some

1678
00:37:23,410 --> 00:37:23,420
feels and the interrupt happens at some
 

1679
00:37:23,420 --> 00:37:26,200
feels and the interrupt happens at some
point in the instruction stream and so

1680
00:37:26,200 --> 00:37:26,210
point in the instruction stream and so
 

1681
00:37:26,210 --> 00:37:28,990
point in the instruction stream and so
both of those have to look identical on

1682
00:37:28,990 --> 00:37:29,000
both of those have to look identical on
 

1683
00:37:29,000 --> 00:37:30,850
both of those have to look identical on
the primary and backup or else we're

1684
00:37:30,850 --> 00:37:30,860
the primary and backup or else we're
 

1685
00:37:30,860 --> 00:37:33,040
the primary and backup or else we're
gonna have they're also executions gonna

1686
00:37:33,040 --> 00:37:33,050
gonna have they're also executions gonna
 

1687
00:37:33,050 --> 00:37:35,530
gonna have they're also executions gonna
diverge and so you know the real issue

1688
00:37:35,530 --> 00:37:35,540
diverge and so you know the real issue
 

1689
00:37:35,540 --> 00:37:38,080
diverge and so you know the real issue
is when the interrupt occurs exactly at

1690
00:37:38,080 --> 00:37:38,090
is when the interrupt occurs exactly at
 

1691
00:37:38,090 --> 00:37:40,180
is when the interrupt occurs exactly at
which instruction the interrupts happen

1692
00:37:40,180 --> 00:37:40,190
which instruction the interrupts happen
 

1693
00:37:40,190 --> 00:37:42,490
which instruction the interrupts happen
to occur and better be the same on the

1694
00:37:42,490 --> 00:37:42,500
to occur and better be the same on the
 

1695
00:37:42,500 --> 00:37:44,410
to occur and better be the same on the
primary in the backup otherwise their

1696
00:37:44,410 --> 00:37:44,420
primary in the backup otherwise their
 

1697
00:37:44,420 --> 00:37:46,390
primary in the backup otherwise their
execution is different and their states

1698
00:37:46,390 --> 00:37:46,400
execution is different and their states
 

1699
00:37:46,400 --> 00:37:49,030
execution is different and their states
are gonna diverge and so we care about

1700
00:37:49,030 --> 00:37:49,040
are gonna diverge and so we care about
 

1701
00:37:49,040 --> 00:37:50,890
are gonna diverge and so we care about
the content of the packet and the timing

1702
00:37:50,890 --> 00:37:50,900
the content of the packet and the timing
 

1703
00:37:50,900 --> 00:37:54,280
the content of the packet and the timing
of the interrupt and then as a couple of

1704
00:37:54,280 --> 00:37:54,290
of the interrupt and then as a couple of
 

1705
00:37:54,290 --> 00:37:56,820
of the interrupt and then as a couple of
people have mentioned there's a few

1706
00:37:56,820 --> 00:37:56,830
people have mentioned there's a few
 

1707
00:37:56,830 --> 00:38:04,570
people have mentioned there's a few
instructions that that behave

1708
00:38:04,570 --> 00:38:04,580
instructions that that behave
 

1709
00:38:04,580 --> 00:38:06,910
instructions that that behave
differently on different computers or

1710
00:38:06,910 --> 00:38:06,920
differently on different computers or
 

1711
00:38:06,920 --> 00:38:09,580
differently on different computers or
differently depending on something like

1712
00:38:09,580 --> 00:38:09,590
differently depending on something like
 

1713
00:38:09,590 --> 00:38:11,290
differently depending on something like
there's maybe a random number generator

1714
00:38:11,290 --> 00:38:11,300
there's maybe a random number generator
 

1715
00:38:11,300 --> 00:38:13,240
there's maybe a random number generator
instruction there's I get time-of-day

1716
00:38:13,240 --> 00:38:13,250
instruction there's I get time-of-day
 

1717
00:38:13,250 --> 00:38:15,250
instruction there's I get time-of-day
instructions that will yield different

1718
00:38:15,250 --> 00:38:15,260
instructions that will yield different
 

1719
00:38:15,260 --> 00:38:16,630
instructions that will yield different
answers have called at different times

1720
00:38:16,630 --> 00:38:16,640
answers have called at different times
 

1721
00:38:16,640 --> 00:38:21,400
answers have called at different times
and unique ID instructions another huge

1722
00:38:21,400 --> 00:38:21,410
and unique ID instructions another huge
 

1723
00:38:21,410 --> 00:38:22,840
and unique ID instructions another huge
source of non determinism which the

1724
00:38:22,840 --> 00:38:22,850
source of non determinism which the
 

1725
00:38:22,850 --> 00:38:27,430
source of non determinism which the
paper basically rules out is multi-core

1726
00:38:27,430 --> 00:38:27,440
paper basically rules out is multi-core
 

1727
00:38:27,440 --> 00:38:33,310
paper basically rules out is multi-core
parallelism is a unit process or only

1728
00:38:33,310 --> 00:38:33,320
parallelism is a unit process or only
 

1729
00:38:33,320 --> 00:38:34,900
parallelism is a unit process or only
system there's no multi-core in this

1730
00:38:34,900 --> 00:38:34,910
system there's no multi-core in this
 

1731
00:38:34,910 --> 00:38:36,910
system there's no multi-core in this
world the reason for this is that if it

1732
00:38:36,910 --> 00:38:36,920
world the reason for this is that if it
 

1733
00:38:36,920 --> 00:38:40,330
world the reason for this is that if it
allowed multi-core then then the service

1734
00:38:40,330 --> 00:38:40,340
allowed multi-core then then the service
 

1735
00:38:40,340 --> 00:38:41,770
allowed multi-core then then the service
would be running on multiple cores and

1736
00:38:41,770 --> 00:38:41,780
would be running on multiple cores and
 

1737
00:38:41,780 --> 00:38:45,040
would be running on multiple cores and
the instructions of the service the rest

1738
00:38:45,040 --> 00:38:45,050
the instructions of the service the rest
 

1739
00:38:45,050 --> 00:38:45,880
the instructions of the service the rest
of you know the different cores are

1740
00:38:45,880 --> 00:38:45,890
of you know the different cores are
 

1741
00:38:45,890 --> 00:38:48,130
of you know the different cores are
interleaved in some way which is not

1742
00:38:48,130 --> 00:38:48,140
interleaved in some way which is not
 

1743
00:38:48,140 --> 00:38:50,800
interleaved in some way which is not
predictable and so really if we run the

1744
00:38:50,800 --> 00:38:50,810
predictable and so really if we run the
 

1745
00:38:50,810 --> 00:38:52,900
predictable and so really if we run the
same code on the on the backup in the

1746
00:38:52,900 --> 00:38:52,910
same code on the on the backup in the
 

1747
00:38:52,910 --> 00:38:54,880
same code on the on the backup in the
server if it's parallel code running on

1748
00:38:54,880 --> 00:38:54,890
server if it's parallel code running on
 

1749
00:38:54,890 --> 00:38:56,890
server if it's parallel code running on
a multi-core the tubo interleave the

1750
00:38:56,890 --> 00:38:56,900
a multi-core the tubo interleave the
 

1751
00:38:56,900 --> 00:38:58,510
a multi-core the tubo interleave the
instructions in the two cores in

1752
00:38:58,510 --> 00:38:58,520
instructions in the two cores in
 

1753
00:38:58,520 --> 00:39:00,780
instructions in the two cores in
different ways the hardware will and

1754
00:39:00,780 --> 00:39:00,790
different ways the hardware will and
 

1755
00:39:00,790 --> 00:39:03,440
different ways the hardware will and
that can just cause

1756
00:39:03,440 --> 00:39:03,450
that can just cause
 

1757
00:39:03,450 --> 00:39:05,900
that can just cause
different results because you know

1758
00:39:05,900 --> 00:39:05,910
different results because you know
 

1759
00:39:05,910 --> 00:39:08,840
different results because you know
supposing the code and the two cores you

1760
00:39:08,840 --> 00:39:08,850
supposing the code and the two cores you
 

1761
00:39:08,850 --> 00:39:10,490
supposing the code and the two cores you
know they both asked for a lock on some

1762
00:39:10,490 --> 00:39:10,500
know they both asked for a lock on some
 

1763
00:39:10,500 --> 00:39:13,040
know they both asked for a lock on some
data well on the master you know

1764
00:39:13,040 --> 00:39:13,050
data well on the master you know
 

1765
00:39:13,050 --> 00:39:15,050
data well on the master you know
core one may get the lock before Core 2

1766
00:39:15,050 --> 00:39:15,060
core one may get the lock before Core 2
 

1767
00:39:15,060 --> 00:39:17,150
core one may get the lock before Core 2
on the slave just because of a tiny

1768
00:39:17,150 --> 00:39:17,160
on the slave just because of a tiny
 

1769
00:39:17,160 --> 00:39:19,130
on the slave just because of a tiny
timing difference core to may got the

1770
00:39:19,130 --> 00:39:19,140
timing difference core to may got the
 

1771
00:39:19,140 --> 00:39:21,470
timing difference core to may got the
lock first and the you know execution

1772
00:39:21,470 --> 00:39:21,480
lock first and the you know execution
 

1773
00:39:21,480 --> 00:39:23,600
lock first and the you know execution
results are totally different likely to

1774
00:39:23,600 --> 00:39:23,610
results are totally different likely to
 

1775
00:39:23,610 --> 00:39:25,220
results are totally different likely to
be totally different if different

1776
00:39:25,220 --> 00:39:25,230
be totally different if different
 

1777
00:39:25,230 --> 00:39:26,950
be totally different if different
threads get the lock

1778
00:39:26,950 --> 00:39:26,960
threads get the lock
 

1779
00:39:26,960 --> 00:39:30,050
threads get the lock
so multi-core is the grim source of

1780
00:39:30,050 --> 00:39:30,060
so multi-core is the grim source of
 

1781
00:39:30,060 --> 00:39:32,390
so multi-core is the grim source of
non-determinism man is just totally

1782
00:39:32,390 --> 00:39:32,400
non-determinism man is just totally
 

1783
00:39:32,400 --> 00:39:36,740
non-determinism man is just totally
outlawed in this papers world and indeed

1784
00:39:36,740 --> 00:39:36,750
outlawed in this papers world and indeed
 

1785
00:39:36,750 --> 00:39:39,200
outlawed in this papers world and indeed
like as far as I can tell the techniques

1786
00:39:39,200 --> 00:39:39,210
like as far as I can tell the techniques
 

1787
00:39:39,210 --> 00:39:59,990
like as far as I can tell the techniques
are not really applicable the service

1788
00:39:59,990 --> 00:40:00,000
are not really applicable the service
 

1789
00:40:00,000 --> 00:40:01,970
are not really applicable the service
can't use multi-core parallel

1790
00:40:01,970 --> 00:40:01,980
can't use multi-core parallel
 

1791
00:40:01,980 --> 00:40:04,820
can't use multi-core parallel
parallelism the hardware is almost

1792
00:40:04,820 --> 00:40:04,830
parallelism the hardware is almost
 

1793
00:40:04,830 --> 00:40:06,950
parallelism the hardware is almost
certainly multi-core parallel but that's

1794
00:40:06,950 --> 00:40:06,960
certainly multi-core parallel but that's
 

1795
00:40:06,960 --> 00:40:09,230
certainly multi-core parallel but that's
the hardware sitting underneath the

1796
00:40:09,230 --> 00:40:09,240
the hardware sitting underneath the
 

1797
00:40:09,240 --> 00:40:11,630
the hardware sitting underneath the
virtual machine monitor the machine that

1798
00:40:11,630 --> 00:40:11,640
virtual machine monitor the machine that
 

1799
00:40:11,640 --> 00:40:13,820
virtual machine monitor the machine that
the virtual machine monitor exposes to

1800
00:40:13,820 --> 00:40:13,830
the virtual machine monitor exposes to
 

1801
00:40:13,830 --> 00:40:15,470
the virtual machine monitor exposes to
one of the guest operating systems that

1802
00:40:15,470 --> 00:40:15,480
one of the guest operating systems that
 

1803
00:40:15,480 --> 00:40:18,470
one of the guest operating systems that
runs the primary backup that emulated

1804
00:40:18,470 --> 00:40:18,480
runs the primary backup that emulated
 

1805
00:40:18,480 --> 00:40:21,080
runs the primary backup that emulated
virtual machine is a unicorn it's a unit

1806
00:40:21,080 --> 00:40:21,090
virtual machine is a unicorn it's a unit
 

1807
00:40:21,090 --> 00:40:25,070
virtual machine is a unicorn it's a unit
processor machine in this paper and I'm

1808
00:40:25,070 --> 00:40:25,080
processor machine in this paper and I'm
 

1809
00:40:25,080 --> 00:40:26,780
processor machine in this paper and I'm
guessing there's not an easy way for

1810
00:40:26,780 --> 00:40:26,790
guessing there's not an easy way for
 

1811
00:40:26,790 --> 00:40:31,540
guessing there's not an easy way for
them to adapt this design to multi-core

1812
00:40:31,540 --> 00:40:31,550
them to adapt this design to multi-core
 

1813
00:40:31,550 --> 00:40:39,950
them to adapt this design to multi-core
virtual machines

1814
00:40:39,950 --> 00:40:39,960

 

1815
00:40:39,960 --> 00:40:43,680

okay so so these are really it's it's

1816
00:40:43,680 --> 00:40:43,690
okay so so these are really it's it's
 

1817
00:40:43,690 --> 00:40:44,940
okay so so these are really it's it's
it's these events that go over the

1818
00:40:44,940 --> 00:40:44,950
it's these events that go over the
 

1819
00:40:44,950 --> 00:40:49,769
it's these events that go over the
logging channel and so the format of a

1820
00:40:49,769 --> 00:40:49,779
logging channel and so the format of a
 

1821
00:40:49,779 --> 00:40:55,650
logging channel and so the format of a
log record a log log entry they don't

1822
00:40:55,650 --> 00:40:55,660
log record a log log entry they don't
 

1823
00:40:55,660 --> 00:40:57,150
log record a log log entry they don't
quite say but I'm guessing that there's

1824
00:40:57,150 --> 00:40:57,160
quite say but I'm guessing that there's
 

1825
00:40:57,160 --> 00:40:58,259
quite say but I'm guessing that there's
really three things in a log entry

1826
00:40:58,259 --> 00:40:58,269
really three things in a log entry
 

1827
00:40:58,269 --> 00:41:01,230
really three things in a log entry
there's the instruction number at which

1828
00:41:01,230 --> 00:41:01,240
there's the instruction number at which
 

1829
00:41:01,240 --> 00:41:02,700
there's the instruction number at which
the event occurred because if you're

1830
00:41:02,700 --> 00:41:02,710
the event occurred because if you're
 

1831
00:41:02,710 --> 00:41:04,410
the event occurred because if you're
delivering an interrupt or you know

1832
00:41:04,410 --> 00:41:04,420
delivering an interrupt or you know
 

1833
00:41:04,420 --> 00:41:06,239
delivering an interrupt or you know
input or whatever it better be delivered

1834
00:41:06,239 --> 00:41:06,249
input or whatever it better be delivered
 

1835
00:41:06,249 --> 00:41:09,150
input or whatever it better be delivered
at exactly the same place in the primary

1836
00:41:09,150 --> 00:41:09,160
at exactly the same place in the primary
 

1837
00:41:09,160 --> 00:41:10,559
at exactly the same place in the primary
backup so we need to know the

1838
00:41:10,559 --> 00:41:10,569
backup so we need to know the
 

1839
00:41:10,569 --> 00:41:11,789
backup so we need to know the
instruction number and by instruction

1840
00:41:11,789 --> 00:41:11,799
instruction number and by instruction
 

1841
00:41:11,799 --> 00:41:14,160
instruction number and by instruction
number I mean you know the number of

1842
00:41:14,160 --> 00:41:14,170
number I mean you know the number of
 

1843
00:41:14,170 --> 00:41:15,900
number I mean you know the number of
instructions since the Machine booted

1844
00:41:15,900 --> 00:41:15,910
instructions since the Machine booted
 

1845
00:41:15,910 --> 00:41:18,269
instructions since the Machine booted
why not the instruction address but like

1846
00:41:18,269 --> 00:41:18,279
why not the instruction address but like
 

1847
00:41:18,279 --> 00:41:20,640
why not the instruction address but like
oh or executing the four billion and

1848
00:41:20,640 --> 00:41:20,650
oh or executing the four billion and
 

1849
00:41:20,650 --> 00:41:23,489
oh or executing the four billion and
79th instructions since boot so log

1850
00:41:23,489 --> 00:41:23,499
79th instructions since boot so log
 

1851
00:41:23,499 --> 00:41:24,599
79th instructions since boot so log
entry is going to have instruction

1852
00:41:24,599 --> 00:41:24,609
entry is going to have instruction
 

1853
00:41:24,609 --> 00:41:31,200
entry is going to have instruction
number four an interrupt for input it's

1854
00:41:31,200 --> 00:41:31,210
number four an interrupt for input it's
 

1855
00:41:31,210 --> 00:41:34,049
number four an interrupt for input it's
going to be the instruction at which the

1856
00:41:34,049 --> 00:41:34,059
going to be the instruction at which the
 

1857
00:41:34,059 --> 00:41:35,759
going to be the instruction at which the
interrupt was delivered on the primary

1858
00:41:35,759 --> 00:41:35,769
interrupt was delivered on the primary
 

1859
00:41:35,769 --> 00:41:39,359
interrupt was delivered on the primary
and for a weird instruction like get at

1860
00:41:39,359 --> 00:41:39,369
and for a weird instruction like get at
 

1861
00:41:39,369 --> 00:41:41,130
and for a weird instruction like get at
time of day it's going to be the

1862
00:41:41,130 --> 00:41:41,140
time of day it's going to be the
 

1863
00:41:41,140 --> 00:41:43,319
time of day it's going to be the
instruction number of the instruction of

1864
00:41:43,319 --> 00:41:43,329
instruction number of the instruction of
 

1865
00:41:43,329 --> 00:41:44,970
instruction number of the instruction of
the get time of day or whatever

1866
00:41:44,970 --> 00:41:44,980
the get time of day or whatever
 

1867
00:41:44,980 --> 00:41:46,950
the get time of day or whatever
instruction that was executed on the

1868
00:41:46,950 --> 00:41:46,960
instruction that was executed on the
 

1869
00:41:46,960 --> 00:41:49,259
instruction that was executed on the
primary so that you know the backup

1870
00:41:49,259 --> 00:41:49,269
primary so that you know the backup
 

1871
00:41:49,269 --> 00:41:52,440
primary so that you know the backup
knows where to where to call this event

1872
00:41:52,440 --> 00:41:52,450
knows where to where to call this event
 

1873
00:41:52,450 --> 00:41:54,809
knows where to where to call this event
to occur okay so there's gonna be a type

1874
00:41:54,809 --> 00:41:54,819
to occur okay so there's gonna be a type
 

1875
00:41:54,819 --> 00:41:58,079
to occur okay so there's gonna be a type
you know network input whatever a weird

1876
00:41:58,079 --> 00:41:58,089
you know network input whatever a weird
 

1877
00:41:58,089 --> 00:42:00,210
you know network input whatever a weird
instruction and then there's I'm gonna

1878
00:42:00,210 --> 00:42:00,220
instruction and then there's I'm gonna
 

1879
00:42:00,220 --> 00:42:03,359
instruction and then there's I'm gonna
be data for a packet arrival it's gonna

1880
00:42:03,359 --> 00:42:03,369
be data for a packet arrival it's gonna
 

1881
00:42:03,369 --> 00:42:05,160
be data for a packet arrival it's gonna
be the packet data for one of these

1882
00:42:05,160 --> 00:42:05,170
be the packet data for one of these
 

1883
00:42:05,170 --> 00:42:06,420
be the packet data for one of these
weird instructions it's going to be the

1884
00:42:06,420 --> 00:42:06,430
weird instructions it's going to be the
 

1885
00:42:06,430 --> 00:42:08,130
weird instructions it's going to be the
result of the instruction when it was

1886
00:42:08,130 --> 00:42:08,140
result of the instruction when it was
 

1887
00:42:08,140 --> 00:42:10,440
result of the instruction when it was
executed on the primary so that the

1888
00:42:10,440 --> 00:42:10,450
executed on the primary so that the
 

1889
00:42:10,450 --> 00:42:13,289
executed on the primary so that the
backup virtual machine can sort of fake

1890
00:42:13,289 --> 00:42:13,299
backup virtual machine can sort of fake
 

1891
00:42:13,299 --> 00:42:15,539
backup virtual machine can sort of fake
the instruction and supply that same

1892
00:42:15,539 --> 00:42:15,549
the instruction and supply that same
 

1893
00:42:15,549 --> 00:42:22,099
the instruction and supply that same
result

1894
00:42:22,099 --> 00:42:22,109

 

1895
00:42:22,109 --> 00:42:27,510

okay so so as an example the both of

1896
00:42:27,510 --> 00:42:27,520
okay so so as an example the both of
 

1897
00:42:27,520 --> 00:42:34,950
okay so so as an example the both of
these operating systems guest operating

1898
00:42:34,950 --> 00:42:34,960
these operating systems guest operating
 

1899
00:42:34,960 --> 00:42:38,670
these operating systems guest operating
system assumes requires that the

1900
00:42:38,670 --> 00:42:38,680
system assumes requires that the
 

1901
00:42:38,680 --> 00:42:40,230
system assumes requires that the
hardware in this case emulated hardware

1902
00:42:40,230 --> 00:42:40,240
hardware in this case emulated hardware
 

1903
00:42:40,240 --> 00:42:42,300
hardware in this case emulated hardware
virtual machine has a timer that ticks

1904
00:42:42,300 --> 00:42:42,310
virtual machine has a timer that ticks
 

1905
00:42:42,310 --> 00:42:44,670
virtual machine has a timer that ticks
say a hundred times a second and causes

1906
00:42:44,670 --> 00:42:44,680
say a hundred times a second and causes
 

1907
00:42:44,680 --> 00:42:47,849
say a hundred times a second and causes
interrupts to the operating system and

1908
00:42:47,849 --> 00:42:47,859
interrupts to the operating system and
 

1909
00:42:47,859 --> 00:42:49,530
interrupts to the operating system and
that's how the operating system keeps

1910
00:42:49,530 --> 00:42:49,540
that's how the operating system keeps
 

1911
00:42:49,540 --> 00:42:51,210
that's how the operating system keeps
track of time it's by counting these

1912
00:42:51,210 --> 00:42:51,220
track of time it's by counting these
 

1913
00:42:51,220 --> 00:42:54,690
track of time it's by counting these
timer interrupts so the way that plays

1914
00:42:54,690 --> 00:42:54,700
timer interrupts so the way that plays
 

1915
00:42:54,700 --> 00:42:56,490
timer interrupts so the way that plays
out those timer notice why they have to

1916
00:42:56,490 --> 00:42:56,500
out those timer notice why they have to
 

1917
00:42:56,500 --> 00:42:58,260
out those timer notice why they have to
happen at exactly the same place in the

1918
00:42:58,260 --> 00:42:58,270
happen at exactly the same place in the
 

1919
00:42:58,270 --> 00:43:00,599
happen at exactly the same place in the
primary and backup otherwise they don't

1920
00:43:00,599 --> 00:43:00,609
primary and backup otherwise they don't
 

1921
00:43:00,609 --> 00:43:04,079
primary and backup otherwise they don't
execute the same no diverge so what

1922
00:43:04,079 --> 00:43:04,089
execute the same no diverge so what
 

1923
00:43:04,089 --> 00:43:06,800
execute the same no diverge so what
really happens is that the there's

1924
00:43:06,800 --> 00:43:06,810
really happens is that the there's
 

1925
00:43:06,810 --> 00:43:10,710
really happens is that the there's
there's a timer on the physical machine

1926
00:43:10,710 --> 00:43:10,720
there's a timer on the physical machine
 

1927
00:43:10,720 --> 00:43:14,130
there's a timer on the physical machine
that's running the Ft virtual machine

1928
00:43:14,130 --> 00:43:14,140
that's running the Ft virtual machine
 

1929
00:43:14,140 --> 00:43:16,050
that's running the Ft virtual machine
monitor and the timer on the physical

1930
00:43:16,050 --> 00:43:16,060
monitor and the timer on the physical
 

1931
00:43:16,060 --> 00:43:18,240
monitor and the timer on the physical
machine ticks and delivers an interrupt

1932
00:43:18,240 --> 00:43:18,250
machine ticks and delivers an interrupt
 

1933
00:43:18,250 --> 00:43:19,770
machine ticks and delivers an interrupt
a timer and up to the virtual machine

1934
00:43:19,770 --> 00:43:19,780
a timer and up to the virtual machine
 

1935
00:43:19,780 --> 00:43:23,550
a timer and up to the virtual machine
monitor on the primary the virtual

1936
00:43:23,550 --> 00:43:23,560
monitor on the primary the virtual
 

1937
00:43:23,560 --> 00:43:24,810
monitor on the primary the virtual
machine monitor at you know the

1938
00:43:24,810 --> 00:43:24,820
machine monitor at you know the
 

1939
00:43:24,820 --> 00:43:29,849
machine monitor at you know the
appropriate moment stops the execution

1940
00:43:29,849 --> 00:43:29,859
appropriate moment stops the execution
 

1941
00:43:29,859 --> 00:43:31,920
appropriate moment stops the execution
of the primary writes down the

1942
00:43:31,920 --> 00:43:31,930
of the primary writes down the
 

1943
00:43:31,930 --> 00:43:34,170
of the primary writes down the
instruction number that it was at you

1944
00:43:34,170 --> 00:43:34,180
instruction number that it was at you
 

1945
00:43:34,180 --> 00:43:37,310
instruction number that it was at you
know instruction since boot and then

1946
00:43:37,310 --> 00:43:37,320
know instruction since boot and then
 

1947
00:43:37,320 --> 00:43:39,780
know instruction since boot and then
delivers sort of fake simulates and

1948
00:43:39,780 --> 00:43:39,790
delivers sort of fake simulates and
 

1949
00:43:39,790 --> 00:43:41,820
delivers sort of fake simulates and
interrupts into the guest operating

1950
00:43:41,820 --> 00:43:41,830
interrupts into the guest operating
 

1951
00:43:41,830 --> 00:43:43,230
interrupts into the guest operating
system in the primary at that

1952
00:43:43,230 --> 00:43:43,240
system in the primary at that
 

1953
00:43:43,240 --> 00:43:44,520
system in the primary at that
instruction number saying oh you know

1954
00:43:44,520 --> 00:43:44,530
instruction number saying oh you know
 

1955
00:43:44,530 --> 00:43:46,560
instruction number saying oh you know
you're emulating the timer Hardware just

1956
00:43:46,560 --> 00:43:46,570
you're emulating the timer Hardware just
 

1957
00:43:46,570 --> 00:43:47,070
you're emulating the timer Hardware just
ticked

1958
00:43:47,070 --> 00:43:47,080
ticked
 

1959
00:43:47,080 --> 00:43:49,290
ticked
there's the interrupt and then the

1960
00:43:49,290 --> 00:43:49,300
there's the interrupt and then the
 

1961
00:43:49,300 --> 00:43:51,390
there's the interrupt and then the
primary virtual machine monitor sends

1962
00:43:51,390 --> 00:43:51,400
primary virtual machine monitor sends
 

1963
00:43:51,400 --> 00:43:52,589
primary virtual machine monitor sends
that instruction number which the

1964
00:43:52,589 --> 00:43:52,599
that instruction number which the
 

1965
00:43:52,599 --> 00:43:54,800
that instruction number which the
interrupt happened you know to the

1966
00:43:54,800 --> 00:43:54,810
interrupt happened you know to the
 

1967
00:43:54,810 --> 00:43:59,250
interrupt happened you know to the
backup the backup of course it's virtual

1968
00:43:59,250 --> 00:43:59,260
backup the backup of course it's virtual
 

1969
00:43:59,260 --> 00:44:00,510
backup the backup of course it's virtual
machine monitor is also taking timer

1970
00:44:00,510 --> 00:44:00,520
machine monitor is also taking timer
 

1971
00:44:00,520 --> 00:44:02,430
machine monitor is also taking timer
interrupts from its physical timer and

1972
00:44:02,430 --> 00:44:02,440
interrupts from its physical timer and
 

1973
00:44:02,440 --> 00:44:04,650
interrupts from its physical timer and
it's not giving them it's not giving

1974
00:44:04,650 --> 00:44:04,660
it's not giving them it's not giving
 

1975
00:44:04,660 --> 00:44:06,900
it's not giving them it's not giving
it's a real physical timer interrupts to

1976
00:44:06,900 --> 00:44:06,910
it's a real physical timer interrupts to
 

1977
00:44:06,910 --> 00:44:09,990
it's a real physical timer interrupts to
the to the backup operating system it's

1978
00:44:09,990 --> 00:44:10,000
the to the backup operating system it's
 

1979
00:44:10,000 --> 00:44:13,440
the to the backup operating system it's
just ignoring them when the law when the

1980
00:44:13,440 --> 00:44:13,450
just ignoring them when the law when the
 

1981
00:44:13,450 --> 00:44:15,690
just ignoring them when the law when the
log entry for the primaries timer

1982
00:44:15,690 --> 00:44:15,700
log entry for the primaries timer
 

1983
00:44:15,700 --> 00:44:18,720
log entry for the primaries timer
interrupts arrives here then the backup

1984
00:44:18,720 --> 00:44:18,730
interrupts arrives here then the backup
 

1985
00:44:18,730 --> 00:44:20,490
interrupts arrives here then the backup
virtual machine monitor will arrange

1986
00:44:20,490 --> 00:44:20,500
virtual machine monitor will arrange
 

1987
00:44:20,500 --> 00:44:22,200
virtual machine monitor will arrange
with the CPU and this requires special

1988
00:44:22,200 --> 00:44:22,210
with the CPU and this requires special
 

1989
00:44:22,210 --> 00:44:28,109
with the CPU and this requires special
CPU support to cause the physical

1990
00:44:28,109 --> 00:44:28,119
CPU support to cause the physical
 

1991
00:44:28,119 --> 00:44:30,690
CPU support to cause the physical
machine to interrupt at the same

1992
00:44:30,690 --> 00:44:30,700
machine to interrupt at the same
 

1993
00:44:30,700 --> 00:44:32,620
machine to interrupt at the same
instruction number

1994
00:44:32,620 --> 00:44:32,630
instruction number
 

1995
00:44:32,630 --> 00:44:34,120
instruction number
at the timer interrupts tapped into the

1996
00:44:34,120 --> 00:44:34,130
at the timer interrupts tapped into the
 

1997
00:44:34,130 --> 00:44:36,940
at the timer interrupts tapped into the
primary at that point the virtual

1998
00:44:36,940 --> 00:44:36,950
primary at that point the virtual
 

1999
00:44:36,950 --> 00:44:38,530
primary at that point the virtual
machine monitor gets control again from

2000
00:44:38,530 --> 00:44:38,540
machine monitor gets control again from
 

2001
00:44:38,540 --> 00:44:41,500
machine monitor gets control again from
the guest and then fakes the timer

2002
00:44:41,500 --> 00:44:41,510
the guest and then fakes the timer
 

2003
00:44:41,510 --> 00:44:43,960
the guest and then fakes the timer
interrupts into the backup operating

2004
00:44:43,960 --> 00:44:43,970
interrupts into the backup operating
 

2005
00:44:43,970 --> 00:44:46,180
interrupts into the backup operating
system now exact exactly the same

2006
00:44:46,180 --> 00:44:46,190
system now exact exactly the same
 

2007
00:44:46,190 --> 00:44:47,920
system now exact exactly the same
instruction number as it occurred on the

2008
00:44:47,920 --> 00:44:47,930
instruction number as it occurred on the
 

2009
00:44:47,930 --> 00:45:17,050
instruction number as it occurred on the
primary well yeah so the observation is

2010
00:45:17,050 --> 00:45:17,060
primary well yeah so the observation is
 

2011
00:45:17,060 --> 00:45:18,730
primary well yeah so the observation is
that this will this relies on the CPU

2012
00:45:18,730 --> 00:45:18,740
that this will this relies on the CPU
 

2013
00:45:18,740 --> 00:45:20,920
that this will this relies on the CPU
having some special hardware in it where

2014
00:45:20,920 --> 00:45:20,930
having some special hardware in it where
 

2015
00:45:20,930 --> 00:45:24,430
having some special hardware in it where
the vmm can tell the hardware CPU please

2016
00:45:24,430 --> 00:45:24,440
the vmm can tell the hardware CPU please
 

2017
00:45:24,440 --> 00:45:26,920
the vmm can tell the hardware CPU please
interrupt a thousand instructions from

2018
00:45:26,920 --> 00:45:26,930
interrupt a thousand instructions from
 

2019
00:45:26,930 --> 00:45:29,920
interrupt a thousand instructions from
now and then the vmm you know where so

2020
00:45:29,920 --> 00:45:29,930
now and then the vmm you know where so
 

2021
00:45:29,930 --> 00:45:32,980
now and then the vmm you know where so
that you know it'll interrupt at the

2022
00:45:32,980 --> 00:45:32,990
that you know it'll interrupt at the
 

2023
00:45:32,990 --> 00:45:34,060
that you know it'll interrupt at the
right instruction number the same

2024
00:45:34,060 --> 00:45:34,070
right instruction number the same
 

2025
00:45:34,070 --> 00:45:35,710
right instruction number the same
instruction as the primary did and then

2026
00:45:35,710 --> 00:45:35,720
instruction as the primary did and then
 

2027
00:45:35,720 --> 00:45:38,560
instruction as the primary did and then
the vmm just tells the cpu to start X

2028
00:45:38,560 --> 00:45:38,570
the vmm just tells the cpu to start X
 

2029
00:45:38,570 --> 00:45:40,690
the vmm just tells the cpu to start X
resume executing again in the backup and

2030
00:45:40,690 --> 00:45:40,700
resume executing again in the backup and
 

2031
00:45:40,700 --> 00:45:42,550
resume executing again in the backup and
exactly a thousand instructions later

2032
00:45:42,550 --> 00:45:42,560
exactly a thousand instructions later
 

2033
00:45:42,560 --> 00:45:44,710
exactly a thousand instructions later
the CPU will force an interrupt into the

2034
00:45:44,710 --> 00:45:44,720
the CPU will force an interrupt into the
 

2035
00:45:44,720 --> 00:45:46,450
the CPU will force an interrupt into the
virtual machine monitor and that that's

2036
00:45:46,450 --> 00:45:46,460
virtual machine monitor and that that's
 

2037
00:45:46,460 --> 00:45:48,520
virtual machine monitor and that that's
special hardware but it turns out it's

2038
00:45:48,520 --> 00:45:48,530
special hardware but it turns out it's
 

2039
00:45:48,530 --> 00:45:51,730
special hardware but it turns out it's
you know on all Intel chips so it's not

2040
00:45:51,730 --> 00:45:51,740
you know on all Intel chips so it's not
 

2041
00:45:51,740 --> 00:45:53,920
you know on all Intel chips so it's not
it's not that special anymore you know

2042
00:45:53,920 --> 00:45:53,930
it's not that special anymore you know
 

2043
00:45:53,930 --> 00:45:56,950
it's not that special anymore you know
15 years ago it was exotic now it's

2044
00:45:56,950 --> 00:45:56,960
15 years ago it was exotic now it's
 

2045
00:45:56,960 --> 00:45:59,500
15 years ago it was exotic now it's
totally normal and it turns out there's

2046
00:45:59,500 --> 00:45:59,510
totally normal and it turns out there's
 

2047
00:45:59,510 --> 00:46:01,540
totally normal and it turns out there's
a lot of other uses for it like um if

2048
00:46:01,540 --> 00:46:01,550
a lot of other uses for it like um if
 

2049
00:46:01,550 --> 00:46:02,920
a lot of other uses for it like um if
you want to do profiling you wanna do

2050
00:46:02,920 --> 00:46:02,930
you want to do profiling you wanna do
 

2051
00:46:02,930 --> 00:46:04,930
you want to do profiling you wanna do
CPU time profiling what you'd really

2052
00:46:04,930 --> 00:46:04,940
CPU time profiling what you'd really
 

2053
00:46:04,940 --> 00:46:07,540
CPU time profiling what you'd really
like or one way to do CPU time profiling

2054
00:46:07,540 --> 00:46:07,550
like or one way to do CPU time profiling
 

2055
00:46:07,550 --> 00:46:09,280
like or one way to do CPU time profiling
is to have the microprocessor interrupt

2056
00:46:09,280 --> 00:46:09,290
is to have the microprocessor interrupt
 

2057
00:46:09,290 --> 00:46:11,410
is to have the microprocessor interrupt
every thousand instructions right and

2058
00:46:11,410 --> 00:46:11,420
every thousand instructions right and
 

2059
00:46:11,420 --> 00:46:13,180
every thousand instructions right and
this is the hardware that's this

2060
00:46:13,180 --> 00:46:13,190
this is the hardware that's this
 

2061
00:46:13,190 --> 00:46:15,460
this is the hardware that's this
Hardware also this is the same hardware

2062
00:46:15,460 --> 00:46:15,470
Hardware also this is the same hardware
 

2063
00:46:15,470 --> 00:46:17,170
Hardware also this is the same hardware
that would cause the microprocessor to

2064
00:46:17,170 --> 00:46:17,180
that would cause the microprocessor to
 

2065
00:46:17,180 --> 00:46:18,850
that would cause the microprocessor to
generate an interrupt every thousand

2066
00:46:18,850 --> 00:46:18,860
generate an interrupt every thousand
 

2067
00:46:18,860 --> 00:46:21,910
generate an interrupt every thousand
instructions so it's a very natural sort

2068
00:46:21,910 --> 00:46:21,920
instructions so it's a very natural sort
 

2069
00:46:21,920 --> 00:46:31,420
instructions so it's a very natural sort
of gadget to want in your CPU

2070
00:46:31,420 --> 00:46:31,430

 

2071
00:46:31,430 --> 00:46:54,260

all right yes

2072
00:46:54,260 --> 00:46:54,270

 

2073
00:46:54,270 --> 00:46:56,060

what if the backup gets ahead of the

2074
00:46:56,060 --> 00:46:56,070
what if the backup gets ahead of the
 

2075
00:46:56,070 --> 00:46:59,750
what if the backup gets ahead of the
primary so you know we standing above

2076
00:46:59,750 --> 00:46:59,760
primary so you know we standing above
 

2077
00:46:59,760 --> 00:47:02,810
primary so you know we standing above
know that oh you know the primary is

2078
00:47:02,810 --> 00:47:02,820
know that oh you know the primary is
 

2079
00:47:02,820 --> 00:47:04,670
know that oh you know the primary is
about to take an interrupt at the

2080
00:47:04,670 --> 00:47:04,680
about to take an interrupt at the
 

2081
00:47:04,680 --> 00:47:08,960
about to take an interrupt at the
millionth instruction but the backup is

2082
00:47:08,960 --> 00:47:08,970
millionth instruction but the backup is
 

2083
00:47:08,970 --> 00:47:11,750
millionth instruction but the backup is
already you know executed the millionth

2084
00:47:11,750 --> 00:47:11,760
already you know executed the millionth
 

2085
00:47:11,760 --> 00:47:14,000
already you know executed the millionth
and first instruction so it's gonna be

2086
00:47:14,000 --> 00:47:14,010
and first instruction so it's gonna be
 

2087
00:47:14,010 --> 00:47:16,520
and first instruction so it's gonna be
if we let this happen it's gonna be too

2088
00:47:16,520 --> 00:47:16,530
if we let this happen it's gonna be too
 

2089
00:47:16,530 --> 00:47:19,430
if we let this happen it's gonna be too
late to deliver the interrupts if we let

2090
00:47:19,430 --> 00:47:19,440
late to deliver the interrupts if we let
 

2091
00:47:19,440 --> 00:47:21,230
late to deliver the interrupts if we let
the backup xu the head of the primary

2092
00:47:21,230 --> 00:47:21,240
the backup xu the head of the primary
 

2093
00:47:21,240 --> 00:47:23,720
the backup xu the head of the primary
it's going to be too late to deliver the

2094
00:47:23,720 --> 00:47:23,730
it's going to be too late to deliver the
 

2095
00:47:23,730 --> 00:47:26,030
it's going to be too late to deliver the
interrupts at the same point in the

2096
00:47:26,030 --> 00:47:26,040
interrupts at the same point in the
 

2097
00:47:26,040 --> 00:47:27,500
interrupts at the same point in the
primary instruction stream and the

2098
00:47:27,500 --> 00:47:27,510
primary instruction stream and the
 

2099
00:47:27,510 --> 00:47:29,300
primary instruction stream and the
backup of the instruction stream so we

2100
00:47:29,300 --> 00:47:29,310
backup of the instruction stream so we
 

2101
00:47:29,310 --> 00:47:31,550
backup of the instruction stream so we
cannot let that happen we cannot let the

2102
00:47:31,550 --> 00:47:31,560
cannot let that happen we cannot let the
 

2103
00:47:31,560 --> 00:47:33,650
cannot let that happen we cannot let the
backup get ahead of the primary in

2104
00:47:33,650 --> 00:47:33,660
backup get ahead of the primary in
 

2105
00:47:33,660 --> 00:47:37,850
backup get ahead of the primary in
execution and the way VMware aft does

2106
00:47:37,850 --> 00:47:37,860
execution and the way VMware aft does
 

2107
00:47:37,860 --> 00:47:45,440
execution and the way VMware aft does
that is that the the backup virtual

2108
00:47:45,440 --> 00:47:45,450
that is that the the backup virtual
 

2109
00:47:45,450 --> 00:47:46,670
that is that the the backup virtual
machine monitor it actually keeps a

2110
00:47:46,670 --> 00:47:46,680
machine monitor it actually keeps a
 

2111
00:47:46,680 --> 00:47:49,670
machine monitor it actually keeps a
buffer of waiting events that have

2112
00:47:49,670 --> 00:47:49,680
buffer of waiting events that have
 

2113
00:47:49,680 --> 00:47:53,390
buffer of waiting events that have
arrived from the primary and it will not

2114
00:47:53,390 --> 00:47:53,400
arrived from the primary and it will not
 

2115
00:47:53,400 --> 00:47:56,450
arrived from the primary and it will not
let to the backup execute unless there's

2116
00:47:56,450 --> 00:47:56,460
let to the backup execute unless there's
 

2117
00:47:56,460 --> 00:47:58,910
let to the backup execute unless there's
at least one event in that buffer and if

2118
00:47:58,910 --> 00:47:58,920
at least one event in that buffer and if
 

2119
00:47:58,920 --> 00:48:01,490
at least one event in that buffer and if
there's one event in that buffer then it

2120
00:48:01,490 --> 00:48:01,500
there's one event in that buffer then it
 

2121
00:48:01,500 --> 00:48:02,900
there's one event in that buffer then it
will know from the instruction number

2122
00:48:02,900 --> 00:48:02,910
will know from the instruction number
 

2123
00:48:02,910 --> 00:48:07,400
will know from the instruction number
the place at which it's got a force the

2124
00:48:07,400 --> 00:48:07,410
the place at which it's got a force the
 

2125
00:48:07,410 --> 00:48:10,880
the place at which it's got a force the
backup to stop executing so always

2126
00:48:10,880 --> 00:48:10,890
backup to stop executing so always
 

2127
00:48:10,890 --> 00:48:14,750
backup to stop executing so always
always the backup is executing with the

2128
00:48:14,750 --> 00:48:14,760
always the backup is executing with the
 

2129
00:48:14,760 --> 00:48:17,410
always the backup is executing with the
CPU being told exactly where the next

2130
00:48:17,410 --> 00:48:17,420
CPU being told exactly where the next
 

2131
00:48:17,420 --> 00:48:19,700
CPU being told exactly where the next
stopping point the next instruction

2132
00:48:19,700 --> 00:48:19,710
stopping point the next instruction
 

2133
00:48:19,710 --> 00:48:21,710
stopping point the next instruction
number of a stopping point is because

2134
00:48:21,710 --> 00:48:21,720
number of a stopping point is because
 

2135
00:48:21,720 --> 00:48:24,310
number of a stopping point is because
the backup only executes if it has a an

2136
00:48:24,310 --> 00:48:24,320
the backup only executes if it has a an
 

2137
00:48:24,320 --> 00:48:26,690
the backup only executes if it has a an
event here that tells it where to stop

2138
00:48:26,690 --> 00:48:26,700
event here that tells it where to stop
 

2139
00:48:26,700 --> 00:48:30,440
event here that tells it where to stop
next so that means it starts up after

2140
00:48:30,440 --> 00:48:30,450
next so that means it starts up after
 

2141
00:48:30,450 --> 00:48:31,790
next so that means it starts up after
the primary because the backup can't

2142
00:48:31,790 --> 00:48:31,800
the primary because the backup can't
 

2143
00:48:31,800 --> 00:48:33,560
the primary because the backup can't
even start executing until the primary

2144
00:48:33,560 --> 00:48:33,570
even start executing until the primary
 

2145
00:48:33,570 --> 00:48:35,780
even start executing until the primary
has generated the first event and that

2146
00:48:35,780 --> 00:48:35,790
has generated the first event and that
 

2147
00:48:35,790 --> 00:48:37,460
has generated the first event and that
event has arrived at the backup so the

2148
00:48:37,460 --> 00:48:37,470
event has arrived at the backup so the
 

2149
00:48:37,470 --> 00:48:39,170
event has arrived at the backup so the
backup sort of always one event

2150
00:48:39,170 --> 00:48:39,180
backup sort of always one event
 

2151
00:48:39,180 --> 00:48:41,690
backup sort of always one event
basically behind the at least one event

2152
00:48:41,690 --> 00:48:41,700
basically behind the at least one event
 

2153
00:48:41,700 --> 00:48:43,130
basically behind the at least one event
behind the primary and if it's slower

2154
00:48:43,130 --> 00:48:43,140
behind the primary and if it's slower
 

2155
00:48:43,140 --> 00:48:44,720
behind the primary and if it's slower
for some other whatever reason maybe

2156
00:48:44,720 --> 00:48:44,730
for some other whatever reason maybe
 

2157
00:48:44,730 --> 00:48:45,770
for some other whatever reason maybe
there's other stuff running on that

2158
00:48:45,770 --> 00:48:45,780
there's other stuff running on that
 

2159
00:48:45,780 --> 00:48:47,750
there's other stuff running on that
physical machine then the backup might

2160
00:48:47,750 --> 00:48:47,760
physical machine then the backup might
 

2161
00:48:47,760 --> 00:48:50,870
physical machine then the backup might
get you know multiple events behind at

2162
00:48:50,870 --> 00:48:50,880
get you know multiple events behind at
 

2163
00:48:50,880 --> 00:48:58,339
get you know multiple events behind at
the primary

2164
00:48:58,339 --> 00:48:58,349

 

2165
00:48:58,349 --> 00:49:03,089

alright there's a one little piece of

2166
00:49:03,089 --> 00:49:03,099
alright there's a one little piece of
 

2167
00:49:03,099 --> 00:49:05,510
alright there's a one little piece of
mess about arriving the specific case of

2168
00:49:05,510 --> 00:49:05,520
mess about arriving the specific case of
 

2169
00:49:05,520 --> 00:49:16,529
mess about arriving the specific case of
arriving packets ordinarily when a

2170
00:49:16,529 --> 00:49:16,539
arriving packets ordinarily when a
 

2171
00:49:16,539 --> 00:49:17,940
arriving packets ordinarily when a
packet arrives from a network interface

2172
00:49:17,940 --> 00:49:17,950
packet arrives from a network interface
 

2173
00:49:17,950 --> 00:49:19,289
packet arrives from a network interface
card if we weren't running a virtual

2174
00:49:19,289 --> 00:49:19,299
card if we weren't running a virtual
 

2175
00:49:19,299 --> 00:49:22,200
card if we weren't running a virtual
machine the network interface card would

2176
00:49:22,200 --> 00:49:22,210
machine the network interface card would
 

2177
00:49:22,210 --> 00:49:24,660
machine the network interface card would
DMA the packet content into the memory

2178
00:49:24,660 --> 00:49:24,670
DMA the packet content into the memory
 

2179
00:49:24,670 --> 00:49:27,720
DMA the packet content into the memory
of the computer that it's attached to

2180
00:49:27,720 --> 00:49:27,730
of the computer that it's attached to
 

2181
00:49:27,730 --> 00:49:30,480
of the computer that it's attached to
sort of as the data arrives from the

2182
00:49:30,480 --> 00:49:30,490
sort of as the data arrives from the
 

2183
00:49:30,490 --> 00:49:33,059
sort of as the data arrives from the
network interface card and that means

2184
00:49:33,059 --> 00:49:33,069
network interface card and that means
 

2185
00:49:33,069 --> 00:49:34,829
network interface card and that means
you know you should never write software

2186
00:49:34,829 --> 00:49:34,839
you know you should never write software
 

2187
00:49:34,839 --> 00:49:38,190
you know you should never write software
like this but it could be that the

2188
00:49:38,190 --> 00:49:38,200
like this but it could be that the
 

2189
00:49:38,200 --> 00:49:39,480
like this but it could be that the
operating system that's running on a

2190
00:49:39,480 --> 00:49:39,490
operating system that's running on a
 

2191
00:49:39,490 --> 00:49:41,789
operating system that's running on a
computer might actually see the data of

2192
00:49:41,789 --> 00:49:41,799
computer might actually see the data of
 

2193
00:49:41,799 --> 00:49:44,220
computer might actually see the data of
a packet as its DMA or copied from the

2194
00:49:44,220 --> 00:49:44,230
a packet as its DMA or copied from the
 

2195
00:49:44,230 --> 00:49:46,289
a packet as its DMA or copied from the
network interface card into memory right

2196
00:49:46,289 --> 00:49:46,299
network interface card into memory right
 

2197
00:49:46,299 --> 00:49:49,769
network interface card into memory right
you know this is and you know we don't

2198
00:49:49,769 --> 00:49:49,779
you know this is and you know we don't
 

2199
00:49:49,779 --> 00:49:51,000
you know this is and you know we don't
know what operating this system is

2200
00:49:51,000 --> 00:49:51,010
know what operating this system is
 

2201
00:49:51,010 --> 00:49:52,140
know what operating this system is
designed so that it can support any

2202
00:49:52,140 --> 00:49:52,150
designed so that it can support any
 

2203
00:49:52,150 --> 00:49:53,940
designed so that it can support any
operating system and cost maybe there is

2204
00:49:53,940 --> 00:49:53,950
operating system and cost maybe there is
 

2205
00:49:53,950 --> 00:49:56,029
operating system and cost maybe there is
an operating system that watches

2206
00:49:56,029 --> 00:49:56,039
an operating system that watches
 

2207
00:49:56,039 --> 00:49:58,769
an operating system that watches
arriving packets in memory as they're

2208
00:49:58,769 --> 00:49:58,779
arriving packets in memory as they're
 

2209
00:49:58,779 --> 00:50:01,859
arriving packets in memory as they're
copied into memory so we can't let that

2210
00:50:01,859 --> 00:50:01,869
copied into memory so we can't let that
 

2211
00:50:01,869 --> 00:50:04,769
copied into memory so we can't let that
happen because if the primary happens to

2212
00:50:04,769 --> 00:50:04,779
happen because if the primary happens to
 

2213
00:50:04,779 --> 00:50:08,849
happen because if the primary happens to
be playing that trick it's gonna see you

2214
00:50:08,849 --> 00:50:08,859
be playing that trick it's gonna see you
 

2215
00:50:08,859 --> 00:50:10,769
be playing that trick it's gonna see you
know if we allowed the network interface

2216
00:50:10,769 --> 00:50:10,779
know if we allowed the network interface
 

2217
00:50:10,779 --> 00:50:13,019
know if we allowed the network interface
card to directly DMA incoming packets

2218
00:50:13,019 --> 00:50:13,029
card to directly DMA incoming packets
 

2219
00:50:13,029 --> 00:50:15,539
card to directly DMA incoming packets
into the memory of the primary the

2220
00:50:15,539 --> 00:50:15,549
into the memory of the primary the
 

2221
00:50:15,549 --> 00:50:17,549
into the memory of the primary the
primary we don't have any control over

2222
00:50:17,549 --> 00:50:17,559
primary we don't have any control over
 

2223
00:50:17,559 --> 00:50:20,190
primary we don't have any control over
the exact timing of when the network

2224
00:50:20,190 --> 00:50:20,200
the exact timing of when the network
 

2225
00:50:20,200 --> 00:50:22,200
the exact timing of when the network
interface card copies data into memory

2226
00:50:22,200 --> 00:50:22,210
interface card copies data into memory
 

2227
00:50:22,210 --> 00:50:24,329
interface card copies data into memory
and so we're not going to know sort of

2228
00:50:24,329 --> 00:50:24,339
and so we're not going to know sort of
 

2229
00:50:24,339 --> 00:50:28,829
and so we're not going to know sort of
at what times the primary did or didn't

2230
00:50:28,829 --> 00:50:28,839
at what times the primary did or didn't
 

2231
00:50:28,839 --> 00:50:32,010
at what times the primary did or didn't
observe data from the packet arriving

2232
00:50:32,010 --> 00:50:32,020
observe data from the packet arriving
 

2233
00:50:32,020 --> 00:50:34,710
observe data from the packet arriving
and so what that means is that in fact

2234
00:50:34,710 --> 00:50:34,720
and so what that means is that in fact
 

2235
00:50:34,720 --> 00:50:39,480
and so what that means is that in fact
the NIC copies incoming packets into

2236
00:50:39,480 --> 00:50:39,490
the NIC copies incoming packets into
 

2237
00:50:39,490 --> 00:50:41,099
the NIC copies incoming packets into
private memory of the virtual machine

2238
00:50:41,099 --> 00:50:41,109
private memory of the virtual machine
 

2239
00:50:41,109 --> 00:50:43,200
private memory of the virtual machine
monitor and then the network interface

2240
00:50:43,200 --> 00:50:43,210
monitor and then the network interface
 

2241
00:50:43,210 --> 00:50:45,269
monitor and then the network interface
card interrupts the virtual machine

2242
00:50:45,269 --> 00:50:45,279
card interrupts the virtual machine
 

2243
00:50:45,279 --> 00:50:46,559
card interrupts the virtual machine
monitor and says oh a packet has arrived

2244
00:50:46,559 --> 00:50:46,569
monitor and says oh a packet has arrived
 

2245
00:50:46,569 --> 00:50:48,420
monitor and says oh a packet has arrived
at that point the virtual machine

2246
00:50:48,420 --> 00:50:48,430
at that point the virtual machine
 

2247
00:50:48,430 --> 00:50:51,180
at that point the virtual machine
monitor will suspend the primary and

2248
00:50:51,180 --> 00:50:51,190
monitor will suspend the primary and
 

2249
00:50:51,190 --> 00:50:52,920
monitor will suspend the primary and
remember what instruction number had

2250
00:50:52,920 --> 00:50:52,930
remember what instruction number had
 

2251
00:50:52,930 --> 00:50:56,490
remember what instruction number had
suspended at copy the entire packet into

2252
00:50:56,490 --> 00:50:56,500
suspended at copy the entire packet into
 

2253
00:50:56,500 --> 00:50:57,930
suspended at copy the entire packet into
the primaries memory while the primary

2254
00:50:57,930 --> 00:50:57,940
the primaries memory while the primary
 

2255
00:50:57,940 --> 00:51:00,809
the primaries memory while the primary
suspended and not looking at this copy

2256
00:51:00,809 --> 00:51:00,819
suspended and not looking at this copy
 

2257
00:51:00,819 --> 00:51:03,630
suspended and not looking at this copy
and then emulate a network interface

2258
00:51:03,630 --> 00:51:03,640
and then emulate a network interface
 

2259
00:51:03,640 --> 00:51:05,780
and then emulate a network interface
card interrupt into the primary

2260
00:51:05,780 --> 00:51:05,790
card interrupt into the primary
 

2261
00:51:05,790 --> 00:51:10,390
card interrupt into the primary
and then send the packet and the

2262
00:51:10,390 --> 00:51:10,400
and then send the packet and the
 

2263
00:51:10,400 --> 00:51:13,040
and then send the packet and the
instruction number to the backup the

2264
00:51:13,040 --> 00:51:13,050
instruction number to the backup the
 

2265
00:51:13,050 --> 00:51:16,400
instruction number to the backup the
backup will also suspend the backup rope

2266
00:51:16,400 --> 00:51:16,410
backup will also suspend the backup rope
 

2267
00:51:16,410 --> 00:51:17,570
backup will also suspend the backup rope
you know virtual machine monitor will

2268
00:51:17,570 --> 00:51:17,580
you know virtual machine monitor will
 

2269
00:51:17,580 --> 00:51:18,980
you know virtual machine monitor will
spend the backup at that instruction

2270
00:51:18,980 --> 00:51:18,990
spend the backup at that instruction
 

2271
00:51:18,990 --> 00:51:21,020
spend the backup at that instruction
number copy the entire packet and again

2272
00:51:21,020 --> 00:51:21,030
number copy the entire packet and again
 

2273
00:51:21,030 --> 00:51:23,210
number copy the entire packet and again
to the back-up is guaranteed not to be

2274
00:51:23,210 --> 00:51:23,220
to the back-up is guaranteed not to be
 

2275
00:51:23,220 --> 00:51:25,640
to the back-up is guaranteed not to be
watching the data arrive and then fakin

2276
00:51:25,640 --> 00:51:25,650
watching the data arrive and then fakin
 

2277
00:51:25,650 --> 00:51:27,320
watching the data arrive and then fakin
interrupts at the same instruction

2278
00:51:27,320 --> 00:51:27,330
interrupts at the same instruction
 

2279
00:51:27,330 --> 00:51:30,700
interrupts at the same instruction
numbers the primary and this is the

2280
00:51:30,700 --> 00:51:30,710
numbers the primary and this is the
 

2281
00:51:30,710 --> 00:51:34,000
numbers the primary and this is the
something the bounce buffer mechanism

2282
00:51:34,000 --> 00:51:34,010
something the bounce buffer mechanism
 

2283
00:51:34,010 --> 00:51:57,020
something the bounce buffer mechanism
explained in the paper okay yeah the the

2284
00:51:57,020 --> 00:51:57,030
explained in the paper okay yeah the the
 

2285
00:51:57,030 --> 00:51:59,780
explained in the paper okay yeah the the
only instructions and that result in

2286
00:51:59,780 --> 00:51:59,790
only instructions and that result in
 

2287
00:51:59,790 --> 00:52:03,230
only instructions and that result in
logging channel traffic or are weird

2288
00:52:03,230 --> 00:52:03,240
logging channel traffic or are weird
 

2289
00:52:03,240 --> 00:52:06,440
logging channel traffic or are weird
instructions which are rare no its

2290
00:52:06,440 --> 00:52:06,450
instructions which are rare no its
 

2291
00:52:06,450 --> 00:52:09,290
instructions which are rare no its
instructions that might yield a

2292
00:52:09,290 --> 00:52:09,300
instructions that might yield a
 

2293
00:52:09,300 --> 00:52:10,670
instructions that might yield a
different result if executed on the

2294
00:52:10,670 --> 00:52:10,680
different result if executed on the
 

2295
00:52:10,680 --> 00:52:12,530
different result if executed on the
primary and backup like instruction to

2296
00:52:12,530 --> 00:52:12,540
primary and backup like instruction to
 

2297
00:52:12,540 --> 00:52:14,120
primary and backup like instruction to
get the current time of day or current

2298
00:52:14,120 --> 00:52:14,130
get the current time of day or current
 

2299
00:52:14,130 --> 00:52:15,920
get the current time of day or current
processor number or ask how many

2300
00:52:15,920 --> 00:52:15,930
processor number or ask how many
 

2301
00:52:15,930 --> 00:52:18,500
processor number or ask how many
instructions have been executed or and

2302
00:52:18,500 --> 00:52:18,510
instructions have been executed or and
 

2303
00:52:18,510 --> 00:52:19,760
instructions have been executed or and
those actually turn out to be relatively

2304
00:52:19,760 --> 00:52:19,770
those actually turn out to be relatively
 

2305
00:52:19,770 --> 00:52:22,070
those actually turn out to be relatively
rare there's also one them to get random

2306
00:52:22,070 --> 00:52:22,080
rare there's also one them to get random
 

2307
00:52:22,080 --> 00:52:24,260
rare there's also one them to get random
tasks when some machines to ask or a

2308
00:52:24,260 --> 00:52:24,270
tasks when some machines to ask or a
 

2309
00:52:24,270 --> 00:52:25,880
tasks when some machines to ask or a
hardware generated random number for

2310
00:52:25,880 --> 00:52:25,890
hardware generated random number for
 

2311
00:52:25,890 --> 00:52:28,490
hardware generated random number for
cryptography or something and but those

2312
00:52:28,490 --> 00:52:28,500
cryptography or something and but those
 

2313
00:52:28,500 --> 00:52:30,170
cryptography or something and but those
are not everyday instructions most

2314
00:52:30,170 --> 00:52:30,180
are not everyday instructions most
 

2315
00:52:30,180 --> 00:52:31,490
are not everyday instructions most
instructions like add instructions

2316
00:52:31,490 --> 00:52:31,500
instructions like add instructions
 

2317
00:52:31,500 --> 00:52:33,650
instructions like add instructions
they're gonna get the same result on

2318
00:52:33,650 --> 00:52:33,660
they're gonna get the same result on
 

2319
00:52:33,660 --> 00:52:44,690
they're gonna get the same result on
primary and that go

2320
00:52:44,690 --> 00:52:44,700

 

2321
00:52:44,700 --> 00:52:47,720

yeah so the way those get replicated on

2322
00:52:47,720 --> 00:52:47,730
yeah so the way those get replicated on
 

2323
00:52:47,730 --> 00:52:51,050
yeah so the way those get replicated on
the back up is just by forwarding that's

2324
00:52:51,050 --> 00:52:51,060
the back up is just by forwarding that's
 

2325
00:52:51,060 --> 00:52:52,460
the back up is just by forwarding that's
exactly right each network packet just

2326
00:52:52,460 --> 00:52:52,470
exactly right each network packet just
 

2327
00:52:52,470 --> 00:52:55,069
exactly right each network packet just
it's packaged up and forwarded as it is

2328
00:52:55,069 --> 00:52:55,079
it's packaged up and forwarded as it is
 

2329
00:52:55,079 --> 00:52:57,829
it's packaged up and forwarded as it is
as a network packet and is interpreted

2330
00:52:57,829 --> 00:52:57,839
as a network packet and is interpreted
 

2331
00:52:57,839 --> 00:53:02,260
as a network packet and is interpreted
by the tcp/ip stack on both you know so

2332
00:53:02,260 --> 00:53:02,270
by the tcp/ip stack on both you know so
 

2333
00:53:02,270 --> 00:53:07,130
by the tcp/ip stack on both you know so
I'm expecting 99.99% of the logging

2334
00:53:07,130 --> 00:53:07,140
I'm expecting 99.99% of the logging
 

2335
00:53:07,140 --> 00:53:09,349
I'm expecting 99.99% of the logging
channel traffic to be incoming packets

2336
00:53:09,349 --> 00:53:09,359
channel traffic to be incoming packets
 

2337
00:53:09,359 --> 00:53:12,200
channel traffic to be incoming packets
and only a tiny fraction to be results

2338
00:53:12,200 --> 00:53:12,210
and only a tiny fraction to be results
 

2339
00:53:12,210 --> 00:53:14,030
and only a tiny fraction to be results
from special non-deterministic

2340
00:53:14,030 --> 00:53:14,040
from special non-deterministic
 

2341
00:53:14,040 --> 00:53:17,690
from special non-deterministic
instructions and so we can kind of guess

2342
00:53:17,690 --> 00:53:17,700
instructions and so we can kind of guess
 

2343
00:53:17,700 --> 00:53:20,000
instructions and so we can kind of guess
what the traffic load is likely to be

2344
00:53:20,000 --> 00:53:20,010
what the traffic load is likely to be
 

2345
00:53:20,010 --> 00:53:22,640
what the traffic load is likely to be
for for a server that serves clients

2346
00:53:22,640 --> 00:53:22,650
for for a server that serves clients
 

2347
00:53:22,650 --> 00:53:24,560
for for a server that serves clients
basically it's a copy of every client

2348
00:53:24,560 --> 00:53:24,570
basically it's a copy of every client
 

2349
00:53:24,570 --> 00:53:27,829
basically it's a copy of every client
packet and then we'll sort of know what

2350
00:53:27,829 --> 00:53:27,839
packet and then we'll sort of know what
 

2351
00:53:27,839 --> 00:53:29,870
packet and then we'll sort of know what
the logging channel how fast the logging

2352
00:53:29,870 --> 00:53:29,880
the logging channel how fast the logging
 

2353
00:53:29,880 --> 00:53:40,970
the logging channel how fast the logging
channel has to be all right so um so

2354
00:53:40,970 --> 00:53:40,980
channel has to be all right so um so
 

2355
00:53:40,980 --> 00:53:42,140
channel has to be all right so um so
it's worth talking a little bit about

2356
00:53:42,140 --> 00:53:42,150
it's worth talking a little bit about
 

2357
00:53:42,150 --> 00:53:44,839
it's worth talking a little bit about
how output works and in this system

2358
00:53:44,839 --> 00:53:44,849
how output works and in this system
 

2359
00:53:44,849 --> 00:53:46,400
how output works and in this system
really the only what output basically

2360
00:53:46,400 --> 00:53:46,410
really the only what output basically
 

2361
00:53:46,410 --> 00:53:49,819
really the only what output basically
means only is sending packets that

2362
00:53:49,819 --> 00:53:49,829
means only is sending packets that
 

2363
00:53:49,829 --> 00:53:51,290
means only is sending packets that
client send requests in as network

2364
00:53:51,290 --> 00:53:51,300
client send requests in as network
 

2365
00:53:51,300 --> 00:53:54,920
client send requests in as network
packets the response goes back out as

2366
00:53:54,920 --> 00:53:54,930
packets the response goes back out as
 

2367
00:53:54,930 --> 00:53:56,750
packets the response goes back out as
network packets and there's really no

2368
00:53:56,750 --> 00:53:56,760
network packets and there's really no
 

2369
00:53:56,760 --> 00:54:00,140
network packets and there's really no
other form of output as I mentioned the

2370
00:54:00,140 --> 00:54:00,150
other form of output as I mentioned the
 

2371
00:54:00,150 --> 00:54:02,569
other form of output as I mentioned the
you know both primary and backup compute

2372
00:54:02,569 --> 00:54:02,579
you know both primary and backup compute
 

2373
00:54:02,579 --> 00:54:04,760
you know both primary and backup compute
the output packet they want to send and

2374
00:54:04,760 --> 00:54:04,770
the output packet they want to send and
 

2375
00:54:04,770 --> 00:54:06,559
the output packet they want to send and
that sort of asks that simulated mix to

2376
00:54:06,559 --> 00:54:06,569
that sort of asks that simulated mix to
 

2377
00:54:06,569 --> 00:54:08,300
that sort of asks that simulated mix to
send the packet it's really sent on the

2378
00:54:08,300 --> 00:54:08,310
send the packet it's really sent on the
 

2379
00:54:08,310 --> 00:54:10,400
send the packet it's really sent on the
primary and simply discard it the output

2380
00:54:10,400 --> 00:54:10,410
primary and simply discard it the output
 

2381
00:54:10,410 --> 00:54:15,920
primary and simply discard it the output
packet discarded on the backup okay but

2382
00:54:15,920 --> 00:54:15,930
packet discarded on the backup okay but
 

2383
00:54:15,930 --> 00:54:17,030
packet discarded on the backup okay but
it turns out is a little more

2384
00:54:17,030 --> 00:54:17,040
it turns out is a little more
 

2385
00:54:17,040 --> 00:54:21,140
it turns out is a little more
complicated than that so supposing we're

2386
00:54:21,140 --> 00:54:21,150
complicated than that so supposing we're
 

2387
00:54:21,150 --> 00:54:24,620
complicated than that so supposing we're
what we're running is a some sort of

2388
00:54:24,620 --> 00:54:24,630
what we're running is a some sort of
 

2389
00:54:24,630 --> 00:54:27,440
what we're running is a some sort of
simple database server and the operation

2390
00:54:27,440 --> 00:54:27,450
simple database server and the operation
 

2391
00:54:27,450 --> 00:54:28,640
simple database server and the operation
the client operation that our database

2392
00:54:28,640 --> 00:54:28,650
the client operation that our database
 

2393
00:54:28,650 --> 00:54:31,370
the client operation that our database
server supports is increment and ideas

2394
00:54:31,370 --> 00:54:31,380
server supports is increment and ideas
 

2395
00:54:31,380 --> 00:54:32,990
server supports is increment and ideas
the client sends an increment requests

2396
00:54:32,990 --> 00:54:33,000
the client sends an increment requests
 

2397
00:54:33,000 --> 00:54:36,380
the client sends an increment requests
the database server increments the value

2398
00:54:36,380 --> 00:54:36,390
the database server increments the value
 

2399
00:54:36,390 --> 00:54:39,950
the database server increments the value
and sends back the new value so maybe on

2400
00:54:39,950 --> 00:54:39,960
and sends back the new value so maybe on
 

2401
00:54:39,960 --> 00:54:41,569
and sends back the new value so maybe on
the primary well let's say everything's

2402
00:54:41,569 --> 00:54:41,579
the primary well let's say everything's
 

2403
00:54:41,579 --> 00:54:43,400
the primary well let's say everything's
fine so far and the primary backup both

2404
00:54:43,400 --> 00:54:43,410
fine so far and the primary backup both
 

2405
00:54:43,410 --> 00:54:47,150
fine so far and the primary backup both
have value 10 in memory and that's the

2406
00:54:47,150 --> 00:54:47,160
have value 10 in memory and that's the
 

2407
00:54:47,160 --> 00:54:51,380
have value 10 in memory and that's the
current value at the counter and some

2408
00:54:51,380 --> 00:54:51,390
current value at the counter and some
 

2409
00:54:51,390 --> 00:54:53,480
current value at the counter and some
client on the local area network sends a

2410
00:54:53,480 --> 00:54:53,490
client on the local area network sends a
 

2411
00:54:53,490 --> 00:54:58,800
client on the local area network sends a
you know an increment request to

2412
00:54:58,800 --> 00:54:58,810

 

2413
00:54:58,810 --> 00:55:03,010

the primary that packet is you know

2414
00:55:03,010 --> 00:55:03,020
the primary that packet is you know
 

2415
00:55:03,020 --> 00:55:04,780
the primary that packet is you know
delivered to the primary it's you know

2416
00:55:04,780 --> 00:55:04,790
delivered to the primary it's you know
 

2417
00:55:04,790 --> 00:55:07,300
delivered to the primary it's you know
it's executed the primary server

2418
00:55:07,300 --> 00:55:07,310
it's executed the primary server
 

2419
00:55:07,310 --> 00:55:08,650
it's executed the primary server
software and the primary says oh you

2420
00:55:08,650 --> 00:55:08,660
software and the primary says oh you
 

2421
00:55:08,660 --> 00:55:10,300
software and the primary says oh you
know current values 10 I'm gonna change

2422
00:55:10,300 --> 00:55:10,310
know current values 10 I'm gonna change
 

2423
00:55:10,310 --> 00:55:13,060
know current values 10 I'm gonna change
to 11 and send a you know response

2424
00:55:13,060 --> 00:55:13,070
to 11 and send a you know response
 

2425
00:55:13,070 --> 00:55:16,600
to 11 and send a you know response
packet back to the client saying saying

2426
00:55:16,600 --> 00:55:16,610
packet back to the client saying saying
 

2427
00:55:16,610 --> 00:55:20,560
packet back to the client saying saying
11 as their reply the same request as I

2428
00:55:20,560 --> 00:55:20,570
11 as their reply the same request as I
 

2429
00:55:20,570 --> 00:55:22,150
11 as their reply the same request as I
mentioned gonna supposed to be sent to

2430
00:55:22,150 --> 00:55:22,160
mentioned gonna supposed to be sent to
 

2431
00:55:22,160 --> 00:55:25,030
mentioned gonna supposed to be sent to
the backup will also be processed here

2432
00:55:25,030 --> 00:55:25,040
the backup will also be processed here
 

2433
00:55:25,040 --> 00:55:26,700
the backup will also be processed here
it's going to change this 10 to 11 also

2434
00:55:26,700 --> 00:55:26,710
it's going to change this 10 to 11 also
 

2435
00:55:26,710 --> 00:55:28,720
it's going to change this 10 to 11 also
generate a reply and we'll throw it away

2436
00:55:28,720 --> 00:55:28,730
generate a reply and we'll throw it away
 

2437
00:55:28,730 --> 00:55:30,460
generate a reply and we'll throw it away
that's what's supposed to happen the

2438
00:55:30,460 --> 00:55:30,470
that's what's supposed to happen the
 

2439
00:55:30,470 --> 00:55:33,610
that's what's supposed to happen the
output however you also need to ask

2440
00:55:33,610 --> 00:55:33,620
output however you also need to ask
 

2441
00:55:33,620 --> 00:55:37,030
output however you also need to ask
yourself what happens if there's a

2442
00:55:37,030 --> 00:55:37,040
yourself what happens if there's a
 

2443
00:55:37,040 --> 00:55:39,880
yourself what happens if there's a
failure at an awkward time if you should

2444
00:55:39,880 --> 00:55:39,890
failure at an awkward time if you should
 

2445
00:55:39,890 --> 00:55:42,010
failure at an awkward time if you should
always in this class should always ask

2446
00:55:42,010 --> 00:55:42,020
always in this class should always ask
 

2447
00:55:42,020 --> 00:55:44,530
always in this class should always ask
yourself what's the most awkward time to

2448
00:55:44,530 --> 00:55:44,540
yourself what's the most awkward time to
 

2449
00:55:44,540 --> 00:55:46,180
yourself what's the most awkward time to
have a failure and what would happen you

2450
00:55:46,180 --> 00:55:46,190
have a failure and what would happen you
 

2451
00:55:46,190 --> 00:55:54,550
have a failure and what would happen you
to failure occurred then so suppose the

2452
00:55:54,550 --> 00:55:54,560
to failure occurred then so suppose the
 

2453
00:55:54,560 --> 00:55:58,120
to failure occurred then so suppose the
primary does indeed generate the reply

2454
00:55:58,120 --> 00:55:58,130
primary does indeed generate the reply
 

2455
00:55:58,130 --> 00:56:01,180
primary does indeed generate the reply
here back to the client but the client

2456
00:56:01,180 --> 00:56:01,190
here back to the client but the client
 

2457
00:56:01,190 --> 00:56:03,190
here back to the client but the client
the primary crashes just after sending

2458
00:56:03,190 --> 00:56:03,200
the primary crashes just after sending
 

2459
00:56:03,200 --> 00:56:05,320
the primary crashes just after sending
the report its reply to the client and

2460
00:56:05,320 --> 00:56:05,330
the report its reply to the client and
 

2461
00:56:05,330 --> 00:56:08,350
the report its reply to the client and
furthermore and much worse it turns out

2462
00:56:08,350 --> 00:56:08,360
furthermore and much worse it turns out
 

2463
00:56:08,360 --> 00:56:10,170
furthermore and much worse it turns out
that you know this is just a network it

2464
00:56:10,170 --> 00:56:10,180
that you know this is just a network it
 

2465
00:56:10,180 --> 00:56:12,430
that you know this is just a network it
doesn't guarantee to deliver packets

2466
00:56:12,430 --> 00:56:12,440
doesn't guarantee to deliver packets
 

2467
00:56:12,440 --> 00:56:16,240
doesn't guarantee to deliver packets
let's suppose this log entry on the

2468
00:56:16,240 --> 00:56:16,250
let's suppose this log entry on the
 

2469
00:56:16,250 --> 00:56:18,850
let's suppose this log entry on the
logging channel got dropped also when

2470
00:56:18,850 --> 00:56:18,860
logging channel got dropped also when
 

2471
00:56:18,860 --> 00:56:21,160
logging channel got dropped also when
the when the primary died so now the

2472
00:56:21,160 --> 00:56:21,170
the when the primary died so now the
 

2473
00:56:21,170 --> 00:56:23,950
the when the primary died so now the
state of play is the client received a

2474
00:56:23,950 --> 00:56:23,960
state of play is the client received a
 

2475
00:56:23,960 --> 00:56:28,000
state of play is the client received a
reply saying 11 but the backup did not

2476
00:56:28,000 --> 00:56:28,010
reply saying 11 but the backup did not
 

2477
00:56:28,010 --> 00:56:29,980
reply saying 11 but the backup did not
get the client request so its state is

2478
00:56:29,980 --> 00:56:29,990
get the client request so its state is
 

2479
00:56:29,990 --> 00:56:34,930
get the client request so its state is
still 10 no now the backup takes over

2480
00:56:34,930 --> 00:56:34,940
still 10 no now the backup takes over
 

2481
00:56:34,940 --> 00:56:37,600
still 10 no now the backup takes over
because it's seized the primary is dead

2482
00:56:37,600 --> 00:56:37,610
because it's seized the primary is dead
 

2483
00:56:37,610 --> 00:56:39,640
because it's seized the primary is dead
and this client or maybe some other

2484
00:56:39,640 --> 00:56:39,650
and this client or maybe some other
 

2485
00:56:39,650 --> 00:56:41,770
and this client or maybe some other
client sends an increment request a new

2486
00:56:41,770 --> 00:56:41,780
client sends an increment request a new
 

2487
00:56:41,780 --> 00:56:43,780
client sends an increment request a new
backup and now it's really processing

2488
00:56:43,780 --> 00:56:43,790
backup and now it's really processing
 

2489
00:56:43,790 --> 00:56:45,820
backup and now it's really processing
these requests and so the new backup

2490
00:56:45,820 --> 00:56:45,830
these requests and so the new backup
 

2491
00:56:45,830 --> 00:56:47,410
these requests and so the new backup
when it gets the next increment requests

2492
00:56:47,410 --> 00:56:47,420
when it gets the next increment requests
 

2493
00:56:47,420 --> 00:56:49,210
when it gets the next increment requests
you know it's now going to change its

2494
00:56:49,210 --> 00:56:49,220
you know it's now going to change its
 

2495
00:56:49,220 --> 00:56:55,630
you know it's now going to change its
state to 11 and generate a second 11

2496
00:56:55,630 --> 00:56:55,640
state to 11 and generate a second 11
 

2497
00:56:55,640 --> 00:56:58,300
state to 11 and generate a second 11
response maybe the same client maybe to

2498
00:56:58,300 --> 00:56:58,310
response maybe the same client maybe to
 

2499
00:56:58,310 --> 00:57:00,460
response maybe the same client maybe to
a different client which if the clients

2500
00:57:00,460 --> 00:57:00,470
a different client which if the clients
 

2501
00:57:00,470 --> 00:57:01,750
a different client which if the clients
compare notes or if it's the same client

2502
00:57:01,750 --> 00:57:01,760
compare notes or if it's the same client
 

2503
00:57:01,760 --> 00:57:04,600
compare notes or if it's the same client
it's just obviously cannot have happened

2504
00:57:04,600 --> 00:57:04,610
it's just obviously cannot have happened
 

2505
00:57:04,610 --> 00:57:07,780
it's just obviously cannot have happened
I didn't so you know because we have to

2506
00:57:07,780 --> 00:57:07,790
I didn't so you know because we have to
 

2507
00:57:07,790 --> 00:57:10,660
I didn't so you know because we have to
support unmodified software that does

2508
00:57:10,660 --> 00:57:10,670
support unmodified software that does
 

2509
00:57:10,670 --> 00:57:11,380
support unmodified software that does
not

2510
00:57:11,380 --> 00:57:11,390
not
 

2511
00:57:11,390 --> 00:57:13,210
not
damn that there's any funny business of

2512
00:57:13,210 --> 00:57:13,220
damn that there's any funny business of
 

2513
00:57:13,220 --> 00:57:15,279
damn that there's any funny business of
replication going on that means we do

2514
00:57:15,279 --> 00:57:15,289
replication going on that means we do
 

2515
00:57:15,289 --> 00:57:17,470
replication going on that means we do
not have the opportunity to you know you

2516
00:57:17,470 --> 00:57:17,480
not have the opportunity to you know you
 

2517
00:57:17,480 --> 00:57:19,089
not have the opportunity to you know you
can imagine the client could go you know

2518
00:57:19,089 --> 00:57:19,099
can imagine the client could go you know
 

2519
00:57:19,099 --> 00:57:20,859
can imagine the client could go you know
we could change the client to realize

2520
00:57:20,859 --> 00:57:20,869
we could change the client to realize
 

2521
00:57:20,869 --> 00:57:22,630
we could change the client to realize
something funny it happened with the

2522
00:57:22,630 --> 00:57:22,640
something funny it happened with the
 

2523
00:57:22,640 --> 00:57:24,549
something funny it happened with the
fault tolerance and do I don't know what

2524
00:57:24,549 --> 00:57:24,559
fault tolerance and do I don't know what
 

2525
00:57:24,559 --> 00:57:25,779
fault tolerance and do I don't know what
but we don't have that option here

2526
00:57:25,779 --> 00:57:25,789
but we don't have that option here
 

2527
00:57:25,789 --> 00:57:27,549
but we don't have that option here
because this whole system really only

2528
00:57:27,549 --> 00:57:27,559
because this whole system really only
 

2529
00:57:27,559 --> 00:57:29,920
because this whole system really only
makes sense if we're running unmodified

2530
00:57:29,920 --> 00:57:29,930
makes sense if we're running unmodified
 

2531
00:57:29,930 --> 00:57:33,789
makes sense if we're running unmodified
software so so this was a big this is a

2532
00:57:33,789 --> 00:57:33,799
software so so this was a big this is a
 

2533
00:57:33,799 --> 00:57:38,759
software so so this was a big this is a
disaster we can't have let this happen

2534
00:57:38,759 --> 00:57:38,769
disaster we can't have let this happen
 

2535
00:57:38,769 --> 00:57:43,120
disaster we can't have let this happen
does anybody remember from the paper how

2536
00:57:43,120 --> 00:57:43,130
does anybody remember from the paper how
 

2537
00:57:43,130 --> 00:57:45,940
does anybody remember from the paper how
they prevent this from happening the

2538
00:57:45,940 --> 00:57:45,950
they prevent this from happening the
 

2539
00:57:45,950 --> 00:57:48,849
they prevent this from happening the
output rule yeah so you want to do you

2540
00:57:48,849 --> 00:57:48,859
output rule yeah so you want to do you
 

2541
00:57:48,859 --> 00:57:57,250
output rule yeah so you want to do you
know yeah so the output rules is the

2542
00:57:57,250 --> 00:57:57,260
know yeah so the output rules is the
 

2543
00:57:57,260 --> 00:58:03,250
know yeah so the output rules is the
their solution to this problem and the

2544
00:58:03,250 --> 00:58:03,260
their solution to this problem and the
 

2545
00:58:03,260 --> 00:58:05,680
their solution to this problem and the
idea is that the client he's not allowed

2546
00:58:05,680 --> 00:58:05,690
idea is that the client he's not allowed
 

2547
00:58:05,690 --> 00:58:08,529
idea is that the client he's not allowed
to generate you know and generate any

2548
00:58:08,529 --> 00:58:08,539
to generate you know and generate any
 

2549
00:58:08,539 --> 00:58:10,150
to generate you know and generate any
output the primary's not allowed to

2550
00:58:10,150 --> 00:58:10,160
output the primary's not allowed to
 

2551
00:58:10,160 --> 00:58:11,380
output the primary's not allowed to
generate any output and what we're

2552
00:58:11,380 --> 00:58:11,390
generate any output and what we're
 

2553
00:58:11,390 --> 00:58:13,230
generate any output and what we're
talking about now is this output here

2554
00:58:13,230 --> 00:58:13,240
talking about now is this output here
 

2555
00:58:13,240 --> 00:58:16,990
talking about now is this output here
until the backup acknowledges that it

2556
00:58:16,990 --> 00:58:17,000
until the backup acknowledges that it
 

2557
00:58:17,000 --> 00:58:21,880
until the backup acknowledges that it
has received all log records up to this

2558
00:58:21,880 --> 00:58:21,890
has received all log records up to this
 

2559
00:58:21,890 --> 00:58:24,400
has received all log records up to this
point so the real sequence at the

2560
00:58:24,400 --> 00:58:24,410
point so the real sequence at the
 

2561
00:58:24,410 --> 00:58:27,339
point so the real sequence at the
primary then let's now undone crash the

2562
00:58:27,339 --> 00:58:27,349
primary then let's now undone crash the
 

2563
00:58:27,349 --> 00:58:32,499
primary then let's now undone crash the
primary go back to them starting at 10

2564
00:58:32,499 --> 00:58:32,509
primary go back to them starting at 10
 

2565
00:58:32,509 --> 00:58:34,569
primary go back to them starting at 10
the real sequence now when the output

2566
00:58:34,569 --> 00:58:34,579
the real sequence now when the output
 

2567
00:58:34,579 --> 00:58:40,660
the real sequence now when the output
rule is that the input arrives at the

2568
00:58:40,660 --> 00:58:40,670
rule is that the input arrives at the
 

2569
00:58:40,670 --> 00:58:42,670
rule is that the input arrives at the
time the input arrives that's when the

2570
00:58:42,670 --> 00:58:42,680
time the input arrives that's when the
 

2571
00:58:42,680 --> 00:58:46,390
time the input arrives that's when the
virtual machine monitor sends a copy of

2572
00:58:46,390 --> 00:58:46,400
virtual machine monitor sends a copy of
 

2573
00:58:46,400 --> 00:58:49,990
virtual machine monitor sends a copy of
the input to the backup so the the sort

2574
00:58:49,990 --> 00:58:50,000
the input to the backup so the the sort
 

2575
00:58:50,000 --> 00:58:53,140
the input to the backup so the the sort
of time at which this log message with

2576
00:58:53,140 --> 00:58:53,150
of time at which this log message with
 

2577
00:58:53,150 --> 00:58:55,660
of time at which this log message with
the input is sent is before strictly

2578
00:58:55,660 --> 00:58:55,670
the input is sent is before strictly
 

2579
00:58:55,670 --> 00:58:58,230
the input is sent is before strictly
before the primary generates the output

2580
00:58:58,230 --> 00:58:58,240
before the primary generates the output
 

2581
00:58:58,240 --> 00:59:03,430
before the primary generates the output
sort of obvious then after firing this

2582
00:59:03,430 --> 00:59:03,440
sort of obvious then after firing this
 

2583
00:59:03,440 --> 00:59:05,140
sort of obvious then after firing this
log entry off across a network and now

2584
00:59:05,140 --> 00:59:05,150
log entry off across a network and now
 

2585
00:59:05,150 --> 00:59:08,499
log entry off across a network and now
it's heading towards the backup but I'd

2586
00:59:08,499 --> 00:59:08,509
it's heading towards the backup but I'd
 

2587
00:59:08,509 --> 00:59:13,089
it's heading towards the backup but I'd
have been lost my not the virtual

2588
00:59:13,089 --> 00:59:13,099
have been lost my not the virtual
 

2589
00:59:13,099 --> 00:59:14,470
have been lost my not the virtual
machine monitor delivers a request to

2590
00:59:14,470 --> 00:59:14,480
machine monitor delivers a request to
 

2591
00:59:14,480 --> 00:59:16,599
machine monitor delivers a request to
the primary server software it generates

2592
00:59:16,599 --> 00:59:16,609
the primary server software it generates
 

2593
00:59:16,609 --> 00:59:20,680
the primary server software it generates
the output so now the

2594
00:59:20,680 --> 00:59:20,690

 

2595
00:59:20,690 --> 00:59:22,540

replicated you know the primary has

2596
00:59:22,540 --> 00:59:22,550
replicated you know the primary has
 

2597
00:59:22,550 --> 00:59:24,700
replicated you know the primary has
actually generated change the state 211

2598
00:59:24,700 --> 00:59:24,710
actually generated change the state 211
 

2599
00:59:24,710 --> 00:59:26,829
actually generated change the state 211
and generated an output packet that says

2600
00:59:26,829 --> 00:59:26,839
and generated an output packet that says
 

2601
00:59:26,839 --> 00:59:28,599
and generated an output packet that says
eleven but the virtual machine monitor

2602
00:59:28,599 --> 00:59:28,609
eleven but the virtual machine monitor
 

2603
00:59:28,609 --> 00:59:29,680
eleven but the virtual machine monitor
says oh wait a minute we're not allowed

2604
00:59:29,680 --> 00:59:29,690
says oh wait a minute we're not allowed
 

2605
00:59:29,690 --> 00:59:31,150
says oh wait a minute we're not allowed
to generate that output until all

2606
00:59:31,150 --> 00:59:31,160
to generate that output until all
 

2607
00:59:31,160 --> 00:59:32,470
to generate that output until all
previous log records have been

2608
00:59:32,470 --> 00:59:32,480
previous log records have been
 

2609
00:59:32,480 --> 00:59:34,690
previous log records have been
acknowledged by the backup so you know

2610
00:59:34,690 --> 00:59:34,700
acknowledged by the backup so you know
 

2611
00:59:34,700 --> 00:59:37,120
acknowledged by the backup so you know
this is the most recent previous log

2612
00:59:37,120 --> 00:59:37,130
this is the most recent previous log
 

2613
00:59:37,130 --> 00:59:39,130
this is the most recent previous log
message so this output is held by the

2614
00:59:39,130 --> 00:59:39,140
message so this output is held by the
 

2615
00:59:39,140 --> 00:59:42,819
message so this output is held by the
virtual machine monitor until the this

2616
00:59:42,819 --> 00:59:42,829
virtual machine monitor until the this
 

2617
00:59:42,829 --> 00:59:44,559
virtual machine monitor until the this
log entry containing the input packet

2618
00:59:44,559 --> 00:59:44,569
log entry containing the input packet
 

2619
00:59:44,569 --> 00:59:47,050
log entry containing the input packet
from the client is delivered to the

2620
00:59:47,050 --> 00:59:47,060
from the client is delivered to the
 

2621
00:59:47,060 --> 00:59:48,550
from the client is delivered to the
virtual machine monitor and buffered by

2622
00:59:48,550 --> 00:59:48,560
virtual machine monitor and buffered by
 

2623
00:59:48,560 --> 00:59:50,079
virtual machine monitor and buffered by
the virtual machine monitor but do not

2624
00:59:50,079 --> 00:59:50,089
the virtual machine monitor but do not
 

2625
00:59:50,089 --> 00:59:52,420
the virtual machine monitor but do not
necessarily execute it it may be just

2626
00:59:52,420 --> 00:59:52,430
necessarily execute it it may be just
 

2627
00:59:52,430 --> 00:59:54,400
necessarily execute it it may be just
waiting for the backup to get to that

2628
00:59:54,400 --> 00:59:54,410
waiting for the backup to get to that
 

2629
00:59:54,410 --> 00:59:56,859
waiting for the backup to get to that
point in the instruction stream and then

2630
00:59:56,859 --> 00:59:56,869
point in the instruction stream and then
 

2631
00:59:56,869 --> 00:59:58,990
point in the instruction stream and then
the virtual machine monitor here will

2632
00:59:58,990 --> 00:59:59,000
the virtual machine monitor here will
 

2633
00:59:59,000 --> 01:00:00,520
the virtual machine monitor here will
send an active packet back saying yes I

2634
01:00:00,520 --> 01:00:00,530
send an active packet back saying yes I
 

2635
01:00:00,530 --> 01:00:02,230
send an active packet back saying yes I
did get that input and when the

2636
01:00:02,230 --> 01:00:02,240
did get that input and when the
 

2637
01:00:02,240 --> 01:00:05,680
did get that input and when the
acknowledgment comes back only then will

2638
01:00:05,680 --> 01:00:05,690
acknowledgment comes back only then will
 

2639
01:00:05,690 --> 01:00:07,089
acknowledgment comes back only then will
the virtual machine monitor here release

2640
01:00:07,089 --> 01:00:07,099
the virtual machine monitor here release
 

2641
01:00:07,099 --> 01:00:11,260
the virtual machine monitor here release
the packet out onto the network and so

2642
01:00:11,260 --> 01:00:11,270
the packet out onto the network and so
 

2643
01:00:11,270 --> 01:00:12,970
the packet out onto the network and so
the idea is that if the client could

2644
01:00:12,970 --> 01:00:12,980
the idea is that if the client could
 

2645
01:00:12,980 --> 01:00:16,180
the idea is that if the client could
have seen the reply then necessarily the

2646
01:00:16,180 --> 01:00:16,190
have seen the reply then necessarily the
 

2647
01:00:16,190 --> 01:00:18,520
have seen the reply then necessarily the
backup must have seen the request and at

2648
01:00:18,520 --> 01:00:18,530
backup must have seen the request and at
 

2649
01:00:18,530 --> 01:00:22,569
backup must have seen the request and at
least buffered it and so we no longer

2650
01:00:22,569 --> 01:00:22,579
least buffered it and so we no longer
 

2651
01:00:22,579 --> 01:00:25,210
least buffered it and so we no longer
get this weird situation in which a

2652
01:00:25,210 --> 01:00:25,220
get this weird situation in which a
 

2653
01:00:25,220 --> 01:00:27,460
get this weird situation in which a
client can see a reply but then there's

2654
01:00:27,460 --> 01:00:27,470
client can see a reply but then there's
 

2655
01:00:27,470 --> 01:00:29,770
client can see a reply but then there's
a failure and a cut over and the replica

2656
01:00:29,770 --> 01:00:29,780
a failure and a cut over and the replica
 

2657
01:00:29,780 --> 01:00:33,940
a failure and a cut over and the replica
didn't know anything about that reply if

2658
01:00:33,940 --> 01:00:33,950
didn't know anything about that reply if
 

2659
01:00:33,950 --> 01:00:36,130
didn't know anything about that reply if
the you know there's also a situation

2660
01:00:36,130 --> 01:00:36,140
the you know there's also a situation
 

2661
01:00:36,140 --> 01:00:40,300
the you know there's also a situation
maybe this message was lost and if this

2662
01:00:40,300 --> 01:00:40,310
maybe this message was lost and if this
 

2663
01:00:40,310 --> 01:00:43,210
maybe this message was lost and if this
log entry was lost and then the primary

2664
01:00:43,210 --> 01:00:43,220
log entry was lost and then the primary
 

2665
01:00:43,220 --> 01:00:45,640
log entry was lost and then the primary
crashes well since it hadn't been

2666
01:00:45,640 --> 01:00:45,650
crashes well since it hadn't been
 

2667
01:00:45,650 --> 01:00:47,740
crashes well since it hadn't been
delivered so the backup hadn't sent the

2668
01:00:47,740 --> 01:00:47,750
delivered so the backup hadn't sent the
 

2669
01:00:47,750 --> 01:00:49,660
delivered so the backup hadn't sent the
act that means if the primary crashed

2670
01:00:49,660 --> 01:00:49,670
act that means if the primary crashed
 

2671
01:00:49,670 --> 01:00:52,210
act that means if the primary crashed
you know this log entry was brought in

2672
01:00:52,210 --> 01:00:52,220
you know this log entry was brought in
 

2673
01:00:52,220 --> 01:00:53,800
you know this log entry was brought in
the primary crashed it must have crashed

2674
01:00:53,800 --> 01:00:53,810
the primary crashed it must have crashed
 

2675
01:00:53,810 --> 01:00:56,200
the primary crashed it must have crashed
before the virtual machine monitor or at

2676
01:00:56,200 --> 01:00:56,210
before the virtual machine monitor or at
 

2677
01:00:56,210 --> 01:00:58,089
before the virtual machine monitor or at
least the output packet and prayer for

2678
01:00:58,089 --> 01:00:58,099
least the output packet and prayer for
 

2679
01:00:58,099 --> 01:01:00,339
least the output packet and prayer for
this client couldn't have gotten the

2680
01:01:00,339 --> 01:01:00,349
this client couldn't have gotten the
 

2681
01:01:00,349 --> 01:01:03,490
this client couldn't have gotten the
reply and so it's not in a position to

2682
01:01:03,490 --> 01:01:03,500
reply and so it's not in a position to
 

2683
01:01:03,500 --> 01:01:09,640
reply and so it's not in a position to
spot any irregularities they're already

2684
01:01:09,640 --> 01:01:09,650
spot any irregularities they're already
 

2685
01:01:09,650 --> 01:01:26,999
spot any irregularities they're already
happy with the output rule

2686
01:01:26,999 --> 01:01:27,009

 

2687
01:01:27,009 --> 01:01:31,589

brennon see I don't know they don't

2688
01:01:31,589 --> 01:01:31,599
brennon see I don't know they don't
 

2689
01:01:31,599 --> 01:01:34,150
brennon see I don't know they don't
paper doesn't mention how the virtual

2690
01:01:34,150 --> 01:01:34,160
paper doesn't mention how the virtual
 

2691
01:01:34,160 --> 01:01:35,709
paper doesn't mention how the virtual
machine monitor is implemented I mean

2692
01:01:35,709 --> 01:01:35,719
machine monitor is implemented I mean
 

2693
01:01:35,719 --> 01:01:38,019
machine monitor is implemented I mean
it's pretty low level stuff because you

2694
01:01:38,019 --> 01:01:38,029
it's pretty low level stuff because you
 

2695
01:01:38,029 --> 01:01:39,519
it's pretty low level stuff because you
know it's sitting there allocating

2696
01:01:39,519 --> 01:01:39,529
know it's sitting there allocating
 

2697
01:01:39,529 --> 01:01:41,559
know it's sitting there allocating
memory and figuring page tables and

2698
01:01:41,559 --> 01:01:41,569
memory and figuring page tables and
 

2699
01:01:41,569 --> 01:01:43,019
memory and figuring page tables and
talking to device drivers and

2700
01:01:43,019 --> 01:01:43,029
talking to device drivers and
 

2701
01:01:43,029 --> 01:01:44,709
talking to device drivers and
intercepting instructions and

2702
01:01:44,709 --> 01:01:44,719
intercepting instructions and
 

2703
01:01:44,719 --> 01:01:46,959
intercepting instructions and
understanding what instructions the

2704
01:01:46,959 --> 01:01:46,969
understanding what instructions the
 

2705
01:01:46,969 --> 01:01:49,059
understanding what instructions the
guest was executing so we're talking

2706
01:01:49,059 --> 01:01:49,069
guest was executing so we're talking
 

2707
01:01:49,069 --> 01:01:51,819
guest was executing so we're talking
about low-level stuff what language is

2708
01:01:51,819 --> 01:01:51,829
about low-level stuff what language is
 

2709
01:01:51,829 --> 01:01:53,469
about low-level stuff what language is
written in you know traditionally C or

2710
01:01:53,469 --> 01:01:53,479
written in you know traditionally C or
 

2711
01:01:53,479 --> 01:01:59,140
written in you know traditionally C or
C++ but I don't actually know okay this

2712
01:01:59,140 --> 01:01:59,150
C++ but I don't actually know okay this
 

2713
01:01:59,150 --> 01:02:02,439
C++ but I don't actually know okay this
of the primary has to delay at this

2714
01:02:02,439 --> 01:02:02,449
of the primary has to delay at this
 

2715
01:02:02,449 --> 01:02:07,390
of the primary has to delay at this
point waiting for the backup to say that

2716
01:02:07,390 --> 01:02:07,400
point waiting for the backup to say that
 

2717
01:02:07,400 --> 01:02:09,400
point waiting for the backup to say that
it's up to date this is a real

2718
01:02:09,400 --> 01:02:09,410
it's up to date this is a real
 

2719
01:02:09,410 --> 01:02:12,430
it's up to date this is a real
performance thorn in the side of just

2720
01:02:12,430 --> 01:02:12,440
performance thorn in the side of just
 

2721
01:02:12,440 --> 01:02:15,430
performance thorn in the side of just
about every replication scheme this sort

2722
01:02:15,430 --> 01:02:15,440
about every replication scheme this sort
 

2723
01:02:15,440 --> 01:02:18,279
about every replication scheme this sort
of synchronous wait where the we can't

2724
01:02:18,279 --> 01:02:18,289
of synchronous wait where the we can't
 

2725
01:02:18,289 --> 01:02:19,989
of synchronous wait where the we can't
let the primary get too far ahead of the

2726
01:02:19,989 --> 01:02:19,999
let the primary get too far ahead of the
 

2727
01:02:19,999 --> 01:02:22,029
let the primary get too far ahead of the
backup because if the primary failed

2728
01:02:22,029 --> 01:02:22,039
backup because if the primary failed
 

2729
01:02:22,039 --> 01:02:24,729
backup because if the primary failed
while it was ahead that would be the

2730
01:02:24,729 --> 01:02:24,739
while it was ahead that would be the
 

2731
01:02:24,739 --> 01:02:27,670
while it was ahead that would be the
backup lagging lagging behind clients

2732
01:02:27,670 --> 01:02:27,680
backup lagging lagging behind clients
 

2733
01:02:27,680 --> 01:02:30,430
backup lagging lagging behind clients
right so just about every replication

2734
01:02:30,430 --> 01:02:30,440
right so just about every replication
 

2735
01:02:30,440 --> 01:02:31,809
right so just about every replication
system has this problem that at some

2736
01:02:31,809 --> 01:02:31,819
system has this problem that at some
 

2737
01:02:31,819 --> 01:02:34,449
system has this problem that at some
point the primary has to stall waiting

2738
01:02:34,449 --> 01:02:34,459
point the primary has to stall waiting
 

2739
01:02:34,459 --> 01:02:36,670
point the primary has to stall waiting
for the backup and it's a real limit on

2740
01:02:36,670 --> 01:02:36,680
for the backup and it's a real limit on
 

2741
01:02:36,680 --> 01:02:38,319
for the backup and it's a real limit on
performance even if the machines are

2742
01:02:38,319 --> 01:02:38,329
performance even if the machines are
 

2743
01:02:38,329 --> 01:02:40,029
performance even if the machines are
like side-by-side and adjacent racks

2744
01:02:40,029 --> 01:02:40,039
like side-by-side and adjacent racks
 

2745
01:02:40,039 --> 01:02:41,949
like side-by-side and adjacent racks
it's still you know we're talking about

2746
01:02:41,949 --> 01:02:41,959
it's still you know we're talking about
 

2747
01:02:41,959 --> 01:02:44,049
it's still you know we're talking about
a half a millisecond or something to

2748
01:02:44,049 --> 01:02:44,059
a half a millisecond or something to
 

2749
01:02:44,059 --> 01:02:45,969
a half a millisecond or something to
send messages back and forth with a

2750
01:02:45,969 --> 01:02:45,979
send messages back and forth with a
 

2751
01:02:45,979 --> 01:02:49,180
send messages back and forth with a
primary stalled and if we wanna like

2752
01:02:49,180 --> 01:02:49,190
primary stalled and if we wanna like
 

2753
01:02:49,190 --> 01:02:51,309
primary stalled and if we wanna like
withstand earthquakes or citywide power

2754
01:02:51,309 --> 01:02:51,319
withstand earthquakes or citywide power
 

2755
01:02:51,319 --> 01:02:53,049
withstand earthquakes or citywide power
failures you know the primary in the

2756
01:02:53,049 --> 01:02:53,059
failures you know the primary in the
 

2757
01:02:53,059 --> 01:02:54,309
failures you know the primary in the
backup have to be in different cities

2758
01:02:54,309 --> 01:02:54,319
backup have to be in different cities
 

2759
01:02:54,319 --> 01:02:56,579
backup have to be in different cities
that's probably five milliseconds apart

2760
01:02:56,579 --> 01:02:56,589
that's probably five milliseconds apart
 

2761
01:02:56,589 --> 01:02:59,499
that's probably five milliseconds apart
every time we produce output if we

2762
01:02:59,499 --> 01:02:59,509
every time we produce output if we
 

2763
01:02:59,509 --> 01:03:01,479
every time we produce output if we
replicate in the two replicas in

2764
01:03:01,479 --> 01:03:01,489
replicate in the two replicas in
 

2765
01:03:01,489 --> 01:03:03,339
replicate in the two replicas in
different city every packet that it

2766
01:03:03,339 --> 01:03:03,349
different city every packet that it
 

2767
01:03:03,349 --> 01:03:05,499
different city every packet that it
produces this output has to first wait

2768
01:03:05,499 --> 01:03:05,509
produces this output has to first wait
 

2769
01:03:05,509 --> 01:03:08,439
produces this output has to first wait
the five milliseconds or whatever to

2770
01:03:08,439 --> 01:03:08,449
the five milliseconds or whatever to
 

2771
01:03:08,449 --> 01:03:09,939
the five milliseconds or whatever to
have the last log entry get to the

2772
01:03:09,939 --> 01:03:09,949
have the last log entry get to the
 

2773
01:03:09,949 --> 01:03:11,439
have the last log entry get to the
backup and how they need Osment come

2774
01:03:11,439 --> 01:03:11,449
backup and how they need Osment come
 

2775
01:03:11,449 --> 01:03:12,609
backup and how they need Osment come
back and then we can release a path

2776
01:03:12,609 --> 01:03:12,619
back and then we can release a path
 

2777
01:03:12,619 --> 01:03:15,279
back and then we can release a path
packet and you know for sort of low

2778
01:03:15,279 --> 01:03:15,289
packet and you know for sort of low
 

2779
01:03:15,289 --> 01:03:18,430
packet and you know for sort of low
intensity services that's not a problem

2780
01:03:18,430 --> 01:03:18,440
intensity services that's not a problem
 

2781
01:03:18,440 --> 01:03:19,930
intensity services that's not a problem
but if we're building a you know

2782
01:03:19,930 --> 01:03:19,940
but if we're building a you know
 

2783
01:03:19,940 --> 01:03:21,759
but if we're building a you know
database server that we would like to

2784
01:03:21,759 --> 01:03:21,769
database server that we would like to
 

2785
01:03:21,769 --> 01:03:22,930
database server that we would like to
you know that if it weren't for this

2786
01:03:22,930 --> 01:03:22,940
you know that if it weren't for this
 

2787
01:03:22,940 --> 01:03:25,180
you know that if it weren't for this
could process millions of requests per

2788
01:03:25,180 --> 01:03:25,190
could process millions of requests per
 

2789
01:03:25,190 --> 01:03:25,950
could process millions of requests per
second then

2790
01:03:25,950 --> 01:03:25,960
second then
 

2791
01:03:25,960 --> 01:03:28,109
second then
that's just unbelievably damaging for

2792
01:03:28,109 --> 01:03:28,119
that's just unbelievably damaging for
 

2793
01:03:28,119 --> 01:03:31,650
that's just unbelievably damaging for
performance and this is a big reason why

2794
01:03:31,650 --> 01:03:31,660
performance and this is a big reason why
 

2795
01:03:31,660 --> 01:03:34,559
performance and this is a big reason why
people you know you know if they

2796
01:03:34,559 --> 01:03:34,569
people you know you know if they
 

2797
01:03:34,569 --> 01:03:38,069
people you know you know if they
possibly can use a replication scheme

2798
01:03:38,069 --> 01:03:38,079
possibly can use a replication scheme
 

2799
01:03:38,079 --> 01:03:39,690
possibly can use a replication scheme
that's operating at a higher level and

2800
01:03:39,690 --> 01:03:39,700
that's operating at a higher level and
 

2801
01:03:39,700 --> 01:03:41,220
that's operating at a higher level and
kind of understands the semantics of

2802
01:03:41,220 --> 01:03:41,230
kind of understands the semantics of
 

2803
01:03:41,230 --> 01:03:42,960
kind of understands the semantics of
operations and so it doesn't have to

2804
01:03:42,960 --> 01:03:42,970
operations and so it doesn't have to
 

2805
01:03:42,970 --> 01:03:45,210
operations and so it doesn't have to
stall on every packet you know it could

2806
01:03:45,210 --> 01:03:45,220
stall on every packet you know it could
 

2807
01:03:45,220 --> 01:03:47,730
stall on every packet you know it could
stall on every high level operation or

2808
01:03:47,730 --> 01:03:47,740
stall on every high level operation or
 

2809
01:03:47,740 --> 01:03:49,740
stall on every high level operation or
even notice that well you know read-only

2810
01:03:49,740 --> 01:03:49,750
even notice that well you know read-only
 

2811
01:03:49,750 --> 01:03:51,510
even notice that well you know read-only
operations don't have to stall at all

2812
01:03:51,510 --> 01:03:51,520
operations don't have to stall at all
 

2813
01:03:51,520 --> 01:03:52,980
operations don't have to stall at all
it's only right so that just all or

2814
01:03:52,980 --> 01:03:52,990
it's only right so that just all or
 

2815
01:03:52,990 --> 01:03:54,750
it's only right so that just all or
something but you have to there has to

2816
01:03:54,750 --> 01:03:54,760
something but you have to there has to
 

2817
01:03:54,760 --> 01:03:55,829
something but you have to there has to
be an application level replication

2818
01:03:55,829 --> 01:03:55,839
be an application level replication
 

2819
01:03:55,839 --> 01:04:04,559
be an application level replication
scheme to to realize that you're

2820
01:04:04,559 --> 01:04:04,569
scheme to to realize that you're
 

2821
01:04:04,569 --> 01:04:06,270
scheme to to realize that you're
absolutely right so the observation is

2822
01:04:06,270 --> 01:04:06,280
absolutely right so the observation is
 

2823
01:04:06,280 --> 01:04:07,349
absolutely right so the observation is
that you don't have to stall the

2824
01:04:07,349 --> 01:04:07,359
that you don't have to stall the
 

2825
01:04:07,359 --> 01:04:08,910
that you don't have to stall the
execution of the primary you only have

2826
01:04:08,910 --> 01:04:08,920
execution of the primary you only have
 

2827
01:04:08,920 --> 01:04:11,579
execution of the primary you only have
to hold the output and so maybe that's

2828
01:04:11,579 --> 01:04:11,589
to hold the output and so maybe that's
 

2829
01:04:11,589 --> 01:04:13,980
to hold the output and so maybe that's
not as bad as it could be but

2830
01:04:13,980 --> 01:04:13,990
not as bad as it could be but
 

2831
01:04:13,990 --> 01:04:16,140
not as bad as it could be but
nevertheless it means that every you

2832
01:04:16,140 --> 01:04:16,150
nevertheless it means that every you
 

2833
01:04:16,150 --> 01:04:17,790
nevertheless it means that every you
know in a service that could otherwise

2834
01:04:17,790 --> 01:04:17,800
know in a service that could otherwise
 

2835
01:04:17,800 --> 01:04:19,500
know in a service that could otherwise
have responded in a couple of

2836
01:04:19,500 --> 01:04:19,510
have responded in a couple of
 

2837
01:04:19,510 --> 01:04:22,380
have responded in a couple of
microseconds to the client you know if

2838
01:04:22,380 --> 01:04:22,390
microseconds to the client you know if
 

2839
01:04:22,390 --> 01:04:24,930
microseconds to the client you know if
we have to first update the replicas in

2840
01:04:24,930 --> 01:04:24,940
we have to first update the replicas in
 

2841
01:04:24,940 --> 01:04:27,270
we have to first update the replicas in
the next city we turn to you know 10

2842
01:04:27,270 --> 01:04:27,280
the next city we turn to you know 10
 

2843
01:04:27,280 --> 01:04:29,010
the next city we turn to you know 10
micro second interaction into it 10

2844
01:04:29,010 --> 01:04:29,020
micro second interaction into it 10
 

2845
01:04:29,020 --> 01:04:36,150
micro second interaction into it 10
millisecond interactions possibly if you

2846
01:04:36,150 --> 01:04:36,160
millisecond interactions possibly if you
 

2847
01:04:36,160 --> 01:04:39,109
millisecond interactions possibly if you
have vast numbers of clients submitting

2848
01:04:39,109 --> 01:04:39,119
have vast numbers of clients submitting
 

2849
01:04:39,119 --> 01:04:41,819
have vast numbers of clients submitting
concurrent requests then you may may be

2850
01:04:41,819 --> 01:04:41,829
concurrent requests then you may may be
 

2851
01:04:41,829 --> 01:04:43,680
concurrent requests then you may may be
able to maintain high throughput even

2852
01:04:43,680 --> 01:04:43,690
able to maintain high throughput even
 

2853
01:04:43,690 --> 01:04:46,170
able to maintain high throughput even
with high latency but you have to be

2854
01:04:46,170 --> 01:04:46,180
with high latency but you have to be
 

2855
01:04:46,180 --> 01:04:49,020
with high latency but you have to be
lucky to or very clever designer to get

2856
01:04:49,020 --> 01:04:49,030
lucky to or very clever designer to get
 

2857
01:04:49,030 --> 01:05:01,260
lucky to or very clever designer to get
that

2858
01:05:01,260 --> 01:05:01,270

 

2859
01:05:01,270 --> 01:05:04,270

that's a great idea but if you log in

2860
01:05:04,270 --> 01:05:04,280
that's a great idea but if you log in
 

2861
01:05:04,280 --> 01:05:06,670
that's a great idea but if you log in
the memory of the primary that log will

2862
01:05:06,670 --> 01:05:06,680
the memory of the primary that log will
 

2863
01:05:06,680 --> 01:05:08,620
the memory of the primary that log will
disappear when the primary crashes or

2864
01:05:08,620 --> 01:05:08,630
disappear when the primary crashes or
 

2865
01:05:08,630 --> 01:05:10,660
disappear when the primary crashes or
that's usual semantics of a server

2866
01:05:10,660 --> 01:05:10,670
that's usual semantics of a server
 

2867
01:05:10,670 --> 01:05:13,960
that's usual semantics of a server
failing is that you lose everything

2868
01:05:13,960 --> 01:05:13,970
failing is that you lose everything
 

2869
01:05:13,970 --> 01:05:16,270
failing is that you lose everything
inside the box like the contents of

2870
01:05:16,270 --> 01:05:16,280
inside the box like the contents of
 

2871
01:05:16,280 --> 01:05:19,780
inside the box like the contents of
memory or you know if even if you didn't

2872
01:05:19,780 --> 01:05:19,790
memory or you know if even if you didn't
 

2873
01:05:19,790 --> 01:05:21,670
memory or you know if even if you didn't
if the failure is that somebody

2874
01:05:21,670 --> 01:05:21,680
if the failure is that somebody
 

2875
01:05:21,680 --> 01:05:23,230
if the failure is that somebody
unplugged the power cable accidentally

2876
01:05:23,230 --> 01:05:23,240
unplugged the power cable accidentally
 

2877
01:05:23,240 --> 01:05:25,560
unplugged the power cable accidentally
from the primary even if the primary

2878
01:05:25,560 --> 01:05:25,570
from the primary even if the primary
 

2879
01:05:25,570 --> 01:05:27,910
from the primary even if the primary
just has battery backed up RAM or I

2880
01:05:27,910 --> 01:05:27,920
just has battery backed up RAM or I
 

2881
01:05:27,920 --> 01:05:30,700
just has battery backed up RAM or I
don't know what you can't get at it

2882
01:05:30,700 --> 01:05:30,710
don't know what you can't get at it
 

2883
01:05:30,710 --> 01:05:32,730
don't know what you can't get at it
all right the backup can't get at it so

2884
01:05:32,730 --> 01:05:32,740
all right the backup can't get at it so
 

2885
01:05:32,740 --> 01:05:36,040
all right the backup can't get at it so
in fact this system does log the output

2886
01:05:36,040 --> 01:05:36,050
in fact this system does log the output
 

2887
01:05:36,050 --> 01:05:37,900
in fact this system does log the output
and the place it logs it is in the

2888
01:05:37,900 --> 01:05:37,910
and the place it logs it is in the
 

2889
01:05:37,910 --> 01:05:39,970
and the place it logs it is in the
memory of the backup and in order to

2890
01:05:39,970 --> 01:05:39,980
memory of the backup and in order to
 

2891
01:05:39,980 --> 01:05:42,310
memory of the backup and in order to
reliably log it there you have to

2892
01:05:42,310 --> 01:05:42,320
reliably log it there you have to
 

2893
01:05:42,320 --> 01:05:43,630
reliably log it there you have to
observe the output rule and wait for the

2894
01:05:43,630 --> 01:05:43,640
observe the output rule and wait for the
 

2895
01:05:43,640 --> 01:05:46,120
observe the output rule and wait for the
acknowledgment so it's entirely correct

2896
01:05:46,120 --> 01:05:46,130
acknowledgment so it's entirely correct
 

2897
01:05:46,130 --> 01:05:48,490
acknowledgment so it's entirely correct
idea just can't use the primary's memory

2898
01:05:48,490 --> 01:05:48,500
idea just can't use the primary's memory
 

2899
01:05:48,500 --> 01:05:58,290
idea just can't use the primary's memory
for it yes

2900
01:05:58,290 --> 01:05:58,300

 

2901
01:05:58,300 --> 01:06:06,310

say it again that's a clever idea I'd

2902
01:06:06,310 --> 01:06:06,320
say it again that's a clever idea I'd
 

2903
01:06:06,320 --> 01:06:08,440
say it again that's a clever idea I'd
and so the question is maybe input

2904
01:06:08,440 --> 01:06:08,450
and so the question is maybe input
 

2905
01:06:08,450 --> 01:06:11,560
and so the question is maybe input
should go to the primary but output

2906
01:06:11,560 --> 01:06:11,570
should go to the primary but output
 

2907
01:06:11,570 --> 01:06:12,760
should go to the primary but output
should come from the backup

2908
01:06:12,760 --> 01:06:12,770
should come from the backup
 

2909
01:06:12,770 --> 01:06:14,590
should come from the backup
I completely haven't thought this

2910
01:06:14,590 --> 01:06:14,600
I completely haven't thought this
 

2911
01:06:14,600 --> 01:06:17,200
I completely haven't thought this
through that might work that

2912
01:06:17,200 --> 01:06:17,210
through that might work that
 

2913
01:06:17,210 --> 01:06:29,000
through that might work that
I don't know that's interesting

2914
01:06:29,000 --> 01:06:29,010

 

2915
01:06:29,010 --> 01:06:42,190

yeah maybe I will

2916
01:06:42,190 --> 01:06:42,200

 

2917
01:06:42,200 --> 01:06:48,170

okay one possibility this does expose

2918
01:06:48,170 --> 01:06:48,180
okay one possibility this does expose
 

2919
01:06:48,180 --> 01:06:56,089
okay one possibility this does expose
though is that the situation you know

2920
01:06:56,089 --> 01:06:56,099
though is that the situation you know
 

2921
01:06:56,099 --> 01:06:58,400
though is that the situation you know
maybe the a primary crashes after its

2922
01:06:58,400 --> 01:06:58,410
maybe the a primary crashes after its
 

2923
01:06:58,410 --> 01:07:00,319
maybe the a primary crashes after its
output is released so the client does

2924
01:07:00,319 --> 01:07:00,329
output is released so the client does
 

2925
01:07:00,329 --> 01:07:02,750
output is released so the client does
receive the reply then the primary

2926
01:07:02,750 --> 01:07:02,760
receive the reply then the primary
 

2927
01:07:02,760 --> 01:07:07,579
receive the reply then the primary
crashes the backups input is still in

2928
01:07:07,579 --> 01:07:07,589
crashes the backups input is still in
 

2929
01:07:07,589 --> 01:07:09,740
crashes the backups input is still in
this event buffer in the virtual machine

2930
01:07:09,740 --> 01:07:09,750
this event buffer in the virtual machine
 

2931
01:07:09,750 --> 01:07:13,579
this event buffer in the virtual machine
monitor of the backup it hasn't been

2932
01:07:13,579 --> 01:07:13,589
monitor of the backup it hasn't been
 

2933
01:07:13,589 --> 01:07:15,109
monitor of the backup it hasn't been
delivered to the actual replicated

2934
01:07:15,109 --> 01:07:15,119
delivered to the actual replicated
 

2935
01:07:15,119 --> 01:07:18,799
delivered to the actual replicated
service when the backup goes live after

2936
01:07:18,799 --> 01:07:18,809
service when the backup goes live after
 

2937
01:07:18,809 --> 01:07:22,039
service when the backup goes live after
the crash of the primary the backup

2938
01:07:22,039 --> 01:07:22,049
the crash of the primary the backup
 

2939
01:07:22,049 --> 01:07:25,640
the crash of the primary the backup
first has to consume all of the sort of

2940
01:07:25,640 --> 01:07:25,650
first has to consume all of the sort of
 

2941
01:07:25,650 --> 01:07:27,529
first has to consume all of the sort of
log records that are lying around that

2942
01:07:27,529 --> 01:07:27,539
log records that are lying around that
 

2943
01:07:27,539 --> 01:07:29,120
log records that are lying around that
it hasn't consumed X it has to catch up

2944
01:07:29,120 --> 01:07:29,130
it hasn't consumed X it has to catch up
 

2945
01:07:29,130 --> 01:07:30,950
it hasn't consumed X it has to catch up
to the primary otherwise it won't take

2946
01:07:30,950 --> 01:07:30,960
to the primary otherwise it won't take
 

2947
01:07:30,960 --> 01:07:33,230
to the primary otherwise it won't take
over with the same state so before the

2948
01:07:33,230 --> 01:07:33,240
over with the same state so before the
 

2949
01:07:33,240 --> 01:07:34,640
over with the same state so before the
backup can go live it actually has to

2950
01:07:34,640 --> 01:07:34,650
backup can go live it actually has to
 

2951
01:07:34,650 --> 01:07:37,519
backup can go live it actually has to
consume all these entries the last entry

2952
01:07:37,519 --> 01:07:37,529
consume all these entries the last entry
 

2953
01:07:37,529 --> 01:07:41,000
consume all these entries the last entry
is presumably is the request from the

2954
01:07:41,000 --> 01:07:41,010
is presumably is the request from the
 

2955
01:07:41,010 --> 01:07:45,789
is presumably is the request from the
client so the backup will be live after

2956
01:07:45,789 --> 01:07:45,799
client so the backup will be live after
 

2957
01:07:45,799 --> 01:07:49,250
client so the backup will be live after
after it after the interrupt that

2958
01:07:49,250 --> 01:07:49,260
after it after the interrupt that
 

2959
01:07:49,260 --> 01:07:51,500
after it after the interrupt that
delivers the request from the client and

2960
01:07:51,500 --> 01:07:51,510
delivers the request from the client and
 

2961
01:07:51,510 --> 01:07:54,829
delivers the request from the client and
that means that the backup well you know

2962
01:07:54,829 --> 01:07:54,839
that means that the backup well you know
 

2963
01:07:54,839 --> 01:07:56,809
that means that the backup well you know
increment its counter to eleven and then

2964
01:07:56,809 --> 01:07:56,819
increment its counter to eleven and then
 

2965
01:07:56,819 --> 01:07:58,519
increment its counter to eleven and then
generate an output packet and since it's

2966
01:07:58,519 --> 01:07:58,529
generate an output packet and since it's
 

2967
01:07:58,529 --> 01:08:01,849
generate an output packet and since it's
live at this point it will generate the

2968
01:08:01,849 --> 01:08:01,859
live at this point it will generate the
 

2969
01:08:01,859 --> 01:08:04,640
live at this point it will generate the
output packet and the client will get to

2970
01:08:04,640 --> 01:08:04,650
output packet and the client will get to
 

2971
01:08:04,650 --> 01:08:10,730
output packet and the client will get to
eleven replies which is also if it if

2972
01:08:10,730 --> 01:08:10,740
eleven replies which is also if it if
 

2973
01:08:10,740 --> 01:08:15,650
eleven replies which is also if it if
that really happened would be anomalous

2974
01:08:15,650 --> 01:08:15,660
that really happened would be anomalous
 

2975
01:08:15,660 --> 01:08:18,680
that really happened would be anomalous
like possibly not something that could

2976
01:08:18,680 --> 01:08:18,690
like possibly not something that could
 

2977
01:08:18,690 --> 01:08:22,130
like possibly not something that could
happen if there was only one server the

2978
01:08:22,130 --> 01:08:22,140
happen if there was only one server the
 

2979
01:08:22,140 --> 01:08:25,700
happen if there was only one server the
good news is that almost certainly or

2980
01:08:25,700 --> 01:08:25,710
good news is that almost certainly or
 

2981
01:08:25,710 --> 01:08:27,470
good news is that almost certainly or
the almost certainly the client is

2982
01:08:27,470 --> 01:08:27,480
the almost certainly the client is
 

2983
01:08:27,480 --> 01:08:29,660
the almost certainly the client is
talking to this service using TCP and

2984
01:08:29,660 --> 01:08:29,670
talking to this service using TCP and
 

2985
01:08:29,670 --> 01:08:30,919
talking to this service using TCP and
that this is the request and the

2986
01:08:30,919 --> 01:08:30,929
that this is the request and the
 

2987
01:08:30,929 --> 01:08:32,269
that this is the request and the
response go back and forth on a TCP

2988
01:08:32,269 --> 01:08:32,279
response go back and forth on a TCP
 

2989
01:08:32,279 --> 01:08:35,120
response go back and forth on a TCP
Channel the when the backup takes over

2990
01:08:35,120 --> 01:08:35,130
Channel the when the backup takes over
 

2991
01:08:35,130 --> 01:08:37,550
Channel the when the backup takes over
the backup since the state is identical

2992
01:08:37,550 --> 01:08:37,560
the backup since the state is identical
 

2993
01:08:37,560 --> 01:08:39,200
the backup since the state is identical
to the primaries it knows all about that

2994
01:08:39,200 --> 01:08:39,210
to the primaries it knows all about that
 

2995
01:08:39,210 --> 01:08:40,880
to the primaries it knows all about that
TCP connection and whether all the

2996
01:08:40,880 --> 01:08:40,890
TCP connection and whether all the
 

2997
01:08:40,890 --> 01:08:43,249
TCP connection and whether all the
sequence numbers are and whatnot and

2998
01:08:43,249 --> 01:08:43,259
sequence numbers are and whatnot and
 

2999
01:08:43,259 --> 01:08:46,669
sequence numbers are and whatnot and
when it generates this packet it will

3000
01:08:46,669 --> 01:08:46,679
when it generates this packet it will
 

3001
01:08:46,679 --> 01:08:49,579
when it generates this packet it will
generate it with the same TCP sequence

3002
01:08:49,579 --> 01:08:49,589
generate it with the same TCP sequence
 

3003
01:08:49,589 --> 01:08:52,189
generate it with the same TCP sequence
number as an original packet and the TCP

3004
01:08:52,189 --> 01:08:52,199
number as an original packet and the TCP
 

3005
01:08:52,199 --> 01:08:53,870
number as an original packet and the TCP
stack on the client will say oh wait a

3006
01:08:53,870 --> 01:08:53,880
stack on the client will say oh wait a
 

3007
01:08:53,880 --> 01:08:55,550
stack on the client will say oh wait a
minute that's a duplicate packet

3008
01:08:55,550 --> 01:08:55,560
minute that's a duplicate packet
 

3009
01:08:55,560 --> 01:08:57,200
minute that's a duplicate packet
we'll discard the duplicate packet at

3010
01:08:57,200 --> 01:08:57,210
we'll discard the duplicate packet at
 

3011
01:08:57,210 --> 01:08:59,090
we'll discard the duplicate packet at
the TCP level and the user level

3012
01:08:59,090 --> 01:08:59,100
the TCP level and the user level
 

3013
01:08:59,100 --> 01:09:00,440
the TCP level and the user level
software will just never see this

3014
01:09:00,440 --> 01:09:00,450
software will just never see this
 

3015
01:09:00,450 --> 01:09:04,460
software will just never see this
duplicate and so this system really you

3016
01:09:04,460 --> 01:09:04,470
duplicate and so this system really you
 

3017
01:09:04,470 --> 01:09:08,990
duplicate and so this system really you
know you can view this as a kind of

3018
01:09:08,990 --> 01:09:09,000
know you can view this as a kind of
 

3019
01:09:09,000 --> 01:09:11,570
know you can view this as a kind of
accidental or clever trick but the fact

3020
01:09:11,570 --> 01:09:11,580
accidental or clever trick but the fact
 

3021
01:09:11,580 --> 01:09:14,090
accidental or clever trick but the fact
is for any replication system where

3022
01:09:14,090 --> 01:09:14,100
is for any replication system where
 

3023
01:09:14,100 --> 01:09:16,280
is for any replication system where
cutover can happen which is to say

3024
01:09:16,280 --> 01:09:16,290
cutover can happen which is to say
 

3025
01:09:16,290 --> 01:09:20,380
cutover can happen which is to say
pretty much any replication system it's

3026
01:09:20,380 --> 01:09:20,390
pretty much any replication system it's
 

3027
01:09:20,390 --> 01:09:22,640
pretty much any replication system it's
essentially impossible to design them in

3028
01:09:22,640 --> 01:09:22,650
essentially impossible to design them in
 

3029
01:09:22,650 --> 01:09:24,920
essentially impossible to design them in
a way that they are guaranteed not to

3030
01:09:24,920 --> 01:09:24,930
a way that they are guaranteed not to
 

3031
01:09:24,930 --> 01:09:29,420
a way that they are guaranteed not to
generate duplicate output basically you

3032
01:09:29,420 --> 01:09:29,430
generate duplicate output basically you
 

3033
01:09:29,430 --> 01:09:31,460
generate duplicate output basically you
know you well you can err on either side

3034
01:09:31,460 --> 01:09:31,470
know you well you can err on either side
 

3035
01:09:31,470 --> 01:09:33,290
know you well you can err on either side
I'm not even either not generate the

3036
01:09:33,290 --> 01:09:33,300
I'm not even either not generate the
 

3037
01:09:33,300 --> 01:09:36,290
I'm not even either not generate the
output at all which would be bad which

3038
01:09:36,290 --> 01:09:36,300
output at all which would be bad which
 

3039
01:09:36,300 --> 01:09:37,970
output at all which would be bad which
would be terrible or you can generate

3040
01:09:37,970 --> 01:09:37,980
would be terrible or you can generate
 

3041
01:09:37,980 --> 01:09:41,000
would be terrible or you can generate
the output twice on a cutover that's

3042
01:09:41,000 --> 01:09:41,010
the output twice on a cutover that's
 

3043
01:09:41,010 --> 01:09:42,920
the output twice on a cutover that's
basically no way to generate it

3044
01:09:42,920 --> 01:09:42,930
basically no way to generate it
 

3045
01:09:42,930 --> 01:09:44,870
basically no way to generate it
guaranteed generated only once everybody

3046
01:09:44,870 --> 01:09:44,880
guaranteed generated only once everybody
 

3047
01:09:44,880 --> 01:09:46,760
guaranteed generated only once everybody
errors on the side of possibly

3048
01:09:46,760 --> 01:09:46,770
errors on the side of possibly
 

3049
01:09:46,770 --> 01:09:49,760
errors on the side of possibly
generating duplicate output and that

3050
01:09:49,760 --> 01:09:49,770
generating duplicate output and that
 

3051
01:09:49,770 --> 01:09:51,800
generating duplicate output and that
means that at some level you know the

3052
01:09:51,800 --> 01:09:51,810
means that at some level you know the
 

3053
01:09:51,810 --> 01:09:53,510
means that at some level you know the
client side of all replication schemes

3054
01:09:53,510 --> 01:09:53,520
client side of all replication schemes
 

3055
01:09:53,520 --> 01:09:55,550
client side of all replication schemes
need some sort of duplicate detection

3056
01:09:55,550 --> 01:09:55,560
need some sort of duplicate detection
 

3057
01:09:55,560 --> 01:09:57,980
need some sort of duplicate detection
scheme here we get to use TCP s that we

3058
01:09:57,980 --> 01:09:57,990
scheme here we get to use TCP s that we
 

3059
01:09:57,990 --> 01:09:59,240
scheme here we get to use TCP s that we
didn't have TCP that would have to be

3060
01:09:59,240 --> 01:09:59,250
didn't have TCP that would have to be
 

3061
01:09:59,250 --> 01:10:01,130
didn't have TCP that would have to be
something else maybe application level

3062
01:10:01,130 --> 01:10:01,140
something else maybe application level
 

3063
01:10:01,140 --> 01:10:03,220
something else maybe application level
sequence numbers or I don't know what

3064
01:10:03,220 --> 01:10:03,230
sequence numbers or I don't know what
 

3065
01:10:03,230 --> 01:10:06,890
sequence numbers or I don't know what
and you'll see all of this and actually

3066
01:10:06,890 --> 01:10:06,900
and you'll see all of this and actually
 

3067
01:10:06,900 --> 01:10:09,110
and you'll see all of this and actually
you'll see versions of essentially

3068
01:10:09,110 --> 01:10:09,120
you'll see versions of essentially
 

3069
01:10:09,120 --> 01:10:10,580
you'll see versions of essentially
everything I've talked about like the

3070
01:10:10,580 --> 01:10:10,590
everything I've talked about like the
 

3071
01:10:10,590 --> 01:10:14,560
everything I've talked about like the
output rule for example in labs 2 & 3

3072
01:10:14,560 --> 01:10:14,570
output rule for example in labs 2 & 3
 

3073
01:10:14,570 --> 01:10:17,810
output rule for example in labs 2 & 3
you'll design your own replicated state

3074
01:10:17,810 --> 01:10:17,820
you'll design your own replicated state
 

3075
01:10:17,820 --> 01:10:45,100
you'll design your own replicated state
machine yes

3076
01:10:45,100 --> 01:10:45,110

 

3077
01:10:45,110 --> 01:10:48,020

yes to the first part so the scenario is

3078
01:10:48,020 --> 01:10:48,030
yes to the first part so the scenario is
 

3079
01:10:48,030 --> 01:10:51,590
yes to the first part so the scenario is
the primary sends the reply and then

3080
01:10:51,590 --> 01:10:51,600
the primary sends the reply and then
 

3081
01:10:51,600 --> 01:10:53,000
the primary sends the reply and then
either the primary send the clothes

3082
01:10:53,000 --> 01:10:53,010
either the primary send the clothes
 

3083
01:10:53,010 --> 01:10:55,340
either the primary send the clothes
packet or the client closes the connect

3084
01:10:55,340 --> 01:10:55,350
packet or the client closes the connect
 

3085
01:10:55,350 --> 01:10:57,050
packet or the client closes the connect
the TCP connection after it receives the

3086
01:10:57,050 --> 01:10:57,060
the TCP connection after it receives the
 

3087
01:10:57,060 --> 01:10:58,910
the TCP connection after it receives the
primary's reply so now there's like no

3088
01:10:58,910 --> 01:10:58,920
primary's reply so now there's like no
 

3089
01:10:58,920 --> 01:11:00,950
primary's reply so now there's like no
connection on the client side but there

3090
01:11:00,950 --> 01:11:00,960
connection on the client side but there
 

3091
01:11:00,960 --> 01:11:02,750
connection on the client side but there
is a connection on the backup side and

3092
01:11:02,750 --> 01:11:02,760
is a connection on the backup side and
 

3093
01:11:02,760 --> 01:11:06,200
is a connection on the backup side and
so now the backup so the backup consumes

3094
01:11:06,200 --> 01:11:06,210
so now the backup so the backup consumes
 

3095
01:11:06,210 --> 01:11:07,730
so now the backup so the backup consumes
the very last log entry that as the

3096
01:11:07,730 --> 01:11:07,740
the very last log entry that as the
 

3097
01:11:07,740 --> 01:11:10,190
the very last log entry that as the
input is now live so we're not

3098
01:11:10,190 --> 01:11:10,200
input is now live so we're not
 

3099
01:11:10,200 --> 01:11:12,350
input is now live so we're not
responsible for replicating anything at

3100
01:11:12,350 --> 01:11:12,360
responsible for replicating anything at
 

3101
01:11:12,360 --> 01:11:14,750
responsible for replicating anything at
this point right because the backup now

3102
01:11:14,750 --> 01:11:14,760
this point right because the backup now
 

3103
01:11:14,760 --> 01:11:16,970
this point right because the backup now
live there's no other replica as the

3104
01:11:16,970 --> 01:11:16,980
live there's no other replica as the
 

3105
01:11:16,980 --> 01:11:20,390
live there's no other replica as the
primary died so there's no like if if we

3106
01:11:20,390 --> 01:11:20,400
primary died so there's no like if if we
 

3107
01:11:20,400 --> 01:11:23,450
primary died so there's no like if if we
don't if the backup fails to execute in

3108
01:11:23,450 --> 01:11:23,460
don't if the backup fails to execute in
 

3109
01:11:23,460 --> 01:11:24,920
don't if the backup fails to execute in
lockstep with the primary that's fine

3110
01:11:24,920 --> 01:11:24,930
lockstep with the primary that's fine
 

3111
01:11:24,930 --> 01:11:26,540
lockstep with the primary that's fine
actually because the primary is is dead

3112
01:11:26,540 --> 01:11:26,550
actually because the primary is is dead
 

3113
01:11:26,550 --> 01:11:28,370
actually because the primary is is dead
and we do not want to execute in

3114
01:11:28,370 --> 01:11:28,380
and we do not want to execute in
 

3115
01:11:28,380 --> 01:11:30,500
and we do not want to execute in
lockstep with it okay so the primer is

3116
01:11:30,500 --> 01:11:30,510
lockstep with it okay so the primer is
 

3117
01:11:30,510 --> 01:11:33,680
lockstep with it okay so the primer is
now not it's live it generates an output

3118
01:11:33,680 --> 01:11:33,690
now not it's live it generates an output
 

3119
01:11:33,690 --> 01:11:37,490
now not it's live it generates an output
on this TCP connection that isn't closed

3120
01:11:37,490 --> 01:11:37,500
on this TCP connection that isn't closed
 

3121
01:11:37,500 --> 01:11:39,890
on this TCP connection that isn't closed
yet from the backup point of view this

3122
01:11:39,890 --> 01:11:39,900
yet from the backup point of view this
 

3123
01:11:39,900 --> 01:11:41,780
yet from the backup point of view this
packet arrives with the client on a CCP

3124
01:11:41,780 --> 01:11:41,790
packet arrives with the client on a CCP
 

3125
01:11:41,790 --> 01:11:43,130
packet arrives with the client on a CCP
connection that doesn't exist anymore

3126
01:11:43,130 --> 01:11:43,140
connection that doesn't exist anymore
 

3127
01:11:43,140 --> 01:11:45,560
connection that doesn't exist anymore
from the clients point of view like no

3128
01:11:45,560 --> 01:11:45,570
from the clients point of view like no
 

3129
01:11:45,570 --> 01:11:46,700
from the clients point of view like no
big whoopee on the client right he's

3130
01:11:46,700 --> 01:11:46,710
big whoopee on the client right he's
 

3131
01:11:46,710 --> 01:11:48,500
big whoopee on the client right he's
just going to throw away the packet as

3132
01:11:48,500 --> 01:11:48,510
just going to throw away the packet as
 

3133
01:11:48,510 --> 01:11:50,000
just going to throw away the packet as
if nothing happened the application

3134
01:11:50,000 --> 01:11:50,010
if nothing happened the application
 

3135
01:11:50,010 --> 01:11:52,310
if nothing happened the application
won't no the client may send a reset

3136
01:11:52,310 --> 01:11:52,320
won't no the client may send a reset
 

3137
01:11:52,320 --> 01:11:54,560
won't no the client may send a reset
something like a TCP error or whatever

3138
01:11:54,560 --> 01:11:54,570
something like a TCP error or whatever
 

3139
01:11:54,570 --> 01:11:57,470
something like a TCP error or whatever
packet back to the backup and the backup

3140
01:11:57,470 --> 01:11:57,480
packet back to the backup and the backup
 

3141
01:11:57,480 --> 01:11:58,610
packet back to the backup and the backup
does something or other with it but it

3142
01:11:58,610 --> 01:11:58,620
does something or other with it but it
 

3143
01:11:58,620 --> 01:12:00,650
does something or other with it but it
doesn't matter because we're not

3144
01:12:00,650 --> 01:12:00,660
doesn't matter because we're not
 

3145
01:12:00,660 --> 01:12:02,180
doesn't matter because we're not
diverging from anything because there's

3146
01:12:02,180 --> 01:12:02,190
diverging from anything because there's
 

3147
01:12:02,190 --> 01:12:04,220
diverging from anything because there's
no primary to diverge from you can just

3148
01:12:04,220 --> 01:12:04,230
no primary to diverge from you can just
 

3149
01:12:04,230 --> 01:12:08,090
no primary to diverge from you can just
handle a stray we said however it likes

3150
01:12:08,090 --> 01:12:08,100
handle a stray we said however it likes
 

3151
01:12:08,100 --> 01:12:10,460
handle a stray we said however it likes
and what it'll in fact do is basically

3152
01:12:10,460 --> 01:12:10,470
and what it'll in fact do is basically
 

3153
01:12:10,470 --> 01:12:14,720
and what it'll in fact do is basically
ignore but there's no now the backup has

3154
01:12:14,720 --> 01:12:14,730
ignore but there's no now the backup has
 

3155
01:12:14,730 --> 01:12:17,300
ignore but there's no now the backup has
gone live there's just no we don't owe

3156
01:12:17,300 --> 01:12:17,310
gone live there's just no we don't owe
 

3157
01:12:17,310 --> 01:12:19,630
gone live there's just no we don't owe
anybody anything as far as replication

3158
01:12:19,630 --> 01:12:19,640
anybody anything as far as replication
 

3159
01:12:19,640 --> 01:12:36,260
anybody anything as far as replication
yeah

3160
01:12:36,260 --> 01:12:36,270

 

3161
01:12:36,270 --> 01:12:39,090

well you can bet since the backups

3162
01:12:39,090 --> 01:12:39,100
well you can bet since the backups
 

3163
01:12:39,100 --> 01:12:40,860
well you can bet since the backups
memory image is identical to the

3164
01:12:40,860 --> 01:12:40,870
memory image is identical to the
 

3165
01:12:40,870 --> 01:12:42,510
memory image is identical to the
primaries image that they're sending

3166
01:12:42,510 --> 01:12:42,520
primaries image that they're sending
 

3167
01:12:42,520 --> 01:12:45,120
primaries image that they're sending
packets with the very same source TCP

3168
01:12:45,120 --> 01:12:45,130
packets with the very same source TCP
 

3169
01:12:45,130 --> 01:12:48,959
packets with the very same source TCP
number and they're very same everything

3170
01:12:48,959 --> 01:12:48,969
number and they're very same everything
 

3171
01:12:48,969 --> 01:12:51,060
number and they're very same everything
they're sending bit for bit identical

3172
01:12:51,060 --> 01:12:51,070
they're sending bit for bit identical
 

3173
01:12:51,070 --> 01:13:00,690
they're sending bit for bit identical
packets you know at this level the

3174
01:13:00,690 --> 01:13:00,700
packets you know at this level the
 

3175
01:13:00,700 --> 01:13:03,630
packets you know at this level the
server's don't have IP addresses or for

3176
01:13:03,630 --> 01:13:03,640
server's don't have IP addresses or for
 

3177
01:13:03,640 --> 01:13:06,959
server's don't have IP addresses or for
our purposes the virtual machines you

3178
01:13:06,959 --> 01:13:06,969
our purposes the virtual machines you
 

3179
01:13:06,969 --> 01:13:08,220
our purposes the virtual machines you
know the primary in the back up virtual

3180
01:13:08,220 --> 01:13:08,230
know the primary in the back up virtual
 

3181
01:13:08,230 --> 01:13:12,920
know the primary in the back up virtual
machines have IP addresses but the the

3182
01:13:12,920 --> 01:13:12,930
machines have IP addresses but the the
 

3183
01:13:12,930 --> 01:13:15,330
machines have IP addresses but the the
physical computer and the vmm are

3184
01:13:15,330 --> 01:13:15,340
physical computer and the vmm are
 

3185
01:13:15,340 --> 01:13:17,940
physical computer and the vmm are
transparent to the network it's not

3186
01:13:17,940 --> 01:13:17,950
transparent to the network it's not
 

3187
01:13:17,950 --> 01:13:19,470
transparent to the network it's not
entirely true but it's basically the

3188
01:13:19,470 --> 01:13:19,480
entirely true but it's basically the
 

3189
01:13:19,480 --> 01:13:21,959
entirely true but it's basically the
case that the virtual machine monitor in

3190
01:13:21,959 --> 01:13:21,969
case that the virtual machine monitor in
 

3191
01:13:21,969 --> 01:13:23,840
case that the virtual machine monitor in
the physical machine don't really have

3192
01:13:23,840 --> 01:13:23,850
the physical machine don't really have
 

3193
01:13:23,850 --> 01:13:26,930
the physical machine don't really have
identity of their own on the network

3194
01:13:26,930 --> 01:13:26,940
identity of their own on the network
 

3195
01:13:26,940 --> 01:13:29,370
identity of their own on the network
because you can configure that then that

3196
01:13:29,370 --> 01:13:29,380
because you can configure that then that
 

3197
01:13:29,380 --> 01:13:31,650
because you can configure that then that
way instead these they're not you know

3198
01:13:31,650 --> 01:13:31,660
way instead these they're not you know
 

3199
01:13:31,660 --> 01:13:33,030
way instead these they're not you know
the virtual machine with a sewing

3200
01:13:33,030 --> 01:13:33,040
the virtual machine with a sewing
 

3201
01:13:33,040 --> 01:13:35,160
the virtual machine with a sewing
operating system in its own TCP stack it

3202
01:13:35,160 --> 01:13:35,170
operating system in its own TCP stack it
 

3203
01:13:35,170 --> 01:13:36,540
operating system in its own TCP stack it
doesn't IP address underneath there an

3204
01:13:36,540 --> 01:13:36,550
doesn't IP address underneath there an
 

3205
01:13:36,550 --> 01:13:37,680
doesn't IP address underneath there an
address and all this other stuff which

3206
01:13:37,680 --> 01:13:37,690
address and all this other stuff which
 

3207
01:13:37,690 --> 01:13:39,240
address and all this other stuff which
is identical between the primary in the

3208
01:13:39,240 --> 01:13:39,250
is identical between the primary in the
 

3209
01:13:39,250 --> 01:13:41,070
is identical between the primary in the
backup and when it sends a packet it

3210
01:13:41,070 --> 01:13:41,080
backup and when it sends a packet it
 

3211
01:13:41,080 --> 01:13:42,959
backup and when it sends a packet it
sends it with the virtual machines IP

3212
01:13:42,959 --> 01:13:42,969
sends it with the virtual machines IP
 

3213
01:13:42,969 --> 01:13:44,520
sends it with the virtual machines IP
address and Ethernet address and those

3214
01:13:44,520 --> 01:13:44,530
address and Ethernet address and those
 

3215
01:13:44,530 --> 01:13:49,020
address and Ethernet address and those
bits least in my mental model are just

3216
01:13:49,020 --> 01:13:49,030
bits least in my mental model are just
 

3217
01:13:49,030 --> 01:13:51,750
bits least in my mental model are just
simply passed through on to the local

3218
01:13:51,750 --> 01:13:51,760
simply passed through on to the local
 

3219
01:13:51,760 --> 01:13:54,120
simply passed through on to the local
area network it's exactly what we want

3220
01:13:54,120 --> 01:13:54,130
area network it's exactly what we want
 

3221
01:13:54,130 --> 01:13:55,830
area network it's exactly what we want
and so I think he doesn't generate

3222
01:13:55,830 --> 01:13:55,840
and so I think he doesn't generate
 

3223
01:13:55,840 --> 01:13:57,479
and so I think he doesn't generate
exactly the same packets that the

3224
01:13:57,479 --> 01:13:57,489
exactly the same packets that the
 

3225
01:13:57,489 --> 01:13:59,700
exactly the same packets that the
primary would have generated there's

3226
01:13:59,700 --> 01:13:59,710
primary would have generated there's
 

3227
01:13:59,710 --> 01:14:00,750
primary would have generated there's
maybe a little bit of trickery

3228
01:14:00,750 --> 01:14:00,760
maybe a little bit of trickery
 

3229
01:14:00,760 --> 01:14:03,330
maybe a little bit of trickery
you know what the we if this is these

3230
01:14:03,330 --> 01:14:03,340
you know what the we if this is these
 

3231
01:14:03,340 --> 01:14:04,620
you know what the we if this is these
are actually plugged into an Ethernet

3232
01:14:04,620 --> 01:14:04,630
are actually plugged into an Ethernet
 

3233
01:14:04,630 --> 01:14:06,720
are actually plugged into an Ethernet
switch into the physical machines maybe

3234
01:14:06,720 --> 01:14:06,730
switch into the physical machines maybe
 

3235
01:14:06,730 --> 01:14:08,850
switch into the physical machines maybe
it wasn't in two different ports of an

3236
01:14:08,850 --> 01:14:08,860
it wasn't in two different ports of an
 

3237
01:14:08,860 --> 01:14:09,959
it wasn't in two different ports of an
Ethernet switch and we'd like the

3238
01:14:09,959 --> 01:14:09,969
Ethernet switch and we'd like the
 

3239
01:14:09,969 --> 01:14:12,470
Ethernet switch and we'd like the
Ethernet switch to change its mind about

3240
01:14:12,470 --> 01:14:12,480
Ethernet switch to change its mind about
 

3241
01:14:12,480 --> 01:14:14,520
Ethernet switch to change its mind about
which of these two machines that

3242
01:14:14,520 --> 01:14:14,530
which of these two machines that
 

3243
01:14:14,530 --> 01:14:18,780
which of these two machines that
delivers packets with replicated

3244
01:14:18,780 --> 01:14:18,790
delivers packets with replicated
 

3245
01:14:18,790 --> 01:14:20,940
delivers packets with replicated
services Ethernet address and so there's

3246
01:14:20,940 --> 01:14:20,950
services Ethernet address and so there's
 

3247
01:14:20,950 --> 01:14:23,700
services Ethernet address and so there's
a little bit of funny business there for

3248
01:14:23,700 --> 01:14:23,710
a little bit of funny business there for
 

3249
01:14:23,710 --> 01:14:24,900
a little bit of funny business there for
the most part they're just generating

3250
01:14:24,900 --> 01:14:24,910
the most part they're just generating
 

3251
01:14:24,910 --> 01:14:26,250
the most part they're just generating
identical packets so let me just send

3252
01:14:26,250 --> 01:14:26,260
identical packets so let me just send
 

3253
01:14:26,260 --> 01:14:29,540
identical packets so let me just send
them out

3254
01:14:29,540 --> 01:14:29,550

 

3255
01:14:29,550 --> 01:14:33,640

okay so another little detail I've been

3256
01:14:33,640 --> 01:14:33,650
okay so another little detail I've been
 

3257
01:14:33,650 --> 01:14:36,800
okay so another little detail I've been
glossing over is that I've been assuming

3258
01:14:36,800 --> 01:14:36,810
glossing over is that I've been assuming
 

3259
01:14:36,810 --> 01:14:38,960
glossing over is that I've been assuming
that the primary just fails or the

3260
01:14:38,960 --> 01:14:38,970
that the primary just fails or the
 

3261
01:14:38,970 --> 01:14:41,780
that the primary just fails or the
backup just fails that is fail stop

3262
01:14:41,780 --> 01:14:41,790
backup just fails that is fail stop
 

3263
01:14:41,790 --> 01:14:43,310
backup just fails that is fail stop
right but that's not the only option

3264
01:14:43,310 --> 01:14:43,320
right but that's not the only option
 

3265
01:14:43,320 --> 01:14:46,340
right but that's not the only option
another very common situation that has

3266
01:14:46,340 --> 01:14:46,350
another very common situation that has
 

3267
01:14:46,350 --> 01:14:49,760
another very common situation that has
to be dealt with is if the two machines

3268
01:14:49,760 --> 01:14:49,770
to be dealt with is if the two machines
 

3269
01:14:49,770 --> 01:14:51,380
to be dealt with is if the two machines
are still up and running and executing

3270
01:14:51,380 --> 01:14:51,390
are still up and running and executing
 

3271
01:14:51,390 --> 01:14:53,180
are still up and running and executing
but there's something funny happen on

3272
01:14:53,180 --> 01:14:53,190
but there's something funny happen on
 

3273
01:14:53,190 --> 01:14:56,630
but there's something funny happen on
the network that causes them not to be

3274
01:14:56,630 --> 01:14:56,640
the network that causes them not to be
 

3275
01:14:56,640 --> 01:14:58,100
the network that causes them not to be
able to talk to each other but to still

3276
01:14:58,100 --> 01:14:58,110
able to talk to each other but to still
 

3277
01:14:58,110 --> 01:15:01,730
able to talk to each other but to still
be able to talk to some clients so if

3278
01:15:01,730 --> 01:15:01,740
be able to talk to some clients so if
 

3279
01:15:01,740 --> 01:15:03,500
be able to talk to some clients so if
that happened if the primary backup

3280
01:15:03,500 --> 01:15:03,510
that happened if the primary backup
 

3281
01:15:03,510 --> 01:15:05,090
that happened if the primary backup
couldn't talk to each other but they

3282
01:15:05,090 --> 01:15:05,100
couldn't talk to each other but they
 

3283
01:15:05,100 --> 01:15:06,320
couldn't talk to each other but they
could still talk to the clients they

3284
01:15:06,320 --> 01:15:06,330
could still talk to the clients they
 

3285
01:15:06,330 --> 01:15:07,910
could still talk to the clients they
would both think oh the other replicas

3286
01:15:07,910 --> 01:15:07,920
would both think oh the other replicas
 

3287
01:15:07,920 --> 01:15:10,130
would both think oh the other replicas
dead I better take over and go live and

3288
01:15:10,130 --> 01:15:10,140
dead I better take over and go live and
 

3289
01:15:10,140 --> 01:15:12,440
dead I better take over and go live and
so now we have two machines going live

3290
01:15:12,440 --> 01:15:12,450
so now we have two machines going live
 

3291
01:15:12,450 --> 01:15:14,210
so now we have two machines going live
with this service and now you know

3292
01:15:14,210 --> 01:15:14,220
with this service and now you know
 

3293
01:15:14,220 --> 01:15:16,460
with this service and now you know
they're no longer sending each other log

3294
01:15:16,460 --> 01:15:16,470
they're no longer sending each other log
 

3295
01:15:16,470 --> 01:15:17,420
they're no longer sending each other log
events or anything they're just

3296
01:15:17,420 --> 01:15:17,430
events or anything they're just
 

3297
01:15:17,430 --> 01:15:19,340
events or anything they're just
diverging maybe they're accepting

3298
01:15:19,340 --> 01:15:19,350
diverging maybe they're accepting
 

3299
01:15:19,350 --> 01:15:21,320
diverging maybe they're accepting
different client inputs and changes are

3300
01:15:21,320 --> 01:15:21,330
different client inputs and changes are
 

3301
01:15:21,330 --> 01:15:22,580
different client inputs and changes are
stayed in different ways so now we have

3302
01:15:22,580 --> 01:15:22,590
stayed in different ways so now we have
 

3303
01:15:22,590 --> 01:15:24,920
stayed in different ways so now we have
a split brain disaster if we let the

3304
01:15:24,920 --> 01:15:24,930
a split brain disaster if we let the
 

3305
01:15:24,930 --> 01:15:28,070
a split brain disaster if we let the
primary in the backup go live because it

3306
01:15:28,070 --> 01:15:28,080
primary in the backup go live because it
 

3307
01:15:28,080 --> 01:15:30,350
primary in the backup go live because it
was a network that has some kind of

3308
01:15:30,350 --> 01:15:30,360
was a network that has some kind of
 

3309
01:15:30,360 --> 01:15:34,220
was a network that has some kind of
failure instead of these machines and

3310
01:15:34,220 --> 01:15:34,230
failure instead of these machines and
 

3311
01:15:34,230 --> 01:15:36,370
failure instead of these machines and
the way that this paper solves it I mean

3312
01:15:36,370 --> 01:15:36,380
the way that this paper solves it I mean
 

3313
01:15:36,380 --> 01:15:41,900
the way that this paper solves it I mean
is by appealing to an outside authority

3314
01:15:41,900 --> 01:15:41,910
is by appealing to an outside authority
 

3315
01:15:41,910 --> 01:15:44,240
is by appealing to an outside authority
to make the decision about which of the

3316
01:15:44,240 --> 01:15:44,250
to make the decision about which of the
 

3317
01:15:44,250 --> 01:15:46,130
to make the decision about which of the
primary of the backup is allowed to be

3318
01:15:46,130 --> 01:15:46,140
primary of the backup is allowed to be
 

3319
01:15:46,140 --> 01:15:53,330
primary of the backup is allowed to be
live and so it they're you know it turns

3320
01:15:53,330 --> 01:15:53,340
live and so it they're you know it turns
 

3321
01:15:53,340 --> 01:15:54,590
live and so it they're you know it turns
out that their storage is actually not

3322
01:15:54,590 --> 01:15:54,600
out that their storage is actually not
 

3323
01:15:54,600 --> 01:15:56,690
out that their storage is actually not
on local disk this almost doesn't matter

3324
01:15:56,690 --> 01:15:56,700
on local disk this almost doesn't matter
 

3325
01:15:56,700 --> 01:15:58,970
on local disk this almost doesn't matter
but their storage is on some external

3326
01:15:58,970 --> 01:15:58,980
but their storage is on some external
 

3327
01:15:58,980 --> 01:16:01,910
but their storage is on some external
disk server and as well as being in this

3328
01:16:01,910 --> 01:16:01,920
disk server and as well as being in this
 

3329
01:16:01,920 --> 01:16:03,560
disk server and as well as being in this
server as a like totally separate

3330
01:16:03,560 --> 01:16:03,570
server as a like totally separate
 

3331
01:16:03,570 --> 01:16:05,150
server as a like totally separate
service there's nothing to do with disks

3332
01:16:05,150 --> 01:16:05,160
service there's nothing to do with disks
 

3333
01:16:05,160 --> 01:16:07,040
service there's nothing to do with disks
there this server happens to abort this

3334
01:16:07,040 --> 01:16:07,050
there this server happens to abort this
 

3335
01:16:07,050 --> 01:16:15,080
there this server happens to abort this
test and set test and set service over

3336
01:16:15,080 --> 01:16:15,090
test and set test and set service over
 

3337
01:16:15,090 --> 01:16:17,270
test and set test and set service over
the network where you you can send a

3338
01:16:17,270 --> 01:16:17,280
the network where you you can send a
 

3339
01:16:17,280 --> 01:16:19,850
the network where you you can send a
test and set request to it and there's

3340
01:16:19,850 --> 01:16:19,860
test and set request to it and there's
 

3341
01:16:19,860 --> 01:16:21,920
test and set request to it and there's
some flag it's keeping in memory and

3342
01:16:21,920 --> 01:16:21,930
some flag it's keeping in memory and
 

3343
01:16:21,930 --> 01:16:23,240
some flag it's keeping in memory and
it'll set the flag and return what the

3344
01:16:23,240 --> 01:16:23,250
it'll set the flag and return what the
 

3345
01:16:23,250 --> 01:16:25,580
it'll set the flag and return what the
old value was so both primary and backup

3346
01:16:25,580 --> 01:16:25,590
old value was so both primary and backup
 

3347
01:16:25,590 --> 01:16:28,880
old value was so both primary and backup
have to sort of acquire this test and

3348
01:16:28,880 --> 01:16:28,890
have to sort of acquire this test and
 

3349
01:16:28,890 --> 01:16:30,440
have to sort of acquire this test and
set flag it's a little bit like a lock

3350
01:16:30,440 --> 01:16:30,450
set flag it's a little bit like a lock
 

3351
01:16:30,450 --> 01:16:32,630
set flag it's a little bit like a lock
in order to go live they both may be

3352
01:16:32,630 --> 01:16:32,640
in order to go live they both may be
 

3353
01:16:32,640 --> 01:16:34,910
in order to go live they both may be
send test and set requests at the same

3354
01:16:34,910 --> 01:16:34,920
send test and set requests at the same
 

3355
01:16:34,920 --> 01:16:37,310
send test and set requests at the same
time to this test and set server the

3356
01:16:37,310 --> 01:16:37,320
time to this test and set server the
 

3357
01:16:37,320 --> 01:16:39,350
time to this test and set server the
first one gets back a reply that says oh

3358
01:16:39,350 --> 01:16:39,360
first one gets back a reply that says oh
 

3359
01:16:39,360 --> 01:16:41,540
first one gets back a reply that says oh
the flag used to be zero now it's one

3360
01:16:41,540 --> 01:16:41,550
the flag used to be zero now it's one
 

3361
01:16:41,550 --> 01:16:42,300
the flag used to be zero now it's one
this

3362
01:16:42,300 --> 01:16:42,310
this
 

3363
01:16:42,310 --> 01:16:44,730
this
second request to arrive the response

3364
01:16:44,730 --> 01:16:44,740
second request to arrive the response
 

3365
01:16:44,740 --> 01:16:46,080
second request to arrive the response
from the testing set server is Oh

3366
01:16:46,080 --> 01:16:46,090
from the testing set server is Oh
 

3367
01:16:46,090 --> 01:16:47,670
from the testing set server is Oh
actually the flag was already one when

3368
01:16:47,670 --> 01:16:47,680
actually the flag was already one when
 

3369
01:16:47,680 --> 01:16:50,190
actually the flag was already one when
your request arrived so so basically

3370
01:16:50,190 --> 01:16:50,200
your request arrived so so basically
 

3371
01:16:50,200 --> 01:16:52,710
your request arrived so so basically
you're not allowed to be primary and so

3372
01:16:52,710 --> 01:16:52,720
you're not allowed to be primary and so
 

3373
01:16:52,720 --> 01:16:55,650
you're not allowed to be primary and so
this this test and set server and we can

3374
01:16:55,650 --> 01:16:55,660
this this test and set server and we can
 

3375
01:16:55,660 --> 01:16:58,800
this this test and set server and we can
think of it as a single machine is the

3376
01:16:58,800 --> 01:16:58,810
think of it as a single machine is the
 

3377
01:16:58,810 --> 01:17:00,690
think of it as a single machine is the
arbitrator that decides which of the two

3378
01:17:00,690 --> 01:17:00,700
arbitrator that decides which of the two
 

3379
01:17:00,700 --> 01:17:02,730
arbitrator that decides which of the two
should go live if they both think the

3380
01:17:02,730 --> 01:17:02,740
should go live if they both think the
 

3381
01:17:02,740 --> 01:17:04,860
should go live if they both think the
other ones dead due to a network

3382
01:17:04,860 --> 01:17:04,870
other ones dead due to a network
 

3383
01:17:04,870 --> 01:17:08,910
other ones dead due to a network
partition any questions about this

3384
01:17:08,910 --> 01:17:08,920
partition any questions about this
 

3385
01:17:08,920 --> 01:17:17,820
partition any questions about this
mechanism you're busted yeah if the test

3386
01:17:17,820 --> 01:17:17,830
mechanism you're busted yeah if the test
 

3387
01:17:17,830 --> 01:17:19,740
mechanism you're busted yeah if the test
and set server should be dead at the

3388
01:17:19,740 --> 01:17:19,750
and set server should be dead at the
 

3389
01:17:19,750 --> 01:17:22,950
and set server should be dead at the
critical moment when and so actually

3390
01:17:22,950 --> 01:17:22,960
critical moment when and so actually
 

3391
01:17:22,960 --> 01:17:24,630
critical moment when and so actually
even if there's not a network partition

3392
01:17:24,630 --> 01:17:24,640
even if there's not a network partition
 

3393
01:17:24,640 --> 01:17:27,360
even if there's not a network partition
under all circumstances in which one or

3394
01:17:27,360 --> 01:17:27,370
under all circumstances in which one or
 

3395
01:17:27,370 --> 01:17:28,470
under all circumstances in which one or
the other of these wants to go live

3396
01:17:28,470 --> 01:17:28,480
the other of these wants to go live
 

3397
01:17:28,480 --> 01:17:30,270
the other of these wants to go live
because it thinks the others dead even

3398
01:17:30,270 --> 01:17:30,280
because it thinks the others dead even
 

3399
01:17:30,280 --> 01:17:32,490
because it thinks the others dead even
when the other one really is dead the

3400
01:17:32,490 --> 01:17:32,500
when the other one really is dead the
 

3401
01:17:32,500 --> 01:17:33,840
when the other one really is dead the
one that wants to collide still has to

3402
01:17:33,840 --> 01:17:33,850
one that wants to collide still has to
 

3403
01:17:33,850 --> 01:17:35,340
one that wants to collide still has to
acquire the test and set lock because

3404
01:17:35,340 --> 01:17:35,350
acquire the test and set lock because
 

3405
01:17:35,350 --> 01:17:39,090
acquire the test and set lock because
one of like the deep rules of 6:18 for

3406
01:17:39,090 --> 01:17:39,100
one of like the deep rules of 6:18 for
 

3407
01:17:39,100 --> 01:17:43,620
one of like the deep rules of 6:18 for
game is that you cannot tell whether or

3408
01:17:43,620 --> 01:17:43,630
game is that you cannot tell whether or
 

3409
01:17:43,630 --> 01:17:45,840
game is that you cannot tell whether or
another computer is dead or not all you

3410
01:17:45,840 --> 01:17:45,850
another computer is dead or not all you
 

3411
01:17:45,850 --> 01:17:47,100
another computer is dead or not all you
know is that you stopped receiving

3412
01:17:47,100 --> 01:17:47,110
know is that you stopped receiving
 

3413
01:17:47,110 --> 01:17:49,350
know is that you stopped receiving
packets from it and you don't know

3414
01:17:49,350 --> 01:17:49,360
packets from it and you don't know
 

3415
01:17:49,360 --> 01:17:50,490
packets from it and you don't know
whether it's because the other computer

3416
01:17:50,490 --> 01:17:50,500
whether it's because the other computer
 

3417
01:17:50,500 --> 01:17:53,910
whether it's because the other computer
is dead or because something has gone

3418
01:17:53,910 --> 01:17:53,920
is dead or because something has gone
 

3419
01:17:53,920 --> 01:17:55,410
is dead or because something has gone
wrong with the network between you and

3420
01:17:55,410 --> 01:17:55,420
wrong with the network between you and
 

3421
01:17:55,420 --> 01:17:57,330
wrong with the network between you and
the other computer so all the backup

3422
01:17:57,330 --> 01:17:57,340
the other computer so all the backup
 

3423
01:17:57,340 --> 01:17:59,220
the other computer so all the backup
ceases well I've stuck in packets maybe

3424
01:17:59,220 --> 01:17:59,230
ceases well I've stuck in packets maybe
 

3425
01:17:59,230 --> 01:18:00,710
ceases well I've stuck in packets maybe
the primary is dead maybe it's live

3426
01:18:00,710 --> 01:18:00,720
the primary is dead maybe it's live
 

3427
01:18:00,720 --> 01:18:03,660
the primary is dead maybe it's live
primary probably sees the same thing so

3428
01:18:03,660 --> 01:18:03,670
primary probably sees the same thing so
 

3429
01:18:03,670 --> 01:18:04,650
primary probably sees the same thing so
if there's a network partition they

3430
01:18:04,650 --> 01:18:04,660
if there's a network partition they
 

3431
01:18:04,660 --> 01:18:05,910
if there's a network partition they
certainly have to ask the TAT since that

3432
01:18:05,910 --> 01:18:05,920
certainly have to ask the TAT since that
 

3433
01:18:05,920 --> 01:18:07,200
certainly have to ask the TAT since that
server but since they don't know if it's

3434
01:18:07,200 --> 01:18:07,210
server but since they don't know if it's
 

3435
01:18:07,210 --> 01:18:08,940
server but since they don't know if it's
a network partition they have to ask the

3436
01:18:08,940 --> 01:18:08,950
a network partition they have to ask the
 

3437
01:18:08,950 --> 01:18:11,820
a network partition they have to ask the
testing set server regardless of whether

3438
01:18:11,820 --> 01:18:11,830
testing set server regardless of whether
 

3439
01:18:11,830 --> 01:18:13,860
testing set server regardless of whether
it's a partition or not so anytime

3440
01:18:13,860 --> 01:18:13,870
it's a partition or not so anytime
 

3441
01:18:13,870 --> 01:18:15,960
it's a partition or not so anytime
either wants to collide the test and set

3442
01:18:15,960 --> 01:18:15,970
either wants to collide the test and set
 

3443
01:18:15,970 --> 01:18:17,640
either wants to collide the test and set
server also has to be alive because they

3444
01:18:17,640 --> 01:18:17,650
server also has to be alive because they
 

3445
01:18:17,650 --> 01:18:19,770
server also has to be alive because they
always have to acquire this testing set

3446
01:18:19,770 --> 01:18:19,780
always have to acquire this testing set
 

3447
01:18:19,780 --> 01:18:22,890
always have to acquire this testing set
lock so the test and set server

3448
01:18:22,890 --> 01:18:22,900
lock so the test and set server
 

3449
01:18:22,900 --> 01:18:24,210
lock so the test and set server
sounds like a single point of failure

3450
01:18:24,210 --> 01:18:24,220
sounds like a single point of failure
 

3451
01:18:24,220 --> 01:18:26,310
sounds like a single point of failure
they were trying to build a replicated

3452
01:18:26,310 --> 01:18:26,320
they were trying to build a replicated
 

3453
01:18:26,320 --> 01:18:29,250
they were trying to build a replicated
fault tolerant whatever thing but in the

3454
01:18:29,250 --> 01:18:29,260
fault tolerant whatever thing but in the
 

3455
01:18:29,260 --> 01:18:30,810
fault tolerant whatever thing but in the
end you know we can't failover unless

3456
01:18:30,810 --> 01:18:30,820
end you know we can't failover unless
 

3457
01:18:30,820 --> 01:18:35,730
end you know we can't failover unless
unless this is alive so that's a bit of

3458
01:18:35,730 --> 01:18:35,740
unless this is alive so that's a bit of
 

3459
01:18:35,740 --> 01:18:36,260
unless this is alive so that's a bit of
a bummer

3460
01:18:36,260 --> 01:18:36,270
a bummer
 

3461
01:18:36,270 --> 01:18:39,510
a bummer
I'm guessing though I'm making a strong

3462
01:18:39,510 --> 01:18:39,520
I'm guessing though I'm making a strong
 

3463
01:18:39,520 --> 01:18:41,400
I'm guessing though I'm making a strong
guess that the test and set server is

3464
01:18:41,400 --> 01:18:41,410
guess that the test and set server is
 

3465
01:18:41,410 --> 01:18:44,580
guess that the test and set server is
actually itself a replicated service and

3466
01:18:44,580 --> 01:18:44,590
actually itself a replicated service and
 

3467
01:18:44,590 --> 01:18:46,830
actually itself a replicated service and
is fault tolerant right it's almost

3468
01:18:46,830 --> 01:18:46,840
is fault tolerant right it's almost
 

3469
01:18:46,840 --> 01:18:49,020
is fault tolerant right it's almost
certainly I mean these people are being

3470
01:18:49,020 --> 01:18:49,030
certainly I mean these people are being
 

3471
01:18:49,030 --> 01:18:50,760
certainly I mean these people are being
where they're like happy to sell you a

3472
01:18:50,760 --> 01:18:50,770
where they're like happy to sell you a
 

3473
01:18:50,770 --> 01:18:53,550
where they're like happy to sell you a
million dollar highly available storage

3474
01:18:53,550 --> 01:18:53,560
million dollar highly available storage
 

3475
01:18:53,560 --> 01:18:54,830
million dollar highly available storage
system that

3476
01:18:54,830 --> 01:18:54,840
system that
 

3477
01:18:54,840 --> 01:18:56,750
system that
uses enormous amounts of replication

3478
01:18:56,750 --> 01:18:56,760
uses enormous amounts of replication
 

3479
01:18:56,760 --> 01:18:59,240
uses enormous amounts of replication
internally um since the testing set

3480
01:18:59,240 --> 01:18:59,250
internally um since the testing set
 

3481
01:18:59,250 --> 01:19:00,859
internally um since the testing set
thing is on there dis server I'm I'm

3482
01:19:00,859 --> 01:19:00,869
thing is on there dis server I'm I'm
 

3483
01:19:00,869 --> 01:19:03,379
thing is on there dis server I'm I'm
guessing it's replicated too and the

3484
01:19:03,379 --> 01:19:03,389
guessing it's replicated too and the
 

3485
01:19:03,389 --> 01:19:05,209
guessing it's replicated too and the
stuff you'll be doing in lab 2 in lab 3

3486
01:19:05,209 --> 01:19:05,219
stuff you'll be doing in lab 2 in lab 3
 

3487
01:19:05,219 --> 01:19:07,760
stuff you'll be doing in lab 2 in lab 3
is more than powerful enough for you to

3488
01:19:07,760 --> 01:19:07,770
is more than powerful enough for you to
 

3489
01:19:07,770 --> 01:19:11,030
is more than powerful enough for you to
build your own fault-tolerant test and

3490
01:19:11,030 --> 01:19:11,040
build your own fault-tolerant test and
 

3491
01:19:11,040 --> 01:19:13,100
build your own fault-tolerant test and
set server so this problem can easily be

3492
01:19:13,100 --> 01:19:13,110
set server so this problem can easily be
 

3493
01:19:13,110 --> 01:19:15,650
set server so this problem can easily be
eliminated

