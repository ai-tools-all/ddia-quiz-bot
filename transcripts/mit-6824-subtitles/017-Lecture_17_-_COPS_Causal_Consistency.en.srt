1
00:00:02,689 --> 00:00:10,839

alright hello everyone let's get started

2
00:00:10,839 --> 00:00:10,849

 

3
00:00:10,849 --> 00:00:14,890

today the topic is causal consistency

4
00:00:14,890 --> 00:00:14,900
today the topic is causal consistency
 

5
00:00:14,900 --> 00:00:20,900
today the topic is causal consistency
and then use the cop system the cop's

6
00:00:20,900 --> 00:00:20,910
and then use the cop system the cop's
 

7
00:00:20,910 --> 00:00:23,300
and then use the cop system the cop's
paper that we're every day is a case

8
00:00:23,300 --> 00:00:23,310
paper that we're every day is a case
 

9
00:00:23,310 --> 00:00:26,089
paper that we're every day is a case
study for causal consistency so the

10
00:00:26,089 --> 00:00:26,099
study for causal consistency so the
 

11
00:00:26,099 --> 00:00:30,560
study for causal consistency so the
setting is actually familiar we're

12
00:00:30,560 --> 00:00:30,570
setting is actually familiar we're
 

13
00:00:30,570 --> 00:00:35,840
setting is actually familiar we're
talking again about big websites that

14
00:00:35,840 --> 00:00:35,850
talking again about big websites that
 

15
00:00:35,850 --> 00:00:39,459
talking again about big websites that
have data in multiple data centers and

16
00:00:39,459 --> 00:00:39,469
have data in multiple data centers and
 

17
00:00:39,469 --> 00:00:42,110
have data in multiple data centers and
they want to replicate the data in each

18
00:00:42,110 --> 00:00:42,120
they want to replicate the data in each
 

19
00:00:42,120 --> 00:00:43,760
they want to replicate the data in each
of their all their data in each their

20
00:00:43,760 --> 00:00:43,770
of their all their data in each their
 

21
00:00:43,770 --> 00:00:45,740
of their all their data in each their
data centers have to keep a copy close

22
00:00:45,740 --> 00:00:45,750
data centers have to keep a copy close
 

23
00:00:45,750 --> 00:00:50,690
data centers have to keep a copy close
to users and for perhaps for fault

24
00:00:50,690 --> 00:00:50,700
to users and for perhaps for fault
 

25
00:00:50,700 --> 00:00:55,010
to users and for perhaps for fault
tolerance so as usual we have maybe I'll

26
00:00:55,010 --> 00:00:55,020
tolerance so as usual we have maybe I'll
 

27
00:00:55,020 --> 00:01:02,620
tolerance so as usual we have maybe I'll
have three data centers

28
00:01:02,620 --> 00:01:02,630

 

29
00:01:02,630 --> 00:01:04,330

and you know because we're building big

30
00:01:04,330 --> 00:01:04,340
and you know because we're building big
 

31
00:01:04,340 --> 00:01:05,680
and you know because we're building big
systems we're going to shard the data

32
00:01:05,680 --> 00:01:05,690
systems we're going to shard the data
 

33
00:01:05,690 --> 00:01:07,270
systems we're going to shard the data
and every data center is going to have

34
00:01:07,270 --> 00:01:07,280
and every data center is going to have
 

35
00:01:07,280 --> 00:01:09,370
and every data center is going to have
multiple servers with you know maybe all

36
00:01:09,370 --> 00:01:09,380
multiple servers with you know maybe all
 

37
00:01:09,380 --> 00:01:12,700
multiple servers with you know maybe all
the keys that start with Z a through all

38
00:01:12,700 --> 00:01:12,710
the keys that start with Z a through all
 

39
00:01:12,710 --> 00:01:14,560
the keys that start with Z a through all
the custodian corresponding shards of

40
00:01:14,560 --> 00:01:14,570
the custodian corresponding shards of
 

41
00:01:14,570 --> 00:01:29,290
the custodian corresponding shards of
URLs we've seen this for and you know

42
00:01:29,290 --> 00:01:29,300
URLs we've seen this for and you know
 

43
00:01:29,300 --> 00:01:31,510
URLs we've seen this for and you know
the usual goals people have you know

44
00:01:31,510 --> 00:01:31,520
the usual goals people have you know
 

45
00:01:31,520 --> 00:01:33,460
the usual goals people have you know
there's many different designs for how

46
00:01:33,460 --> 00:01:33,470
there's many different designs for how
 

47
00:01:33,470 --> 00:01:34,810
there's many different designs for how
to make this work but you know you

48
00:01:34,810 --> 00:01:34,820
to make this work but you know you
 

49
00:01:34,820 --> 00:01:37,180
to make this work but you know you
really like reads to be certainly like

50
00:01:37,180 --> 00:01:37,190
really like reads to be certainly like
 

51
00:01:37,190 --> 00:01:39,070
really like reads to be certainly like
reads to be fast because these web

52
00:01:39,070 --> 00:01:39,080
reads to be fast because these web
 

53
00:01:39,080 --> 00:01:43,050
reads to be fast because these web
workloads tend to be read dominated and

54
00:01:43,050 --> 00:01:43,060
workloads tend to be read dominated and
 

55
00:01:43,060 --> 00:01:45,670
workloads tend to be read dominated and
you know you'd like rights to work and

56
00:01:45,670 --> 00:01:45,680
you know you'd like rights to work and
 

57
00:01:45,680 --> 00:01:47,469
you know you'd like rights to work and
you'd like to have us as much

58
00:01:47,469 --> 00:01:47,479
you'd like to have us as much
 

59
00:01:47,479 --> 00:01:52,630
you'd like to have us as much
consistency as you can so the fast

60
00:01:52,630 --> 00:01:52,640
consistency as you can so the fast
 

61
00:01:52,640 --> 00:01:53,770
consistency as you can so the fast
reasons are interesting because the

62
00:01:53,770 --> 00:01:53,780
reasons are interesting because the
 

63
00:01:53,780 --> 00:01:55,960
reasons are interesting because the
clients are typically web browsers so

64
00:01:55,960 --> 00:01:55,970
clients are typically web browsers so
 

65
00:01:55,970 --> 00:01:59,260
clients are typically web browsers so
and there's web going to be some set of

66
00:01:59,260 --> 00:01:59,270
and there's web going to be some set of
 

67
00:01:59,270 --> 00:02:03,010
and there's web going to be some set of
web browsers which all call clients the

68
00:02:03,010 --> 00:02:03,020
web browsers which all call clients the
 

69
00:02:03,020 --> 00:02:04,359
web browsers which all call clients the
clients the storage system but they're

70
00:02:04,359 --> 00:02:04,369
clients the storage system but they're
 

71
00:02:04,369 --> 00:02:07,029
clients the storage system but they're
really web browsers talking to a user's

72
00:02:07,029 --> 00:02:07,039
really web browsers talking to a user's
 

73
00:02:07,039 --> 00:02:09,130
really web browsers talking to a user's
browser some so the typical arrangement

74
00:02:09,130 --> 00:02:09,140
browser some so the typical arrangement
 

75
00:02:09,140 --> 00:02:11,790
browser some so the typical arrangement
is that the reason these happen locally

76
00:02:11,790 --> 00:02:11,800
is that the reason these happen locally
 

77
00:02:11,800 --> 00:02:14,410
is that the reason these happen locally
and rights might be little more

78
00:02:14,410 --> 00:02:14,420
and rights might be little more
 

79
00:02:14,420 --> 00:02:18,460
and rights might be little more
complicated so one system that fits this

80
00:02:18,460 --> 00:02:18,470
complicated so one system that fits this
 

81
00:02:18,470 --> 00:02:22,780
complicated so one system that fits this
pattern is spanner you remember that a

82
00:02:22,780 --> 00:02:22,790
pattern is spanner you remember that a
 

83
00:02:22,790 --> 00:02:24,880
pattern is spanner you remember that a
spanner and spanner rights involved

84
00:02:24,880 --> 00:02:24,890
spanner and spanner rights involved
 

85
00:02:24,890 --> 00:02:27,550
spanner and spanner rights involved
Paxos that runs across all the data

86
00:02:27,550 --> 00:02:27,560
Paxos that runs across all the data
 

87
00:02:27,560 --> 00:02:29,790
Paxos that runs across all the data
centers so if you do a write in paxos

88
00:02:29,790 --> 00:02:29,800
centers so if you do a write in paxos
 

89
00:02:29,800 --> 00:02:33,280
centers so if you do a write in paxos
maybe a client in a data center needs to

90
00:02:33,280 --> 00:02:33,290
maybe a client in a data center needs to
 

91
00:02:33,290 --> 00:02:35,949
maybe a client in a data center needs to
do a write the communication involve

92
00:02:35,949 --> 00:02:35,959
do a write the communication involve
 

93
00:02:35,959 --> 00:02:39,340
do a write the communication involve
actually need requires taxes maybe

94
00:02:39,340 --> 00:02:39,350
actually need requires taxes maybe
 

95
00:02:39,350 --> 00:02:41,290
actually need requires taxes maybe
running on one of these servers to talk

96
00:02:41,290 --> 00:02:41,300
running on one of these servers to talk
 

97
00:02:41,300 --> 00:02:43,420
running on one of these servers to talk
to at least a majority of the other data

98
00:02:43,420 --> 00:02:43,430
to at least a majority of the other data
 

99
00:02:43,430 --> 00:02:45,309
to at least a majority of the other data
centers that are replicas so the rights

100
00:02:45,309 --> 00:02:45,319
centers that are replicas so the rights
 

101
00:02:45,319 --> 00:02:49,610
centers that are replicas so the rights
tend to be a little bit slow but there

102
00:02:49,610 --> 00:02:49,620
tend to be a little bit slow but there
 

103
00:02:49,620 --> 00:02:52,490
tend to be a little bit slow but there
consistent in addition Savannah supports

104
00:02:52,490 --> 00:02:52,500
consistent in addition Savannah supports
 

105
00:02:52,500 --> 00:02:54,309
consistent in addition Savannah supports
two-phase commit so we had transactions

106
00:02:54,309 --> 00:02:54,319
two-phase commit so we had transactions
 

107
00:02:54,319 --> 00:02:57,440
two-phase commit so we had transactions
and the reads are much faster because

108
00:02:57,440 --> 00:02:57,450
and the reads are much faster because
 

109
00:02:57,450 --> 00:03:01,009
and the reads are much faster because
the breeze used a true time scheme that

110
00:03:01,009 --> 00:03:01,019
the breeze used a true time scheme that
 

111
00:03:01,019 --> 00:03:04,699
the breeze used a true time scheme that
the span of paper described and really

112
00:03:04,699 --> 00:03:04,709
the span of paper described and really
 

113
00:03:04,709 --> 00:03:07,550
the span of paper described and really
only consulted local we also read the

114
00:03:07,550 --> 00:03:07,560
only consulted local we also read the
 

115
00:03:07,560 --> 00:03:09,949
only consulted local we also read the
Facebook memcache new paper which is

116
00:03:09,949 --> 00:03:09,959
Facebook memcache new paper which is
 

117
00:03:09,959 --> 00:03:13,819
Facebook memcache new paper which is
another design in this demo pattern the

118
00:03:13,819 --> 00:03:13,829
another design in this demo pattern the
 

119
00:03:13,829 --> 00:03:15,259
another design in this demo pattern the
Facebook memcache key paper there's a

120
00:03:15,259 --> 00:03:15,269
Facebook memcache key paper there's a
 

121
00:03:15,269 --> 00:03:18,710
Facebook memcache key paper there's a
primary site that has the primary set of

122
00:03:18,710 --> 00:03:18,720
primary site that has the primary set of
 

123
00:03:18,720 --> 00:03:21,050
primary site that has the primary set of
my sequel databases so if a client wants

124
00:03:21,050 --> 00:03:21,060
my sequel databases so if a client wants
 

125
00:03:21,060 --> 00:03:23,630
my sequel databases so if a client wants
to do a right I suppose the primary side

126
00:03:23,630 --> 00:03:23,640
to do a right I suppose the primary side
 

127
00:03:23,640 --> 00:03:25,130
to do a right I suppose the primary side
this data center 3 does to send all

128
00:03:25,130 --> 00:03:25,140
this data center 3 does to send all
 

129
00:03:25,140 --> 00:03:27,740
this data center 3 does to send all
rights to data center 3 and then data

130
00:03:27,740 --> 00:03:27,750
rights to data center 3 and then data
 

131
00:03:27,750 --> 00:03:30,530
rights to data center 3 and then data
center 3 sends out new information or in

132
00:03:30,530 --> 00:03:30,540
center 3 sends out new information or in
 

133
00:03:30,540 --> 00:03:32,119
center 3 sends out new information or in
validations to the other data centers

134
00:03:32,119 --> 00:03:32,129
validations to the other data centers
 

135
00:03:32,129 --> 00:03:33,740
validations to the other data centers
right so actually a little bit expensive

136
00:03:33,740 --> 00:03:33,750
right so actually a little bit expensive
 

137
00:03:33,750 --> 00:03:38,800
right so actually a little bit expensive
and not unlike spanner on the other hand

138
00:03:38,800 --> 00:03:38,810
and not unlike spanner on the other hand
 

139
00:03:38,810 --> 00:03:41,210
and not unlike spanner on the other hand
all the reads are local when a client

140
00:03:41,210 --> 00:03:41,220
all the reads are local when a client
 

141
00:03:41,220 --> 00:03:42,530
all the reads are local when a client
needs to do a bead it could consult a

142
00:03:42,530 --> 00:03:42,540
needs to do a bead it could consult a
 

143
00:03:42,540 --> 00:03:44,569
needs to do a bead it could consult a
memcache key server in the local data

144
00:03:44,569 --> 00:03:44,579
memcache key server in the local data
 

145
00:03:44,579 --> 00:03:49,910
memcache key server in the local data
center and there's memcachedb sir just

146
00:03:49,910 --> 00:03:49,920
center and there's memcachedb sir just
 

147
00:03:49,920 --> 00:03:51,830
center and there's memcachedb sir just
blindingly fast this the people

148
00:03:51,830 --> 00:03:51,840
blindingly fast this the people
 

149
00:03:51,840 --> 00:03:53,720
blindingly fast this the people
reporting them a single memcache the

150
00:03:53,720 --> 00:03:53,730
reporting them a single memcache the
 

151
00:03:53,730 --> 00:03:56,509
reporting them a single memcache the
server conserve a million reads per

152
00:03:56,509 --> 00:03:56,519
server conserve a million reads per
 

153
00:03:56,519 --> 00:03:59,420
server conserve a million reads per
second which is very fast so again the

154
00:03:59,420 --> 00:03:59,430
second which is very fast so again the
 

155
00:03:59,430 --> 00:04:02,690
second which is very fast so again the
Facebook memcache D scheme needs to

156
00:04:02,690 --> 00:04:02,700
Facebook memcache D scheme needs to
 

157
00:04:02,700 --> 00:04:04,069
Facebook memcache D scheme needs to
involve cross data center of

158
00:04:04,069 --> 00:04:04,079
involve cross data center of
 

159
00:04:04,079 --> 00:04:06,440
involve cross data center of
communication for rights but the reads

160
00:04:06,440 --> 00:04:06,450
communication for rights but the reads
 

161
00:04:06,450 --> 00:04:09,920
communication for rights but the reads
are local so the question for today and

162
00:04:09,920 --> 00:04:09,930
are local so the question for today and
 

163
00:04:09,930 --> 00:04:11,210
are local so the question for today and
the question of the cops papers

164
00:04:11,210 --> 00:04:11,220
the question of the cops papers
 

165
00:04:11,220 --> 00:04:12,740
the question of the cops papers
answering is whether we can have a

166
00:04:12,740 --> 00:04:12,750
answering is whether we can have a
 

167
00:04:12,750 --> 00:04:16,870
answering is whether we can have a
system that allows rights to pursue

168
00:04:16,870 --> 00:04:16,880
system that allows rights to pursue
 

169
00:04:16,880 --> 00:04:19,250
system that allows rights to pursue
purely locally and this from the clients

170
00:04:19,250 --> 00:04:19,260
purely locally and this from the clients
 

171
00:04:19,260 --> 00:04:21,050
purely locally and this from the clients
point of views that the client can talk

172
00:04:21,050 --> 00:04:21,060
point of views that the client can talk
 

173
00:04:21,060 --> 00:04:22,670
point of views that the client can talk
to the from once it were right they can

174
00:04:22,670 --> 00:04:22,680
to the from once it were right they can
 

175
00:04:22,680 --> 00:04:26,719
to the from once it were right they can
send the right local replica in its own

176
00:04:26,719 --> 00:04:26,729
send the right local replica in its own
 

177
00:04:26,729 --> 00:04:28,790
send the right local replica in its own
data center as well as some reads to

178
00:04:28,790 --> 00:04:28,800
data center as well as some reads to
 

179
00:04:28,800 --> 00:04:31,040
data center as well as some reads to
just the local replicas and never have

180
00:04:31,040 --> 00:04:31,050
just the local replicas and never have
 

181
00:04:31,050 --> 00:04:33,320
just the local replicas and never have
to wait for other data centers never

182
00:04:33,320 --> 00:04:33,330
to wait for other data centers never
 

183
00:04:33,330 --> 00:04:34,760
to wait for other data centers never
have to talk to other data centers or

184
00:04:34,760 --> 00:04:34,770
have to talk to other data centers or
 

185
00:04:34,770 --> 00:04:38,029
have to talk to other data centers or
wait for other data centers to do rights

186
00:04:38,029 --> 00:04:38,039
wait for other data centers to do rights
 

187
00:04:38,039 --> 00:04:40,820
wait for other data centers to do rights
so what we really want is a system that

188
00:04:40,820 --> 00:04:40,830
so what we really want is a system that
 

189
00:04:40,830 --> 00:04:48,430
so what we really want is a system that
can have local reads and local rights

190
00:04:48,430 --> 00:04:48,440

 

191
00:04:48,440 --> 00:04:50,930

that's the big that's the big goal

192
00:04:50,930 --> 00:04:50,940
that's the big that's the big goal
 

193
00:04:50,940 --> 00:04:53,570
that's the big that's the big goal
really a performance goal this would

194
00:04:53,570 --> 00:04:53,580
really a performance goal this would
 

195
00:04:53,580 --> 00:04:55,160
really a performance goal this would
help for performance of course cuz now

196
00:04:55,160 --> 00:04:55,170
help for performance of course cuz now
 

197
00:04:55,170 --> 00:04:59,030
help for performance of course cuz now
unlike spanner and Facebook paper we had

198
00:04:59,030 --> 00:04:59,040
unlike spanner and Facebook paper we had
 

199
00:04:59,040 --> 00:05:00,680
unlike spanner and Facebook paper we had
a purely local rights be much faster

200
00:05:00,680 --> 00:05:00,690
a purely local rights be much faster
 

201
00:05:00,690 --> 00:05:04,190
a purely local rights be much faster
from the clients point of view um it

202
00:05:04,190 --> 00:05:04,200
from the clients point of view um it
 

203
00:05:04,200 --> 00:05:05,690
from the clients point of view um it
might also help with fault tolerance

204
00:05:05,690 --> 00:05:05,700
might also help with fault tolerance
 

205
00:05:05,700 --> 00:05:08,150
might also help with fault tolerance
robustness if rights can be done locally

206
00:05:08,150 --> 00:05:08,160
robustness if rights can be done locally
 

207
00:05:08,160 --> 00:05:09,530
robustness if rights can be done locally
then we don't have to worry about

208
00:05:09,530 --> 00:05:09,540
then we don't have to worry about
 

209
00:05:09,540 --> 00:05:10,970
then we don't have to worry about
whether other data centers are up or

210
00:05:10,970 --> 00:05:10,980
whether other data centers are up or
 

211
00:05:10,980 --> 00:05:12,050
whether other data centers are up or
whether we can talk to them quickly

212
00:05:12,050 --> 00:05:12,060
whether we can talk to them quickly
 

213
00:05:12,060 --> 00:05:15,080
whether we can talk to them quickly
because the clients don't need to wait

214
00:05:15,080 --> 00:05:15,090
because the clients don't need to wait
 

215
00:05:15,090 --> 00:05:18,800
because the clients don't need to wait
for them so we're gonna be looking for

216
00:05:18,800 --> 00:05:18,810
for them so we're gonna be looking for
 

217
00:05:18,810 --> 00:05:20,780
for them so we're gonna be looking for
systems that have this this level of

218
00:05:20,780 --> 00:05:20,790
systems that have this this level of
 

219
00:05:20,790 --> 00:05:25,490
systems that have this this level of
performance and in the end we're gonna

220
00:05:25,490 --> 00:05:25,500
performance and in the end we're gonna
 

221
00:05:25,500 --> 00:05:27,800
performance and in the end we're gonna
let the consistency model you know cuz

222
00:05:27,800 --> 00:05:27,810
let the consistency model you know cuz
 

223
00:05:27,810 --> 00:05:28,460
let the consistency model you know cuz
we're going to be worried about

224
00:05:28,460 --> 00:05:28,470
we're going to be worried about
 

225
00:05:28,470 --> 00:05:29,870
we're going to be worried about
consistency if you only do the rights

226
00:05:29,870 --> 00:05:29,880
consistency if you only do the rights
 

227
00:05:29,880 --> 00:05:31,970
consistency if you only do the rights
initially to the local replicas you know

228
00:05:31,970 --> 00:05:31,980
initially to the local replicas you know
 

229
00:05:31,980 --> 00:05:33,680
initially to the local replicas you know
what about other data centers replicas

230
00:05:33,680 --> 00:05:33,690
what about other data centers replicas
 

231
00:05:33,690 --> 00:05:36,020
what about other data centers replicas
data so we'll certainly be worried about

232
00:05:36,020 --> 00:05:36,030
data so we'll certainly be worried about
 

233
00:05:36,030 --> 00:05:36,830
data so we'll certainly be worried about
consistency

234
00:05:36,830 --> 00:05:36,840
consistency
 

235
00:05:36,840 --> 00:05:38,840
consistency
but the attitude for this lecture at

236
00:05:38,840 --> 00:05:38,850
but the attitude for this lecture at
 

237
00:05:38,850 --> 00:05:40,250
but the attitude for this lecture at
least is that we're gonna let the

238
00:05:40,250 --> 00:05:40,260
least is that we're gonna let the
 

239
00:05:40,260 --> 00:05:42,440
least is that we're gonna let the
consistency trail along behind the

240
00:05:42,440 --> 00:05:42,450
consistency trail along behind the
 

241
00:05:42,450 --> 00:05:44,630
consistency trail along behind the
performance you know once we figure out

242
00:05:44,630 --> 00:05:44,640
performance you know once we figure out
 

243
00:05:44,640 --> 00:05:46,700
performance you know once we figure out
how to get good performance will well

244
00:05:46,700 --> 00:05:46,710
how to get good performance will well
 

245
00:05:46,710 --> 00:05:48,440
how to get good performance will well
then sort of figure out how to define

246
00:05:48,440 --> 00:05:48,450
then sort of figure out how to define
 

247
00:05:48,450 --> 00:05:51,200
then sort of figure out how to define
consistency in think about whether it's

248
00:05:51,200 --> 00:05:51,210
consistency in think about whether it's
 

249
00:05:51,210 --> 00:05:54,320
consistency in think about whether it's
good enough okay so that's the overall

250
00:05:54,320 --> 00:05:54,330
good enough okay so that's the overall
 

251
00:05:54,330 --> 00:05:56,780
good enough okay so that's the overall
strategy I'm gonna actually talk about

252
00:05:56,780 --> 00:05:56,790
strategy I'm gonna actually talk about
 

253
00:05:56,790 --> 00:06:02,030
strategy I'm gonna actually talk about
two strawman designs to sort of okay but

254
00:06:02,030 --> 00:06:02,040
two strawman designs to sort of okay but
 

255
00:06:02,040 --> 00:06:05,690
two strawman designs to sort of okay but
not great designs on the way to before

256
00:06:05,690 --> 00:06:05,700
not great designs on the way to before
 

257
00:06:05,700 --> 00:06:08,150
not great designs on the way to before
we actually talk about how cops works so

258
00:06:08,150 --> 00:06:08,160
we actually talk about how cops works so
 

259
00:06:08,160 --> 00:06:12,790
we actually talk about how cops works so
first i want to talk about a simplest

260
00:06:12,790 --> 00:06:12,800
first i want to talk about a simplest
 

261
00:06:12,800 --> 00:06:16,760
first i want to talk about a simplest
design that follows this local rating

262
00:06:16,760 --> 00:06:16,770
design that follows this local rating
 

263
00:06:16,770 --> 00:06:19,130
design that follows this local rating
strategy that I can think of I'll call

264
00:06:19,130 --> 00:06:19,140
strategy that I can think of I'll call
 

265
00:06:19,140 --> 00:06:27,550
strategy that I can think of I'll call
this straw man 1 so in straw and one

266
00:06:27,550 --> 00:06:27,560
this straw man 1 so in straw and one
 

267
00:06:27,560 --> 00:06:34,659
this straw man 1 so in straw and one
we're going to have three data centers

268
00:06:34,659 --> 00:06:34,669

 

269
00:06:34,669 --> 00:06:37,340

and let's just assume that the data is

270
00:06:37,340 --> 00:06:37,350
and let's just assume that the data is
 

271
00:06:37,350 --> 00:06:41,480
and let's just assume that the data is
charted two ways in each of them so he's

272
00:06:41,480 --> 00:06:41,490
charted two ways in each of them so he's
 

273
00:06:41,490 --> 00:06:43,550
charted two ways in each of them so he's
from maybe ATM and keys from embassy

274
00:06:43,550 --> 00:06:43,560
from maybe ATM and keys from embassy
 

275
00:06:43,560 --> 00:06:45,290
from maybe ATM and keys from embassy
shard it the same way in each of the

276
00:06:45,290 --> 00:06:45,300
shard it the same way in each of the
 

277
00:06:45,300 --> 00:06:55,090
shard it the same way in each of the
data centers and the clients will read

278
00:06:55,090 --> 00:06:55,100
data centers and the clients will read
 

279
00:06:55,100 --> 00:06:59,360
data centers and the clients will read
locally and if a client writes so

280
00:06:59,360 --> 00:06:59,370
locally and if a client writes so
 

281
00:06:59,370 --> 00:07:01,670
locally and if a client writes so
supposing a client needs to write it key

282
00:07:01,670 --> 00:07:01,680
supposing a client needs to write it key
 

283
00:07:01,680 --> 00:07:03,650
supposing a client needs to write it key
that starts with M the clients gonna

284
00:07:03,650 --> 00:07:03,660
that starts with M the clients gonna
 

285
00:07:03,660 --> 00:07:08,600
that starts with M the clients gonna
send a write of key M to the shard

286
00:07:08,600 --> 00:07:08,610
send a write of key M to the shard
 

287
00:07:08,610 --> 00:07:10,600
send a write of key M to the shard
server the local shard server that has

288
00:07:10,600 --> 00:07:10,610
server the local shard server that has
 

289
00:07:10,610 --> 00:07:13,280
server the local shard server that has
its responsible he's starting with M

290
00:07:13,280 --> 00:07:13,290
its responsible he's starting with M
 

291
00:07:13,290 --> 00:07:15,830
its responsible he's starting with M
that shard server would return reply to

292
00:07:15,830 --> 00:07:15,840
that shard server would return reply to
 

293
00:07:15,840 --> 00:07:17,480
that shard server would return reply to
the client immediately saying oh yes I

294
00:07:17,480 --> 00:07:17,490
the client immediately saying oh yes I
 

295
00:07:17,490 --> 00:07:22,190
the client immediately saying oh yes I
did you're right but in addition each

296
00:07:22,190 --> 00:07:22,200
did you're right but in addition each
 

297
00:07:22,200 --> 00:07:26,350
did you're right but in addition each
server will maintain a queue of

298
00:07:26,350 --> 00:07:26,360
server will maintain a queue of
 

299
00:07:26,360 --> 00:07:29,000
server will maintain a queue of
outstanding rights that have been sent

300
00:07:29,000 --> 00:07:29,010
outstanding rights that have been sent
 

301
00:07:29,010 --> 00:07:30,650
outstanding rights that have been sent
to it recently got clients that it needs

302
00:07:30,650 --> 00:07:30,660
to it recently got clients that it needs
 

303
00:07:30,660 --> 00:07:32,180
to it recently got clients that it needs
to send to other data centers and it

304
00:07:32,180 --> 00:07:32,190
to send to other data centers and it
 

305
00:07:32,190 --> 00:07:34,219
to send to other data centers and it
will stream these rights asynchronously

306
00:07:34,219 --> 00:07:34,229
will stream these rights asynchronously
 

307
00:07:34,229 --> 00:07:38,090
will stream these rights asynchronously
in the background to the corresponding

308
00:07:38,090 --> 00:07:38,100
in the background to the corresponding
 

309
00:07:38,100 --> 00:07:40,310
in the background to the corresponding
servers in the other data center so

310
00:07:40,310 --> 00:07:40,320
servers in the other data center so
 

311
00:07:40,320 --> 00:07:42,950
servers in the other data center so
after applying to the client our shard

312
00:07:42,950 --> 00:07:42,960
after applying to the client our shard
 

313
00:07:42,960 --> 00:07:45,800
after applying to the client our shard
server here will send a copy of the

314
00:07:45,800 --> 00:07:45,810
server here will send a copy of the
 

315
00:07:45,810 --> 00:07:48,950
server here will send a copy of the
clients right to each of the other data

316
00:07:48,950 --> 00:07:48,960
clients right to each of the other data
 

317
00:07:48,960 --> 00:07:52,159
clients right to each of the other data
setups and you know those rights go

318
00:07:52,159 --> 00:07:52,169
setups and you know those rights go
 

319
00:07:52,169 --> 00:07:53,240
setups and you know those rights go
through the network maybe they take a

320
00:07:53,240 --> 00:07:53,250
through the network maybe they take a
 

321
00:07:53,250 --> 00:07:55,219
through the network maybe they take a
long time eventually they're gonna

322
00:07:55,219 --> 00:07:55,229
long time eventually they're gonna
 

323
00:07:55,229 --> 00:07:57,110
long time eventually they're gonna
arrive at the target data set the other

324
00:07:57,110 --> 00:07:57,120
arrive at the target data set the other
 

325
00:07:57,120 --> 00:07:58,940
arrive at the target data set the other
data centers and each of those shard

326
00:07:58,940 --> 00:07:58,950
data centers and each of those shard
 

327
00:07:58,950 --> 00:08:00,920
data centers and each of those shard
servers will then apply the right to its

328
00:08:00,920 --> 00:08:00,930
servers will then apply the right to its
 

329
00:08:00,930 --> 00:08:07,330
servers will then apply the right to its
local table of data so this is a design

330
00:08:07,330 --> 00:08:07,340
local table of data so this is a design
 

331
00:08:07,340 --> 00:08:10,550
local table of data so this is a design
that has very good performance right the

332
00:08:10,550 --> 00:08:10,560
that has very good performance right the
 

333
00:08:10,560 --> 00:08:12,740
that has very good performance right the
reason rights are all done locally may

334
00:08:12,740 --> 00:08:12,750
reason rights are all done locally may
 

335
00:08:12,750 --> 00:08:13,969
reason rights are all done locally may
never have two clients never have to

336
00:08:13,969 --> 00:08:13,979
never have two clients never have to
 

337
00:08:13,979 --> 00:08:16,090
never have two clients never have to
wait there's a lot of parallelism

338
00:08:16,090 --> 00:08:16,100
wait there's a lot of parallelism
 

339
00:08:16,100 --> 00:08:18,980
wait there's a lot of parallelism
because you know this shard server for a

340
00:08:18,980 --> 00:08:18,990
because you know this shard server for a
 

341
00:08:18,990 --> 00:08:20,740
because you know this shard server for a
and the shirts are for a more

342
00:08:20,740 --> 00:08:20,750
and the shirts are for a more
 

343
00:08:20,750 --> 00:08:22,700
and the shirts are for a more
opportunity independently if the shard

344
00:08:22,700 --> 00:08:22,710
opportunity independently if the shard
 

345
00:08:22,710 --> 00:08:24,260
opportunity independently if the shard
server for a gets right you know it has

346
00:08:24,260 --> 00:08:24,270
server for a gets right you know it has
 

347
00:08:24,270 --> 00:08:27,110
server for a gets right you know it has
to push its data to the corresponding

348
00:08:27,110 --> 00:08:27,120
to push its data to the corresponding
 

349
00:08:27,120 --> 00:08:28,460
to push its data to the corresponding
shard servers and other data centers but

350
00:08:28,460 --> 00:08:28,470
shard servers and other data centers but
 

351
00:08:28,470 --> 00:08:30,290
shard servers and other data centers but
it can do those push pushes

352
00:08:30,290 --> 00:08:30,300
it can do those push pushes
 

353
00:08:30,300 --> 00:08:33,140
it can do those push pushes
independently of other shard service

354
00:08:33,140 --> 00:08:33,150
independently of other shard service
 

355
00:08:33,150 --> 00:08:34,790
independently of other shard service
pushes so there's parallelism both in

356
00:08:34,790 --> 00:08:34,800
pushes so there's parallelism both in
 

357
00:08:34,800 --> 00:08:36,440
pushes so there's parallelism both in
serving and and pushing the writes

358
00:08:36,440 --> 00:08:36,450
serving and and pushing the writes
 

359
00:08:36,450 --> 00:08:41,420
serving and and pushing the writes
around if you think about it a little

360
00:08:41,420 --> 00:08:41,430
around if you think about it a little
 

361
00:08:41,430 --> 00:08:44,570
around if you think about it a little
bit it's this design also essentially

362
00:08:44,570 --> 00:08:44,580
bit it's this design also essentially
 

363
00:08:44,580 --> 00:08:48,240
bit it's this design also essentially
effectively favors reads and the reads

364
00:08:48,240 --> 00:08:48,250
effectively favors reads and the reads
 

365
00:08:48,250 --> 00:08:50,280
effectively favors reads and the reads
really never have any impact beyond the

366
00:08:50,280 --> 00:08:50,290
really never have any impact beyond the
 

367
00:08:50,290 --> 00:08:52,140
really never have any impact beyond the
local data center the rights though do a

368
00:08:52,140 --> 00:08:52,150
local data center the rights though do a
 

369
00:08:52,150 --> 00:08:53,670
local data center the rights though do a
bit of work whenever you do a right you

370
00:08:53,670 --> 00:08:53,680
bit of work whenever you do a right you
 

371
00:08:53,680 --> 00:08:54,810
bit of work whenever you do a right you
know the client doesn't have to wait for

372
00:08:54,810 --> 00:08:54,820
know the client doesn't have to wait for
 

373
00:08:54,820 --> 00:08:57,000
know the client doesn't have to wait for
it but the shard server then has to push

374
00:08:57,000 --> 00:08:57,010
it but the shard server then has to push
 

375
00:08:57,010 --> 00:08:59,310
it but the shard server then has to push
the rights out to the other data centers

376
00:08:59,310 --> 00:08:59,320
the rights out to the other data centers
 

377
00:08:59,320 --> 00:09:01,800
the rights out to the other data centers
and you know means that new data the

378
00:09:01,800 --> 00:09:01,810
and you know means that new data the
 

379
00:09:01,810 --> 00:09:03,210
and you know means that new data the
other data center then proceed very

380
00:09:03,210 --> 00:09:03,220
other data center then proceed very
 

381
00:09:03,220 --> 00:09:06,480
other data center then proceed very
quickly so reads involve less work than

382
00:09:06,480 --> 00:09:06,490
quickly so reads involve less work than
 

383
00:09:06,490 --> 00:09:09,030
quickly so reads involve less work than
rights and that's appropriate for a read

384
00:09:09,030 --> 00:09:09,040
rights and that's appropriate for a read
 

385
00:09:09,040 --> 00:09:12,630
rights and that's appropriate for a read
heavy workload if you are more worried

386
00:09:12,630 --> 00:09:12,640
heavy workload if you are more worried
 

387
00:09:12,640 --> 00:09:14,460
heavy workload if you are more worried
about rate performance you could imagine

388
00:09:14,460 --> 00:09:14,470
about rate performance you could imagine
 

389
00:09:14,470 --> 00:09:16,410
about rate performance you could imagine
other designs for example you can

390
00:09:16,410 --> 00:09:16,420
other designs for example you can
 

391
00:09:16,420 --> 00:09:18,210
other designs for example you can
imagine design in which reads actually

392
00:09:18,210 --> 00:09:18,220
imagine design in which reads actually
 

393
00:09:18,220 --> 00:09:19,800
imagine design in which reads actually
have to consult multiple data centers

394
00:09:19,800 --> 00:09:19,810
have to consult multiple data centers
 

395
00:09:19,810 --> 00:09:22,350
have to consult multiple data centers
and rights are purely local so you can

396
00:09:22,350 --> 00:09:22,360
and rights are purely local so you can
 

397
00:09:22,360 --> 00:09:23,820
and rights are purely local so you can
imagine a scheme in which you have when

398
00:09:23,820 --> 00:09:23,830
imagine a scheme in which you have when
 

399
00:09:23,830 --> 00:09:25,680
imagine a scheme in which you have when
you do a read you actually read the data

400
00:09:25,680 --> 00:09:25,690
you do a read you actually read the data
 

401
00:09:25,690 --> 00:09:28,020
you do a read you actually read the data
from each of the other date the current

402
00:09:28,020 --> 00:09:28,030
from each of the other date the current
 

403
00:09:28,030 --> 00:09:30,960
from each of the other date the current
copy of the key you want from each of

404
00:09:30,960 --> 00:09:30,970
copy of the key you want from each of
 

405
00:09:30,970 --> 00:09:32,340
copy of the key you want from each of
the other data centers and choose the

406
00:09:32,340 --> 00:09:32,350
the other data centers and choose the
 

407
00:09:32,350 --> 00:09:34,980
the other data centers and choose the
one that's most recent perhaps and then

408
00:09:34,980 --> 00:09:34,990
one that's most recent perhaps and then
 

409
00:09:34,990 --> 00:09:37,380
one that's most recent perhaps and then
rights are very cheap and breeds are

410
00:09:37,380 --> 00:09:37,390
rights are very cheap and breeds are
 

411
00:09:37,390 --> 00:09:38,420
rights are very cheap and breeds are
expensive or you can imagine

412
00:09:38,420 --> 00:09:38,430
expensive or you can imagine
 

413
00:09:38,430 --> 00:09:41,060
expensive or you can imagine
combinations of these two strategies

414
00:09:41,060 --> 00:09:41,070
combinations of these two strategies
 

415
00:09:41,070 --> 00:09:44,850
combinations of these two strategies
some sort of quorum overlap scheme or

416
00:09:44,850 --> 00:09:44,860
some sort of quorum overlap scheme or
 

417
00:09:44,860 --> 00:09:46,800
some sort of quorum overlap scheme or
you write a majority and write a

418
00:09:46,800 --> 00:09:46,810
you write a majority and write a
 

419
00:09:46,810 --> 00:09:48,480
you write a majority and write a
majority at the only a majority of data

420
00:09:48,480 --> 00:09:48,490
majority at the only a majority of data
 

421
00:09:48,490 --> 00:09:49,860
majority at the only a majority of data
centers and meet a majority of data

422
00:09:49,860 --> 00:09:49,870
centers and meet a majority of data
 

423
00:09:49,870 --> 00:09:53,430
centers and meet a majority of data
centers and rely on the overlap and in

424
00:09:53,430 --> 00:09:53,440
centers and rely on the overlap and in
 

425
00:09:53,440 --> 00:09:56,370
centers and rely on the overlap and in
fact there are real live systems that

426
00:09:56,370 --> 00:09:56,380
fact there are real live systems that
 

427
00:09:56,380 --> 00:10:00,030
fact there are real live systems that
people use in commercially in real

428
00:10:00,030 --> 00:10:00,040
people use in commercially in real
 

429
00:10:00,040 --> 00:10:02,550
people use in commercially in real
websites that follow much this design so

430
00:10:02,550 --> 00:10:02,560
websites that follow much this design so
 

431
00:10:02,560 --> 00:10:04,110
websites that follow much this design so
if you're interested in sort of a real

432
00:10:04,110 --> 00:10:04,120
if you're interested in sort of a real
 

433
00:10:04,120 --> 00:10:06,570
if you're interested in sort of a real
world version of this you can look up

434
00:10:06,570 --> 00:10:06,580
world version of this you can look up
 

435
00:10:06,580 --> 00:10:11,220
world version of this you can look up
Amazon's dynamo system or the open

436
00:10:11,220 --> 00:10:11,230
Amazon's dynamo system or the open
 

437
00:10:11,230 --> 00:10:11,720
Amazon's dynamo system or the open
source

438
00:10:11,720 --> 00:10:11,730
source
 

439
00:10:11,730 --> 00:10:14,400
source
Kassandra system

440
00:10:14,400 --> 00:10:14,410
Kassandra system
 

441
00:10:14,410 --> 00:10:17,650
Kassandra system
there was much more elaborated than when

442
00:10:17,650 --> 00:10:17,660
there was much more elaborated than when
 

443
00:10:17,660 --> 00:10:19,750
there was much more elaborated than when
I've sketched out here but they follow

444
00:10:19,750 --> 00:10:19,760
I've sketched out here but they follow
 

445
00:10:19,760 --> 00:10:23,530
I've sketched out here but they follow
the same basic pattern so the usual name

446
00:10:23,530 --> 00:10:23,540
the same basic pattern so the usual name
 

447
00:10:23,540 --> 00:10:26,950
the same basic pattern so the usual name
for this kind of scheme is eventual

448
00:10:26,950 --> 00:10:26,960
for this kind of scheme is eventual
 

449
00:10:26,960 --> 00:10:31,360
for this kind of scheme is eventual
consistency and the reason for that is

450
00:10:31,360 --> 00:10:31,370
consistency and the reason for that is
 

451
00:10:31,370 --> 00:10:40,900
consistency and the reason for that is
that at least initially if you do a

452
00:10:40,900 --> 00:10:40,910
that at least initially if you do a
 

453
00:10:40,910 --> 00:10:43,750
that at least initially if you do a
write other readers and other data

454
00:10:43,750 --> 00:10:43,760
write other readers and other data
 

455
00:10:43,760 --> 00:10:46,350
write other readers and other data
centers are not guaranteed EC or right

456
00:10:46,350 --> 00:10:46,360
centers are not guaranteed EC or right
 

457
00:10:46,360 --> 00:10:48,880
centers are not guaranteed EC or right
but they will someday because you're

458
00:10:48,880 --> 00:10:48,890
but they will someday because you're
 

459
00:10:48,890 --> 00:10:50,170
but they will someday because you're
pushing out the rights so they'll

460
00:10:50,170 --> 00:10:50,180
pushing out the rights so they'll
 

461
00:10:50,180 --> 00:10:53,170
pushing out the rights so they'll
eventually see your data there's no

462
00:10:53,170 --> 00:10:53,180
eventually see your data there's no
 

463
00:10:53,180 --> 00:10:56,110
eventually see your data there's no
guarantee about order so for example if

464
00:10:56,110 --> 00:10:56,120
guarantee about order so for example if
 

465
00:10:56,120 --> 00:10:58,780
guarantee about order so for example if
I'm a client and I write he's starting

466
00:10:58,780 --> 00:10:58,790
I'm a client and I write he's starting
 

467
00:10:58,790 --> 00:11:00,010
I'm a client and I write he's starting
with them and then I write a key

468
00:11:00,010 --> 00:11:00,020
with them and then I write a key
 

469
00:11:00,020 --> 00:11:03,970
with them and then I write a key
starting with a sure you know M sends

470
00:11:03,970 --> 00:11:03,980
starting with a sure you know M sends
 

471
00:11:03,980 --> 00:11:07,090
starting with a sure you know M sends
out it's my right to shards of a rim

472
00:11:07,090 --> 00:11:07,100
out it's my right to shards of a rim
 

473
00:11:07,100 --> 00:11:09,430
out it's my right to shards of a rim
sends out one right and the server for a

474
00:11:09,430 --> 00:11:09,440
sends out one right and the server for a
 

475
00:11:09,440 --> 00:11:12,550
sends out one right and the server for a
sends out my right for a but you know

476
00:11:12,550 --> 00:11:12,560
sends out my right for a but you know
 

477
00:11:12,560 --> 00:11:14,230
sends out my right for a but you know
these may travel at different speeds or

478
00:11:14,230 --> 00:11:14,240
these may travel at different speeds or
 

479
00:11:14,240 --> 00:11:15,820
these may travel at different speeds or
different routes on the wide area

480
00:11:15,820 --> 00:11:15,830
different routes on the wide area
 

481
00:11:15,830 --> 00:11:17,740
different routes on the wide area
network and maybe I wrote maybe the

482
00:11:17,740 --> 00:11:17,750
network and maybe I wrote maybe the
 

483
00:11:17,750 --> 00:11:19,870
network and maybe I wrote maybe the
client wrote em first and then a but

484
00:11:19,870 --> 00:11:19,880
client wrote em first and then a but
 

485
00:11:19,880 --> 00:11:22,630
client wrote em first and then a but
maybe if they for a arrives first and

486
00:11:22,630 --> 00:11:22,640
maybe if they for a arrives first and
 

487
00:11:22,640 --> 00:11:24,250
maybe if they for a arrives first and
then the update for am and maybe I

488
00:11:24,250 --> 00:11:24,260
then the update for am and maybe I
 

489
00:11:24,260 --> 00:11:26,890
then the update for am and maybe I
arrive at the opposite order at the

490
00:11:26,890 --> 00:11:26,900
arrive at the opposite order at the
 

491
00:11:26,900 --> 00:11:28,840
arrive at the opposite order at the
other datacenter so different clients

492
00:11:28,840 --> 00:11:28,850
other datacenter so different clients
 

493
00:11:28,850 --> 00:11:32,020
other datacenter so different clients
are gonna observe updates in different

494
00:11:32,020 --> 00:11:32,030
are gonna observe updates in different
 

495
00:11:32,030 --> 00:11:36,460
are gonna observe updates in different
orders so there's you know no order

496
00:11:36,460 --> 00:11:36,470
orders so there's you know no order
 

497
00:11:36,470 --> 00:11:40,220
orders so there's you know no order
guarantee

498
00:11:40,220 --> 00:11:40,230

 

499
00:11:40,230 --> 00:11:43,590

the sense the sort of ultimate meaning

500
00:11:43,590 --> 00:11:43,600
the sense the sort of ultimate meaning
 

501
00:11:43,600 --> 00:11:46,199
the sense the sort of ultimate meaning
eventual consistency is that if things

502
00:11:46,199 --> 00:11:46,209
eventual consistency is that if things
 

503
00:11:46,209 --> 00:11:49,350
eventual consistency is that if things
settle down and people stop writing and

504
00:11:49,350 --> 00:11:49,360
settle down and people stop writing and
 

505
00:11:49,360 --> 00:11:51,870
settle down and people stop writing and
all of these write messages finally

506
00:11:51,870 --> 00:11:51,880
all of these write messages finally
 

507
00:11:51,880 --> 00:11:53,220
all of these write messages finally
arrive at their destinations are

508
00:11:53,220 --> 00:11:53,230
arrive at their destinations are
 

509
00:11:53,230 --> 00:11:56,790
arrive at their destinations are
processed then I'm an eventually an

510
00:11:56,790 --> 00:11:56,800
processed then I'm an eventually an
 

511
00:11:56,800 --> 00:11:59,550
processed then I'm an eventually an
eventually consistent system ought to

512
00:11:59,550 --> 00:11:59,560
eventually consistent system ought to
 

513
00:11:59,560 --> 00:12:03,360
eventually consistent system ought to
end up with the same value stored at all

514
00:12:03,360 --> 00:12:03,370
end up with the same value stored at all
 

515
00:12:03,370 --> 00:12:11,220
end up with the same value stored at all
of the all of the replicas that's the

516
00:12:11,220 --> 00:12:11,230
of the all of the replicas that's the
 

517
00:12:11,230 --> 00:12:12,870
of the all of the replicas that's the
sense of which it's eventually

518
00:12:12,870 --> 00:12:12,880
sense of which it's eventually
 

519
00:12:12,880 --> 00:12:14,910
sense of which it's eventually
consistent if you wait for the dust to

520
00:12:14,910 --> 00:12:14,920
consistent if you wait for the dust to
 

521
00:12:14,920 --> 00:12:16,860
consistent if you wait for the dust to
settle you're gonna end up with

522
00:12:16,860 --> 00:12:16,870
settle you're gonna end up with
 

523
00:12:16,870 --> 00:12:18,259
settle you're gonna end up with
everybody having the same data and

524
00:12:18,259 --> 00:12:18,269
everybody having the same data and
 

525
00:12:18,269 --> 00:12:20,879
everybody having the same data and
that's a pretty weak spec that's a very

526
00:12:20,879 --> 00:12:20,889
that's a pretty weak spec that's a very
 

527
00:12:20,889 --> 00:12:24,660
that's a pretty weak spec that's a very
weak spec but you know because it's a

528
00:12:24,660 --> 00:12:24,670
weak spec but you know because it's a
 

529
00:12:24,670 --> 00:12:26,610
weak spec but you know because it's a
loose spec there's a lot of freedom in

530
00:12:26,610 --> 00:12:26,620
loose spec there's a lot of freedom in
 

531
00:12:26,620 --> 00:12:28,620
loose spec there's a lot of freedom in
the implementation and a lot of

532
00:12:28,620 --> 00:12:28,630
the implementation and a lot of
 

533
00:12:28,630 --> 00:12:30,240
the implementation and a lot of
opportunities to get good performance

534
00:12:30,240 --> 00:12:30,250
opportunities to get good performance
 

535
00:12:30,250 --> 00:12:31,889
opportunities to get good performance
because the system basically doesn't

536
00:12:31,889 --> 00:12:31,899
because the system basically doesn't
 

537
00:12:31,899 --> 00:12:34,439
because the system basically doesn't
require you to instantly do anything or

538
00:12:34,439 --> 00:12:34,449
require you to instantly do anything or
 

539
00:12:34,449 --> 00:12:38,069
require you to instantly do anything or
to observe any ordering rules it's quite

540
00:12:38,069 --> 00:12:38,079
to observe any ordering rules it's quite
 

541
00:12:38,079 --> 00:12:40,019
to observe any ordering rules it's quite
different from most of the consistency

542
00:12:40,019 --> 00:12:40,029
different from most of the consistency
 

543
00:12:40,029 --> 00:12:43,410
different from most of the consistency
schemes we've seen so far again as I

544
00:12:43,410 --> 00:12:43,420
schemes we've seen so far again as I
 

545
00:12:43,420 --> 00:12:45,230
schemes we've seen so far again as I
mentioned it's used in deployed systems

546
00:12:45,230 --> 00:12:45,240
mentioned it's used in deployed systems
 

547
00:12:45,240 --> 00:12:48,540
mentioned it's used in deployed systems
eventual consistency is but it can be

548
00:12:48,540 --> 00:12:48,550
eventual consistency is but it can be
 

549
00:12:48,550 --> 00:12:50,309
eventual consistency is but it can be
quite tricky for application programmers

550
00:12:50,309 --> 00:12:50,319
quite tricky for application programmers
 

551
00:12:50,319 --> 00:12:53,129
quite tricky for application programmers
so let me sketch out a an example of

552
00:12:53,129 --> 00:12:53,139
so let me sketch out a an example of
 

553
00:12:53,139 --> 00:12:54,900
so let me sketch out a an example of
something you might want to do in a web

554
00:12:54,900 --> 00:12:54,910
something you might want to do in a web
 

555
00:12:54,910 --> 00:12:58,620
something you might want to do in a web
and the website where you would have to

556
00:12:58,620 --> 00:12:58,630
and the website where you would have to
 

557
00:12:58,630 --> 00:13:04,139
and the website where you would have to
be pretty careful you might be surprised

558
00:13:04,139 --> 00:13:04,149
be pretty careful you might be surprised
 

559
00:13:04,149 --> 00:13:09,870
be pretty careful you might be surprised
if this is an eventual consistency app

560
00:13:09,870 --> 00:13:09,880
if this is an eventual consistency app
 

561
00:13:09,880 --> 00:13:13,559
if this is an eventual consistency app
example suppose we're building a website

562
00:13:13,559 --> 00:13:13,569
example suppose we're building a website
 

563
00:13:13,569 --> 00:13:16,259
example suppose we're building a website
that stores photos and every user has a

564
00:13:16,259 --> 00:13:16,269
that stores photos and every user has a
 

565
00:13:16,269 --> 00:13:19,949
that stores photos and every user has a
you know set of photo photos stored as

566
00:13:19,949 --> 00:13:19,959
you know set of photo photos stored as
 

567
00:13:19,959 --> 00:13:21,509
you know set of photo photos stored as
you know key value pairs with some sort

568
00:13:21,509 --> 00:13:21,519
you know key value pairs with some sort
 

569
00:13:21,519 --> 00:13:26,160
you know key value pairs with some sort
of unique ID is the key and every user

570
00:13:26,160 --> 00:13:26,170
of unique ID is the key and every user
 

571
00:13:26,170 --> 00:13:29,970
of unique ID is the key and every user
has a list of maintains a list of their

572
00:13:29,970 --> 00:13:29,980
has a list of maintains a list of their
 

573
00:13:29,980 --> 00:13:31,679
has a list of maintains a list of their
public photos that they allow other

574
00:13:31,679 --> 00:13:31,689
public photos that they allow other
 

575
00:13:31,689 --> 00:13:34,110
public photos that they allow other
people to see so supposing I take a

576
00:13:34,110 --> 00:13:34,120
people to see so supposing I take a
 

577
00:13:34,120 --> 00:13:37,889
people to see so supposing I take a
photograph and I want to insert it into

578
00:13:37,889 --> 00:13:37,899
photograph and I want to insert it into
 

579
00:13:37,899 --> 00:13:40,710
photograph and I want to insert it into
this system or you know I human contact

580
00:13:40,710 --> 00:13:40,720
this system or you know I human contact
 

581
00:13:40,720 --> 00:13:43,319
this system or you know I human contact
the web server and the web server runs

582
00:13:43,319 --> 00:13:43,329
the web server and the web server runs
 

583
00:13:43,329 --> 00:13:45,840
the web server and the web server runs
code that's gonna insert my photo into

584
00:13:45,840 --> 00:13:45,850
code that's gonna insert my photo into
 

585
00:13:45,850 --> 00:13:47,579
code that's gonna insert my photo into
the storage system and then add a

586
00:13:47,579 --> 00:13:47,589
the storage system and then add a
 

587
00:13:47,589 --> 00:13:50,610
the storage system and then add a
reference to my photo to my photo list

588
00:13:50,610 --> 00:13:50,620
reference to my photo to my photo list
 

589
00:13:50,620 --> 00:13:51,530
reference to my photo to my photo list
so maybe

590
00:13:51,530 --> 00:13:51,540
so maybe
 

591
00:13:51,540 --> 00:13:54,139
so maybe
run maybe this happens we'll say it

592
00:13:54,139 --> 00:13:54,149
run maybe this happens we'll say it
 

593
00:13:54,149 --> 00:13:57,230
run maybe this happens we'll say it
happens on clients c1 which is the web

594
00:13:57,230 --> 00:13:57,240
happens on clients c1 which is the web
 

595
00:13:57,240 --> 00:14:00,769
happens on clients c1 which is the web
server I'm talking to and maybe but the

596
00:14:00,769 --> 00:14:00,779
server I'm talking to and maybe but the
 

597
00:14:00,779 --> 00:14:03,889
server I'm talking to and maybe but the
code looks like is there's a code calls

598
00:14:03,889 --> 00:14:03,899
code looks like is there's a code calls
 

599
00:14:03,899 --> 00:14:07,540
code looks like is there's a code calls
the put operation for my photo

600
00:14:07,540 --> 00:14:07,550
the put operation for my photo
 

601
00:14:07,550 --> 00:14:09,280
the put operation for my photo
and it really should be a keen about you

602
00:14:09,280 --> 00:14:09,290
and it really should be a keen about you
 

603
00:14:09,290 --> 00:14:13,180
and it really should be a keen about you
I'm just gonna candidates just a few

604
00:14:13,180 --> 00:14:13,190
I'm just gonna candidates just a few
 

605
00:14:13,190 --> 00:14:15,490
I'm just gonna candidates just a few
plus value so I insert my photograph and

606
00:14:15,490 --> 00:14:15,500
plus value so I insert my photograph and
 

607
00:14:15,500 --> 00:14:19,900
plus value so I insert my photograph and
then when this put finishes then I I add

608
00:14:19,900 --> 00:14:19,910
then when this put finishes then I I add
 

609
00:14:19,910 --> 00:14:22,760
then when this put finishes then I I add
the photo to my list

610
00:14:22,760 --> 00:14:22,770
the photo to my list
 

611
00:14:22,770 --> 00:14:25,970
the photo to my list
right that's what my my clients code

612
00:14:25,970 --> 00:14:25,980
right that's what my my clients code
 

613
00:14:25,980 --> 00:14:28,010
right that's what my my clients code
looks like somebody else is looking at

614
00:14:28,010 --> 00:14:28,020
looks like somebody else is looking at
 

615
00:14:28,020 --> 00:14:30,620
looks like somebody else is looking at
my photographs loosely gonna look fetch

616
00:14:30,620 --> 00:14:30,630
my photographs loosely gonna look fetch
 

617
00:14:30,630 --> 00:14:34,070
my photographs loosely gonna look fetch
a copy of my list of photos and then

618
00:14:34,070 --> 00:14:34,080
a copy of my list of photos and then
 

619
00:14:34,080 --> 00:14:35,300
a copy of my list of photos and then
they're gonna look at the photos that

620
00:14:35,300 --> 00:14:35,310
they're gonna look at the photos that
 

621
00:14:35,310 --> 00:14:39,110
they're gonna look at the photos that
are on the list so client to maybe calls

622
00:14:39,110 --> 00:14:39,120
are on the list so client to maybe calls
 

623
00:14:39,120 --> 00:14:44,090
are on the list so client to maybe calls
get for my list and then looks down the

624
00:14:44,090 --> 00:14:44,100
get for my list and then looks down the
 

625
00:14:44,100 --> 00:14:48,560
get for my list and then looks down the
list and then calls get on that photo

626
00:14:48,560 --> 00:14:48,570
list and then calls get on that photo
 

627
00:14:48,570 --> 00:14:50,420
list and then calls get on that photo
maybe they see the photo I just uploaded

628
00:14:50,420 --> 00:14:50,430
maybe they see the photo I just uploaded
 

629
00:14:50,430 --> 00:14:51,199
maybe they see the photo I just uploaded
it on the list

630
00:14:51,199 --> 00:14:51,209
it on the list
 

631
00:14:51,209 --> 00:14:53,269
it on the list
and they're gonna do a get it for the

632
00:14:53,269 --> 00:14:53,279
and they're gonna do a get it for the
 

633
00:14:53,279 --> 00:14:57,079
and they're gonna do a get it for the
you know key for that photo yeah so this

634
00:14:57,079 --> 00:14:57,089
you know key for that photo yeah so this
 

635
00:14:57,089 --> 00:14:59,440
you know key for that photo yeah so this
is like totally straightforward code

636
00:14:59,440 --> 00:14:59,450
is like totally straightforward code
 

637
00:14:59,450 --> 00:15:02,900
is like totally straightforward code
looks like it ought to work but in an

638
00:15:02,900 --> 00:15:02,910
looks like it ought to work but in an
 

639
00:15:02,910 --> 00:15:05,720
looks like it ought to work but in an
eventually consistent system it's not

640
00:15:05,720 --> 00:15:05,730
eventually consistent system it's not
 

641
00:15:05,730 --> 00:15:07,579
eventually consistent system it's not
necessarily going to work and the

642
00:15:07,579 --> 00:15:07,589
necessarily going to work and the
 

643
00:15:07,589 --> 00:15:10,490
necessarily going to work and the
problem is that these two puts even

644
00:15:10,490 --> 00:15:10,500
problem is that these two puts even
 

645
00:15:10,500 --> 00:15:12,889
problem is that these two puts even
though the client did them in such an

646
00:15:12,889 --> 00:15:12,899
though the client did them in such an
 

647
00:15:12,899 --> 00:15:15,079
though the client did them in such an
obvious order first insert the photo and

648
00:15:15,079 --> 00:15:15,089
obvious order first insert the photo and
 

649
00:15:15,089 --> 00:15:17,660
obvious order first insert the photo and
then add a reference to that photo to my

650
00:15:17,660 --> 00:15:17,670
then add a reference to that photo to my
 

651
00:15:17,670 --> 00:15:20,180
then add a reference to that photo to my
list of photos the fact is that in this

652
00:15:20,180 --> 00:15:20,190
list of photos the fact is that in this
 

653
00:15:20,190 --> 00:15:22,370
list of photos the fact is that in this
event early consistent scheme that I

654
00:15:22,370 --> 00:15:22,380
event early consistent scheme that I
 

655
00:15:22,380 --> 00:15:25,670
event early consistent scheme that I
outlined this second put could arrive at

656
00:15:25,670 --> 00:15:25,680
outlined this second put could arrive at
 

657
00:15:25,680 --> 00:15:29,560
outlined this second put could arrive at
other data centers before the first put

658
00:15:29,560 --> 00:15:29,570
other data centers before the first put
 

659
00:15:29,570 --> 00:15:31,910
other data centers before the first put
so this other client if it's reading at

660
00:15:31,910 --> 00:15:31,920
so this other client if it's reading at
 

661
00:15:31,920 --> 00:15:34,760
so this other client if it's reading at
a different data center might see the

662
00:15:34,760 --> 00:15:34,770
a different data center might see the
 

663
00:15:34,770 --> 00:15:37,550
a different data center might see the
updated list with my new photo in it but

664
00:15:37,550 --> 00:15:37,560
updated list with my new photo in it but
 

665
00:15:37,560 --> 00:15:40,490
updated list with my new photo in it but
when that other client and another data

666
00:15:40,490 --> 00:15:40,500
when that other client and another data
 

667
00:15:40,500 --> 00:15:42,530
when that other client and another data
center goes to fetch the photo that's in

668
00:15:42,530 --> 00:15:42,540
center goes to fetch the photo that's in
 

669
00:15:42,540 --> 00:15:44,480
center goes to fetch the photo that's in
the list this photo may not exist yet

670
00:15:44,480 --> 00:15:44,490
the list this photo may not exist yet
 

671
00:15:44,490 --> 00:15:47,540
the list this photo may not exist yet
because the first right may not have

672
00:15:47,540 --> 00:15:47,550
because the first right may not have
 

673
00:15:47,550 --> 00:15:50,660
because the first right may not have
arrived over the wife of the client

674
00:15:50,660 --> 00:15:50,670
arrived over the wife of the client
 

675
00:15:50,670 --> 00:15:56,150
arrived over the wife of the client
Tuesday's so if this is just gonna be

676
00:15:56,150 --> 00:15:56,160
Tuesday's so if this is just gonna be
 

677
00:15:56,160 --> 00:15:57,860
Tuesday's so if this is just gonna be
routine occurrence in an eventually

678
00:15:57,860 --> 00:15:57,870
routine occurrence in an eventually
 

679
00:15:57,870 --> 00:16:01,790
routine occurrence in an eventually
consistent system if we don't sort of

680
00:16:01,790 --> 00:16:01,800
consistent system if we don't sort of
 

681
00:16:01,800 --> 00:16:05,389
consistent system if we don't sort of
think of anything more clever this kind

682
00:16:05,389 --> 00:16:05,399
think of anything more clever this kind
 

683
00:16:05,399 --> 00:16:07,519
think of anything more clever this kind
of behavior where it sort of looks like

684
00:16:07,519 --> 00:16:07,529
of behavior where it sort of looks like
 

685
00:16:07,529 --> 00:16:09,380
of behavior where it sort of looks like
the code out of work you know at some

686
00:16:09,380 --> 00:16:09,390
the code out of work you know at some
 

687
00:16:09,390 --> 00:16:11,389
the code out of work you know at some
intuitive level but when you actually go

688
00:16:11,389 --> 00:16:11,399
intuitive level but when you actually go
 

689
00:16:11,399 --> 00:16:13,040
intuitive level but when you actually go
and read the spec for the system which

690
00:16:13,040 --> 00:16:13,050
and read the spec for the system which
 

691
00:16:13,050 --> 00:16:15,290
and read the spec for the system which
is to say no guarantees you realize that

692
00:16:15,290 --> 00:16:15,300
is to say no guarantees you realize that
 

693
00:16:15,300 --> 00:16:18,800
is to say no guarantees you realize that
ah you know this obviously this correct

694
00:16:18,800 --> 00:16:18,810
ah you know this obviously this correct
 

695
00:16:18,810 --> 00:16:20,810
ah you know this obviously this correct
looking code may totally not do it I

696
00:16:20,810 --> 00:16:20,820
looking code may totally not do it I
 

697
00:16:20,820 --> 00:16:23,090
looking code may totally not do it I
think it's going to do these are often

698
00:16:23,090 --> 00:16:23,100
think it's going to do these are often
 

699
00:16:23,100 --> 00:16:29,480
think it's going to do these are often
called anomalies and

700
00:16:29,480 --> 00:16:29,490

 

701
00:16:29,490 --> 00:16:31,470

you know the way to think about it is

702
00:16:31,470 --> 00:16:31,480
you know the way to think about it is
 

703
00:16:31,480 --> 00:16:33,389
you know the way to think about it is
not necessarily that this behavior you

704
00:16:33,389 --> 00:16:33,399
not necessarily that this behavior you
 

705
00:16:33,399 --> 00:16:35,220
not necessarily that this behavior you
know you saw the list third on a list

706
00:16:35,220 --> 00:16:35,230
know you saw the list third on a list
 

707
00:16:35,230 --> 00:16:37,350
know you saw the list third on a list
but the photo didn't exist yet it's not

708
00:16:37,350 --> 00:16:37,360
but the photo didn't exist yet it's not
 

709
00:16:37,360 --> 00:16:39,030
but the photo didn't exist yet it's not
an error it's not incorrect because

710
00:16:39,030 --> 00:16:39,040
an error it's not incorrect because
 

711
00:16:39,040 --> 00:16:41,040
an error it's not incorrect because
after all the system never guaranteed

712
00:16:41,040 --> 00:16:41,050
after all the system never guaranteed
 

713
00:16:41,050 --> 00:16:43,740
after all the system never guaranteed
that this food was gonna do that it's

714
00:16:43,740 --> 00:16:43,750
that this food was gonna do that it's
 

715
00:16:43,750 --> 00:16:46,379
that this food was gonna do that it's
gonna actually yield the photo here so

716
00:16:46,379 --> 00:16:46,389
gonna actually yield the photo here so
 

717
00:16:46,389 --> 00:16:50,040
gonna actually yield the photo here so
it's not that it's incorrect it's just

718
00:16:50,040 --> 00:16:50,050
it's not that it's incorrect it's just
 

719
00:16:50,050 --> 00:16:52,620
it's not that it's incorrect it's just
that it's weaker than you might have

720
00:16:52,620 --> 00:16:52,630
that it's weaker than you might have
 

721
00:16:52,630 --> 00:16:55,949
that it's weaker than you might have
hoped so it's still possible to program

722
00:16:55,949 --> 00:16:55,959
hoped so it's still possible to program
 

723
00:16:55,959 --> 00:16:58,170
hoped so it's still possible to program
such a system and people do it all the

724
00:16:58,170 --> 00:16:58,180
such a system and people do it all the
 

725
00:16:58,180 --> 00:17:00,600
such a system and people do it all the
time and there's a whole lot of tricks

726
00:17:00,600 --> 00:17:00,610
time and there's a whole lot of tricks
 

727
00:17:00,610 --> 00:17:03,689
time and there's a whole lot of tricks
you can use for example you know a

728
00:17:03,689 --> 00:17:03,699
you can use for example you know a
 

729
00:17:03,699 --> 00:17:05,370
you can use for example you know a
defensive programmer might observe

730
00:17:05,370 --> 00:17:05,380
defensive programmer might observe
 

731
00:17:05,380 --> 00:17:07,740
defensive programmer might observe
programmer might might write code

732
00:17:07,740 --> 00:17:07,750
programmer might might write code
 

733
00:17:07,750 --> 00:17:09,179
programmer might might write code
knowing that well if you say something I

734
00:17:09,179 --> 00:17:09,189
knowing that well if you say something I
 

735
00:17:09,189 --> 00:17:11,039
knowing that well if you say something I
mean list it may not really exist yet

736
00:17:11,039 --> 00:17:11,049
mean list it may not really exist yet
 

737
00:17:11,049 --> 00:17:13,140
mean list it may not really exist yet
and so if you see a reference to a photo

738
00:17:13,140 --> 00:17:13,150
and so if you see a reference to a photo
 

739
00:17:13,150 --> 00:17:14,789
and so if you see a reference to a photo
in the list you get a photograph that's

740
00:17:14,789 --> 00:17:14,799
in the list you get a photograph that's
 

741
00:17:14,799 --> 00:17:17,760
in the list you get a photograph that's
not there you just retry just wait a

742
00:17:17,760 --> 00:17:17,770
not there you just retry just wait a
 

743
00:17:17,770 --> 00:17:19,789
not there you just retry just wait a
little bit and retry because by and by

744
00:17:19,789 --> 00:17:19,799
little bit and retry because by and by
 

745
00:17:19,799 --> 00:17:22,169
little bit and retry because by and by
the photo will probably show up and if

746
00:17:22,169 --> 00:17:22,179
the photo will probably show up and if
 

747
00:17:22,179 --> 00:17:24,299
the photo will probably show up and if
it doesn't we'll just skip it and don't

748
00:17:24,299 --> 00:17:24,309
it doesn't we'll just skip it and don't
 

749
00:17:24,309 --> 00:17:27,000
it doesn't we'll just skip it and don't
display it to the user so it's totally

750
00:17:27,000 --> 00:17:27,010
display it to the user so it's totally
 

751
00:17:27,010 --> 00:17:31,110
display it to the user so it's totally
possible to program in this style but we

752
00:17:31,110 --> 00:17:31,120
possible to program in this style but we
 

753
00:17:31,120 --> 00:17:33,570
possible to program in this style but we
could definitely hope for behavior from

754
00:17:33,570 --> 00:17:33,580
could definitely hope for behavior from
 

755
00:17:33,580 --> 00:17:35,460
could definitely hope for behavior from
the storage system that's more intuitive

756
00:17:35,460 --> 00:17:35,470
the storage system that's more intuitive
 

757
00:17:35,470 --> 00:17:37,020
the storage system that's more intuitive
than this that would make the

758
00:17:37,020 --> 00:17:37,030
than this that would make the
 

759
00:17:37,030 --> 00:17:40,799
than this that would make the
programmers lie life easier sort of we

760
00:17:40,799 --> 00:17:40,809
programmers lie life easier sort of we
 

761
00:17:40,809 --> 00:17:42,570
programmers lie life easier sort of we
could imagine systems that have fewer

762
00:17:42,570 --> 00:17:42,580
could imagine systems that have fewer
 

763
00:17:42,580 --> 00:17:46,640
could imagine systems that have fewer
anomalies then yes very simple

764
00:17:46,640 --> 00:17:46,650
anomalies then yes very simple
 

765
00:17:46,650 --> 00:17:50,250
anomalies then yes very simple
eventually consistent system okay before

766
00:17:50,250 --> 00:17:50,260
eventually consistent system okay before
 

767
00:17:50,260 --> 00:17:54,299
eventually consistent system okay before
I go on to talking about how to maybe

768
00:17:54,299 --> 00:17:54,309
I go on to talking about how to maybe
 

769
00:17:54,309 --> 00:17:56,130
I go on to talking about how to maybe
make the consistency a little bit better

770
00:17:56,130 --> 00:17:56,140
make the consistency a little bit better
 

771
00:17:56,140 --> 00:17:59,220
make the consistency a little bit better
I want to discuss something important I

772
00:17:59,220 --> 00:17:59,230
I want to discuss something important I
 

773
00:17:59,230 --> 00:18:01,020
I want to discuss something important I
left out about this current eventual

774
00:18:01,020 --> 00:18:01,030
left out about this current eventual
 

775
00:18:01,030 --> 00:18:02,850
left out about this current eventual
consistency system and that's how to

776
00:18:02,850 --> 00:18:02,860
consistency system and that's how to
 

777
00:18:02,860 --> 00:18:07,820
consistency system and that's how to
decide on which right is most recent so

778
00:18:07,820 --> 00:18:07,830
decide on which right is most recent so
 

779
00:18:07,830 --> 00:18:12,299
decide on which right is most recent so
for some data if data might ever be

780
00:18:12,299 --> 00:18:12,309
for some data if data might ever be
 

781
00:18:12,309 --> 00:18:15,600
for some data if data might ever be
written by more than one party there's

782
00:18:15,600 --> 00:18:15,610
written by more than one party there's
 

783
00:18:15,610 --> 00:18:20,070
written by more than one party there's
the possibility that we might have to

784
00:18:20,070 --> 00:18:20,080
the possibility that we might have to
 

785
00:18:20,080 --> 00:18:22,350
the possibility that we might have to
decide which data item is newer so

786
00:18:22,350 --> 00:18:22,360
decide which data item is newer so
 

787
00:18:22,360 --> 00:18:27,310
decide which data item is newer so
suppose we have some key or call okay

788
00:18:27,310 --> 00:18:27,320
suppose we have some key or call okay
 

789
00:18:27,320 --> 00:18:32,410
suppose we have some key or call okay
and to rights for it you know to clients

790
00:18:32,410 --> 00:18:32,420
and to rights for it you know to clients
 

791
00:18:32,420 --> 00:18:35,110
and to rights for it you know to clients
launch rates for K so when client writes

792
00:18:35,110 --> 00:18:35,120
launch rates for K so when client writes
 

793
00:18:35,120 --> 00:18:36,940
launch rates for K so when client writes
a value one another client writes a

794
00:18:36,940 --> 00:18:36,950
a value one another client writes a
 

795
00:18:36,950 --> 00:18:42,340
a value one another client writes a
value of two we need to set up a system

796
00:18:42,340 --> 00:18:42,350
value of two we need to set up a system
 

797
00:18:42,350 --> 00:18:46,030
value of two we need to set up a system
so that all three data centers agree on

798
00:18:46,030 --> 00:18:46,040
so that all three data centers agree on
 

799
00:18:46,040 --> 00:18:50,560
so that all three data centers agree on
what the final value of key K is because

800
00:18:50,560 --> 00:18:50,570
what the final value of key K is because
 

801
00:18:50,570 --> 00:18:51,760
what the final value of key K is because
after all we're at least guaranteeing

802
00:18:51,760 --> 00:18:51,770
after all we're at least guaranteeing
 

803
00:18:51,770 --> 00:18:53,230
after all we're at least guaranteeing
eventual consistency when the dust

804
00:18:53,230 --> 00:18:53,240
eventual consistency when the dust
 

805
00:18:53,240 --> 00:18:55,600
eventual consistency when the dust
settles all the data centers all have

806
00:18:55,600 --> 00:18:55,610
settles all the data centers all have
 

807
00:18:55,610 --> 00:18:58,510
settles all the data centers all have
the same data so you know data center

808
00:18:58,510 --> 00:18:58,520
the same data so you know data center
 

809
00:18:58,520 --> 00:19:01,120
the same data so you know data center
three is gonna get these two rights and

810
00:19:01,120 --> 00:19:01,130
three is gonna get these two rights and
 

811
00:19:01,130 --> 00:19:02,500
three is gonna get these two rights and
it's gonna pick one of them as the final

812
00:19:02,500 --> 00:19:02,510
it's gonna pick one of them as the final
 

813
00:19:02,510 --> 00:19:06,100
it's gonna pick one of them as the final
value for K well of course um datacenter

814
00:19:06,100 --> 00:19:06,110
value for K well of course um datacenter
 

815
00:19:06,110 --> 00:19:08,080
value for K well of course um datacenter
- sees the same rights right it sees its

816
00:19:08,080 --> 00:19:08,090
- sees the same rights right it sees its
 

817
00:19:08,090 --> 00:19:13,450
- sees the same rights right it sees its
own right so they're all seeing this

818
00:19:13,450 --> 00:19:13,460
own right so they're all seeing this
 

819
00:19:13,460 --> 00:19:14,800
own right so they're all seeing this
pair breaks and they all had better make

820
00:19:14,800 --> 00:19:14,810
pair breaks and they all had better make
 

821
00:19:14,810 --> 00:19:18,460
pair breaks and they all had better make
the same decision about which one that'd

822
00:19:18,460 --> 00:19:18,470
the same decision about which one that'd
 

823
00:19:18,470 --> 00:19:20,770
the same decision about which one that'd
be the final value regardless and the

824
00:19:20,770 --> 00:19:20,780
be the final value regardless and the
 

825
00:19:20,780 --> 00:19:22,960
be the final value regardless and the
order that they arrived in right because

826
00:19:22,960 --> 00:19:22,970
order that they arrived in right because
 

827
00:19:22,970 --> 00:19:26,140
order that they arrived in right because
we don't know you know the data center

828
00:19:26,140 --> 00:19:26,150
we don't know you know the data center
 

829
00:19:26,150 --> 00:19:28,030
we don't know you know the data center
three may observe these to arrive in one

830
00:19:28,030 --> 00:19:28,040
three may observe these to arrive in one
 

831
00:19:28,040 --> 00:19:29,800
three may observe these to arrive in one
order and some other data center may

832
00:19:29,800 --> 00:19:29,810
order and some other data center may
 

833
00:19:29,810 --> 00:19:31,720
order and some other data center may
observe them to arrive in a different

834
00:19:31,720 --> 00:19:31,730
observe them to arrive in a different
 

835
00:19:31,730 --> 00:19:33,910
observe them to arrive in a different
order we can't just accept the second

836
00:19:33,910 --> 00:19:33,920
order we can't just accept the second
 

837
00:19:33,920 --> 00:19:35,380
order we can't just accept the second
one and have that be the final value

838
00:19:35,380 --> 00:19:35,390
one and have that be the final value
 

839
00:19:35,390 --> 00:19:38,230
one and have that be the final value
meet a more robust scheme for deciding

840
00:19:38,230 --> 00:19:38,240
meet a more robust scheme for deciding
 

841
00:19:38,240 --> 00:19:42,160
meet a more robust scheme for deciding
what the final the most recent value is

842
00:19:42,160 --> 00:19:42,170
what the final the most recent value is
 

843
00:19:42,170 --> 00:19:46,540
what the final the most recent value is
for a key so we're gonna need some

844
00:19:46,540 --> 00:19:46,550
for a key so we're gonna need some
 

845
00:19:46,550 --> 00:19:50,590
for a key so we're gonna need some
notion of version numbers and the the

846
00:19:50,590 --> 00:19:50,600
notion of version numbers and the the
 

847
00:19:50,600 --> 00:19:52,330
notion of version numbers and the the
most straightforward way to sign version

848
00:19:52,330 --> 00:19:52,340
most straightforward way to sign version
 

849
00:19:52,340 --> 00:19:58,170
most straightforward way to sign version
numbers is to use the wall clock time so

850
00:19:58,170 --> 00:19:58,180
numbers is to use the wall clock time so
 

851
00:19:58,180 --> 00:20:01,510
numbers is to use the wall clock time so
so why not wall clock time and the idea

852
00:20:01,510 --> 00:20:01,520
so why not wall clock time and the idea
 

853
00:20:01,520 --> 00:20:04,300
so why not wall clock time and the idea
is that when a what a client generates a

854
00:20:04,300 --> 00:20:04,310
is that when a what a client generates a
 

855
00:20:04,310 --> 00:20:07,480
is that when a what a client generates a
put either it or the shard server the

856
00:20:07,480 --> 00:20:07,490
put either it or the shard server the
 

857
00:20:07,490 --> 00:20:09,610
put either it or the shard server the
local chart server talks to will look at

858
00:20:09,610 --> 00:20:09,620
local chart server talks to will look at
 

859
00:20:09,620 --> 00:20:12,240
local chart server talks to will look at
the current time oh it's you know it's

860
00:20:12,240 --> 00:20:12,250
the current time oh it's you know it's
 

861
00:20:12,250 --> 00:20:15,310
the current time oh it's you know it's
125 right now and it'll sort of

862
00:20:15,310 --> 00:20:15,320
125 right now and it'll sort of
 

863
00:20:15,320 --> 00:20:17,730
125 right now and it'll sort of
associate that time as a version number

864
00:20:17,730 --> 00:20:17,740
associate that time as a version number
 

865
00:20:17,740 --> 00:20:20,110
associate that time as a version number
on its version of the key so then we'd

866
00:20:20,110 --> 00:20:20,120
on its version of the key so then we'd
 

867
00:20:20,120 --> 00:20:25,050
on its version of the key so then we'd
annotate these these write messages

868
00:20:25,050 --> 00:20:25,060
annotate these these write messages
 

869
00:20:25,060 --> 00:20:28,570
annotate these these write messages
these actually both store the timestamp

870
00:20:28,570 --> 00:20:28,580
these actually both store the timestamp
 

871
00:20:28,580 --> 00:20:30,460
these actually both store the timestamp
in the database and annotate these write

872
00:20:30,460 --> 00:20:30,470
in the database and annotate these write
 

873
00:20:30,470 --> 00:20:33,130
in the database and annotate these write
messages sent between data centers with

874
00:20:33,130 --> 00:20:33,140
messages sent between data centers with
 

875
00:20:33,140 --> 00:20:35,350
messages sent between data centers with
the time so you know maybe this one was

876
00:20:35,350 --> 00:20:35,360
the time so you know maybe this one was
 

877
00:20:35,360 --> 00:20:37,960
the time so you know maybe this one was
written at 102 and this right occurred

878
00:20:37,960 --> 00:20:37,970
written at 102 and this right occurred
 

879
00:20:37,970 --> 00:20:41,039
written at 102 and this right occurred
at 103

880
00:20:41,039 --> 00:20:41,049

 

881
00:20:41,049 --> 00:20:47,399

and so if if 102 writer or suppose the

882
00:20:47,399 --> 00:20:47,409
and so if if 102 writer or suppose the
 

883
00:20:47,409 --> 00:20:49,259
and so if if 102 writer or suppose the
one of three right arrives first then

884
00:20:49,259 --> 00:20:49,269
one of three right arrives first then
 

885
00:20:49,269 --> 00:20:51,269
one of three right arrives first then
the data center three will put in its

886
00:20:51,269 --> 00:20:51,279
the data center three will put in its
 

887
00:20:51,279 --> 00:20:56,129
the data center three will put in its
database this key and the timestamp one

888
00:20:56,129 --> 00:20:56,139
database this key and the timestamp one
 

889
00:20:56,139 --> 00:20:56,899
database this key and the timestamp one
two three

890
00:20:56,899 --> 00:20:56,909
two three
 

891
00:20:56,909 --> 00:21:00,060
two three
and when the right for 102 arrives the

892
00:21:00,060 --> 00:21:00,070
and when the right for 102 arrives the
 

893
00:21:00,070 --> 00:21:01,340
and when the right for 102 arrives the
standard Center will say oh actually

894
00:21:01,340 --> 00:21:01,350
standard Center will say oh actually
 

895
00:21:01,350 --> 00:21:04,259
standard Center will say oh actually
that's an older right I'm just gonna

896
00:21:04,259 --> 00:21:04,269
that's an older right I'm just gonna
 

897
00:21:04,269 --> 00:21:05,879
that's an older right I'm just gonna
ignore this right because it has a lower

898
00:21:05,879 --> 00:21:05,889
ignore this right because it has a lower
 

899
00:21:05,889 --> 00:21:08,009
ignore this right because it has a lower
timestamp and the time step I already

900
00:21:08,009 --> 00:21:08,019
timestamp and the time step I already
 

901
00:21:08,019 --> 00:21:09,450
timestamp and the time step I already
have and of course if they arrive and

902
00:21:09,450 --> 00:21:09,460
have and of course if they arrive and
 

903
00:21:09,460 --> 00:21:11,909
have and of course if they arrive and
the other order did a sentence we would

904
00:21:11,909 --> 00:21:11,919
the other order did a sentence we would
 

905
00:21:11,919 --> 00:21:13,379
the other order did a sentence we would
have actually stored this right briefly

906
00:21:13,379 --> 00:21:13,389
have actually stored this right briefly
 

907
00:21:13,389 --> 00:21:16,229
have actually stored this right briefly
until the right with the higher

908
00:21:16,229 --> 00:21:16,239
until the right with the higher
 

909
00:21:16,239 --> 00:21:17,489
until the right with the higher
timestamp arrived but then it would

910
00:21:17,489 --> 00:21:17,499
timestamp arrived but then it would
 

911
00:21:17,499 --> 00:21:19,379
timestamp arrived but then it would
replace it I mean since everybody sees

912
00:21:19,379 --> 00:21:19,389
replace it I mean since everybody sees
 

913
00:21:19,389 --> 00:21:22,830
replace it I mean since everybody sees
it some time stamps at least you know

914
00:21:22,830 --> 00:21:22,840
it some time stamps at least you know
 

915
00:21:22,840 --> 00:21:24,599
it some time stamps at least you know
when they finally receive whatever all

916
00:21:24,599 --> 00:21:24,609
when they finally receive whatever all
 

917
00:21:24,609 --> 00:21:26,940
when they finally receive whatever all
these great messages over the Internet

918
00:21:26,940 --> 00:21:26,950
these great messages over the Internet
 

919
00:21:26,950 --> 00:21:29,279
these great messages over the Internet
they're all gonna end up with the

920
00:21:29,279 --> 00:21:29,289
they're all gonna end up with the
 

921
00:21:29,289 --> 00:21:32,749
they're all gonna end up with the
databases that have the highest numbered

922
00:21:32,749 --> 00:21:32,759
databases that have the highest numbered
 

923
00:21:32,759 --> 00:21:39,590
databases that have the highest numbered
values okay so this almost works and

924
00:21:39,590 --> 00:21:39,600
values okay so this almost works and
 

925
00:21:39,600 --> 00:21:42,149
values okay so this almost works and
there's two there's two little problems

926
00:21:42,149 --> 00:21:42,159
there's two there's two little problems
 

927
00:21:42,159 --> 00:21:47,879
there's two there's two little problems
with it one is that the two data centers

928
00:21:47,879 --> 00:21:47,889
with it one is that the two data centers
 

929
00:21:47,889 --> 00:21:49,349
with it one is that the two data centers
if they do writes at the same time may

930
00:21:49,349 --> 00:21:49,359
if they do writes at the same time may
 

931
00:21:49,359 --> 00:21:50,999
if they do writes at the same time may
actually assign this little time stamp

932
00:21:50,999 --> 00:21:51,009
actually assign this little time stamp
 

933
00:21:51,009 --> 00:21:54,239
actually assign this little time stamp
this is relatively easy to solve and the

934
00:21:54,239 --> 00:21:54,249
this is relatively easy to solve and the
 

935
00:21:54,249 --> 00:21:57,180
this is relatively easy to solve and the
way it's typically done is the time

936
00:21:57,180 --> 00:21:57,190
way it's typically done is the time
 

937
00:21:57,190 --> 00:22:00,180
way it's typically done is the time
stamps are actually pairs of time or

938
00:22:00,180 --> 00:22:00,190
stamps are actually pairs of time or
 

939
00:22:00,190 --> 00:22:02,070
stamps are actually pairs of time or
whatever and the High bits essentially

940
00:22:02,070 --> 00:22:02,080
whatever and the High bits essentially
 

941
00:22:02,080 --> 00:22:04,950
whatever and the High bits essentially
hand some sort of identifier could

942
00:22:04,950 --> 00:22:04,960
hand some sort of identifier could
 

943
00:22:04,960 --> 00:22:06,389
hand some sort of identifier could
actually be almost anything as long as

944
00:22:06,389 --> 00:22:06,399
actually be almost anything as long as
 

945
00:22:06,399 --> 00:22:08,430
actually be almost anything as long as
it's unique some sort of identifier like

946
00:22:08,430 --> 00:22:08,440
it's unique some sort of identifier like
 

947
00:22:08,440 --> 00:22:11,759
it's unique some sort of identifier like
the data center name or ID or something

948
00:22:11,759 --> 00:22:11,769
the data center name or ID or something
 

949
00:22:11,769 --> 00:22:18,210
the data center name or ID or something
in the low bits just to cause all pipe

950
00:22:18,210 --> 00:22:18,220
in the low bits just to cause all pipe
 

951
00:22:18,220 --> 00:22:19,590
in the low bits just to cause all pipe
signs from different data centers or

952
00:22:19,590 --> 00:22:19,600
signs from different data centers or
 

953
00:22:19,600 --> 00:22:22,229
signs from different data centers or
different servers to be you want and

954
00:22:22,229 --> 00:22:22,239
different servers to be you want and
 

955
00:22:22,239 --> 00:22:23,879
different servers to be you want and
then if two rights ride with the same

956
00:22:23,879 --> 00:22:23,889
then if two rights ride with the same
 

957
00:22:23,889 --> 00:22:26,220
then if two rights ride with the same
time in them from different data centers

958
00:22:26,220 --> 00:22:26,230
time in them from different data centers
 

959
00:22:26,230 --> 00:22:28,320
time in them from different data centers
are gonna have different low bits and

960
00:22:28,320 --> 00:22:28,330
are gonna have different low bits and
 

961
00:22:28,330 --> 00:22:29,999
are gonna have different low bits and
these little bits will be used to

962
00:22:29,999 --> 00:22:30,009
these little bits will be used to
 

963
00:22:30,009 --> 00:22:33,539
these little bits will be used to
disambiguate which of the two right says

964
00:22:33,539 --> 00:22:33,549
disambiguate which of the two right says
 

965
00:22:33,549 --> 00:22:36,330
disambiguate which of the two right says
is the lower timestamp and therefore

966
00:22:36,330 --> 00:22:36,340
is the lower timestamp and therefore
 

967
00:22:36,340 --> 00:22:40,080
is the lower timestamp and therefore
should yield to the other with the

968
00:22:40,080 --> 00:22:40,090
should yield to the other with the
 

969
00:22:40,090 --> 00:22:44,729
should yield to the other with the
higher okay so we're gonna stick some

970
00:22:44,729 --> 00:22:44,739
higher okay so we're gonna stick some
 

971
00:22:44,739 --> 00:22:46,080
higher okay so we're gonna stick some
sort of ID in the bottom bits and the

972
00:22:46,080 --> 00:22:46,090
sort of ID in the bottom bits and the
 

973
00:22:46,090 --> 00:22:47,430
sort of ID in the bottom bits and the
paper actually talks about doing this

974
00:22:47,430 --> 00:22:47,440
paper actually talks about doing this
 

975
00:22:47,440 --> 00:22:50,489
paper actually talks about doing this
it's very common the other problem is

976
00:22:50,489 --> 00:22:50,499
it's very common the other problem is
 

977
00:22:50,499 --> 00:22:53,849
it's very common the other problem is
that this system works okay if all of

978
00:22:53,849 --> 00:22:53,859
that this system works okay if all of
 

979
00:22:53,859 --> 00:22:55,999
that this system works okay if all of
the data centers are exactly

980
00:22:55,999 --> 00:22:56,009
the data centers are exactly
 

981
00:22:56,009 --> 00:22:58,440
the data centers are exactly
synchronized in time and this is

982
00:22:58,440 --> 00:22:58,450
synchronized in time and this is
 

983
00:22:58,450 --> 00:23:00,330
synchronized in time and this is
something a spanner paper stressed a

984
00:23:00,330 --> 00:23:00,340
something a spanner paper stressed a
 

985
00:23:00,340 --> 00:23:02,759
something a spanner paper stressed a
great length so if the clocks on all the

986
00:23:02,759 --> 00:23:02,769
great length so if the clocks on all the
 

987
00:23:02,769 --> 00:23:04,789
great length so if the clocks on all the
servers that all the data centers agree

988
00:23:04,789 --> 00:23:04,799
servers that all the data centers agree
 

989
00:23:04,799 --> 00:23:08,460
servers that all the data centers agree
and this is gonna this is gonna be okay

990
00:23:08,460 --> 00:23:08,470
and this is gonna this is gonna be okay
 

991
00:23:08,470 --> 00:23:11,190
and this is gonna this is gonna be okay
but if the clocks are off by seconds or

992
00:23:11,190 --> 00:23:11,200
but if the clocks are off by seconds or
 

993
00:23:11,200 --> 00:23:13,019
but if the clocks are off by seconds or
maybe even minutes then we have a

994
00:23:13,019 --> 00:23:13,029
maybe even minutes then we have a
 

995
00:23:13,029 --> 00:23:16,889
maybe even minutes then we have a
serious problem here one not so

996
00:23:16,889 --> 00:23:16,899
serious problem here one not so
 

997
00:23:16,899 --> 00:23:23,399
serious problem here one not so
important problem is that rights that

998
00:23:23,399 --> 00:23:23,409
important problem is that rights that
 

999
00:23:23,409 --> 00:23:26,700
important problem is that rights that
come earlier in time you know that

1000
00:23:26,700 --> 00:23:26,710
come earlier in time you know that
 

1001
00:23:26,710 --> 00:23:28,409
come earlier in time you know that
should be overwritten by later right so

1002
00:23:28,409 --> 00:23:28,419
should be overwritten by later right so
 

1003
00:23:28,419 --> 00:23:30,869
should be overwritten by later right so
it could be the rights that came earlier

1004
00:23:30,869 --> 00:23:30,879
it could be the rights that came earlier
 

1005
00:23:30,879 --> 00:23:33,269
it could be the rights that came earlier
in real time are because the clocks are

1006
00:23:33,269 --> 00:23:33,279
in real time are because the clocks are
 

1007
00:23:33,279 --> 00:23:35,700
in real time are because the clocks are
on are assigned high time stamps and

1008
00:23:35,700 --> 00:23:35,710
on are assigned high time stamps and
 

1009
00:23:35,710 --> 00:23:38,430
on are assigned high time stamps and
therefore not superseded by rights that

1010
00:23:38,430 --> 00:23:38,440
therefore not superseded by rights that
 

1011
00:23:38,440 --> 00:23:43,470
therefore not superseded by rights that
came later in time now we never made any

1012
00:23:43,470 --> 00:23:43,480
came later in time now we never made any
 

1013
00:23:43,480 --> 00:23:45,570
came later in time now we never made any
guarantees about this ID eventual

1014
00:23:45,570 --> 00:23:45,580
guarantees about this ID eventual
 

1015
00:23:45,580 --> 00:23:49,349
guarantees about this ID eventual
consistency and we never said oh rights

1016
00:23:49,349 --> 00:23:49,359
consistency and we never said oh rights
 

1017
00:23:49,359 --> 00:23:51,710
consistency and we never said oh rights
that come later in time we're gonna win

1018
00:23:51,710 --> 00:23:51,720
that come later in time we're gonna win
 

1019
00:23:51,720 --> 00:23:58,399
that come later in time we're gonna win
over rightfully the clients nevertheless

1020
00:23:58,399 --> 00:23:58,409
over rightfully the clients nevertheless
 

1021
00:23:58,409 --> 00:24:02,879
over rightfully the clients nevertheless
we don't want to be already weak enough

1022
00:24:02,879 --> 00:24:02,889
we don't want to be already weak enough
 

1023
00:24:02,889 --> 00:24:04,830
we don't want to be already weak enough
consistency we don't want to have it

1024
00:24:04,830 --> 00:24:04,840
consistency we don't want to have it
 

1025
00:24:04,840 --> 00:24:06,529
consistency we don't want to have it
have needlessly

1026
00:24:06,529 --> 00:24:06,539
have needlessly
 

1027
00:24:06,539 --> 00:24:09,509
have needlessly
strange behavior like users really well

1028
00:24:09,509 --> 00:24:09,519
strange behavior like users really well
 

1029
00:24:09,519 --> 00:24:11,310
strange behavior like users really well
notice they eat something and then they

1030
00:24:11,310 --> 00:24:11,320
notice they eat something and then they
 

1031
00:24:11,320 --> 00:24:14,489
notice they eat something and then they
updated later doesn't seem to take

1032
00:24:14,489 --> 00:24:14,499
updated later doesn't seem to take
 

1033
00:24:14,499 --> 00:24:16,919
updated later doesn't seem to take
effect because the earlier update was

1034
00:24:16,919 --> 00:24:16,929
effect because the earlier update was
 

1035
00:24:16,929 --> 00:24:19,159
effect because the earlier update was
assigned two times thinks it's too large

1036
00:24:19,159 --> 00:24:19,169
assigned two times thinks it's too large
 

1037
00:24:19,169 --> 00:24:23,820
assigned two times thinks it's too large
in addition if some servers clock is too

1038
00:24:23,820 --> 00:24:23,830
in addition if some servers clock is too
 

1039
00:24:23,830 --> 00:24:26,159
in addition if some servers clock is too
high and it doesn't right you know if

1040
00:24:26,159 --> 00:24:26,169
high and it doesn't right you know if
 

1041
00:24:26,169 --> 00:24:29,009
high and it doesn't right you know if
it's caucus say a minute fast then it'll

1042
00:24:29,009 --> 00:24:29,019
it's caucus say a minute fast then it'll
 

1043
00:24:29,019 --> 00:24:37,379
it's caucus say a minute fast then it'll
be a whole minute when no other we have

1044
00:24:37,379 --> 00:24:37,389
be a whole minute when no other we have
 

1045
00:24:37,389 --> 00:24:38,820
be a whole minute when no other we have
to wait for all the service thoughts to

1046
00:24:38,820 --> 00:24:38,830
to wait for all the service thoughts to
 

1047
00:24:38,830 --> 00:24:41,639
to wait for all the service thoughts to
catch up to the minute fast servers

1048
00:24:41,639 --> 00:24:41,649
catch up to the minute fast servers
 

1049
00:24:41,649 --> 00:24:43,259
catch up to the minute fast servers
clock before anybody else can do the

1050
00:24:43,259 --> 00:24:43,269
clock before anybody else can do the
 

1051
00:24:43,269 --> 00:24:46,409
clock before anybody else can do the
write about heat in order to solve that

1052
00:24:46,409 --> 00:24:46,419
write about heat in order to solve that
 

1053
00:24:46,419 --> 00:24:51,299
write about heat in order to solve that
problem one way to solve that problem is

1054
00:24:51,299 --> 00:24:51,309
problem one way to solve that problem is
 

1055
00:24:51,309 --> 00:24:54,539
problem one way to solve that problem is
this idea called Lamport clocks the

1056
00:24:54,539 --> 00:24:54,549
this idea called Lamport clocks the
 

1057
00:24:54,549 --> 00:24:57,300
this idea called Lamport clocks the
paper talks about this

1058
00:24:57,300 --> 00:24:57,310
paper talks about this
 

1059
00:24:57,310 --> 00:24:59,430
paper talks about this
although the paper doesn't really say

1060
00:24:59,430 --> 00:24:59,440
although the paper doesn't really say
 

1061
00:24:59,440 --> 00:25:00,870
although the paper doesn't really say
why they use the lamp or clocks I'm

1062
00:25:00,870 --> 00:25:00,880
why they use the lamp or clocks I'm
 

1063
00:25:00,880 --> 00:25:02,880
why they use the lamp or clocks I'm
guessing it's at least partially for the

1064
00:25:02,880 --> 00:25:02,890
guessing it's at least partially for the
 

1065
00:25:02,890 --> 00:25:05,400
guessing it's at least partially for the
reason I just I don't mind

1066
00:25:05,400 --> 00:25:05,410
reason I just I don't mind
 

1067
00:25:05,410 --> 00:25:08,760
reason I just I don't mind
Flambeau clock is Wade assigned time

1068
00:25:08,760 --> 00:25:08,770
Flambeau clock is Wade assigned time
 

1069
00:25:08,770 --> 00:25:12,090
Flambeau clock is Wade assigned time
stamps that are related to real time but

1070
00:25:12,090 --> 00:25:12,100
stamps that are related to real time but
 

1071
00:25:12,100 --> 00:25:14,550
stamps that are related to real time but
which hope would this problem at some

1072
00:25:14,550 --> 00:25:14,560
which hope would this problem at some
 

1073
00:25:14,560 --> 00:25:16,080
which hope would this problem at some
servers having clocks that are running

1074
00:25:16,080 --> 00:25:16,090
servers having clocks that are running
 

1075
00:25:16,090 --> 00:25:22,350
servers having clocks that are running
too fast so every server keeps a value

1076
00:25:22,350 --> 00:25:22,360
too fast so every server keeps a value
 

1077
00:25:22,360 --> 00:25:26,790
too fast so every server keeps a value
called this T max which is the highest

1078
00:25:26,790 --> 00:25:26,800
called this T max which is the highest
 

1079
00:25:26,800 --> 00:25:28,560
called this T max which is the highest
version number it seems so far from

1080
00:25:28,560 --> 00:25:28,570
version number it seems so far from
 

1081
00:25:28,570 --> 00:25:34,380
version number it seems so far from
anywhere else so

1082
00:25:34,380 --> 00:25:34,390

 

1083
00:25:34,390 --> 00:25:36,460

so if somebody else is generating

1084
00:25:36,460 --> 00:25:36,470
so if somebody else is generating
 

1085
00:25:36,470 --> 00:25:37,899
so if somebody else is generating
timestamps that are you know ahead of

1086
00:25:37,899 --> 00:25:37,909
timestamps that are you know ahead of
 

1087
00:25:37,909 --> 00:25:40,029
timestamps that are you know ahead of
real-time you know the other servers to

1088
00:25:40,029 --> 00:25:40,039
real-time you know the other servers to
 

1089
00:25:40,039 --> 00:25:41,590
real-time you know the other servers to
see this timestamps their team axes will

1090
00:25:41,590 --> 00:25:41,600
see this timestamps their team axes will
 

1091
00:25:41,600 --> 00:25:46,180
see this timestamps their team axes will
reflect ahead of real time and then when

1092
00:25:46,180 --> 00:25:46,190
reflect ahead of real time and then when
 

1093
00:25:46,190 --> 00:25:48,490
reflect ahead of real time and then when
a server needs to assign a timestamp of

1094
00:25:48,490 --> 00:25:48,500
a server needs to assign a timestamp of
 

1095
00:25:48,500 --> 00:25:52,840
a server needs to assign a timestamp of
version number to a new put the way it

1096
00:25:52,840 --> 00:25:52,850
version number to a new put the way it
 

1097
00:25:52,850 --> 00:25:56,490
version number to a new put the way it
will do that is it'll take the max of

1098
00:25:56,490 --> 00:25:56,500
will do that is it'll take the max of
 

1099
00:25:56,500 --> 00:26:03,340
will do that is it'll take the max of
this team ax plus one and the wall clock

1100
00:26:03,340 --> 00:26:03,350
this team ax plus one and the wall clock
 

1101
00:26:03,350 --> 00:26:05,840
this team ax plus one and the wall clock
time

1102
00:26:05,840 --> 00:26:05,850

 

1103
00:26:05,850 --> 00:26:10,009

the real-time so that means that new

1104
00:26:10,009 --> 00:26:10,019
the real-time so that means that new
 

1105
00:26:10,019 --> 00:26:13,340
the real-time so that means that new
version number so this is the version

1106
00:26:13,340 --> 00:26:13,350
version number so this is the version
 

1107
00:26:13,350 --> 00:26:16,460
version number so this is the version
numbers that we need to accompany the

1108
00:26:16,460 --> 00:26:16,470
numbers that we need to accompany the
 

1109
00:26:16,470 --> 00:26:18,369
numbers that we need to accompany the
values in our venturi consistent system

1110
00:26:18,369 --> 00:26:18,379
values in our venturi consistent system
 

1111
00:26:18,379 --> 00:26:20,899
values in our venturi consistent system
so each new version number is going to

1112
00:26:20,899 --> 00:26:20,909
so each new version number is going to
 

1113
00:26:20,909 --> 00:26:22,639
so each new version number is going to
be higher than the highest version

1114
00:26:22,639 --> 00:26:22,649
be higher than the highest version
 

1115
00:26:22,649 --> 00:26:26,060
be higher than the highest version
number seen so higher than whatever the

1116
00:26:26,060 --> 00:26:26,070
number seen so higher than whatever the
 

1117
00:26:26,070 --> 00:26:28,849
number seen so higher than whatever the
last Rite was for example to the data

1118
00:26:28,849 --> 00:26:28,859
last Rite was for example to the data
 

1119
00:26:28,859 --> 00:26:31,549
last Rite was for example to the data
that we're updating and at least as high

1120
00:26:31,549 --> 00:26:31,559
that we're updating and at least as high
 

1121
00:26:31,559 --> 00:26:35,359
that we're updating and at least as high
as real-time so if nobody's clock is

1122
00:26:35,359 --> 00:26:35,369
as real-time so if nobody's clock is
 

1123
00:26:35,369 --> 00:26:37,190
as real-time so if nobody's clock is
ahead this Tmax plus one will probably

1124
00:26:37,190 --> 00:26:37,200
ahead this Tmax plus one will probably
 

1125
00:26:37,200 --> 00:26:38,989
ahead this Tmax plus one will probably
actually be smaller than real time and

1126
00:26:38,989 --> 00:26:38,999
actually be smaller than real time and
 

1127
00:26:38,999 --> 00:26:41,450
actually be smaller than real time and
the time stamp tool end up in real time

1128
00:26:41,450 --> 00:26:41,460
the time stamp tool end up in real time
 

1129
00:26:41,460 --> 00:26:43,969
the time stamp tool end up in real time
if some server has a crazy clock that's

1130
00:26:43,969 --> 00:26:43,979
if some server has a crazy clock that's
 

1131
00:26:43,979 --> 00:26:46,159
if some server has a crazy clock that's
too fast then that will cause all other

1132
00:26:46,159 --> 00:26:46,169
too fast then that will cause all other
 

1133
00:26:46,169 --> 00:26:48,769
too fast then that will cause all other
servers all the ones it's updates

1134
00:26:48,769 --> 00:26:48,779
servers all the ones it's updates
 

1135
00:26:48,779 --> 00:26:51,799
servers all the ones it's updates
advanced the team axes so that when they

1136
00:26:51,799 --> 00:26:51,809
advanced the team axes so that when they
 

1137
00:26:51,809 --> 00:26:53,690
advanced the team axes so that when they
allocate new version numbers higher than

1138
00:26:53,690 --> 00:26:53,700
allocate new version numbers higher than
 

1139
00:26:53,700 --> 00:26:56,869
allocate new version numbers higher than
the version number of whatever ladies

1140
00:26:56,869 --> 00:26:56,879
the version number of whatever ladies
 

1141
00:26:56,879 --> 00:26:58,909
the version number of whatever ladies
rate they saw from the server whose

1142
00:26:58,909 --> 00:26:58,919
rate they saw from the server whose
 

1143
00:26:58,919 --> 00:27:03,859
rate they saw from the server whose
clock is too fast okay so this is

1144
00:27:03,859 --> 00:27:03,869
clock is too fast okay so this is
 

1145
00:27:03,869 --> 00:27:08,710
clock is too fast okay so this is
Lampert clocks and this is how the paper

1146
00:27:08,710 --> 00:27:08,720
Lampert clocks and this is how the paper
 

1147
00:27:08,720 --> 00:27:11,210
Lampert clocks and this is how the paper
assigns version numbers come up all the

1148
00:27:11,210 --> 00:27:11,220
assigns version numbers come up all the
 

1149
00:27:11,220 --> 00:27:16,219
assigns version numbers come up all the
time in distributed systems alright so

1150
00:27:16,219 --> 00:27:16,229
time in distributed systems alright so
 

1151
00:27:16,229 --> 00:27:18,349
time in distributed systems alright so
another problem I want to bring up about

1152
00:27:18,349 --> 00:27:18,359
another problem I want to bring up about
 

1153
00:27:18,359 --> 00:27:25,219
another problem I want to bring up about
our eventually consistent system is the

1154
00:27:25,219 --> 00:27:25,229
our eventually consistent system is the
 

1155
00:27:25,229 --> 00:27:27,889
our eventually consistent system is the
problem of what to do about concurrent

1156
00:27:27,889 --> 00:27:27,899
problem of what to do about concurrent
 

1157
00:27:27,899 --> 00:27:32,629
problem of what to do about concurrent
rates to the same key it's actually even

1158
00:27:32,629 --> 00:27:32,639
rates to the same key it's actually even
 

1159
00:27:32,639 --> 00:27:35,869
rates to the same key it's actually even
worse the possibility that concurrent

1160
00:27:35,869 --> 00:27:35,879
worse the possibility that concurrent
 

1161
00:27:35,879 --> 00:27:38,599
worse the possibility that concurrent
rates might carry might both carry

1162
00:27:38,599 --> 00:27:38,609
rates might carry might both carry
 

1163
00:27:38,609 --> 00:27:40,690
rates might carry might both carry
important information that ought to be

1164
00:27:40,690 --> 00:27:40,700
important information that ought to be
 

1165
00:27:40,700 --> 00:27:49,789
important information that ought to be
preserved so for exam a client of both

1166
00:27:49,789 --> 00:27:49,799
preserved so for exam a client of both
 

1167
00:27:49,799 --> 00:27:51,289
preserved so for exam a client of both
did both of these you know different

1168
00:27:51,289 --> 00:27:51,299
did both of these you know different
 

1169
00:27:51,299 --> 00:27:54,469
did both of these you know different
clients client one and client - they

1170
00:27:54,469 --> 00:27:54,479
clients client one and client - they
 

1171
00:27:54,479 --> 00:28:04,360
clients client one and client - they
both issue a put to the same key

1172
00:28:04,360 --> 00:28:04,370

 

1173
00:28:04,370 --> 00:28:09,860

and both of these let's get sent it to

1174
00:28:09,860 --> 00:28:09,870
and both of these let's get sent it to
 

1175
00:28:09,870 --> 00:28:14,180
and both of these let's get sent it to
datacenter 3 the question is what's a

1176
00:28:14,180 --> 00:28:14,190
datacenter 3 the question is what's a
 

1177
00:28:14,190 --> 00:28:16,490
datacenter 3 the question is what's a
data center 3 do about the information

1178
00:28:16,490 --> 00:28:16,500
data center 3 do about the information
 

1179
00:28:16,500 --> 00:28:24,049
data center 3 do about the information
here and the information here this is a

1180
00:28:24,049 --> 00:28:24,059
here and the information here this is a
 

1181
00:28:24,059 --> 00:28:25,370
here and the information here this is a
real puzzle actually there's not a good

1182
00:28:25,370 --> 00:28:25,380
real puzzle actually there's not a good
 

1183
00:28:25,380 --> 00:28:26,419
real puzzle actually there's not a good
answer

1184
00:28:26,419 --> 00:28:26,429
answer
 

1185
00:28:26,429 --> 00:28:28,669
answer
the what the paper uses is the last

1186
00:28:28,669 --> 00:28:28,679
the what the paper uses is the last
 

1187
00:28:28,679 --> 00:28:30,560
the what the paper uses is the last
Raider wins that is datacenter 3 he's

1188
00:28:30,560 --> 00:28:30,570
Raider wins that is datacenter 3 he's
 

1189
00:28:30,570 --> 00:28:32,570
Raider wins that is datacenter 3 he's
gonna look at the version number that is

1190
00:28:32,570 --> 00:28:32,580
gonna look at the version number that is
 

1191
00:28:32,580 --> 00:28:33,860
gonna look at the version number that is
signed here and the version number is

1192
00:28:33,860 --> 00:28:33,870
signed here and the version number is
 

1193
00:28:33,870 --> 00:28:35,919
signed here and the version number is
assigned here one of them will be higher

1194
00:28:35,919 --> 00:28:35,929
assigned here one of them will be higher
 

1195
00:28:35,929 --> 00:28:39,590
assigned here one of them will be higher
slightly later in time data center ID

1196
00:28:39,590 --> 00:28:39,600
slightly later in time data center ID
 

1197
00:28:39,600 --> 00:28:41,690
slightly later in time data center ID
and a little bit higher or something I'm

1198
00:28:41,690 --> 00:28:41,700
and a little bit higher or something I'm
 

1199
00:28:41,700 --> 00:28:44,390
and a little bit higher or something I'm
a datacenter 3 you will simply throw

1200
00:28:44,390 --> 00:28:44,400
a datacenter 3 you will simply throw
 

1201
00:28:44,400 --> 00:28:47,480
a datacenter 3 you will simply throw
away the data with the lower timestamp

1202
00:28:47,480 --> 00:28:47,490
away the data with the lower timestamp
 

1203
00:28:47,490 --> 00:28:49,340
away the data with the lower timestamp
and accept the data with the higher

1204
00:28:49,340 --> 00:28:49,350
and accept the data with the higher
 

1205
00:28:49,350 --> 00:28:51,740
and accept the data with the higher
pants that stampin and that's it so it's

1206
00:28:51,740 --> 00:28:51,750
pants that stampin and that's it so it's
 

1207
00:28:51,750 --> 00:28:58,690
pants that stampin and that's it so it's
using this last Raider wins policy and

1208
00:28:58,690 --> 00:28:58,700
using this last Raider wins policy and
 

1209
00:28:58,700 --> 00:29:03,850
using this last Raider wins policy and
in that has the virtue that it's

1210
00:29:03,850 --> 00:29:03,860
in that has the virtue that it's
 

1211
00:29:03,860 --> 00:29:05,720
in that has the virtue that it's
deterministic and everybody's gonna get

1212
00:29:05,720 --> 00:29:05,730
deterministic and everybody's gonna get
 

1213
00:29:05,730 --> 00:29:13,880
deterministic and everybody's gonna get
the same answer you can think of

1214
00:29:13,880 --> 00:29:13,890
the same answer you can think of
 

1215
00:29:13,890 --> 00:29:17,060
the same answer you can think of
examples in which it's people so you

1216
00:29:17,060 --> 00:29:17,070
examples in which it's people so you
 

1217
00:29:17,070 --> 00:29:18,260
examples in which it's people so you
know for example supposing what these

1218
00:29:18,260 --> 00:29:18,270
know for example supposing what these
 

1219
00:29:18,270 --> 00:29:20,870
know for example supposing what these
puts are trying to do is increment a

1220
00:29:20,870 --> 00:29:20,880
puts are trying to do is increment a
 

1221
00:29:20,880 --> 00:29:24,890
puts are trying to do is increment a
counter so these clients both saw near

1222
00:29:24,890 --> 00:29:24,900
counter so these clients both saw near
 

1223
00:29:24,900 --> 00:29:27,799
counter so these clients both saw near
the counter with value 10 they both had

1224
00:29:27,799 --> 00:29:27,809
the counter with value 10 they both had
 

1225
00:29:27,809 --> 00:29:30,710
the counter with value 10 they both had
one and maybe we've put 11 right and but

1226
00:29:30,710 --> 00:29:30,720
one and maybe we've put 11 right and but
 

1227
00:29:30,720 --> 00:29:32,120
one and maybe we've put 11 right and but
you know what we really wanted to do is

1228
00:29:32,120 --> 00:29:32,130
you know what we really wanted to do is
 

1229
00:29:32,130 --> 00:29:33,860
you know what we really wanted to do is
have them both increment the counter and

1230
00:29:33,860 --> 00:29:33,870
have them both increment the counter and
 

1231
00:29:33,870 --> 00:29:35,060
have them both increment the counter and
have it had value 12

1232
00:29:35,060 --> 00:29:35,070
have it had value 12
 

1233
00:29:35,070 --> 00:29:37,940
have it had value 12
so in that case last Raider wins is

1234
00:29:37,940 --> 00:29:37,950
so in that case last Raider wins is
 

1235
00:29:37,950 --> 00:29:39,590
so in that case last Raider wins is
really not that great what we really

1236
00:29:39,590 --> 00:29:39,600
really not that great what we really
 

1237
00:29:39,600 --> 00:29:41,090
really not that great what we really
would have wanted was for datacenter 3

1238
00:29:41,090 --> 00:29:41,100
would have wanted was for datacenter 3
 

1239
00:29:41,100 --> 00:29:43,340
would have wanted was for datacenter 3
to sort of combine this increment and

1240
00:29:43,340 --> 00:29:43,350
to sort of combine this increment and
 

1241
00:29:43,350 --> 00:29:46,130
to sort of combine this increment and
that increment end up with the value of

1242
00:29:46,130 --> 00:29:46,140
that increment end up with the value of
 

1243
00:29:46,140 --> 00:29:53,919
that increment end up with the value of
12 so you know these systems are really

1244
00:29:53,919 --> 00:29:53,929
12 so you know these systems are really
 

1245
00:29:53,929 --> 00:29:58,149
12 so you know these systems are really
generally powerful enough to do that but

1246
00:29:58,149 --> 00:29:58,159
generally powerful enough to do that but
 

1247
00:29:58,159 --> 00:30:01,190
generally powerful enough to do that but
we would like better what we'd really

1248
00:30:01,190 --> 00:30:01,200
we would like better what we'd really
 

1249
00:30:01,200 --> 00:30:05,350
we would like better what we'd really
like is more sophisticated conflict

1250
00:30:05,350 --> 00:30:05,360
like is more sophisticated conflict
 

1251
00:30:05,360 --> 00:30:08,850
like is more sophisticated conflict
resolution

1252
00:30:08,850 --> 00:30:08,860

 

1253
00:30:08,860 --> 00:30:10,430

you

1254
00:30:10,430 --> 00:30:10,440
you
 

1255
00:30:10,440 --> 00:30:13,639
you
and the way other systems we've seen saw

1256
00:30:13,639 --> 00:30:13,649
and the way other systems we've seen saw
 

1257
00:30:13,649 --> 00:30:15,860
and the way other systems we've seen saw
this the most powerful system to support

1258
00:30:15,860 --> 00:30:15,870
this the most powerful system to support
 

1259
00:30:15,870 --> 00:30:20,810
this the most powerful system to support
real transactions so instead of instead

1260
00:30:20,810 --> 00:30:20,820
real transactions so instead of instead
 

1261
00:30:20,820 --> 00:30:22,009
real transactions so instead of instead
of just having put in get it actually

1262
00:30:22,009 --> 00:30:22,019
of just having put in get it actually
 

1263
00:30:22,019 --> 00:30:24,369
of just having put in get it actually
has increment operators that do atomic

1264
00:30:24,369 --> 00:30:24,379
has increment operators that do atomic
 

1265
00:30:24,379 --> 00:30:27,860
has increment operators that do atomic
transactional increments increments

1266
00:30:27,860 --> 00:30:27,870
transactional increments increments
 

1267
00:30:27,870 --> 00:30:30,259
transactional increments increments
weren't lost and that's sort of a

1268
00:30:30,259 --> 00:30:30,269
weren't lost and that's sort of a
 

1269
00:30:30,269 --> 00:30:32,269
weren't lost and that's sort of a
transactions of maybe the most powerful

1270
00:30:32,269 --> 00:30:32,279
transactions of maybe the most powerful
 

1271
00:30:32,279 --> 00:30:35,749
transactions of maybe the most powerful
way of doing resolving conflicting

1272
00:30:35,749 --> 00:30:35,759
way of doing resolving conflicting
 

1273
00:30:35,759 --> 00:30:38,240
way of doing resolving conflicting
updates we've also seen some systems

1274
00:30:38,240 --> 00:30:38,250
updates we've also seen some systems
 

1275
00:30:38,250 --> 00:30:39,529
updates we've also seen some systems
that support a notion of mini

1276
00:30:39,529 --> 00:30:39,539
that support a notion of mini
 

1277
00:30:39,539 --> 00:30:43,070
that support a notion of mini
transactions where at least on a single

1278
00:30:43,070 --> 00:30:43,080
transactions where at least on a single
 

1279
00:30:43,080 --> 00:30:44,840
transactions where at least on a single
piece of data you can have atomic

1280
00:30:44,840 --> 00:30:44,850
piece of data you can have atomic
 

1281
00:30:44,850 --> 00:30:48,070
piece of data you can have atomic
operations like atomic increment or

1282
00:30:48,070 --> 00:30:48,080
operations like atomic increment or
 

1283
00:30:48,080 --> 00:30:52,549
operations like atomic increment or
atomic test and set you can also imagine

1284
00:30:52,549 --> 00:30:52,559
atomic test and set you can also imagine
 

1285
00:30:52,559 --> 00:30:55,669
atomic test and set you can also imagine
wanting to have a system that does come

1286
00:30:55,669 --> 00:30:55,679
wanting to have a system that does come
 

1287
00:30:55,679 --> 00:30:57,710
wanting to have a system that does come
sort of custom conflict resolution so

1288
00:30:57,710 --> 00:30:57,720
sort of custom conflict resolution so
 

1289
00:30:57,720 --> 00:30:59,389
sort of custom conflict resolution so
exposing this value that we're keeping

1290
00:30:59,389 --> 00:30:59,399
exposing this value that we're keeping
 

1291
00:30:59,399 --> 00:31:01,310
exposing this value that we're keeping
here is a shopping cart you know with a

1292
00:31:01,310 --> 00:31:01,320
here is a shopping cart you know with a
 

1293
00:31:01,320 --> 00:31:04,369
here is a shopping cart you know with a
bunch of items in it and our user may

1294
00:31:04,369 --> 00:31:04,379
bunch of items in it and our user may
 

1295
00:31:04,379 --> 00:31:05,720
bunch of items in it and our user may
because they're running you know two

1296
00:31:05,720 --> 00:31:05,730
because they're running you know two
 

1297
00:31:05,730 --> 00:31:06,950
because they're running you know two
windows in the wind browser

1298
00:31:06,950 --> 00:31:06,960
windows in the wind browser
 

1299
00:31:06,960 --> 00:31:08,659
windows in the wind browser
adds two different items to their

1300
00:31:08,659 --> 00:31:08,669
adds two different items to their
 

1301
00:31:08,669 --> 00:31:11,240
adds two different items to their
shopping cart from two different web

1302
00:31:11,240 --> 00:31:11,250
shopping cart from two different web
 

1303
00:31:11,250 --> 00:31:11,720
shopping cart from two different web
servers

1304
00:31:11,720 --> 00:31:11,730
servers
 

1305
00:31:11,730 --> 00:31:14,389
servers
we'd like these two conflicting writes

1306
00:31:14,389 --> 00:31:14,399
we'd like these two conflicting writes
 

1307
00:31:14,399 --> 00:31:16,580
we'd like these two conflicting writes
to the same shopping cart to resolve

1308
00:31:16,580 --> 00:31:16,590
to the same shopping cart to resolve
 

1309
00:31:16,590 --> 00:31:19,970
to the same shopping cart to resolve
probably by taking set union of the two

1310
00:31:19,970 --> 00:31:19,980
probably by taking set union of the two
 

1311
00:31:19,980 --> 00:31:21,499
probably by taking set union of the two
shopping carts and ball instead of

1312
00:31:21,499 --> 00:31:21,509
shopping carts and ball instead of
 

1313
00:31:21,509 --> 00:31:24,230
shopping carts and ball instead of
throwing one away and accepting the

1314
00:31:24,230 --> 00:31:24,240
throwing one away and accepting the
 

1315
00:31:24,240 --> 00:31:30,200
throwing one away and accepting the
other I'm bringing this up

1316
00:31:30,200 --> 00:31:30,210

 

1317
00:31:30,210 --> 00:31:33,920

satisfying solution indeed the paper

1318
00:31:33,920 --> 00:31:33,930
satisfying solution indeed the paper
 

1319
00:31:33,930 --> 00:31:35,240
satisfying solution indeed the paper
doesn't really propose much of a

1320
00:31:35,240 --> 00:31:35,250
doesn't really propose much of a
 

1321
00:31:35,250 --> 00:31:38,780
doesn't really propose much of a
solution it's just a drawback of weekly

1322
00:31:38,780 --> 00:31:38,790
solution it's just a drawback of weekly
 

1323
00:31:38,790 --> 00:31:43,580
solution it's just a drawback of weekly
consistent systems that it's easy to get

1324
00:31:43,580 --> 00:31:43,590
consistent systems that it's easy to get
 

1325
00:31:43,590 --> 00:31:45,730
consistent systems that it's easy to get
into a situation where you might have

1326
00:31:45,730 --> 00:31:45,740
into a situation where you might have
 

1327
00:31:45,740 --> 00:31:47,720
into a situation where you might have
conflicting rights to the same data that

1328
00:31:47,720 --> 00:31:47,730
conflicting rights to the same data that
 

1329
00:31:47,730 --> 00:31:50,080
conflicting rights to the same data that
you would like to have sophisticated

1330
00:31:50,080 --> 00:31:50,090
you would like to have sophisticated
 

1331
00:31:50,090 --> 00:31:52,670
you would like to have sophisticated
sort of application specific resolution

1332
00:31:52,670 --> 00:31:52,680
sort of application specific resolution
 

1333
00:31:52,680 --> 00:31:55,820
sort of application specific resolution
to but it's generally quite hard and

1334
00:31:55,820 --> 00:31:55,830
to but it's generally quite hard and
 

1335
00:31:55,830 --> 00:31:58,250
to but it's generally quite hard and
it's just like a thorn in people's sides

1336
00:31:58,250 --> 00:31:58,260
it's just like a thorn in people's sides
 

1337
00:31:58,260 --> 00:32:04,010
it's just like a thorn in people's sides
that has to be lived with typically and

1338
00:32:04,010 --> 00:32:04,020
that has to be lived with typically and
 

1339
00:32:04,020 --> 00:32:05,600
that has to be lived with typically and
that that goes for both the eventual

1340
00:32:05,600 --> 00:32:05,610
that that goes for both the eventual
 

1341
00:32:05,610 --> 00:32:07,760
that that goes for both the eventual
consistency my straw man here hand for

1342
00:32:07,760 --> 00:32:07,770
consistency my straw man here hand for
 

1343
00:32:07,770 --> 00:32:10,340
consistency my straw man here hand for
the and for the P versus the paper dance

1344
00:32:10,340 --> 00:32:10,350
the and for the P versus the paper dance
 

1345
00:32:10,350 --> 00:32:12,350
the and for the P versus the paper dance
and a couple of paragraphs it it could

1346
00:32:12,350 --> 00:32:12,360
and a couple of paragraphs it it could
 

1347
00:32:12,360 --> 00:32:13,550
and a couple of paragraphs it it could
be used to do better

1348
00:32:13,550 --> 00:32:13,560
be used to do better
 

1349
00:32:13,560 --> 00:32:15,920
be used to do better
they don't really explore that because

1350
00:32:15,920 --> 00:32:15,930
they don't really explore that because
 

1351
00:32:15,930 --> 00:32:21,080
they don't really explore that because
it's difficult okay back to eventual

1352
00:32:21,080 --> 00:32:21,090
it's difficult okay back to eventual
 

1353
00:32:21,090 --> 00:32:26,660
it's difficult okay back to eventual
consistency my straw man system if you

1354
00:32:26,660 --> 00:32:26,670
consistency my straw man system if you
 

1355
00:32:26,670 --> 00:32:32,270
consistency my straw man system if you
recall it had a real problem with even

1356
00:32:32,270 --> 00:32:32,280
recall it had a real problem with even
 

1357
00:32:32,280 --> 00:32:36,160
recall it had a real problem with even
very simple this very simple scenario I

1358
00:32:36,160 --> 00:32:36,170
very simple this very simple scenario I
 

1359
00:32:36,170 --> 00:32:38,870
very simple this very simple scenario I
know we did put a photo and put a photo

1360
00:32:38,870 --> 00:32:38,880
know we did put a photo and put a photo
 

1361
00:32:38,880 --> 00:32:40,760
know we did put a photo and put a photo
list and then somebody else in a

1362
00:32:40,760 --> 00:32:40,770
list and then somebody else in a
 

1363
00:32:40,770 --> 00:32:42,890
list and then somebody else in a
difference and it reads the new this but

1364
00:32:42,890 --> 00:32:42,900
difference and it reads the new this but
 

1365
00:32:42,900 --> 00:32:44,510
difference and it reads the new this but
when they read the photo they find

1366
00:32:44,510 --> 00:32:44,520
when they read the photo they find
 

1367
00:32:44,520 --> 00:32:47,090
when they read the photo they find
there's nothing there so can we do

1368
00:32:47,090 --> 00:32:47,100
there's nothing there so can we do
 

1369
00:32:47,100 --> 00:32:49,690
there's nothing there so can we do
better can we build a system of it's

1370
00:32:49,690 --> 00:32:49,700
better can we build a system of it's
 

1371
00:32:49,700 --> 00:32:52,790
better can we build a system of it's
still allows local reads and local

1372
00:32:52,790 --> 00:32:52,800
still allows local reads and local
 

1373
00:32:52,800 --> 00:32:59,030
still allows local reads and local
rights but is has slightly mini-lesson

1374
00:32:59,030 --> 00:32:59,040
rights but is has slightly mini-lesson
 

1375
00:32:59,040 --> 00:33:03,280
rights but is has slightly mini-lesson
Thomas I'm going to propose one that's

1376
00:33:03,280 --> 00:33:03,290
Thomas I'm going to propose one that's
 

1377
00:33:03,290 --> 00:33:05,630
Thomas I'm going to propose one that's
strong me into this kind of one step

1378
00:33:05,630 --> 00:33:05,640
strong me into this kind of one step
 

1379
00:33:05,640 --> 00:33:08,780
strong me into this kind of one step
closer to papers so this is straw man

1380
00:33:08,780 --> 00:33:08,790
closer to papers so this is straw man
 

1381
00:33:08,790 --> 00:33:12,290
closer to papers so this is straw man
too

1382
00:33:12,290 --> 00:33:12,300

 

1383
00:33:12,300 --> 00:33:14,259

and

1384
00:33:14,259 --> 00:33:14,269
and
 

1385
00:33:14,269 --> 00:33:19,119
and
in this scheme I'm gonna propose a new

1386
00:33:19,119 --> 00:33:19,129
in this scheme I'm gonna propose a new
 

1387
00:33:19,129 --> 00:33:21,190
in this scheme I'm gonna propose a new
operator not just put and get but also a

1388
00:33:21,190 --> 00:33:21,200
operator not just put and get but also a
 

1389
00:33:21,200 --> 00:33:24,570
operator not just put and get but also a
sink operator that clients can use and

1390
00:33:24,570 --> 00:33:24,580
sink operator that clients can use and
 

1391
00:33:24,580 --> 00:33:29,289
sink operator that clients can use and
the sink operator will do will be the

1392
00:33:29,289 --> 00:33:29,299
the sink operator will do will be the
 

1393
00:33:29,299 --> 00:33:34,329
the sink operator will do will be the
key and a version number and what sink

1394
00:33:34,329 --> 00:33:34,339
key and a version number and what sink
 

1395
00:33:34,339 --> 00:33:36,249
key and a version number and what sink
does when a client calls it is sink

1396
00:33:36,249 --> 00:33:36,259
does when a client calls it is sink
 

1397
00:33:36,259 --> 00:33:40,149
does when a client calls it is sink
waits until all data centers copies of

1398
00:33:40,149 --> 00:33:40,159
waits until all data centers copies of
 

1399
00:33:40,159 --> 00:33:44,259
waits until all data centers copies of
key K are at least up to date as of the

1400
00:33:44,259 --> 00:33:44,269
key K are at least up to date as of the
 

1401
00:33:44,269 --> 00:33:47,680
key K are at least up to date as of the
specified version number so it's a way

1402
00:33:47,680 --> 00:33:47,690
specified version number so it's a way
 

1403
00:33:47,690 --> 00:33:50,169
specified version number so it's a way
of forcing order the client can say look

1404
00:33:50,169 --> 00:33:50,179
of forcing order the client can say look
 

1405
00:33:50,179 --> 00:33:51,369
of forcing order the client can say look
I'm gonna wait as well everybody knows

1406
00:33:51,369 --> 00:33:51,379
I'm gonna wait as well everybody knows
 

1407
00:33:51,379 --> 00:33:54,489
I'm gonna wait as well everybody knows
about this value and I wanna only see

1408
00:33:54,489 --> 00:33:54,499
about this value and I wanna only see
 

1409
00:33:54,499 --> 00:33:56,709
about this value and I wanna only see
after every one everything is Center

1410
00:33:56,709 --> 00:33:56,719
after every one everything is Center
 

1411
00:33:56,719 --> 00:33:58,690
after every one everything is Center
knows about this value and in order for

1412
00:33:58,690 --> 00:33:58,700
knows about this value and in order for
 

1413
00:33:58,700 --> 00:34:02,159
knows about this value and in order for
clients to know what version numbers to

1414
00:34:02,159 --> 00:34:02,169
clients to know what version numbers to
 

1415
00:34:02,169 --> 00:34:06,789
clients to know what version numbers to
to pass the sink we're gonna change the

1416
00:34:06,789 --> 00:34:06,799
to pass the sink we're gonna change the
 

1417
00:34:06,799 --> 00:34:08,649
to pass the sink we're gonna change the
put call a bit so that you say put key

1418
00:34:08,649 --> 00:34:08,659
put call a bit so that you say put key
 

1419
00:34:08,659 --> 00:34:14,859
put call a bit so that you say put key
value and put returns the version number

1420
00:34:14,859 --> 00:34:14,869
value and put returns the version number
 

1421
00:34:14,869 --> 00:34:21,250
value and put returns the version number
of the of this updated K you could call

1422
00:34:21,250 --> 00:34:21,260
of the of this updated K you could call
 

1423
00:34:21,260 --> 00:34:23,440
of the of this updated K you could call
this this sink is asking that acting is

1424
00:34:23,440 --> 00:34:23,450
this this sink is asking that acting is
 

1425
00:34:23,450 --> 00:34:28,119
this this sink is asking that acting is
a sort of a barrier offense we could

1426
00:34:28,119 --> 00:34:28,129
a sort of a barrier offense we could
 

1427
00:34:28,129 --> 00:34:36,059
a sort of a barrier offense we could
call this eventual consistency plus

1428
00:34:36,059 --> 00:34:36,069

 

1429
00:34:36,069 --> 00:34:46,390

barriers see calls the barrier

1430
00:34:46,390 --> 00:34:46,400

 

1431
00:34:46,400 --> 00:34:48,250

I'm gonna talk about how to users in a

1432
00:34:48,250 --> 00:34:48,260
I'm gonna talk about how to users in a
 

1433
00:34:48,260 --> 00:34:49,840
I'm gonna talk about how to users in a
moment but just keep in mind this thing

1434
00:34:49,840 --> 00:34:49,850
moment but just keep in mind this thing
 

1435
00:34:49,850 --> 00:34:51,370
moment but just keep in mind this thing
calls likely to be pretty slow because

1436
00:34:51,370 --> 00:34:51,380
calls likely to be pretty slow because
 

1437
00:34:51,380 --> 00:34:54,940
calls likely to be pretty slow because
the natural implementation of it is that

1438
00:34:54,940 --> 00:34:54,950
the natural implementation of it is that
 

1439
00:34:54,950 --> 00:34:56,950
the natural implementation of it is that
it actually goes out and talks to all

1440
00:34:56,950 --> 00:34:56,960
it actually goes out and talks to all
 

1441
00:34:56,960 --> 00:34:58,600
it actually goes out and talks to all
the other data centers and asked them

1442
00:34:58,600 --> 00:34:58,610
the other data centers and asked them
 

1443
00:34:58,610 --> 00:35:01,810
the other data centers and asked them
you know is your version of key pay up

1444
00:35:01,810 --> 00:35:01,820
you know is your version of key pay up
 

1445
00:35:01,820 --> 00:35:03,940
you know is your version of key pay up
to at least you know this version number

1446
00:35:03,940 --> 00:35:03,950
to at least you know this version number
 

1447
00:35:03,950 --> 00:35:06,340
to at least you know this version number
and then have to wait booth for the data

1448
00:35:06,340 --> 00:35:06,350
and then have to wait booth for the data
 

1449
00:35:06,350 --> 00:35:07,720
and then have to wait booth for the data
centers to respond and if any of them

1450
00:35:07,720 --> 00:35:07,730
centers to respond and if any of them
 

1451
00:35:07,730 --> 00:35:10,120
centers to respond and if any of them
say no it's got to then read that data

1452
00:35:10,120 --> 00:35:10,130
say no it's got to then read that data
 

1453
00:35:10,130 --> 00:35:13,260
say no it's got to then read that data
yes all right so how would you use this

1454
00:35:13,260 --> 00:35:13,270
yes all right so how would you use this
 

1455
00:35:13,270 --> 00:35:16,660
yes all right so how would you use this
well again for our photo list

1456
00:35:16,660 --> 00:35:16,670
well again for our photo list
 

1457
00:35:16,670 --> 00:35:19,930
well again for our photo list
now maybe client one that's updating

1458
00:35:19,930 --> 00:35:19,940
now maybe client one that's updating
 

1459
00:35:19,940 --> 00:35:22,510
now maybe client one that's updating
photos it's going to call put to insert

1460
00:35:22,510 --> 00:35:22,520
photos it's going to call put to insert
 

1461
00:35:22,520 --> 00:35:23,680
photos it's going to call put to insert
the photo it's gonna get a version

1462
00:35:23,680 --> 00:35:23,690
the photo it's gonna get a version
 

1463
00:35:23,690 --> 00:35:31,630
the photo it's gonna get a version
number now you know the programmer now

1464
00:35:31,630 --> 00:35:31,640
number now you know the programmer now
 

1465
00:35:31,640 --> 00:35:36,910
number now you know the programmer now
has to there's a danger here that update

1466
00:35:36,910 --> 00:35:36,920
has to there's a danger here that update
 

1467
00:35:36,920 --> 00:35:39,340
has to there's a danger here that update
the photo this but you know what if some

1468
00:35:39,340 --> 00:35:39,350
the photo this but you know what if some
 

1469
00:35:39,350 --> 00:35:40,750
the photo this but you know what if some
other data center you know hasn't seen

1470
00:35:40,750 --> 00:35:40,760
other data center you know hasn't seen
 

1471
00:35:40,760 --> 00:35:43,000
other data center you know hasn't seen
my photo yet so then the programmer is

1472
00:35:43,000 --> 00:35:43,010
my photo yet so then the programmer is
 

1473
00:35:43,010 --> 00:35:48,580
my photo yet so then the programmer is
gonna say sync and you're gonna sink the

1474
00:35:48,580 --> 00:35:48,590
gonna say sync and you're gonna sink the
 

1475
00:35:48,590 --> 00:35:51,910
gonna say sync and you're gonna sink the
photo wait for all data centers to have

1476
00:35:51,910 --> 00:35:51,920
photo wait for all data centers to have
 

1477
00:35:51,920 --> 00:35:53,470
photo wait for all data centers to have
that version number that was returned by

1478
00:35:53,470 --> 00:35:53,480
that version number that was returned by
 

1479
00:35:53,480 --> 00:35:56,620
that version number that was returned by
put and only after the sync return will

1480
00:35:56,620 --> 00:35:56,630
put and only after the sync return will
 

1481
00:35:56,630 --> 00:36:00,430
put and only after the sync return will
client one call put update update the

1482
00:36:00,430 --> 00:36:00,440
client one call put update update the
 

1483
00:36:00,440 --> 00:36:03,760
client one call put update update the
photo list and now if client two comes

1484
00:36:03,760 --> 00:36:03,770
photo list and now if client two comes
 

1485
00:36:03,770 --> 00:36:05,200
photo list and now if client two comes
along I must read the photo list and

1486
00:36:05,200 --> 00:36:05,210
along I must read the photo list and
 

1487
00:36:05,210 --> 00:36:07,030
along I must read the photo list and
then to be in the photo you know who

1488
00:36:07,030 --> 00:36:07,040
then to be in the photo you know who
 

1489
00:36:07,040 --> 00:36:09,790
then to be in the photo you know who
knows client two is going to do a get of

1490
00:36:09,790 --> 00:36:09,800
knows client two is going to do a get of
 

1491
00:36:09,800 --> 00:36:15,570
knows client two is going to do a get of
the photo list let's say time is

1492
00:36:15,570 --> 00:36:15,580
the photo list let's say time is
 

1493
00:36:15,580 --> 00:36:18,550
the photo list let's say time is
passing the same for them it's gonna do

1494
00:36:18,550 --> 00:36:18,560
passing the same for them it's gonna do
 

1495
00:36:18,560 --> 00:36:20,800
passing the same for them it's gonna do
a get at the photo list and if it sees

1496
00:36:20,800 --> 00:36:20,810
a get at the photo list and if it sees
 

1497
00:36:20,810 --> 00:36:23,110
a get at the photo list and if it sees
the photo on that list it'll do a get

1498
00:36:23,110 --> 00:36:23,120
the photo on that list it'll do a get
 

1499
00:36:23,120 --> 00:36:25,750
the photo on that list it'll do a get
you know again in its local data center

1500
00:36:25,750 --> 00:36:25,760
you know again in its local data center
 

1501
00:36:25,760 --> 00:36:29,320
you know again in its local data center
of the photo and now we're actually in

1502
00:36:29,320 --> 00:36:29,330
of the photo and now we're actually in
 

1503
00:36:29,330 --> 00:36:32,620
of the photo and now we're actually in
much better situation if client to in a

1504
00:36:32,620 --> 00:36:32,630
much better situation if client to in a
 

1505
00:36:32,630 --> 00:36:36,250
much better situation if client to in a
different data center saw the photo in

1506
00:36:36,250 --> 00:36:36,260
different data center saw the photo in
 

1507
00:36:36,260 --> 00:36:43,870
different data center saw the photo in
this list then that means that client

1508
00:36:43,870 --> 00:36:43,880
this list then that means that client
 

1509
00:36:43,880 --> 00:36:45,760
this list then that means that client
want had already called put on this list

1510
00:36:45,760 --> 00:36:45,770
want had already called put on this list
 

1511
00:36:45,770 --> 00:36:48,280
want had already called put on this list
because it's this put that adds the

1512
00:36:48,280 --> 00:36:48,290
because it's this put that adds the
 

1513
00:36:48,290 --> 00:36:50,290
because it's this put that adds the
footage of the list if client wanted

1514
00:36:50,290 --> 00:36:50,300
footage of the list if client wanted
 

1515
00:36:50,300 --> 00:36:51,760
footage of the list if client wanted
already called put on this list that

1516
00:36:51,760 --> 00:36:51,770
already called put on this list that
 

1517
00:36:51,770 --> 00:36:54,280
already called put on this list that
means the client one now given the way

1518
00:36:54,280 --> 00:36:54,290
means the client one now given the way
 

1519
00:36:54,290 --> 00:36:56,200
means the client one now given the way
this code works right had already called

1520
00:36:56,200 --> 00:36:56,210
this code works right had already called
 

1521
00:36:56,210 --> 00:36:58,570
this code works right had already called
sink and sink doesn't return until the

1522
00:36:58,570 --> 00:36:58,580
sink and sink doesn't return until the
 

1523
00:36:58,580 --> 00:37:01,450
sink and sink doesn't return until the
photo is present at all data centers so

1524
00:37:01,450 --> 00:37:01,460
photo is present at all data centers so
 

1525
00:37:01,460 --> 00:37:03,490
photo is present at all data centers so
that means that client two can the

1526
00:37:03,490 --> 00:37:03,500
that means that client two can the
 

1527
00:37:03,500 --> 00:37:06,070
that means that client two can the
programmer for client two can rely on

1528
00:37:06,070 --> 00:37:06,080
programmer for client two can rely on
 

1529
00:37:06,080 --> 00:37:09,190
programmer for client two can rely on
well the photos in the list that means

1530
00:37:09,190 --> 00:37:09,200
well the photos in the list that means
 

1531
00:37:09,200 --> 00:37:11,230
well the photos in the list that means
this whoever added the footage to the

1532
00:37:11,230 --> 00:37:11,240
this whoever added the footage to the
 

1533
00:37:11,240 --> 00:37:16,150
this whoever added the footage to the
list their sync completed and the fact

1534
00:37:16,150 --> 00:37:16,160
list their sync completed and the fact
 

1535
00:37:16,160 --> 00:37:17,350
list their sync completed and the fact
that this thing completed means the

1536
00:37:17,350 --> 00:37:17,360
that this thing completed means the
 

1537
00:37:17,360 --> 00:37:18,670
that this thing completed means the
photo is present everywhere and

1538
00:37:18,670 --> 00:37:18,680
photo is present everywhere and
 

1539
00:37:18,680 --> 00:37:21,010
photo is present everywhere and
therefore we can rely on this get photo

1540
00:37:21,010 --> 00:37:21,020
therefore we can rely on this get photo
 

1541
00:37:21,020 --> 00:37:28,260
therefore we can rely on this get photo
actually returning the photograph ok so

1542
00:37:28,260 --> 00:37:28,270
actually returning the photograph ok so
 

1543
00:37:28,270 --> 00:37:32,820
actually returning the photograph ok so
this works and it's actually reasonably

1544
00:37:32,820 --> 00:37:32,830
this works and it's actually reasonably
 

1545
00:37:32,830 --> 00:37:37,090
this works and it's actually reasonably
practical it does require fairly careful

1546
00:37:37,090 --> 00:37:37,100
practical it does require fairly careful
 

1547
00:37:37,100 --> 00:37:38,680
practical it does require fairly careful
thought on the part of the program or

1548
00:37:38,680 --> 00:37:38,690
thought on the part of the program or
 

1549
00:37:38,690 --> 00:37:40,510
thought on the part of the program or
the programmer you know has to think aha

1550
00:37:40,510 --> 00:37:40,520
the programmer you know has to think aha
 

1551
00:37:40,520 --> 00:37:43,780
the programmer you know has to think aha
I need a sink here I need to put sink

1552
00:37:43,780 --> 00:37:43,790
I need a sink here I need to put sink
 

1553
00:37:43,790 --> 00:37:45,760
I need a sink here I need to put sink
put in order for things to work out

1554
00:37:45,760 --> 00:37:45,770
put in order for things to work out
 

1555
00:37:45,770 --> 00:37:48,280
put in order for things to work out
right the reader for the readers much

1556
00:37:48,280 --> 00:37:48,290
right the reader for the readers much
 

1557
00:37:48,290 --> 00:37:50,320
right the reader for the readers much
faster but the reader still needs to

1558
00:37:50,320 --> 00:37:50,330
faster but the reader still needs to
 

1559
00:37:50,330 --> 00:37:52,270
faster but the reader still needs to
think oh you know I'm gonna at least

1560
00:37:52,270 --> 00:37:52,280
think oh you know I'm gonna at least
 

1561
00:37:52,280 --> 00:37:56,560
think oh you know I'm gonna at least
tested that the programmer has to you

1562
00:37:56,560 --> 00:37:56,570
tested that the programmer has to you
 

1563
00:37:56,570 --> 00:37:58,390
tested that the programmer has to you
know check with it if he's if the

1564
00:37:58,390 --> 00:37:58,400
know check with it if he's if the
 

1565
00:37:58,400 --> 00:37:59,770
know check with it if he's if the
programmer does a get list and then I

1566
00:37:59,770 --> 00:37:59,780
programmer does a get list and then I
 

1567
00:37:59,780 --> 00:38:01,720
programmer does a get list and then I
get photo from that list that uh you

1568
00:38:01,720 --> 00:38:01,730
get photo from that list that uh you
 

1569
00:38:01,730 --> 00:38:03,570
get photo from that list that uh you
know verify that indeed the code

1570
00:38:03,570 --> 00:38:03,580
know verify that indeed the code
 

1571
00:38:03,580 --> 00:38:05,890
know verify that indeed the code
modified the list called sink before

1572
00:38:05,890 --> 00:38:05,900
modified the list called sink before
 

1573
00:38:05,900 --> 00:38:08,380
modified the list called sink before
adding some things for list that is

1574
00:38:08,380 --> 00:38:08,390
adding some things for list that is
 

1575
00:38:08,390 --> 00:38:11,180
adding some things for list that is
quite a bit of thought

1576
00:38:11,180 --> 00:38:11,190

 

1577
00:38:11,190 --> 00:38:13,400

with this is all about the sink cause

1578
00:38:13,400 --> 00:38:13,410
with this is all about the sink cause
 

1579
00:38:13,410 --> 00:38:15,080
with this is all about the sink cause
all about is enforcing order make sure

1580
00:38:15,080 --> 00:38:15,090
all about is enforcing order make sure
 

1581
00:38:15,090 --> 00:38:17,780
all about is enforcing order make sure
that this completely finishes before

1582
00:38:17,780 --> 00:38:17,790
that this completely finishes before
 

1583
00:38:17,790 --> 00:38:22,820
that this completely finishes before
this happens the readers so that sink

1584
00:38:22,820 --> 00:38:22,830
this happens the readers so that sink
 

1585
00:38:22,830 --> 00:38:24,590
this happens the readers so that sink
and sort of explicitly forces order for

1586
00:38:24,590 --> 00:38:24,600
and sort of explicitly forces order for
 

1587
00:38:24,600 --> 00:38:26,570
and sort of explicitly forces order for
writers readers also have to think about

1588
00:38:26,570 --> 00:38:26,580
writers readers also have to think about
 

1589
00:38:26,580 --> 00:38:28,970
writers readers also have to think about
order the order is actually obvious in

1590
00:38:28,970 --> 00:38:28,980
order the order is actually obvious in
 

1591
00:38:28,980 --> 00:38:31,580
order the order is actually obvious in
this example but it is true that if the

1592
00:38:31,580 --> 00:38:31,590
this example but it is true that if the
 

1593
00:38:31,590 --> 00:38:34,130
this example but it is true that if the
writer did put a put then sink and then

1594
00:38:34,130 --> 00:38:34,140
writer did put a put then sink and then
 

1595
00:38:34,140 --> 00:38:36,380
writer did put a put then sink and then
put of a second thing then almost always

1596
00:38:36,380 --> 00:38:36,390
put of a second thing then almost always
 

1597
00:38:36,390 --> 00:38:38,270
put of a second thing then almost always
readers need to read the second thing

1598
00:38:38,270 --> 00:38:38,280
readers need to read the second thing
 

1599
00:38:38,280 --> 00:38:41,570
readers need to read the second thing
and then read the first thing because

1600
00:38:41,570 --> 00:38:41,580
and then read the first thing because
 

1601
00:38:41,580 --> 00:38:43,550
and then read the first thing because
guarantees you get out of this out of

1602
00:38:43,550 --> 00:38:43,560
guarantees you get out of this out of
 

1603
00:38:43,560 --> 00:38:46,100
guarantees you get out of this out of
this sink scheme these barriers is that

1604
00:38:46,100 --> 00:38:46,110
this sink scheme these barriers is that
 

1605
00:38:46,110 --> 00:38:49,310
this sink scheme these barriers is that
if a reader sees the second piece of

1606
00:38:49,310 --> 00:38:49,320
if a reader sees the second piece of
 

1607
00:38:49,320 --> 00:38:51,770
if a reader sees the second piece of
data then they're guaranteed to also see

1608
00:38:51,770 --> 00:38:51,780
data then they're guaranteed to also see
 

1609
00:38:51,780 --> 00:38:53,600
data then they're guaranteed to also see
the first piece of data so that means

1610
00:38:53,600 --> 00:38:53,610
the first piece of data so that means
 

1611
00:38:53,610 --> 00:38:55,130
the first piece of data so that means
the reader sort of need to be the second

1612
00:38:55,130 --> 00:38:55,140
the reader sort of need to be the second
 

1613
00:38:55,140 --> 00:38:57,470
the reader sort of need to be the second
piece of data first and then and then

1614
00:38:57,470 --> 00:38:57,480
piece of data first and then and then
 

1615
00:38:57,480 --> 00:39:03,320
piece of data first and then and then
the first item of data okay so there's a

1616
00:39:03,320 --> 00:39:03,330
the first item of data okay so there's a
 

1617
00:39:03,330 --> 00:39:05,030
the first item of data okay so there's a
there's a question about fault tolerance

1618
00:39:05,030 --> 00:39:05,040
there's a question about fault tolerance
 

1619
00:39:05,040 --> 00:39:07,070
there's a question about fault tolerance
mainly at if one data center goes down

1620
00:39:07,070 --> 00:39:07,080
mainly at if one data center goes down
 

1621
00:39:07,080 --> 00:39:09,410
mainly at if one data center goes down
that means the sink blocks until the

1622
00:39:09,410 --> 00:39:09,420
that means the sink blocks until the
 

1623
00:39:09,420 --> 00:39:10,580
that means the sink blocks until the
other data centers brought up

1624
00:39:10,580 --> 00:39:10,590
other data centers brought up
 

1625
00:39:10,590 --> 00:39:12,860
other data centers brought up
that's absolutely right so you're

1626
00:39:12,860 --> 00:39:12,870
that's absolutely right so you're
 

1627
00:39:12,870 --> 00:39:16,670
that's absolutely right so you're
totally correct this is a this is not a

1628
00:39:16,670 --> 00:39:16,680
totally correct this is a this is not a
 

1629
00:39:16,680 --> 00:39:19,040
totally correct this is a this is not a
great scheme alright this is sort of a

1630
00:39:19,040 --> 00:39:19,050
great scheme alright this is sort of a
 

1631
00:39:19,050 --> 00:39:21,440
great scheme alright this is sort of a
straw man on the way the cops this sink

1632
00:39:21,440 --> 00:39:21,450
straw man on the way the cops this sink
 

1633
00:39:21,450 --> 00:39:24,620
straw man on the way the cops this sink
called would block the way this actually

1634
00:39:24,620 --> 00:39:24,630
called would block the way this actually
 

1635
00:39:24,630 --> 00:39:26,750
called would block the way this actually
that sort of version of this that people

1636
00:39:26,750 --> 00:39:26,760
that sort of version of this that people
 

1637
00:39:26,760 --> 00:39:30,050
that sort of version of this that people
use in the real world to avoid this

1638
00:39:30,050 --> 00:39:30,060
use in the real world to avoid this
 

1639
00:39:30,060 --> 00:39:31,910
use in the real world to avoid this
problem will you know whatever data

1640
00:39:31,910 --> 00:39:31,920
problem will you know whatever data
 

1641
00:39:31,920 --> 00:39:33,230
problem will you know whatever data
centers down will the sink block forever

1642
00:39:33,230 --> 00:39:33,240
centers down will the sink block forever
 

1643
00:39:33,240 --> 00:39:37,070
centers down will the sink block forever
is that puts and gets both actually

1644
00:39:37,070 --> 00:39:37,080
is that puts and gets both actually
 

1645
00:39:37,080 --> 00:39:41,470
is that puts and gets both actually
consult a quorum of data center so that

1646
00:39:41,470 --> 00:39:41,480
consult a quorum of data center so that
 

1647
00:39:41,480 --> 00:39:45,440
consult a quorum of data center so that
this a sink will only wait for you know

1648
00:39:45,440 --> 00:39:45,450
this a sink will only wait for you know
 

1649
00:39:45,450 --> 00:39:48,920
this a sink will only wait for you know
say a majority year of data centers to

1650
00:39:48,920 --> 00:39:48,930
say a majority year of data centers to
 

1651
00:39:48,930 --> 00:39:50,570
say a majority year of data centers to
acknowledge that they have the latest

1652
00:39:50,570 --> 00:39:50,580
acknowledge that they have the latest
 

1653
00:39:50,580 --> 00:39:52,400
acknowledge that they have the latest
version of the photo and it get will

1654
00:39:52,400 --> 00:39:52,410
version of the photo and it get will
 

1655
00:39:52,410 --> 00:39:55,250
version of the photo and it get will
actually have to consult an overlapping

1656
00:39:55,250 --> 00:39:55,260
actually have to consult an overlapping
 

1657
00:39:55,260 --> 00:39:58,550
actually have to consult an overlapping
majority of data centers to in order to

1658
00:39:58,550 --> 00:39:58,560
majority of data centers to in order to
 

1659
00:39:58,560 --> 00:40:01,580
majority of data centers to in order to
get the data so things are not really

1660
00:40:01,580 --> 00:40:01,590
get the data so things are not really
 

1661
00:40:01,590 --> 00:40:03,830
get the data so things are not really
real versions of this are not perhaps as

1662
00:40:03,830 --> 00:40:03,840
real versions of this are not perhaps as
 

1663
00:40:03,840 --> 00:40:08,510
real versions of this are not perhaps as
rosy aasaiya as I may be implying again

1664
00:40:08,510 --> 00:40:08,520
rosy aasaiya as I may be implying again
 

1665
00:40:08,520 --> 00:40:14,040
rosy aasaiya as I may be implying again
the the systems that work in this way is

1666
00:40:14,040 --> 00:40:14,050
the the systems that work in this way is
 

1667
00:40:14,050 --> 00:40:16,430
the the systems that work in this way is
you're interested it's dynamo

1668
00:40:16,430 --> 00:40:16,440
you're interested it's dynamo
 

1669
00:40:16,440 --> 00:40:21,710
you're interested it's dynamo
and Cassandra and they use quorums to

1670
00:40:21,710 --> 00:40:21,720
and Cassandra and they use quorums to
 

1671
00:40:21,720 --> 00:40:28,130
and Cassandra and they use quorums to
avoid the wall talks pop okay okay so

1672
00:40:28,130 --> 00:40:28,140
avoid the wall talks pop okay okay so
 

1673
00:40:28,140 --> 00:40:30,890
avoid the wall talks pop okay okay so
this is a straightforward design and has

1674
00:40:30,890 --> 00:40:30,900
this is a straightforward design and has
 

1675
00:40:30,900 --> 00:40:32,900
this is a straightforward design and has
decent semantics even though it's slow

1676
00:40:32,900 --> 00:40:32,910
decent semantics even though it's slow
 

1677
00:40:32,910 --> 00:40:34,730
decent semantics even though it's slow
and this as you observe not very fault

1678
00:40:34,730 --> 00:40:34,740
and this as you observe not very fault
 

1679
00:40:34,740 --> 00:40:36,530
and this as you observe not very fault
tolerant the read performance is

1680
00:40:36,530 --> 00:40:36,540
tolerant the read performance is
 

1681
00:40:36,540 --> 00:40:38,770
tolerant the read performance is
outstanding because the reads are still

1682
00:40:38,770 --> 00:40:38,780
outstanding because the reads are still
 

1683
00:40:38,780 --> 00:40:41,809
outstanding because the reads are still
for local at least if we if the quorum

1684
00:40:41,809 --> 00:40:41,819
for local at least if we if the quorum
 

1685
00:40:41,819 --> 00:40:45,559
for local at least if we if the quorum
setup is read one write all and the

1686
00:40:45,559 --> 00:40:45,569
setup is read one write all and the
 

1687
00:40:45,569 --> 00:40:47,180
setup is read one write all and the
write performance is not great but it's

1688
00:40:47,180 --> 00:40:47,190
write performance is not great but it's
 

1689
00:40:47,190 --> 00:40:49,670
write performance is not great but it's
okay if you don't write very much or if

1690
00:40:49,670 --> 00:40:49,680
okay if you don't write very much or if
 

1691
00:40:49,680 --> 00:40:52,010
okay if you don't write very much or if
you don't mind great waiting and the

1692
00:40:52,010 --> 00:40:52,020
you don't mind great waiting and the
 

1693
00:40:52,020 --> 00:40:53,359
you don't mind great waiting and the
reason why you can maybe convince

1694
00:40:53,359 --> 00:40:53,369
reason why you can maybe convince
 

1695
00:40:53,369 --> 00:40:55,839
reason why you can maybe convince
yourself that the rate performance is

1696
00:40:55,839 --> 00:40:55,849
yourself that the rate performance is
 

1697
00:40:55,849 --> 00:40:58,819
yourself that the rate performance is
not a disaster is that after all the

1698
00:40:58,819 --> 00:40:58,829
not a disaster is that after all the
 

1699
00:40:58,829 --> 00:41:01,220
not a disaster is that after all the
Facebook memcache D paper has to send

1700
00:41:01,220 --> 00:41:01,230
Facebook memcache D paper has to send
 

1701
00:41:01,230 --> 00:41:02,900
Facebook memcache D paper has to send
all rights through the primary data

1702
00:41:02,900 --> 00:41:02,910
all rights through the primary data
 

1703
00:41:02,910 --> 00:41:04,460
all rights through the primary data
center so yeah you know Facebook runs

1704
00:41:04,460 --> 00:41:04,470
center so yeah you know Facebook runs
 

1705
00:41:04,470 --> 00:41:07,040
center so yeah you know Facebook runs
multiple data centers and clients talk

1706
00:41:07,040 --> 00:41:07,050
multiple data centers and clients talk
 

1707
00:41:07,050 --> 00:41:08,750
multiple data centers and clients talk
to all of them but the rates have to all

1708
00:41:08,750 --> 00:41:08,760
to all of them but the rates have to all
 

1709
00:41:08,760 --> 00:41:11,420
to all of them but the rates have to all
be sent to the my sequel databases at

1710
00:41:11,420 --> 00:41:11,430
be sent to the my sequel databases at
 

1711
00:41:11,430 --> 00:41:13,480
be sent to the my sequel databases at
the one primary data center

1712
00:41:13,480 --> 00:41:13,490
the one primary data center
 

1713
00:41:13,490 --> 00:41:15,829
the one primary data center
similarly spanner writes have to wait

1714
00:41:15,829 --> 00:41:15,839
similarly spanner writes have to wait
 

1715
00:41:15,839 --> 00:41:18,109
similarly spanner writes have to wait
for a majority of replica sites to

1716
00:41:18,109 --> 00:41:18,119
for a majority of replica sites to
 

1717
00:41:18,119 --> 00:41:19,520
for a majority of replica sites to
acknowledge the rights before the

1718
00:41:19,520 --> 00:41:19,530
acknowledge the rights before the
 

1719
00:41:19,530 --> 00:41:21,620
acknowledge the rights before the
clients thought to proceed so the notion

1720
00:41:21,620 --> 00:41:21,630
clients thought to proceed so the notion
 

1721
00:41:21,630 --> 00:41:23,270
clients thought to proceed so the notion
that clients might have dis rule that

1722
00:41:23,270 --> 00:41:23,280
that clients might have dis rule that
 

1723
00:41:23,280 --> 00:41:25,849
that clients might have dis rule that
the rights might have to wait to talk to

1724
00:41:25,849 --> 00:41:25,859
the rights might have to wait to talk to
 

1725
00:41:25,859 --> 00:41:27,349
the rights might have to wait to talk to
other data centers in order to allow the

1726
00:41:27,349 --> 00:41:27,359
other data centers in order to allow the
 

1727
00:41:27,359 --> 00:41:30,530
other data centers in order to allow the
reads to be fast is does not appear to

1728
00:41:30,530 --> 00:41:30,540
reads to be fast is does not appear to
 

1729
00:41:30,540 --> 00:41:34,990
reads to be fast is does not appear to
be outrageous in practice mom still I

1730
00:41:34,990 --> 00:41:35,000
be outrageous in practice mom still I
 

1731
00:41:35,000 --> 00:41:38,030
be outrageous in practice mom still I
you know you might like to nevertheless

1732
00:41:38,030 --> 00:41:38,040
you know you might like to nevertheless
 

1733
00:41:38,040 --> 00:41:39,620
you know you might like to nevertheless
have a system that does better than this

1734
00:41:39,620 --> 00:41:39,630
have a system that does better than this
 

1735
00:41:39,630 --> 00:41:42,890
have a system that does better than this
to somehow have semantics of sync that

1736
00:41:42,890 --> 00:41:42,900
to somehow have semantics of sync that
 

1737
00:41:42,900 --> 00:41:46,010
to somehow have semantics of sync that
sort of or sync is forcing this put

1738
00:41:46,010 --> 00:41:46,020
sort of or sync is forcing this put
 

1739
00:41:46,020 --> 00:41:48,260
sort of or sync is forcing this put
definitely appears to everyone to happen

1740
00:41:48,260 --> 00:41:48,270
definitely appears to everyone to happen
 

1741
00:41:48,270 --> 00:41:49,760
definitely appears to everyone to happen
before the second put you might like to

1742
00:41:49,760 --> 00:41:49,770
before the second put you might like to
 

1743
00:41:49,770 --> 00:41:54,319
before the second put you might like to
have that and without the cost so we'll

1744
00:41:54,319 --> 00:41:54,329
have that and without the cost so we'll
 

1745
00:41:54,329 --> 00:41:56,960
have that and without the cost so we'll
be interested in systems and this is

1746
00:41:56,960 --> 00:41:56,970
be interested in systems and this is
 

1747
00:41:56,970 --> 00:41:58,430
be interested in systems and this is
starting to get close to what cops does

1748
00:41:58,430 --> 00:41:58,440
starting to get close to what cops does
 

1749
00:41:58,440 --> 00:42:00,710
starting to get close to what cops does
interested in systems in which instead

1750
00:42:00,710 --> 00:42:00,720
interested in systems in which instead
 

1751
00:42:00,720 --> 00:42:02,780
interested in systems in which instead
of sort of forcing the clients to wait

1752
00:42:02,780 --> 00:42:02,790
of sort of forcing the clients to wait
 

1753
00:42:02,790 --> 00:42:04,819
of sort of forcing the clients to wait
at this point we somehow just encode the

1754
00:42:04,819 --> 00:42:04,829
at this point we somehow just encode the
 

1755
00:42:04,829 --> 00:42:06,770
at this point we somehow just encode the
order as a piece of information that

1756
00:42:06,770 --> 00:42:06,780
order as a piece of information that
 

1757
00:42:06,780 --> 00:42:08,960
order as a piece of information that
we're going to tell the readers or tell

1758
00:42:08,960 --> 00:42:08,970
we're going to tell the readers or tell
 

1759
00:42:08,970 --> 00:42:16,000
we're going to tell the readers or tell
the other data centers and a simple

1760
00:42:16,000 --> 00:42:16,010
the other data centers and a simple
 

1761
00:42:16,010 --> 00:42:21,030
the other data centers and a simple
do that which the paper mentions as a

1762
00:42:21,030 --> 00:42:21,040
do that which the paper mentions as a
 

1763
00:42:21,040 --> 00:42:24,700
do that which the paper mentions as a
non scalable implementation is that at

1764
00:42:24,700 --> 00:42:24,710
non scalable implementation is that at
 

1765
00:42:24,710 --> 00:42:27,040
non scalable implementation is that at
each data center so this is a logging

1766
00:42:27,040 --> 00:42:27,050
each data center so this is a logging
 

1767
00:42:27,050 --> 00:42:31,480
each data center so this is a logging
approach at each data center instead of

1768
00:42:31,480 --> 00:42:31,490
approach at each data center instead of
 

1769
00:42:31,490 --> 00:42:34,540
approach at each data center instead of
having the different shard servers talk

1770
00:42:34,540 --> 00:42:34,550
having the different shard servers talk
 

1771
00:42:34,550 --> 00:42:36,130
having the different shard servers talk
to their counterparts in other data

1772
00:42:36,130 --> 00:42:36,140
to their counterparts in other data
 

1773
00:42:36,140 --> 00:42:42,430
to their counterparts in other data
servers sort of independently instead at

1774
00:42:42,430 --> 00:42:42,440
servers sort of independently instead at
 

1775
00:42:42,440 --> 00:42:43,690
servers sort of independently instead at
every day the center we're gonna have a

1776
00:42:43,690 --> 00:42:43,700
every day the center we're gonna have a
 

1777
00:42:43,700 --> 00:42:47,110
every day the center we're gonna have a
designated log server that's in charge

1778
00:42:47,110 --> 00:42:47,120
designated log server that's in charge
 

1779
00:42:47,120 --> 00:42:49,690
designated log server that's in charge
of communicating of sending writes to

1780
00:42:49,690 --> 00:42:49,700
of communicating of sending writes to
 

1781
00:42:49,700 --> 00:42:52,390
of communicating of sending writes to
the other data center so that means if a

1782
00:42:52,390 --> 00:42:52,400
the other data center so that means if a
 

1783
00:42:52,400 --> 00:42:56,290
the other data center so that means if a
client does it right does it put to its

1784
00:42:56,290 --> 00:42:56,300
client does it right does it put to its
 

1785
00:42:56,300 --> 00:42:58,990
client does it right does it put to its
local shard and that's chart that shard

1786
00:42:58,990 --> 00:42:59,000
local shard and that's chart that shard
 

1787
00:42:59,000 --> 00:43:00,670
local shard and that's chart that shard
instead of just sending that the data

1788
00:43:00,670 --> 00:43:00,680
instead of just sending that the data
 

1789
00:43:00,680 --> 00:43:02,080
instead of just sending that the data
out sort of separately to the other data

1790
00:43:02,080 --> 00:43:02,090
out sort of separately to the other data
 

1791
00:43:02,090 --> 00:43:07,000
out sort of separately to the other data
centers will talk to his local log

1792
00:43:07,000 --> 00:43:07,010
centers will talk to his local log
 

1793
00:43:07,010 --> 00:43:11,890
centers will talk to his local log
server and append the right to the one

1794
00:43:11,890 --> 00:43:11,900
server and append the right to the one
 

1795
00:43:11,900 --> 00:43:13,270
server and append the right to the one
log that this data center is

1796
00:43:13,270 --> 00:43:13,280
log that this data center is
 

1797
00:43:13,280 --> 00:43:15,100
log that this data center is
accumulating and then if a client say

1798
00:43:15,100 --> 00:43:15,110
accumulating and then if a client say
 

1799
00:43:15,110 --> 00:43:18,640
accumulating and then if a client say
does a write to a different key maybe

1800
00:43:18,640 --> 00:43:18,650
does a write to a different key maybe
 

1801
00:43:18,650 --> 00:43:22,290
does a write to a different key maybe
we're writing key a and key B here

1802
00:43:22,290 --> 00:43:22,300
we're writing key a and key B here
 

1803
00:43:22,300 --> 00:43:25,510
we're writing key a and key B here
instead of again instead of this shard

1804
00:43:25,510 --> 00:43:25,520
instead of again instead of this shard
 

1805
00:43:25,520 --> 00:43:27,340
instead of again instead of this shard
server sending the right to key B sort

1806
00:43:27,340 --> 00:43:27,350
server sending the right to key B sort
 

1807
00:43:27,350 --> 00:43:31,000
server sending the right to key B sort
of independently it's gonna tell the

1808
00:43:31,000 --> 00:43:31,010
of independently it's gonna tell the
 

1809
00:43:31,010 --> 00:43:34,210
of independently it's gonna tell the
local log server to append the right to

1810
00:43:34,210 --> 00:43:34,220
local log server to append the right to
 

1811
00:43:34,220 --> 00:43:37,270
local log server to append the right to
the log and then the log server send out

1812
00:43:37,270 --> 00:43:37,280
the log and then the log server send out
 

1813
00:43:37,280 --> 00:43:40,240
the log and then the log server send out
their log to the other data centers in

1814
00:43:40,240 --> 00:43:40,250
their log to the other data centers in
 

1815
00:43:40,250 --> 00:43:45,070
their log to the other data centers in
log order so that all data centers are

1816
00:43:45,070 --> 00:43:45,080
log order so that all data centers are
 

1817
00:43:45,080 --> 00:43:46,900
log order so that all data centers are
guaranteed to see the right to a first

1818
00:43:46,900 --> 00:43:46,910
guaranteed to see the right to a first
 

1819
00:43:46,910 --> 00:43:49,390
guaranteed to see the right to a first
and they're gonna hope process that rate

1820
00:43:49,390 --> 00:43:49,400
and they're gonna hope process that rate
 

1821
00:43:49,400 --> 00:43:52,420
and they're gonna hope process that rate
to a first and then all data centers are

1822
00:43:52,420 --> 00:43:52,430
to a first and then all data centers are
 

1823
00:43:52,430 --> 00:43:53,620
to a first and then all data centers are
going to see our right to B and that

1824
00:43:53,620 --> 00:43:53,630
going to see our right to B and that
 

1825
00:43:53,630 --> 00:43:54,910
going to see our right to B and that
means if a client does a right to a

1826
00:43:54,910 --> 00:43:54,920
means if a client does a right to a
 

1827
00:43:54,920 --> 00:43:57,940
means if a client does a right to a
first and then does it right to be the

1828
00:43:57,940 --> 00:43:57,950
first and then does it right to be the
 

1829
00:43:57,950 --> 00:43:59,620
first and then does it right to be the
writes will show up in that order and it

1830
00:43:59,620 --> 00:43:59,630
writes will show up in that order and it
 

1831
00:43:59,630 --> 00:44:01,630
writes will show up in that order and it
in its log a and B and they'll be sent

1832
00:44:01,630 --> 00:44:01,640
in its log a and B and they'll be sent
 

1833
00:44:01,640 --> 00:44:04,150
in its log a and B and they'll be sent
the right to a first and then the right

1834
00:44:04,150 --> 00:44:04,160
the right to a first and then the right
 

1835
00:44:04,160 --> 00:44:06,190
the right to a first and then the right
to be to each of the t's data centers

1836
00:44:06,190 --> 00:44:06,200
to be to each of the t's data centers
 

1837
00:44:06,200 --> 00:44:08,050
to be to each of the t's data centers
and they probably actually have to be

1838
00:44:08,050 --> 00:44:08,060
and they probably actually have to be
 

1839
00:44:08,060 --> 00:44:11,860
and they probably actually have to be
sent to a kind of single log receiving

1840
00:44:11,860 --> 00:44:11,870
sent to a kind of single log receiving
 

1841
00:44:11,870 --> 00:44:15,400
sent to a kind of single log receiving
server which plays out the rates one at

1842
00:44:15,400 --> 00:44:15,410
server which plays out the rates one at
 

1843
00:44:15,410 --> 00:44:19,540
server which plays out the rates one at
a time as they arrive in log order so

1844
00:44:19,540 --> 00:44:19,550
a time as they arrive in log order so
 

1845
00:44:19,550 --> 00:44:20,980
a time as they arrive in log order so
this is the logging strategy if the

1846
00:44:20,980 --> 00:44:20,990
this is the logging strategy if the
 

1847
00:44:20,990 --> 00:44:23,800
this is the logging strategy if the
paper criticizes

1848
00:44:23,800 --> 00:44:23,810
paper criticizes
 

1849
00:44:23,810 --> 00:44:26,260
paper criticizes
it's actually regain some of the

1850
00:44:26,260 --> 00:44:26,270
it's actually regain some of the
 

1851
00:44:26,270 --> 00:44:29,230
it's actually regain some of the
performance we want because now clients

1852
00:44:29,230 --> 00:44:29,240
performance we want because now clients
 

1853
00:44:29,240 --> 00:44:31,540
performance we want because now clients
we're no longer we now eliminate the

1854
00:44:31,540 --> 00:44:31,550
we're no longer we now eliminate the
 

1855
00:44:31,550 --> 00:44:33,370
we're no longer we now eliminate the
sinks the clients can go back to this

1856
00:44:33,370 --> 00:44:33,380
sinks the clients can go back to this
 

1857
00:44:33,380 --> 00:44:38,850
sinks the clients can go back to this
going put of a and then put B and they

1858
00:44:38,850 --> 00:44:38,860
going put of a and then put B and they
 

1859
00:44:38,860 --> 00:44:41,440
going put of a and then put B and they
client puts can return as soon as the

1860
00:44:41,440 --> 00:44:41,450
client puts can return as soon as the
 

1861
00:44:41,450 --> 00:44:43,750
client puts can return as soon as the
data is sitting in the log at the local

1862
00:44:43,750 --> 00:44:43,760
data is sitting in the log at the local
 

1863
00:44:43,760 --> 00:44:46,660
data is sitting in the log at the local
log server so now client puts and gets

1864
00:44:46,660 --> 00:44:46,670
log server so now client puts and gets
 

1865
00:44:46,670 --> 00:44:48,850
log server so now client puts and gets
are now quite fast again

1866
00:44:48,850 --> 00:44:48,860
are now quite fast again
 

1867
00:44:48,860 --> 00:44:51,610
are now quite fast again
but we're preserving order sort of by

1868
00:44:51,610 --> 00:44:51,620
but we're preserving order sort of by
 

1869
00:44:51,620 --> 00:44:54,460
but we're preserving order sort of by
basically through the sequence numbers

1870
00:44:54,460 --> 00:44:54,470
basically through the sequence numbers
 

1871
00:44:54,470 --> 00:44:56,470
basically through the sequence numbers
of the entries and the logs rather than

1872
00:44:56,470 --> 00:44:56,480
of the entries and the logs rather than
 

1873
00:44:56,480 --> 00:44:59,620
of the entries and the logs rather than
by having the clients wait so that's

1874
00:44:59,620 --> 00:44:59,630
by having the clients wait so that's
 

1875
00:44:59,630 --> 00:45:01,630
by having the clients wait so that's
nice we get the order you know now we're

1876
00:45:01,630 --> 00:45:01,640
nice we get the order you know now we're
 

1877
00:45:01,640 --> 00:45:05,800
nice we get the order you know now we're
forcing ordered writes and we're causing

1878
00:45:05,800 --> 00:45:05,810
forcing ordered writes and we're causing
 

1879
00:45:05,810 --> 00:45:08,170
forcing ordered writes and we're causing
the rights to show up in order at the

1880
00:45:08,170 --> 00:45:08,180
the rights to show up in order at the
 

1881
00:45:08,180 --> 00:45:09,520
the rights to show up in order at the
other data center so that reading

1882
00:45:09,520 --> 00:45:09,530
other data center so that reading
 

1883
00:45:09,530 --> 00:45:11,710
other data center so that reading
clients will see them in order and so

1884
00:45:11,710 --> 00:45:11,720
clients will see them in order and so
 

1885
00:45:11,720 --> 00:45:13,600
clients will see them in order and so
our my example application might

1886
00:45:13,600 --> 00:45:13,610
our my example application might
 

1887
00:45:13,610 --> 00:45:17,760
our my example application might
actually work them out with this scheme

1888
00:45:17,760 --> 00:45:17,770

 

1889
00:45:17,770 --> 00:45:20,710

the drawback that the paper points to

1890
00:45:20,710 --> 00:45:20,720
the drawback that the paper points to
 

1891
00:45:20,720 --> 00:45:24,160
the drawback that the paper points to
about this style of solution is that the

1892
00:45:24,160 --> 00:45:24,170
about this style of solution is that the
 

1893
00:45:24,170 --> 00:45:26,680
about this style of solution is that the
log server now all the rights have to go

1894
00:45:26,680 --> 00:45:26,690
log server now all the rights have to go
 

1895
00:45:26,690 --> 00:45:29,410
log server now all the rights have to go
through this one log server and so if we

1896
00:45:29,410 --> 00:45:29,420
through this one log server and so if we
 

1897
00:45:29,420 --> 00:45:31,240
through this one log server and so if we
have a big big database with maybe

1898
00:45:31,240 --> 00:45:31,250
have a big big database with maybe
 

1899
00:45:31,250 --> 00:45:34,690
have a big big database with maybe
hundreds of servers serving at least in

1900
00:45:34,690 --> 00:45:34,700
hundreds of servers serving at least in
 

1901
00:45:34,700 --> 00:45:37,000
hundreds of servers serving at least in
total a reasonably high workload the

1902
00:45:37,000 --> 00:45:37,010
total a reasonably high workload the
 

1903
00:45:37,010 --> 00:45:39,190
total a reasonably high workload the
right workload all the rights have to go

1904
00:45:39,190 --> 00:45:39,200
right workload all the rights have to go
 

1905
00:45:39,200 --> 00:45:42,070
right workload all the rights have to go
through this log server and possibly all

1906
00:45:42,070 --> 00:45:42,080
through this log server and possibly all
 

1907
00:45:42,080 --> 00:45:45,160
through this log server and possibly all
the rights have to be played out through

1908
00:45:45,160 --> 00:45:45,170
the rights have to be played out through
 

1909
00:45:45,170 --> 00:45:47,950
the rights have to be played out through
a single receiving log server at the far

1910
00:45:47,950 --> 00:45:47,960
a single receiving log server at the far
 

1911
00:45:47,960 --> 00:45:50,890
a single receiving log server at the far
end and a single log server as the

1912
00:45:50,890 --> 00:45:50,900
end and a single log server as the
 

1913
00:45:50,900 --> 00:45:52,330
end and a single log server as the
system grows there get to be more and

1914
00:45:52,330 --> 00:45:52,340
system grows there get to be more and
 

1915
00:45:52,340 --> 00:45:54,400
system grows there get to be more and
more shards a single log server may stop

1916
00:45:54,400 --> 00:45:54,410
more shards a single log server may stop
 

1917
00:45:54,410 --> 00:45:57,970
more shards a single log server may stop
being fast enough to process all these

1918
00:45:57,970 --> 00:45:57,980
being fast enough to process all these
 

1919
00:45:57,980 --> 00:46:01,870
being fast enough to process all these
rates and so cops does not follow this

1920
00:46:01,870 --> 00:46:01,880
rates and so cops does not follow this
 

1921
00:46:01,880 --> 00:46:06,750
rates and so cops does not follow this
approach to conveying the order

1922
00:46:06,750 --> 00:46:06,760
approach to conveying the order
 

1923
00:46:06,760 --> 00:46:10,860
approach to conveying the order
constraints to other data centers

1924
00:46:10,860 --> 00:46:10,870
constraints to other data centers
 

1925
00:46:10,870 --> 00:46:15,430
constraints to other data centers
okay so we want to build a system that

1926
00:46:15,430 --> 00:46:15,440
okay so we want to build a system that
 

1927
00:46:15,440 --> 00:46:17,110
okay so we want to build a system that
can at least from the clients point of

1928
00:46:17,110 --> 00:46:17,120
can at least from the clients point of
 

1929
00:46:17,120 --> 00:46:18,760
can at least from the clients point of
view process rates and reads purely

1930
00:46:18,760 --> 00:46:18,770
view process rates and reads purely
 

1931
00:46:18,770 --> 00:46:20,590
view process rates and reads purely
locally we don't want to have to wait

1932
00:46:20,590 --> 00:46:20,600
locally we don't want to have to wait
 

1933
00:46:20,600 --> 00:46:22,540
locally we don't want to have to wait
you don't want clients to wait in order

1934
00:46:22,540 --> 00:46:22,550
you don't want clients to wait in order
 

1935
00:46:22,550 --> 00:46:25,600
you don't want clients to wait in order
to get order we want a forward we like

1936
00:46:25,600 --> 00:46:25,610
to get order we want a forward we like
 

1937
00:46:25,610 --> 00:46:28,030
to get order we want a forward we like
the fact that these rates are being

1938
00:46:28,030 --> 00:46:28,040
the fact that these rates are being
 

1939
00:46:28,040 --> 00:46:31,480
the fact that these rates are being
forward asynchronously but we somehow

1940
00:46:31,480 --> 00:46:31,490
forward asynchronously but we somehow
 

1941
00:46:31,490 --> 00:46:36,040
forward asynchronously but we somehow
want to eliminate the central log server

1942
00:46:36,040 --> 00:46:36,050
want to eliminate the central log server
 

1943
00:46:36,050 --> 00:46:37,840
want to eliminate the central log server
so we want to somehow convey

1944
00:46:37,840 --> 00:46:37,850
so we want to somehow convey
 

1945
00:46:37,850 --> 00:46:39,280
so we want to somehow convey
order information to other data centers

1946
00:46:39,280 --> 00:46:39,290
order information to other data centers
 

1947
00:46:39,290 --> 00:46:41,430
order information to other data centers
without having to funnel all our rates

1948
00:46:41,430 --> 00:46:41,440
without having to funnel all our rates
 

1949
00:46:41,440 --> 00:46:45,580
without having to funnel all our rates
through a single logs alright so now

1950
00:46:45,580 --> 00:46:45,590
through a single logs alright so now
 

1951
00:46:45,590 --> 00:46:48,550
through a single logs alright so now
that brings us to what cops is actually

1952
00:46:48,550 --> 00:46:48,560
that brings us to what cops is actually
 

1953
00:46:48,560 --> 00:46:51,690
that brings us to what cops is actually
up to so when I can talk about now is

1954
00:46:51,690 --> 00:46:51,700
up to so when I can talk about now is
 

1955
00:46:51,700 --> 00:46:54,400
up to so when I can talk about now is
starting to be what cops does and what

1956
00:46:54,400 --> 00:46:54,410
starting to be what cops does and what
 

1957
00:46:54,410 --> 00:46:56,380
starting to be what cops does and what
I'm talking about though is the non GTE

1958
00:46:56,380 --> 00:46:56,390
I'm talking about though is the non GTE
 

1959
00:46:56,390 --> 00:47:00,730
I'm talking about though is the non GTE
version of cops cops without get

1960
00:47:00,730 --> 00:47:00,740
version of cops cops without get
 

1961
00:47:00,740 --> 00:47:09,370
version of cops cops without get
transactions ok so the cops is the basic

1962
00:47:09,370 --> 00:47:09,380
transactions ok so the cops is the basic
 

1963
00:47:09,380 --> 00:47:11,590
transactions ok so the cops is the basic
strategy here is that when cops clients

1964
00:47:11,590 --> 00:47:11,600
strategy here is that when cops clients
 

1965
00:47:11,600 --> 00:47:14,620
strategy here is that when cops clients
read and write locally they accumulate

1966
00:47:14,620 --> 00:47:14,630
read and write locally they accumulate
 

1967
00:47:14,630 --> 00:47:16,120
read and write locally they accumulate
information about the order in which

1968
00:47:16,120 --> 00:47:16,130
information about the order in which
 

1969
00:47:16,130 --> 00:47:19,120
information about the order in which
they're doing things that's a little

1970
00:47:19,120 --> 00:47:19,130
they're doing things that's a little
 

1971
00:47:19,130 --> 00:47:21,040
they're doing things that's a little
more fine-grain than the logging scheme

1972
00:47:21,040 --> 00:47:21,050
more fine-grain than the logging scheme
 

1973
00:47:21,050 --> 00:47:24,210
more fine-grain than the logging scheme
and that information is sent to the

1974
00:47:24,210 --> 00:47:24,220
and that information is sent to the
 

1975
00:47:24,220 --> 00:47:26,740
and that information is sent to the
remote data centers whenever a client

1976
00:47:26,740 --> 00:47:26,750
remote data centers whenever a client
 

1977
00:47:26,750 --> 00:47:29,050
remote data centers whenever a client
doesn't quote so this we have this

1978
00:47:29,050 --> 00:47:29,060
doesn't quote so this we have this
 

1979
00:47:29,060 --> 00:47:34,570
doesn't quote so this we have this
notion of client context and as a client

1980
00:47:34,570 --> 00:47:34,580
notion of client context and as a client
 

1981
00:47:34,580 --> 00:47:36,580
notion of client context and as a client
does get some puts you know maybe a

1982
00:47:36,580 --> 00:47:36,590
does get some puts you know maybe a
 

1983
00:47:36,590 --> 00:47:42,060
does get some puts you know maybe a
client as a get of X and then I get it Y

1984
00:47:42,060 --> 00:47:42,070
client as a get of X and then I get it Y
 

1985
00:47:42,070 --> 00:47:49,559
client as a get of X and then I get it Y
and then a put of Z with some value

1986
00:47:49,559 --> 00:47:49,569

 

1987
00:47:49,569 --> 00:47:54,999

the context the library that the client

1988
00:47:54,999 --> 00:47:55,009
the context the library that the client
 

1989
00:47:55,009 --> 00:47:57,489
the context the library that the client
uses that implements Budhan get is going

1990
00:47:57,489 --> 00:47:57,499
uses that implements Budhan get is going
 

1991
00:47:57,499 --> 00:47:59,229
uses that implements Budhan get is going
to be accumulated in this context

1992
00:47:59,229 --> 00:47:59,239
to be accumulated in this context
 

1993
00:47:59,239 --> 00:48:01,779
to be accumulated in this context
information on the side as the put sand

1994
00:48:01,779 --> 00:48:01,789
information on the side as the put sand
 

1995
00:48:01,789 --> 00:48:05,079
information on the side as the put sand
gets occur so if a client doesn't get

1996
00:48:05,079 --> 00:48:05,089
gets occur so if a client doesn't get
 

1997
00:48:05,089 --> 00:48:07,059
gets occur so if a client doesn't get
and that yields some value with version

1998
00:48:07,059 --> 00:48:07,069
and that yields some value with version
 

1999
00:48:07,069 --> 00:48:11,229
and that yields some value with version
2 I'm just going to save that as an

2000
00:48:11,229 --> 00:48:11,239
2 I'm just going to save that as an
 

2001
00:48:11,239 --> 00:48:13,239
2 I'm just going to save that as an
example maybe get returns the current

2002
00:48:13,239 --> 00:48:13,249
example maybe get returns the current
 

2003
00:48:13,249 --> 00:48:14,529
example maybe get returns the current
value of x and that current value House

2004
00:48:14,529 --> 00:48:14,539
value of x and that current value House
 

2005
00:48:14,539 --> 00:48:20,169
value of x and that current value House
version 2 and maybe Y returns the

2006
00:48:20,169 --> 00:48:20,179
version 2 and maybe Y returns the
 

2007
00:48:20,179 --> 00:48:22,539
version 2 and maybe Y returns the
current value of version for what's

2008
00:48:22,539 --> 00:48:22,549
current value of version for what's
 

2009
00:48:22,549 --> 00:48:25,449
current value of version for what's
going to be accumulated in the context

2010
00:48:25,449 --> 00:48:25,459
going to be accumulated in the context
 

2011
00:48:25,459 --> 00:48:32,349
going to be accumulated in the context
is that this client has read X and a got

2012
00:48:32,349 --> 00:48:32,359
is that this client has read X and a got
 

2013
00:48:32,359 --> 00:48:37,109
is that this client has read X and a got
version 2 then after the get for why the

2014
00:48:37,109 --> 00:48:37,119
version 2 then after the get for why the
 

2015
00:48:37,119 --> 00:48:39,910
version 2 then after the get for why the
cops client libraries gonna add to the

2016
00:48:39,910 --> 00:48:39,920
cops client libraries gonna add to the
 

2017
00:48:39,920 --> 00:48:43,089
cops client libraries gonna add to the
context so that it's not just we've read

2018
00:48:43,089 --> 00:48:43,099
context so that it's not just we've read
 

2019
00:48:43,099 --> 00:48:44,589
context so that it's not just we've read
X and gotten version 2 but also now

2020
00:48:44,589 --> 00:48:44,599
X and gotten version 2 but also now
 

2021
00:48:44,599 --> 00:48:47,729
X and gotten version 2 but also now
we've read Y and gotten version 4 and

2022
00:48:47,729 --> 00:48:47,739
we've read Y and gotten version 4 and
 

2023
00:48:47,739 --> 00:48:53,079
we've read Y and gotten version 4 and
when the client does a put the

2024
00:48:53,079 --> 00:48:53,089
when the client does a put the
 

2025
00:48:53,089 --> 00:48:56,999
when the client does a put the
information that's sent to the local

2026
00:48:56,999 --> 00:48:57,009
information that's sent to the local
 

2027
00:48:57,009 --> 00:49:02,859
information that's sent to the local
shard server is not just put key and

2028
00:49:02,859 --> 00:49:02,869
shard server is not just put key and
 

2029
00:49:02,869 --> 00:49:06,579
shard server is not just put key and
what if the value is but also these

2030
00:49:06,579 --> 00:49:06,589
what if the value is but also these
 

2031
00:49:06,589 --> 00:49:08,739
what if the value is but also these
dependencies so we're going to tell the

2032
00:49:08,739 --> 00:49:08,749
dependencies so we're going to tell the
 

2033
00:49:08,749 --> 00:49:12,579
dependencies so we're going to tell the
local shard server for Z that this

2034
00:49:12,579 --> 00:49:12,589
local shard server for Z that this
 

2035
00:49:12,589 --> 00:49:15,039
local shard server for Z that this
client has already read before doing the

2036
00:49:15,039 --> 00:49:15,049
client has already read before doing the
 

2037
00:49:15,049 --> 00:49:19,179
client has already read before doing the
put X and got version 2 and Y and got

2038
00:49:19,179 --> 00:49:19,189
put X and got version 2 and Y and got
 

2039
00:49:19,189 --> 00:49:23,210
put X and got version 2 and Y and got
version 4

2040
00:49:23,210 --> 00:49:23,220

 

2041
00:49:23,220 --> 00:49:26,100

and you know what's going on here is

2042
00:49:26,100 --> 00:49:26,110
and you know what's going on here is
 

2043
00:49:26,110 --> 00:49:28,530
and you know what's going on here is
that we're telling where the client is

2044
00:49:28,530 --> 00:49:28,540
that we're telling where the client is
 

2045
00:49:28,540 --> 00:49:30,780
that we're telling where the client is
expressing this ordering information

2046
00:49:30,780 --> 00:49:30,790
expressing this ordering information
 

2047
00:49:30,790 --> 00:49:34,590
expressing this ordering information
that this put to Z now the client had

2048
00:49:34,590 --> 00:49:34,600
that this put to Z now the client had
 

2049
00:49:34,600 --> 00:49:37,200
that this put to Z now the client had
seemed X version 2 and Y version 4

2050
00:49:37,200 --> 00:49:37,210
seemed X version 2 and Y version 4
 

2051
00:49:37,210 --> 00:49:39,030
seemed X version 2 and Y version 4
before doing the foot so anybody else

2052
00:49:39,030 --> 00:49:39,040
before doing the foot so anybody else
 

2053
00:49:39,040 --> 00:49:41,790
before doing the foot so anybody else
who reads this version of Z had also

2054
00:49:41,790 --> 00:49:41,800
who reads this version of Z had also
 

2055
00:49:41,800 --> 00:49:44,130
who reads this version of Z had also
better be seeing X&Y with the Beasties

2056
00:49:44,130 --> 00:49:44,140
better be seeing X&Y with the Beasties
 

2057
00:49:44,140 --> 00:49:48,660
better be seeing X&Y with the Beasties
versions and similarly if the client

2058
00:49:48,660 --> 00:49:48,670
versions and similarly if the client
 

2059
00:49:48,670 --> 00:49:54,950
versions and similarly if the client
then does a put of something else say Q

2060
00:49:54,950 --> 00:49:54,960

 

2061
00:49:54,960 --> 00:49:57,000

what's going to be sent to the local

2062
00:49:57,000 --> 00:49:57,010
what's going to be sent to the local
 

2063
00:49:57,010 --> 00:50:01,620
what's going to be sent to the local
shard server is not just the Q and this

2064
00:50:01,620 --> 00:50:01,630
shard server is not just the Q and this
 

2065
00:50:01,630 --> 00:50:05,250
shard server is not just the Q and this
but also the fact that this client had

2066
00:50:05,250 --> 00:50:05,260
but also the fact that this client had
 

2067
00:50:05,260 --> 00:50:08,010
but also the fact that this client had
previously done some gets input so let's

2068
00:50:08,010 --> 00:50:08,020
previously done some gets input so let's
 

2069
00:50:08,020 --> 00:50:12,870
previously done some gets input so let's
suppose this put yields version 3 you

2070
00:50:12,870 --> 00:50:12,880
suppose this put yields version 3 you
 

2071
00:50:12,880 --> 00:50:14,940
suppose this put yields version 3 you
know the local shard server says a high

2072
00:50:14,940 --> 00:50:14,950
know the local shard server says a high
 

2073
00:50:14,950 --> 00:50:16,950
know the local shard server says a high
assigned version three to your new value

2074
00:50:16,950 --> 00:50:16,960
assigned version three to your new value
 

2075
00:50:16,960 --> 00:50:19,380
assigned version three to your new value
for Z then when we come to do the quit

2076
00:50:19,380 --> 00:50:19,390
for Z then when we come to do the quit
 

2077
00:50:19,390 --> 00:50:21,270
for Z then when we come to do the quit
of Q is going to be accompanied with

2078
00:50:21,270 --> 00:50:21,280
of Q is going to be accompanied with
 

2079
00:50:21,280 --> 00:50:22,980
of Q is going to be accompanied with
dependency information that says this

2080
00:50:22,980 --> 00:50:22,990
dependency information that says this
 

2081
00:50:22,990 --> 00:50:25,620
dependency information that says this
put comes after this put of Q comes

2082
00:50:25,620 --> 00:50:25,630
put comes after this put of Q comes
 

2083
00:50:25,630 --> 00:50:29,010
put comes after this put of Q comes
after the put of Z that created Z

2084
00:50:29,010 --> 00:50:29,020
after the put of Z that created Z
 

2085
00:50:29,020 --> 00:50:33,060
after the put of Z that created Z
version three and at least notionally

2086
00:50:33,060 --> 00:50:33,070
version three and at least notionally
 

2087
00:50:33,070 --> 00:50:38,069
version three and at least notionally
the rest of the context

2088
00:50:38,069 --> 00:50:38,079

 

2089
00:50:38,079 --> 00:50:40,630

ought to be passed as well although

2090
00:50:40,630 --> 00:50:40,640
ought to be passed as well although
 

2091
00:50:40,640 --> 00:50:46,660
ought to be passed as well although
we'll see that for various reasons cops

2092
00:50:46,660 --> 00:50:46,670
we'll see that for various reasons cops
 

2093
00:50:46,670 --> 00:50:49,359
we'll see that for various reasons cops
can optimize away this information and

2094
00:50:49,359 --> 00:50:49,369
can optimize away this information and
 

2095
00:50:49,369 --> 00:50:51,970
can optimize away this information and
if there's a proceeding put only sends

2096
00:50:51,970 --> 00:50:51,980
if there's a proceeding put only sends
 

2097
00:50:51,980 --> 00:50:56,740
if there's a proceeding put only sends
the version information for the point so

2098
00:50:56,740 --> 00:50:56,750
the version information for the point so
 

2099
00:50:56,750 --> 00:50:58,000
the version information for the point so
the question is is it important for the

2100
00:50:58,000 --> 00:50:58,010
the question is is it important for the
 

2101
00:50:58,010 --> 00:51:03,190
the question is is it important for the
context to be ordered I don't believe so

2102
00:51:03,190 --> 00:51:03,200
context to be ordered I don't believe so
 

2103
00:51:03,200 --> 00:51:09,099
context to be ordered I don't believe so
I think I think it's sufficient to treat

2104
00:51:09,099 --> 00:51:09,109
I think I think it's sufficient to treat
 

2105
00:51:09,109 --> 00:51:10,839
I think I think it's sufficient to treat
the context or at least the information

2106
00:51:10,839 --> 00:51:10,849
the context or at least the information
 

2107
00:51:10,849 --> 00:51:15,760
the context or at least the information
that's sent in the put as just a big bag

2108
00:51:15,760 --> 00:51:15,770
that's sent in the put as just a big bag
 

2109
00:51:15,770 --> 00:51:20,799
that's sent in the put as just a big bag
of dependencies for at least four

2110
00:51:20,799 --> 00:51:20,809
of dependencies for at least four
 

2111
00:51:20,809 --> 00:51:25,809
of dependencies for at least four
non-transactional cops okay so the

2112
00:51:25,809 --> 00:51:25,819
non-transactional cops okay so the
 

2113
00:51:25,819 --> 00:51:27,549
non-transactional cops okay so the
clients are community this context and

2114
00:51:27,549 --> 00:51:27,559
clients are community this context and
 

2115
00:51:27,559 --> 00:51:29,290
clients are community this context and
basically send the context with each put

2116
00:51:29,290 --> 00:51:29,300
basically send the context with each put
 

2117
00:51:29,300 --> 00:51:34,030
basically send the context with each put
and the context is encoding this order

2118
00:51:34,030 --> 00:51:34,040
and the context is encoding this order
 

2119
00:51:34,040 --> 00:51:36,819
and the context is encoding this order
information that in my previous straw

2120
00:51:36,819 --> 00:51:36,829
information that in my previous straw
 

2121
00:51:36,829 --> 00:51:39,970
information that in my previous straw
man straw man 2 was sort of forced by

2122
00:51:39,970 --> 00:51:39,980
man straw man 2 was sort of forced by
 

2123
00:51:39,980 --> 00:51:41,349
man straw man 2 was sort of forced by
sink instead of doing that we're not

2124
00:51:41,349 --> 00:51:41,359
sink instead of doing that we're not
 

2125
00:51:41,359 --> 00:51:43,539
sink instead of doing that we're not
waiting for accompanying these puts with

2126
00:51:43,539 --> 00:51:43,549
waiting for accompanying these puts with
 

2127
00:51:43,549 --> 00:51:47,079
waiting for accompanying these puts with
oh this put needs to come after these

2128
00:51:47,079 --> 00:51:47,089
oh this put needs to come after these
 

2129
00:51:47,089 --> 00:51:48,940
oh this put needs to come after these
previous values and this put needs to

2130
00:51:48,940 --> 00:51:48,950
previous values and this put needs to
 

2131
00:51:48,950 --> 00:51:56,109
previous values and this put needs to
come after these previous values cops

2132
00:51:56,109 --> 00:51:56,119
come after these previous values cops
 

2133
00:51:56,119 --> 00:51:58,930
come after these previous values cops
calls these relationships that this put

2134
00:51:58,930 --> 00:51:58,940
calls these relationships that this put
 

2135
00:51:58,940 --> 00:52:00,880
calls these relationships that this put
needs to come after these previous

2136
00:52:00,880 --> 00:52:00,890
needs to come after these previous
 

2137
00:52:00,890 --> 00:52:05,890
needs to come after these previous
values of dependency

2138
00:52:05,890 --> 00:52:05,900

 

2139
00:52:05,900 --> 00:52:12,000

and dependency and it writes it as

2140
00:52:12,000 --> 00:52:12,010
and dependency and it writes it as
 

2141
00:52:12,010 --> 00:52:14,769
and dependency and it writes it as
supposing this foot produces Z version

2142
00:52:14,769 --> 00:52:14,779
supposing this foot produces Z version
 

2143
00:52:14,779 --> 00:52:20,529
supposing this foot produces Z version
three we express it as really there's

2144
00:52:20,529 --> 00:52:20,539
three we express it as really there's
 

2145
00:52:20,539 --> 00:52:23,710
three we express it as really there's
two actually two dependencies here one

2146
00:52:23,710 --> 00:52:23,720
two actually two dependencies here one
 

2147
00:52:23,720 --> 00:52:28,839
two actually two dependencies here one
is that X version two comes before Z

2148
00:52:28,839 --> 00:52:28,849
is that X version two comes before Z
 

2149
00:52:28,849 --> 00:52:32,789
is that X version two comes before Z
version three and the other is that Y

2150
00:52:32,789 --> 00:52:32,799
version three and the other is that Y
 

2151
00:52:32,799 --> 00:52:38,010
version three and the other is that Y
version four comes before Z version

2152
00:52:38,010 --> 00:52:38,020
version four comes before Z version
 

2153
00:52:38,020 --> 00:52:42,849
version four comes before Z version
three and these are it's just definition

2154
00:52:42,849 --> 00:52:42,859
three and these are it's just definition
 

2155
00:52:42,859 --> 00:52:46,059
three and these are it's just definition
or notation that the paper uses to talk

2156
00:52:46,059 --> 00:52:46,069
or notation that the paper uses to talk
 

2157
00:52:46,069 --> 00:52:50,769
or notation that the paper uses to talk
about these individual pieces of order

2158
00:52:50,769 --> 00:52:50,779
about these individual pieces of order
 

2159
00:52:50,779 --> 00:52:53,609
about these individual pieces of order
information that cops needs to enforce

2160
00:52:53,609 --> 00:52:53,619
information that cops needs to enforce
 

2161
00:52:53,619 --> 00:52:58,329
information that cops needs to enforce
alright so so then what is this what is

2162
00:52:58,329 --> 00:52:58,339
alright so so then what is this what is
 

2163
00:52:58,339 --> 00:52:59,859
alright so so then what is this what is
this dependency information this passed

2164
00:52:59,859 --> 00:52:59,869
this dependency information this passed
 

2165
00:52:59,869 --> 00:53:01,990
this dependency information this passed
to the local shard server what does that

2166
00:53:01,990 --> 00:53:02,000
to the local shard server what does that
 

2167
00:53:02,000 --> 00:53:08,440
to the local shard server what does that
actually cause cops to do well eats cops

2168
00:53:08,440 --> 00:53:08,450
actually cause cops to do well eats cops
 

2169
00:53:08,450 --> 00:53:12,279
actually cause cops to do well eats cops
shard server when it receives a put from

2170
00:53:12,279 --> 00:53:12,289
shard server when it receives a put from
 

2171
00:53:12,289 --> 00:53:15,010
shard server when it receives a put from
a local client first it assigns the new

2172
00:53:15,010 --> 00:53:15,020
a local client first it assigns the new
 

2173
00:53:15,020 --> 00:53:18,700
a local client first it assigns the new
version number then it stores the new

2174
00:53:18,700 --> 00:53:18,710
version number then it stores the new
 

2175
00:53:18,710 --> 00:53:21,190
version number then it stores the new
value you know it stores for Z this new

2176
00:53:21,190 --> 00:53:21,200
value you know it stores for Z this new
 

2177
00:53:21,200 --> 00:53:22,900
value you know it stores for Z this new
value along with the version number that

2178
00:53:22,900 --> 00:53:22,910
value along with the version number that
 

2179
00:53:22,910 --> 00:53:30,549
value along with the version number that
it long version number that allocated

2180
00:53:30,549 --> 00:53:30,559
it long version number that allocated
 

2181
00:53:30,559 --> 00:53:33,250
it long version number that allocated
and then it sends the whole mess to each

2182
00:53:33,250 --> 00:53:33,260
and then it sends the whole mess to each
 

2183
00:53:33,260 --> 00:53:35,410
and then it sends the whole mess to each
of the other data center so at least

2184
00:53:35,410 --> 00:53:35,420
of the other data center so at least
 

2185
00:53:35,420 --> 00:53:38,589
of the other data center so at least
some non GT cops the local shard server

2186
00:53:38,589 --> 00:53:38,599
some non GT cops the local shard server
 

2187
00:53:38,599 --> 00:53:42,160
some non GT cops the local shard server
only remembers the key value and latest

2188
00:53:42,160 --> 00:53:42,170
only remembers the key value and latest
 

2189
00:53:42,170 --> 00:53:43,359
only remembers the key value and latest
version number doesn't actually remember

2190
00:53:43,359 --> 00:53:43,369
version number doesn't actually remember
 

2191
00:53:43,369 --> 00:53:45,160
version number doesn't actually remember
the dependencies and only forwards them

2192
00:53:45,160 --> 00:53:45,170
the dependencies and only forwards them
 

2193
00:53:45,170 --> 00:53:46,599
the dependencies and only forwards them
across the network to the other data

2194
00:53:46,599 --> 00:53:46,609
across the network to the other data
 

2195
00:53:46,609 --> 00:53:53,069
across the network to the other data
centers so now the position were in is

2196
00:53:53,069 --> 00:53:53,079
centers so now the position were in is
 

2197
00:53:53,079 --> 00:53:57,309
centers so now the position were in is
that let's say we had a client produced

2198
00:53:57,309 --> 00:53:57,319
that let's say we had a client produced
 

2199
00:53:57,319 --> 00:54:03,370
that let's say we had a client produced
a put of Z and some value it was

2200
00:54:03,370 --> 00:54:03,380
a put of Z and some value it was
 

2201
00:54:03,380 --> 00:54:08,890
a put of Z and some value it was
assigned version number v3 and it had

2202
00:54:08,890 --> 00:54:08,900
assigned version number v3 and it had
 

2203
00:54:08,900 --> 00:54:13,080
assigned version number v3 and it had
these dependencies

2204
00:54:13,080 --> 00:54:13,090

 

2205
00:54:13,090 --> 00:54:19,950

XV 2 + a YB 4 right and this is sent

2206
00:54:19,950 --> 00:54:19,960
XV 2 + a YB 4 right and this is sent
 

2207
00:54:19,960 --> 00:54:22,620
XV 2 + a YB 4 right and this is sent
from datacenter 1 let's say to the other

2208
00:54:22,620 --> 00:54:22,630
from datacenter 1 let's say to the other
 

2209
00:54:22,630 --> 00:54:25,860
from datacenter 1 let's say to the other
data center so we got a datacenter 2 and

2210
00:54:25,860 --> 00:54:25,870
data center so we got a datacenter 2 and
 

2211
00:54:25,870 --> 00:54:29,010
data center so we got a datacenter 2 and
datacenter 3 both receive this now in

2212
00:54:29,010 --> 00:54:29,020
datacenter 3 both receive this now in
 

2213
00:54:29,020 --> 00:54:31,200
datacenter 3 both receive this now in
fact this information is sent from The

2214
00:54:31,200 --> 00:54:31,210
fact this information is sent from The
 

2215
00:54:31,210 --> 00:54:34,350
fact this information is sent from The
Shard server for ze so there's lots of

2216
00:54:34,350 --> 00:54:34,360
Shard server for ze so there's lots of
 

2217
00:54:34,360 --> 00:54:37,710
Shard server for ze so there's lots of
shard servers but only the shard for Z

2218
00:54:37,710 --> 00:54:37,720
shard servers but only the shard for Z
 

2219
00:54:37,720 --> 00:54:40,520
shard servers but only the shard for Z
is involved in this

2220
00:54:40,520 --> 00:54:40,530
is involved in this
 

2221
00:54:40,530 --> 00:54:43,560
is involved in this
so here datacenter 3 the shirts are for

2222
00:54:43,560 --> 00:54:43,570
so here datacenter 3 the shirts are for
 

2223
00:54:43,570 --> 00:54:49,950
so here datacenter 3 the shirts are for
Z is going to receive this put from sent

2224
00:54:49,950 --> 00:54:49,960
Z is going to receive this put from sent
 

2225
00:54:49,960 --> 00:54:56,060
Z is going to receive this put from sent
by the client short server forwards it

2226
00:54:56,060 --> 00:54:56,070

 

2227
00:54:56,070 --> 00:55:00,150

this short server the the with this

2228
00:55:00,150 --> 00:55:00,160
this short server the the with this
 

2229
00:55:00,160 --> 00:55:02,190
this short server the the with this
dependency information that you know X V

2230
00:55:02,190 --> 00:55:02,200
dependency information that you know X V
 

2231
00:55:02,200 --> 00:55:04,500
dependency information that you know X V
2 and Y before come before Z B 3 but

2232
00:55:04,500 --> 00:55:04,510
2 and Y before come before Z B 3 but
 

2233
00:55:04,510 --> 00:55:06,900
2 and Y before come before Z B 3 but
that really means is operationally is

2234
00:55:06,900 --> 00:55:06,910
that really means is operationally is
 

2235
00:55:06,910 --> 00:55:10,260
that really means is operationally is
that this new version of Z can't be

2236
00:55:10,260 --> 00:55:10,270
that this new version of Z can't be
 

2237
00:55:10,270 --> 00:55:14,610
that this new version of Z can't be
revealed to clients until its

2238
00:55:14,610 --> 00:55:14,620
revealed to clients until its
 

2239
00:55:14,620 --> 00:55:17,250
revealed to clients until its
dependencies these versions of x and y

2240
00:55:17,250 --> 00:55:17,260
dependencies these versions of x and y
 

2241
00:55:17,260 --> 00:55:22,170
dependencies these versions of x and y
have already been revealed to clients in

2242
00:55:22,170 --> 00:55:22,180
have already been revealed to clients in
 

2243
00:55:22,180 --> 00:55:24,630
have already been revealed to clients in
datacenter 3 so that means that the

2244
00:55:24,630 --> 00:55:24,640
datacenter 3 so that means that the
 

2245
00:55:24,640 --> 00:55:27,060
datacenter 3 so that means that the
shard server visi must hold this right

2246
00:55:27,060 --> 00:55:27,070
shard server visi must hold this right
 

2247
00:55:27,070 --> 00:55:30,000
shard server visi must hold this right
must delay applying this right to Z

2248
00:55:30,000 --> 00:55:30,010
must delay applying this right to Z
 

2249
00:55:30,010 --> 00:55:33,360
must delay applying this right to Z
until it knows that these 2 dependencies

2250
00:55:33,360 --> 00:55:33,370
until it knows that these 2 dependencies
 

2251
00:55:33,370 --> 00:55:35,400
until it knows that these 2 dependencies
are visible in the local data center so

2252
00:55:35,400 --> 00:55:35,410
are visible in the local data center so
 

2253
00:55:35,410 --> 00:55:38,910
are visible in the local data center so
that means that Z has to go off let's

2254
00:55:38,910 --> 00:55:38,920
that means that Z has to go off let's
 

2255
00:55:38,920 --> 00:55:40,950
that means that Z has to go off let's
say the you know we have these shard

2256
00:55:40,950 --> 00:55:40,960
say the you know we have these shard
 

2257
00:55:40,960 --> 00:55:43,170
say the you know we have these shard
server for X and the shorts are for Y

2258
00:55:43,170 --> 00:55:43,180
server for X and the shorts are for Y
 

2259
00:55:43,180 --> 00:55:45,540
server for X and the shorts are for Y
Z's gotta actually send a message to the

2260
00:55:45,540 --> 00:55:45,550
Z's gotta actually send a message to the
 

2261
00:55:45,550 --> 00:55:47,310
Z's gotta actually send a message to the
shard server for X and the shard server

2262
00:55:47,310 --> 00:55:47,320
shard server for X and the shard server
 

2263
00:55:47,320 --> 00:55:49,410
shard server for X and the shard server
for Y saying you know what's the version

2264
00:55:49,410 --> 00:55:49,420
for Y saying you know what's the version
 

2265
00:55:49,420 --> 00:55:52,320
for Y saying you know what's the version
number for a current version for a

2266
00:55:52,320 --> 00:55:52,330
number for a current version for a
 

2267
00:55:52,330 --> 00:55:55,140
number for a current version for a
number for x and y and has to wait for

2268
00:55:55,140 --> 00:55:55,150
number for x and y and has to wait for
 

2269
00:55:55,150 --> 00:55:58,020
number for x and y and has to wait for
the result if both of these shards

2270
00:55:58,020 --> 00:55:58,030
the result if both of these shards
 

2271
00:55:58,030 --> 00:55:59,610
the result if both of these shards
servers say oh you know they give a

2272
00:55:59,610 --> 00:55:59,620
servers say oh you know they give a
 

2273
00:55:59,620 --> 00:56:01,440
servers say oh you know they give a
version number that's 2 or higher or 4

2274
00:56:01,440 --> 00:56:01,450
version number that's 2 or higher or 4
 

2275
00:56:01,450 --> 00:56:03,840
version number that's 2 or higher or 4
or higher for Y then Z can go ahead and

2276
00:56:03,840 --> 00:56:03,850
or higher for Y then Z can go ahead and
 

2277
00:56:03,850 --> 00:56:09,410
or higher for Y then Z can go ahead and
apply to put to its local table of data

2278
00:56:09,410 --> 00:56:09,420
apply to put to its local table of data
 

2279
00:56:09,420 --> 00:56:13,830
apply to put to its local table of data
however you know maybe these two shard

2280
00:56:13,830 --> 00:56:13,840
however you know maybe these two shard
 

2281
00:56:13,840 --> 00:56:16,380
however you know maybe these two shard
servers haven't received the updates

2282
00:56:16,380 --> 00:56:16,390
servers haven't received the updates
 

2283
00:56:16,390 --> 00:56:17,610
servers haven't received the updates
that correspond to version 2 of

2284
00:56:17,610 --> 00:56:17,620
that correspond to version 2 of
 

2285
00:56:17,620 --> 00:56:20,250
that correspond to version 2 of
extraversion for Y and that KC has to

2286
00:56:20,250 --> 00:56:20,260
extraversion for Y and that KC has to
 

2287
00:56:20,260 --> 00:56:22,140
extraversion for Y and that KC has to
hold on to this update the shard server

2288
00:56:22,140 --> 00:56:22,150
hold on to this update the shard server
 

2289
00:56:22,150 --> 00:56:23,880
hold on to this update the shard server
is he has to hold on to this update and

2290
00:56:23,880 --> 00:56:23,890
is he has to hold on to this update and
 

2291
00:56:23,890 --> 00:56:25,530
is he has to hold on to this update and
tell

2292
00:56:25,530 --> 00:56:25,540
tell
 

2293
00:56:25,540 --> 00:56:27,300
tell
the indicated versions of X or Y ever

2294
00:56:27,300 --> 00:56:27,310
the indicated versions of X or Y ever
 

2295
00:56:27,310 --> 00:56:29,670
the indicated versions of X or Y ever
actually arrived and been installed on

2296
00:56:29,670 --> 00:56:29,680
actually arrived and been installed on
 

2297
00:56:29,680 --> 00:56:32,010
actually arrived and been installed on
these two short servers so there may be

2298
00:56:32,010 --> 00:56:32,020
these two short servers so there may be
 

2299
00:56:32,020 --> 00:56:35,070
these two short servers so there may be
some delays now and only after these

2300
00:56:35,070 --> 00:56:35,080
some delays now and only after these
 

2301
00:56:35,080 --> 00:56:37,500
some delays now and only after these
dependencies are visible at datacenter 3

2302
00:56:37,500 --> 00:56:37,510
dependencies are visible at datacenter 3
 

2303
00:56:37,510 --> 00:56:40,230
dependencies are visible at datacenter 3
only then can the shards of a4z go ahead

2304
00:56:40,230 --> 00:56:40,240
only then can the shards of a4z go ahead
 

2305
00:56:40,240 --> 00:56:43,310
only then can the shards of a4z go ahead
and write updated stable for Z to have

2306
00:56:43,310 --> 00:56:43,320
and write updated stable for Z to have
 

2307
00:56:43,320 --> 00:56:52,560
and write updated stable for Z to have
version 3 ok and what's what that means

2308
00:56:52,560 --> 00:56:52,570
version 3 ok and what's what that means
 

2309
00:56:52,570 --> 00:56:54,630
version 3 ok and what's what that means
of course is that if a client the

2310
00:56:54,630 --> 00:56:54,640
of course is that if a client the
 

2311
00:56:54,640 --> 00:56:56,910
of course is that if a client the
datacenter 3 does a read for Z and sees

2312
00:56:56,910 --> 00:56:56,920
datacenter 3 does a read for Z and sees
 

2313
00:56:56,920 --> 00:56:59,160
datacenter 3 does a read for Z and sees
version 3 then because he already waited

2314
00:56:59,160 --> 00:56:59,170
version 3 then because he already waited
 

2315
00:56:59,170 --> 00:57:01,860
version 3 then because he already waited
that means if that client then reads X

2316
00:57:01,860 --> 00:57:01,870
that means if that client then reads X
 

2317
00:57:01,870 --> 00:57:04,200
that means if that client then reads X
or Y it's guaranteed to see at least

2318
00:57:04,200 --> 00:57:04,210
or Y it's guaranteed to see at least
 

2319
00:57:04,210 --> 00:57:06,510
or Y it's guaranteed to see at least
version 2 of X and at least version 2 of

2320
00:57:06,510 --> 00:57:06,520
version 2 of X and at least version 2 of
 

2321
00:57:06,520 --> 00:57:10,410
version 2 of X and at least version 2 of
Y because he didn't reveal the shards or

2322
00:57:10,410 --> 00:57:10,420
Y because he didn't reveal the shards or
 

2323
00:57:10,420 --> 00:57:13,770
Y because he didn't reveal the shards or
didn't reveal Z until it was sure the

2324
00:57:13,770 --> 00:57:13,780
didn't reveal Z until it was sure the
 

2325
00:57:13,780 --> 00:57:19,200
didn't reveal Z until it was sure the
dependencies would be visible ok so

2326
00:57:19,200 --> 00:57:19,210
dependencies would be visible ok so
 

2327
00:57:19,210 --> 00:57:20,850
dependencies would be visible ok so
question what if x and y never get their

2328
00:57:20,850 --> 00:57:20,860
question what if x and y never get their
 

2329
00:57:20,860 --> 00:57:22,860
question what if x and y never get their
values perhaps due to a network

2330
00:57:22,860 --> 00:57:22,870
values perhaps due to a network
 

2331
00:57:22,870 --> 00:57:24,810
values perhaps due to a network
partition with the Z shard block forever

2332
00:57:24,810 --> 00:57:24,820
partition with the Z shard block forever
 

2333
00:57:24,820 --> 00:57:29,250
partition with the Z shard block forever
yeah the um the semantics require the Z

2334
00:57:29,250 --> 00:57:29,260
yeah the um the semantics require the Z
 

2335
00:57:29,260 --> 00:57:34,710
yeah the um the semantics require the Z
shard to block forever that's absolutely

2336
00:57:34,710 --> 00:57:34,720
shard to block forever that's absolutely
 

2337
00:57:34,720 --> 00:57:36,390
shard to block forever that's absolutely
true so you know there's certainly an

2338
00:57:36,390 --> 00:57:36,400
true so you know there's certainly an
 

2339
00:57:36,400 --> 00:57:40,860
true so you know there's certainly an
assumption here that well they're you

2340
00:57:40,860 --> 00:57:40,870
assumption here that well they're you
 

2341
00:57:40,870 --> 00:57:42,840
assumption here that well they're you
know two ways that that might turn out

2342
00:57:42,840 --> 00:57:42,850
know two ways that that might turn out
 

2343
00:57:42,850 --> 00:57:45,420
know two ways that that might turn out
ok one is somebody repairs the network

2344
00:57:45,420 --> 00:57:45,430
ok one is somebody repairs the network
 

2345
00:57:45,430 --> 00:57:48,120
ok one is somebody repairs the network
or repairs whatever was broken and x and

2346
00:57:48,120 --> 00:57:48,130
or repairs whatever was broken and x and
 

2347
00:57:48,130 --> 00:57:50,730
or repairs whatever was broken and x and
y do eventually get their updates that

2348
00:57:50,730 --> 00:57:50,740
y do eventually get their updates that
 

2349
00:57:50,740 --> 00:57:52,410
y do eventually get their updates that
be one way to fix this and then z will

2350
00:57:52,410 --> 00:57:52,420
be one way to fix this and then z will
 

2351
00:57:52,420 --> 00:57:53,460
be one way to fix this and then z will
finally be able to apply the update

2352
00:57:53,460 --> 00:57:53,470
finally be able to apply the update
 

2353
00:57:53,470 --> 00:57:57,630
finally be able to apply the update
might have to wait a long time the other

2354
00:57:57,630 --> 00:57:57,640
might have to wait a long time the other
 

2355
00:57:57,640 --> 00:57:59,040
might have to wait a long time the other
possibility is maybe the data center is

2356
00:57:59,040 --> 00:57:59,050
possibility is maybe the data center is
 

2357
00:57:59,050 --> 00:58:00,420
possibility is maybe the data center is
entirely destroyed

2358
00:58:00,420 --> 00:58:00,430
entirely destroyed
 

2359
00:58:00,430 --> 00:58:02,700
entirely destroyed
you mean the building burns down and so

2360
00:58:02,700 --> 00:58:02,710
you mean the building burns down and so
 

2361
00:58:02,710 --> 00:58:04,490
you mean the building burns down and so
we don't have to worry about this at all

2362
00:58:04,490 --> 00:58:04,500
we don't have to worry about this at all
 

2363
00:58:04,500 --> 00:58:07,770
we don't have to worry about this at all
but it does point out a problem that's

2364
00:58:07,770 --> 00:58:07,780
but it does point out a problem that's
 

2365
00:58:07,780 --> 00:58:13,670
but it does point out a problem that's
real criticism of causal consistency and

2366
00:58:13,670 --> 00:58:13,680
real criticism of causal consistency and
 

2367
00:58:13,680 --> 00:58:18,840
real criticism of causal consistency and
that's that these delays can actually be

2368
00:58:18,840 --> 00:58:18,850
that's that these delays can actually be
 

2369
00:58:18,850 --> 00:58:21,360
that's that these delays can actually be
quite nasty because you can imagine oh

2370
00:58:21,360 --> 00:58:21,370
quite nasty because you can imagine oh
 

2371
00:58:21,370 --> 00:58:23,220
quite nasty because you can imagine oh
you know Z is waiting for the correct

2372
00:58:23,220 --> 00:58:23,230
you know Z is waiting for the correct
 

2373
00:58:23,230 --> 00:58:25,020
you know Z is waiting for the correct
value for X to arrive you know even if

2374
00:58:25,020 --> 00:58:25,030
value for X to arrive you know even if
 

2375
00:58:25,030 --> 00:58:26,580
value for X to arrive you know even if
there's no failures and nothing burns

2376
00:58:26,580 --> 00:58:26,590
there's no failures and nothing burns
 

2377
00:58:26,590 --> 00:58:29,700
there's no failures and nothing burns
down even mere slowness can be

2378
00:58:29,700 --> 00:58:29,710
down even mere slowness can be
 

2379
00:58:29,710 --> 00:58:31,830
down even mere slowness can be
irritating Z mate you have to wait for X

2380
00:58:31,830 --> 00:58:31,840
irritating Z mate you have to wait for X
 

2381
00:58:31,840 --> 00:58:34,560
irritating Z mate you have to wait for X
to show up well it could be that X has

2382
00:58:34,560 --> 00:58:34,570
to show up well it could be that X has
 

2383
00:58:34,570 --> 00:58:38,100
to show up well it could be that X has
already showed up and has arrived at

2384
00:58:38,100 --> 00:58:38,110
already showed up and has arrived at
 

2385
00:58:38,110 --> 00:58:38,970
already showed up and has arrived at
this charts

2386
00:58:38,970 --> 00:58:38,980
this charts
 

2387
00:58:38,980 --> 00:58:41,280
this charts
but it itself had dependencies maybe on

2388
00:58:41,280 --> 00:58:41,290
but it itself had dependencies maybe on
 

2389
00:58:41,290 --> 00:58:43,620
but it itself had dependencies maybe on
key a and so this chart server can't

2390
00:58:43,620 --> 00:58:43,630
key a and so this chart server can't
 

2391
00:58:43,630 --> 00:58:45,960
key a and so this chart server can't
install it until the update for a

2392
00:58:45,960 --> 00:58:45,970
install it until the update for a
 

2393
00:58:45,970 --> 00:58:49,230
install it until the update for a
arrives because X this put of X depended

2394
00:58:49,230 --> 00:58:49,240
arrives because X this put of X depended
 

2395
00:58:49,240 --> 00:58:52,560
arrives because X this put of X depended
on some key a and Z still has to wait

2396
00:58:52,560 --> 00:58:52,570
on some key a and Z still has to wait
 

2397
00:58:52,570 --> 00:58:54,329
on some key a and Z still has to wait
for that because what Z's waiting for is

2398
00:58:54,329 --> 00:58:54,339
for that because what Z's waiting for is
 

2399
00:58:54,339 --> 00:58:57,150
for that because what Z's waiting for is
for this version of X to be visible to

2400
00:58:57,150 --> 00:58:57,160
for this version of X to be visible to
 

2401
00:58:57,160 --> 00:58:59,490
for this version of X to be visible to
client so it has to be installed so if

2402
00:58:59,490 --> 00:58:59,500
client so it has to be installed so if
 

2403
00:58:59,500 --> 00:59:00,930
client so it has to be installed so if
it's arrived if the update for X is

2404
00:59:00,930 --> 00:59:00,940
it's arrived if the update for X is
 

2405
00:59:00,940 --> 00:59:02,910
it's arrived if the update for X is
arrived but itself is waiting for some

2406
00:59:02,910 --> 00:59:02,920
arrived but itself is waiting for some
 

2407
00:59:02,920 --> 00:59:05,430
arrived but itself is waiting for some
other dependency then we may get these

2408
00:59:05,430 --> 00:59:05,440
other dependency then we may get these
 

2409
00:59:05,440 --> 00:59:09,870
other dependency then we may get these
cascading dependency Waits and in real

2410
00:59:09,870 --> 00:59:09,880
cascading dependency Waits and in real
 

2411
00:59:09,880 --> 00:59:11,849
cascading dependency Waits and in real
life actually these you know these

2412
00:59:11,849 --> 00:59:11,859
life actually these you know these
 

2413
00:59:11,859 --> 00:59:15,300
life actually these you know these
probably would happen and it's one of

2414
00:59:15,300 --> 00:59:15,310
probably would happen and it's one of
 

2415
00:59:15,310 --> 00:59:19,589
probably would happen and it's one of
the problems that people bring up and

2416
00:59:19,589 --> 00:59:19,599
the problems that people bring up and
 

2417
00:59:19,599 --> 00:59:21,450
the problems that people bring up and
you know against calls are consistency

2418
00:59:21,450 --> 00:59:21,460
you know against calls are consistency
 

2419
00:59:21,460 --> 00:59:24,720
you know against calls are consistency
when when you try to persuade them it's

2420
00:59:24,720 --> 00:59:24,730
when when you try to persuade them it's
 

2421
00:59:24,730 --> 00:59:27,060
when when you try to persuade them it's
a good idea this problem of cascading

2422
00:59:27,060 --> 00:59:27,070
a good idea this problem of cascading
 

2423
00:59:27,070 --> 00:59:30,900
a good idea this problem of cascading
delays so that's too bad um although on

2424
00:59:30,900 --> 00:59:30,910
delays so that's too bad um although on
 

2425
00:59:30,910 --> 00:59:33,750
delays so that's too bad um although on
that note it is true that the authors of

2426
00:59:33,750 --> 00:59:33,760
that note it is true that the authors of
 

2427
00:59:33,760 --> 00:59:37,230
that note it is true that the authors of
the cops paper have a follow on P

2428
00:59:37,230 --> 00:59:37,240
the cops paper have a follow on P
 

2429
00:59:37,240 --> 00:59:38,430
the cops paper have a follow on P
actually a couple of interesting

2430
00:59:38,430 --> 00:59:38,440
actually a couple of interesting
 

2431
00:59:38,440 --> 00:59:41,579
actually a couple of interesting
follow-on papers but one of them has

2432
00:59:41,579 --> 00:59:41,589
follow-on papers but one of them has
 

2433
00:59:41,589 --> 00:59:43,920
follow-on papers but one of them has
some mitigations for this cascading

2434
00:59:43,920 --> 00:59:43,930
some mitigations for this cascading
 

2435
00:59:43,930 --> 00:59:47,640
some mitigations for this cascading
weight problem okay so for a photo

2436
00:59:47,640 --> 00:59:47,650
weight problem okay so for a photo
 

2437
00:59:47,650 --> 00:59:50,579
weight problem okay so for a photo
example this is the scheme this cop

2438
00:59:50,579 --> 00:59:50,589
example this is the scheme this cop
 

2439
00:59:50,589 --> 00:59:51,960
example this is the scheme this cop
scheme will actually solve our photo

2440
00:59:51,960 --> 00:59:51,970
scheme will actually solve our photo
 

2441
00:59:51,970 --> 00:59:53,940
scheme will actually solve our photo
example and the reason is that you know

2442
00:59:53,940 --> 00:59:53,950
example and the reason is that you know
 

2443
00:59:53,950 --> 00:59:55,349
example and the reason is that you know
this put we're talking about is the put

2444
00:59:55,349 --> 00:59:55,359
this put we're talking about is the put
 

2445
00:59:55,359 --> 00:59:58,349
this put we're talking about is the put
for the photo list the dependencies is

2446
00:59:58,349 --> 00:59:58,359
for the photo list the dependencies is
 

2447
00:59:58,359 --> 01:00:00,349
for the photo list the dependencies is
gonna have and its dependency list is

2448
01:00:00,349 --> 01:00:00,359
gonna have and its dependency list is
 

2449
01:00:00,359 --> 01:00:05,010
gonna have and its dependency list is
the insert of the photo and that means

2450
01:00:05,010 --> 01:00:05,020
the insert of the photo and that means
 

2451
01:00:05,020 --> 01:00:06,329
the insert of the photo and that means
that when the put for the photo Willis

2452
01:00:06,329 --> 01:00:06,339
that when the put for the photo Willis
 

2453
01:00:06,339 --> 01:00:10,290
that when the put for the photo Willis
arrives at the remote site the remote

2454
01:00:10,290 --> 01:00:10,300
arrives at the remote site the remote
 

2455
01:00:10,300 --> 01:00:11,940
arrives at the remote site the remote
chard server is essentially going to

2456
01:00:11,940 --> 01:00:11,950
chard server is essentially going to
 

2457
01:00:11,950 --> 01:00:13,980
chard server is essentially going to
wait for the photo to be inserted and

2458
01:00:13,980 --> 01:00:13,990
wait for the photo to be inserted and
 

2459
01:00:13,990 --> 01:00:16,470
wait for the photo to be inserted and
visible before it updates the photo list

2460
01:00:16,470 --> 01:00:16,480
visible before it updates the photo list
 

2461
01:00:16,480 --> 01:00:19,349
visible before it updates the photo list
so any client in a remote site that is

2462
01:00:19,349 --> 01:00:19,359
so any client in a remote site that is
 

2463
01:00:19,359 --> 01:00:22,079
so any client in a remote site that is
able to see the new photo of the updated

2464
01:00:22,079 --> 01:00:22,089
able to see the new photo of the updated
 

2465
01:00:22,089 --> 01:00:25,800
able to see the new photo of the updated
photo list is guaranteed to be able to

2466
01:00:25,800 --> 01:00:25,810
photo list is guaranteed to be able to
 

2467
01:00:25,810 --> 01:00:28,710
photo list is guaranteed to be able to
see the photo as well so this cop scheme

2468
01:00:28,710 --> 01:00:28,720
see the photo as well so this cop scheme
 

2469
01:00:28,720 --> 01:00:33,980
see the photo as well so this cop scheme
fixes the photo and photo list example

2470
01:00:33,980 --> 01:00:33,990

 

2471
01:00:33,990 --> 01:00:39,690

this the scheme the cops is implementing

2472
01:00:39,690 --> 01:00:39,700
this the scheme the cops is implementing
 

2473
01:00:39,700 --> 01:00:52,260
this the scheme the cops is implementing
is is usually called causal consistency

2474
01:00:52,260 --> 01:00:52,270

 

2475
01:00:52,270 --> 01:00:56,500

so there's a question is it's off to the

2476
01:00:56,500 --> 01:00:56,510
so there's a question is it's off to the
 

2477
01:00:56,510 --> 01:00:58,300
so there's a question is it's off to the
programmer to specify the dependencies

2478
01:00:58,300 --> 01:00:58,310
programmer to specify the dependencies
 

2479
01:00:58,310 --> 01:01:01,030
programmer to specify the dependencies
no it turns out that though that context

2480
01:01:01,030 --> 01:01:01,040
no it turns out that though that context
 

2481
01:01:01,040 --> 01:01:04,750
no it turns out that though that context
information this context information

2482
01:01:04,750 --> 01:01:04,760
information this context information
 

2483
01:01:04,760 --> 01:01:08,800
information this context information
that's accumulated here the cops client

2484
01:01:08,800 --> 01:01:08,810
that's accumulated here the cops client
 

2485
01:01:08,810 --> 01:01:11,080
that's accumulated here the cops client
library can accumulate it automatically

2486
01:01:11,080 --> 01:01:11,090
library can accumulate it automatically
 

2487
01:01:11,090 --> 01:01:15,310
library can accumulate it automatically
so the program only does gets and puts

2488
01:01:15,310 --> 01:01:15,320
so the program only does gets and puts
 

2489
01:01:15,320 --> 01:01:22,990
so the program only does gets and puts
and may not even need to see the version

2490
01:01:22,990 --> 01:01:23,000
and may not even need to see the version
 

2491
01:01:23,000 --> 01:01:25,210
and may not even need to see the version
numbers so simple program we just do

2492
01:01:25,210 --> 01:01:25,220
numbers so simple program we just do
 

2493
01:01:25,220 --> 01:01:28,900
numbers so simple program we just do
gets inputs and internally the cops

2494
01:01:28,900 --> 01:01:28,910
gets inputs and internally the cops
 

2495
01:01:28,910 --> 01:01:30,460
gets inputs and internally the cops
library maintains these contexts and

2496
01:01:30,460 --> 01:01:30,470
library maintains these contexts and
 

2497
01:01:30,470 --> 01:01:32,860
library maintains these contexts and
adds this extra information to the put

2498
01:01:32,860 --> 01:01:32,870
adds this extra information to the put
 

2499
01:01:32,870 --> 01:01:38,680
adds this extra information to the put
our pcs so that the programmer just just

2500
01:01:38,680 --> 01:01:38,690
our pcs so that the programmer just just
 

2501
01:01:38,690 --> 01:01:41,740
our pcs so that the programmer just just
does get some puts and system kind of

2502
01:01:41,740 --> 01:01:41,750
does get some puts and system kind of
 

2503
01:01:41,750 --> 01:01:43,630
does get some puts and system kind of
automatically tracks the dependency

2504
01:01:43,630 --> 01:01:43,640
automatically tracks the dependency
 

2505
01:01:43,640 --> 01:01:47,730
automatically tracks the dependency
information so that's very convenient I

2506
01:01:47,730 --> 01:01:47,740
information so that's very convenient I
 

2507
01:01:47,740 --> 01:01:51,910
information so that's very convenient I
mean just a you know pop up a level for

2508
01:01:51,910 --> 01:01:51,920
mean just a you know pop up a level for
 

2509
01:01:51,920 --> 01:01:53,320
mean just a you know pop up a level for
a moment you know we now built a system

2510
01:01:53,320 --> 01:01:53,330
a moment you know we now built a system
 

2511
01:01:53,330 --> 01:01:57,730
a moment you know we now built a system
that's that is as semantics powerful

2512
01:01:57,730 --> 01:01:57,740
that's that is as semantics powerful
 

2513
01:01:57,740 --> 01:02:00,490
that's that is as semantics powerful
enough to make the photo example code

2514
01:02:00,490 --> 01:02:00,500
enough to make the photo example code
 

2515
01:02:00,500 --> 01:02:02,740
enough to make the photo example code
work out correctly to have it sort of

2516
01:02:02,740 --> 01:02:02,750
work out correctly to have it sort of
 

2517
01:02:02,750 --> 01:02:04,440
work out correctly to have it sort of
had the expected result instead of

2518
01:02:04,440 --> 01:02:04,450
had the expected result instead of
 

2519
01:02:04,450 --> 01:02:08,530
had the expected result instead of
anomalous results and at least arguably

2520
01:02:08,530 --> 01:02:08,540
anomalous results and at least arguably
 

2521
01:02:08,540 --> 01:02:10,660
anomalous results and at least arguably
it's reasonably efficient because nobody

2522
01:02:10,660 --> 01:02:10,670
it's reasonably efficient because nobody
 

2523
01:02:10,670 --> 01:02:12,580
it's reasonably efficient because nobody
was you know the client never has to

2524
01:02:12,580 --> 01:02:12,590
was you know the client never has to
 

2525
01:02:12,590 --> 01:02:14,290
was you know the client never has to
wait for rights to complete there's none

2526
01:02:14,290 --> 01:02:14,300
wait for rights to complete there's none
 

2527
01:02:14,300 --> 01:02:16,210
wait for rights to complete there's none
of this sink business and also the

2528
01:02:16,210 --> 01:02:16,220
of this sink business and also the
 

2529
01:02:16,220 --> 01:02:19,270
of this sink business and also the
communication is mostly independent

2530
01:02:19,270 --> 01:02:19,280
communication is mostly independent
 

2531
01:02:19,280 --> 01:02:20,830
communication is mostly independent
there's no central log server so

2532
01:02:20,830 --> 01:02:20,840
there's no central log server so
 

2533
01:02:20,840 --> 01:02:22,780
there's no central log server so
arguably this is both reasonably high

2534
01:02:22,780 --> 01:02:22,790
arguably this is both reasonably high
 

2535
01:02:22,790 --> 01:02:26,940
arguably this is both reasonably high
performance and has reasonably good

2536
01:02:26,940 --> 01:02:26,950
performance and has reasonably good
 

2537
01:02:26,950 --> 01:02:31,570
performance and has reasonably good
semantics reasonably good consistency so

2538
01:02:31,570 --> 01:02:31,580
semantics reasonably good consistency so
 

2539
01:02:31,580 --> 01:02:36,370
semantics reasonably good consistency so
the the consistency that this design

2540
01:02:36,370 --> 01:02:36,380
the the consistency that this design
 

2541
01:02:36,380 --> 01:02:38,260
the the consistency that this design
produces is usually called causal

2542
01:02:38,260 --> 01:02:38,270
produces is usually called causal
 

2543
01:02:38,270 --> 01:02:42,880
produces is usually called causal
consistency and it's actually a much

2544
01:02:42,880 --> 01:02:42,890
consistency and it's actually a much
 

2545
01:02:42,890 --> 01:02:45,880
consistency and it's actually a much
older idea than this paper there's been

2546
01:02:45,880 --> 01:02:45,890
older idea than this paper there's been
 

2547
01:02:45,890 --> 01:02:48,700
older idea than this paper there's been
a bunch of call so consistency schemes

2548
01:02:48,700 --> 01:02:48,710
a bunch of call so consistency schemes
 

2549
01:02:48,710 --> 01:02:50,500
a bunch of call so consistency schemes
before this paper indeed a bunch of

2550
01:02:50,500 --> 01:02:50,510
before this paper indeed a bunch of
 

2551
01:02:50,510 --> 01:02:53,290
before this paper indeed a bunch of
follow-on work so it's a treating idea

2552
01:02:53,290 --> 01:02:53,300
follow-on work so it's a treating idea
 

2553
01:02:53,300 --> 01:02:55,290
follow-on work so it's a treating idea
that people like a lot

2554
01:02:55,290 --> 01:02:55,300
that people like a lot
 

2555
01:02:55,300 --> 01:02:58,660
that people like a lot
what causal consistency is what it sort

2556
01:02:58,660 --> 01:02:58,670
what causal consistency is what it sort
 

2557
01:02:58,670 --> 01:03:01,990
what causal consistency is what it sort
of means and here I am putting up I

2558
01:03:01,990 --> 01:03:02,000
of means and here I am putting up I
 

2559
01:03:02,000 --> 01:03:03,610
of means and here I am putting up I
think a copy of figure two from the

2560
01:03:03,610 --> 01:03:03,620
think a copy of figure two from the
 

2561
01:03:03,620 --> 01:03:05,109
think a copy of figure two from the
paper

2562
01:03:05,109 --> 01:03:05,119
paper
 

2563
01:03:05,119 --> 01:03:07,750
paper
the sort of what the definition says is

2564
01:03:07,750 --> 01:03:07,760
the sort of what the definition says is
 

2565
01:03:07,760 --> 01:03:10,859
the sort of what the definition says is
that the clients actions induce

2566
01:03:10,859 --> 01:03:10,869
that the clients actions induce
 

2567
01:03:10,869 --> 01:03:15,370
that the clients actions induce
dependencies so there's two ways that

2568
01:03:15,370 --> 01:03:15,380
dependencies so there's two ways that
 

2569
01:03:15,380 --> 01:03:17,650
dependencies so there's two ways that
dependencies are induced one is if a

2570
01:03:17,650 --> 01:03:17,660
dependencies are induced one is if a
 

2571
01:03:17,660 --> 01:03:21,339
dependencies are induced one is if a
given client there's a put and then I

2572
01:03:21,339 --> 01:03:21,349
given client there's a put and then I
 

2573
01:03:21,349 --> 01:03:24,190
given client there's a put and then I
get does it get and then a PUD or a put

2574
01:03:24,190 --> 01:03:24,200
get does it get and then a PUD or a put
 

2575
01:03:24,200 --> 01:03:28,720
get does it get and then a PUD or a put
and then a put then we say that the the

2576
01:03:28,720 --> 01:03:28,730
and then a put then we say that the the
 

2577
01:03:28,730 --> 01:03:31,420
and then a put then we say that the the
put depends on the previous put or get

2578
01:03:31,420 --> 01:03:31,430
put depends on the previous put or get
 

2579
01:03:31,430 --> 01:03:34,630
put depends on the previous put or get
so that in this case put of why if two

2580
01:03:34,630 --> 01:03:34,640
so that in this case put of why if two
 

2581
01:03:34,640 --> 01:03:37,210
so that in this case put of why if two
depends on the put of X of one so that's

2582
01:03:37,210 --> 01:03:37,220
depends on the put of X of one so that's
 

2583
01:03:37,220 --> 01:03:41,140
depends on the put of X of one so that's
one form of dependency another form of

2584
01:03:41,140 --> 01:03:41,150
one form of dependency another form of
 

2585
01:03:41,150 --> 01:03:43,569
one form of dependency another form of
dependency if is if one client frees a

2586
01:03:43,569 --> 01:03:43,579
dependency if is if one client frees a
 

2587
01:03:43,579 --> 01:03:46,420
dependency if is if one client frees a
value out of the storage system then we

2588
01:03:46,420 --> 01:03:46,430
value out of the storage system then we
 

2589
01:03:46,430 --> 01:03:49,120
value out of the storage system then we
say that that the get that that second

2590
01:03:49,120 --> 01:03:49,130
say that that the get that that second
 

2591
01:03:49,130 --> 01:03:51,910
say that that the get that that second
client issued depends on the

2592
01:03:51,910 --> 01:03:51,920
client issued depends on the
 

2593
01:03:51,920 --> 01:03:53,560
client issued depends on the
corresponding put that actually inserted

2594
01:03:53,560 --> 01:03:53,570
corresponding put that actually inserted
 

2595
01:03:53,570 --> 01:03:55,839
corresponding put that actually inserted
the value from a previous client and

2596
01:03:55,839 --> 01:03:55,849
the value from a previous client and
 

2597
01:03:55,849 --> 01:03:59,620
the value from a previous client and
furthermore we say that the dependency

2598
01:03:59,620 --> 01:03:59,630
furthermore we say that the dependency
 

2599
01:03:59,630 --> 01:04:03,910
furthermore we say that the dependency
relationship is transitive so that you

2600
01:04:03,910 --> 01:04:03,920
relationship is transitive so that you
 

2601
01:04:03,920 --> 01:04:06,760
relationship is transitive so that you
know this put depends on that get this

2602
01:04:06,760 --> 01:04:06,770
know this put depends on that get this
 

2603
01:04:06,770 --> 01:04:09,609
know this put depends on that get this
get by client two depends on the put by

2604
01:04:09,609 --> 01:04:09,619
get by client two depends on the put by
 

2605
01:04:09,619 --> 01:04:11,620
get by client two depends on the put by
client one and by transitivity in

2606
01:04:11,620 --> 01:04:11,630
client one and by transitivity in
 

2607
01:04:11,630 --> 01:04:15,910
client one and by transitivity in
addition we can conclude that the client

2608
01:04:15,910 --> 01:04:15,920
addition we can conclude that the client
 

2609
01:04:15,920 --> 01:04:18,210
addition we can conclude that the client
two's get depends on client ones gift

2610
01:04:18,210 --> 01:04:18,220
two's get depends on client ones gift
 

2611
01:04:18,220 --> 01:04:21,010
two's get depends on client ones gift
and so that means that this last put of

2612
01:04:21,010 --> 01:04:21,020
and so that means that this last put of
 

2613
01:04:21,020 --> 01:04:23,970
and so that means that this last put of
by client three for example depends on

2614
01:04:23,970 --> 01:04:23,980
by client three for example depends on
 

2615
01:04:23,980 --> 01:04:31,540
by client three for example depends on
all of these previous operations so

2616
01:04:31,540 --> 01:04:31,550
all of these previous operations so
 

2617
01:04:31,550 --> 01:04:35,370
all of these previous operations so
that's a definition of causal dependency

2618
01:04:35,370 --> 01:04:35,380
that's a definition of causal dependency
 

2619
01:04:35,380 --> 01:04:38,890
that's a definition of causal dependency
and then a causally consistent system

2620
01:04:38,890 --> 01:04:38,900
and then a causally consistent system
 

2621
01:04:38,900 --> 01:04:45,430
and then a causally consistent system
says that says that if through the

2622
01:04:45,430 --> 01:04:45,440
says that says that if through the
 

2623
01:04:45,440 --> 01:04:46,900
says that says that if through the
definition of dependency I just outlined

2624
01:04:46,900 --> 01:04:46,910
definition of dependency I just outlined
 

2625
01:04:46,910 --> 01:04:51,880
definition of dependency I just outlined
a depends on B sorry B depends on a and

2626
01:04:51,880 --> 01:04:51,890
a depends on B sorry B depends on a and
 

2627
01:04:51,890 --> 01:04:56,079
a depends on B sorry B depends on a and
a client reads B then the client must

2628
01:04:56,079 --> 01:04:56,089
a client reads B then the client must
 

2629
01:04:56,089 --> 01:04:59,079
a client reads B then the client must
subsequently also see a the dependency

2630
01:04:59,079 --> 01:04:59,089
subsequently also see a the dependency
 

2631
01:04:59,089 --> 01:05:03,910
subsequently also see a the dependency
so if client ever sees through a second

2632
01:05:03,910 --> 01:05:03,920
so if client ever sees through a second
 

2633
01:05:03,920 --> 01:05:05,260
so if client ever sees through a second
of two ordered operations operations

2634
01:05:05,260 --> 01:05:05,270
of two ordered operations operations
 

2635
01:05:05,270 --> 01:05:07,420
of two ordered operations operations
ordered by dependency and the client is

2636
01:05:07,420 --> 01:05:07,430
ordered by dependency and the client is
 

2637
01:05:07,430 --> 01:05:09,760
ordered by dependency and the client is
also then after that guaranteed to be

2638
01:05:09,760 --> 01:05:09,770
also then after that guaranteed to be
 

2639
01:05:09,770 --> 01:05:13,750
also then after that guaranteed to be
able to see the everything that that

2640
01:05:13,750 --> 01:05:13,760
able to see the everything that that
 

2641
01:05:13,760 --> 01:05:17,089
able to see the everything that that
operation depended

2642
01:05:17,089 --> 01:05:17,099

 

2643
01:05:17,099 --> 01:05:19,260

you know so that's the definition and

2644
01:05:19,260 --> 01:05:19,270
you know so that's the definition and
 

2645
01:05:19,270 --> 01:05:21,420
you know so that's the definition and
it's you know in a sense kind of

2646
01:05:21,420 --> 01:05:21,430
it's you know in a sense kind of
 

2647
01:05:21,430 --> 01:05:25,050
it's you know in a sense kind of
directly derived from what the system

2648
01:05:25,050 --> 01:05:25,060
directly derived from what the system
 

2649
01:05:25,060 --> 01:05:29,040
directly derived from what the system
actually does so this is very nice when

2650
01:05:29,040 --> 01:05:29,050
actually does so this is very nice when
 

2651
01:05:29,050 --> 01:05:32,250
actually does so this is very nice when
updates are causally related that is if

2652
01:05:32,250 --> 01:05:32,260
updates are causally related that is if
 

2653
01:05:32,260 --> 01:05:35,430
updates are causally related that is if
yeah you know these clients and in some

2654
01:05:35,430 --> 01:05:35,440
yeah you know these clients and in some
 

2655
01:05:35,440 --> 01:05:36,570
yeah you know these clients and in some
sense they're talking to each other you

2656
01:05:36,570 --> 01:05:36,580
sense they're talking to each other you
 

2657
01:05:36,580 --> 01:05:37,920
sense they're talking to each other you
know indirectly through the storage

2658
01:05:37,920 --> 01:05:37,930
know indirectly through the storage
 

2659
01:05:37,930 --> 01:05:39,960
know indirectly through the storage
system and so the clients are I kind of

2660
01:05:39,960 --> 01:05:39,970
system and so the clients are I kind of
 

2661
01:05:39,970 --> 01:05:42,150
system and so the clients are I kind of
wear that of you know if we somebody

2662
01:05:42,150 --> 01:05:42,160
wear that of you know if we somebody
 

2663
01:05:42,160 --> 01:05:45,480
wear that of you know if we somebody
reads this value and c5 sees five and

2664
01:05:45,480 --> 01:05:45,490
reads this value and c5 sees five and
 

2665
01:05:45,490 --> 01:05:46,620
reads this value and c5 sees five and
inspects the code you know they can

2666
01:05:46,620 --> 01:05:46,630
inspects the code you know they can
 

2667
01:05:46,630 --> 01:05:48,870
inspects the code you know they can
conclude that really really you know

2668
01:05:48,870 --> 01:05:48,880
conclude that really really you know
 

2669
01:05:48,880 --> 01:05:51,589
conclude that really really you know
this there's a sense in which this put

2670
01:05:51,589 --> 01:05:51,599
this there's a sense in which this put
 

2671
01:05:51,599 --> 01:05:55,140
this there's a sense in which this put
definitely must have come before this

2672
01:05:55,140 --> 01:05:55,150
definitely must have come before this
 

2673
01:05:55,150 --> 01:05:56,940
definitely must have come before this
last put and so if you see slash but you

2674
01:05:56,940 --> 01:05:56,950
last put and so if you see slash but you
 

2675
01:05:56,950 --> 01:05:58,859
last put and so if you see slash but you
really gosh you really just deserve to

2676
01:05:58,859 --> 01:05:58,869
really gosh you really just deserve to
 

2677
01:05:58,869 --> 01:06:00,570
really gosh you really just deserve to
see this first put so in that sense

2678
01:06:00,570 --> 01:06:00,580
see this first put so in that sense
 

2679
01:06:00,580 --> 01:06:02,609
see this first put so in that sense
causal consistency gives you this

2680
01:06:02,609 --> 01:06:02,619
causal consistency gives you this
 

2681
01:06:02,619 --> 01:06:08,130
causal consistency gives you this
programmers kind of a sort of well

2682
01:06:08,130 --> 01:06:08,140
programmers kind of a sort of well
 

2683
01:06:08,140 --> 01:06:13,140
programmers kind of a sort of well
behaved visas allows them to see well

2684
01:06:13,140 --> 01:06:13,150
behaved visas allows them to see well
 

2685
01:06:13,150 --> 01:06:14,730
behaved visas allows them to see well
behave values coming out of the storage

2686
01:06:14,730 --> 01:06:14,740
behave values coming out of the storage
 

2687
01:06:14,740 --> 01:06:18,300
behave values coming out of the storage
system another thing that's good about

2688
01:06:18,300 --> 01:06:18,310
system another thing that's good about
 

2689
01:06:18,310 --> 01:06:20,339
system another thing that's good about
causal consistency is that when it

2690
01:06:20,339 --> 01:06:20,349
causal consistency is that when it
 

2691
01:06:20,349 --> 01:06:23,130
causal consistency is that when it
updates when two values in the system

2692
01:06:23,130 --> 01:06:23,140
updates when two values in the system
 

2693
01:06:23,140 --> 01:06:25,079
updates when two values in the system
are not two updates are not causally

2694
01:06:25,079 --> 01:06:25,089
are not two updates are not causally
 

2695
01:06:25,089 --> 01:06:28,890
are not two updates are not causally
related the causal consistency system

2696
01:06:28,890 --> 01:06:28,900
related the causal consistency system
 

2697
01:06:28,900 --> 01:06:31,440
related the causal consistency system
you know the cops storage system has no

2698
01:06:31,440 --> 01:06:31,450
you know the cops storage system has no
 

2699
01:06:31,450 --> 01:06:33,300
you know the cops storage system has no
obligation is about maintaining order

2700
01:06:33,300 --> 01:06:33,310
obligation is about maintaining order
 

2701
01:06:33,310 --> 01:06:35,849
obligation is about maintaining order
between updates that are not causally

2702
01:06:35,849 --> 01:06:35,859
between updates that are not causally
 

2703
01:06:35,859 --> 01:06:41,190
between updates that are not causally
related so for example if I mean that's

2704
01:06:41,190 --> 01:06:41,200
related so for example if I mean that's
 

2705
01:06:41,200 --> 01:06:43,349
related so for example if I mean that's
good for performance so example if we

2706
01:06:43,349 --> 01:06:43,359
good for performance so example if we
 

2707
01:06:43,359 --> 01:06:46,290
good for performance so example if we
have you know client one does a put of X

2708
01:06:46,290 --> 01:06:46,300
have you know client one does a put of X
 

2709
01:06:46,300 --> 01:06:49,470
have you know client one does a put of X
and then I put Z and then around the

2710
01:06:49,470 --> 01:06:49,480
and then I put Z and then around the
 

2711
01:06:49,480 --> 01:06:53,210
and then I put Z and then around the
same time client two does a put of why

2712
01:06:53,210 --> 01:06:53,220
same time client two does a put of why
 

2713
01:06:53,220 --> 01:06:55,470
same time client two does a put of why
there's a you know there's no causal

2714
01:06:55,470 --> 01:06:55,480
there's a you know there's no causal
 

2715
01:06:55,480 --> 01:06:58,280
there's a you know there's no causal
relationship between these and therefore

2716
01:06:58,280 --> 01:06:58,290
relationship between these and therefore
 

2717
01:06:58,290 --> 01:07:00,329
relationship between these and therefore
you know sorry there's no causal

2718
01:07:00,329 --> 01:07:00,339
you know sorry there's no causal
 

2719
01:07:00,339 --> 01:07:02,190
you know sorry there's no causal
relationship between the put of Y and

2720
01:07:02,190 --> 01:07:02,200
relationship between the put of Y and
 

2721
01:07:02,200 --> 01:07:04,890
relationship between the put of Y and
any of the actions of client one and so

2722
01:07:04,890 --> 01:07:04,900
any of the actions of client one and so
 

2723
01:07:04,900 --> 01:07:09,810
any of the actions of client one and so
the cops is allowed to do all the work

2724
01:07:09,810 --> 01:07:09,820
the cops is allowed to do all the work
 

2725
01:07:09,820 --> 01:07:11,970
the cops is allowed to do all the work
associated with the put of Y completely

2726
01:07:11,970 --> 01:07:11,980
associated with the put of Y completely
 

2727
01:07:11,980 --> 01:07:14,430
associated with the put of Y completely
independently for client ones puts and

2728
01:07:14,430 --> 01:07:14,440
independently for client ones puts and
 

2729
01:07:14,440 --> 01:07:16,050
independently for client ones puts and
the way that plays out is that it's done

2730
01:07:16,050 --> 01:07:16,060
the way that plays out is that it's done
 

2731
01:07:16,060 --> 01:07:19,430
the way that plays out is that it's done
and the put of Y is sort of entirely

2732
01:07:19,430 --> 01:07:19,440
and the put of Y is sort of entirely
 

2733
01:07:19,440 --> 01:07:22,230
and the put of Y is sort of entirely
happens in the servers that for the

2734
01:07:22,230 --> 01:07:22,240
happens in the servers that for the
 

2735
01:07:22,240 --> 01:07:24,760
happens in the servers that for the
shard of why these two puts

2736
01:07:24,760 --> 01:07:24,770
shard of why these two puts
 

2737
01:07:24,770 --> 01:07:29,350
shard of why these two puts
are only involve servers for the shards

2738
01:07:29,350 --> 01:07:29,360
are only involve servers for the shards
 

2739
01:07:29,360 --> 01:07:31,060
are only involve servers for the shards
that X and Z are in it may require some

2740
01:07:31,060 --> 01:07:31,070
that X and Z are in it may require some
 

2741
01:07:31,070 --> 01:07:35,170
that X and Z are in it may require some
interaction here because the remote

2742
01:07:35,170 --> 01:07:35,180
interaction here because the remote
 

2743
01:07:35,180 --> 01:07:37,210
interaction here because the remote
servers for Z may have to wait for this

2744
01:07:37,210 --> 01:07:37,220
servers for Z may have to wait for this
 

2745
01:07:37,220 --> 01:07:39,400
servers for Z may have to wait for this
put to arrive not but they don't have to

2746
01:07:39,400 --> 01:07:39,410
put to arrive not but they don't have to
 

2747
01:07:39,410 --> 01:07:41,860
put to arrive not but they don't have to
talk to the servers that are in charge

2748
01:07:41,860 --> 01:07:41,870
talk to the servers that are in charge
 

2749
01:07:41,870 --> 01:07:44,980
talk to the servers that are in charge
of of Y so if that's a sense in which

2750
01:07:44,980 --> 01:07:44,990
of of Y so if that's a sense in which
 

2751
01:07:44,990 --> 01:07:47,530
of of Y so if that's a sense in which
causal consistency allows good allows

2752
01:07:47,530 --> 01:07:47,540
causal consistency allows good allows
 

2753
01:07:47,540 --> 01:07:51,310
causal consistency allows good allows
parallelism and good performance and you

2754
01:07:51,310 --> 01:07:51,320
parallelism and good performance and you
 

2755
01:07:51,320 --> 01:07:54,520
parallelism and good performance and you
know this is different from potentially

2756
01:07:54,520 --> 01:07:54,530
know this is different from potentially
 

2757
01:07:54,530 --> 01:07:55,930
know this is different from potentially
from linearizable systems like Anna

2758
01:07:55,930 --> 01:07:55,940
from linearizable systems like Anna
 

2759
01:07:55,940 --> 01:07:57,310
from linearizable systems like Anna
linearizable system the fact that this

2760
01:07:57,310 --> 01:07:57,320
linearizable system the fact that this
 

2761
01:07:57,320 --> 01:07:59,740
linearizable system the fact that this
put Y came after the put of X in real

2762
01:07:59,740 --> 01:07:59,750
put Y came after the put of X in real
 

2763
01:07:59,750 --> 01:08:01,750
put Y came after the put of X in real
time actually imposes some requirements

2764
01:08:01,750 --> 01:08:01,760
time actually imposes some requirements
 

2765
01:08:01,760 --> 01:08:04,660
time actually imposes some requirements
on the linearizable storage system but

2766
01:08:04,660 --> 01:08:04,670
on the linearizable storage system but
 

2767
01:08:04,670 --> 01:08:06,960
on the linearizable storage system but
there's no such requirements here for

2768
01:08:06,960 --> 01:08:06,970
there's no such requirements here for
 

2769
01:08:06,970 --> 01:08:09,520
there's no such requirements here for
causal consistency and so you might be

2770
01:08:09,520 --> 01:08:09,530
causal consistency and so you might be
 

2771
01:08:09,530 --> 01:08:11,020
causal consistency and so you might be
able to build a causal consistency

2772
01:08:11,020 --> 01:08:11,030
able to build a causal consistency
 

2773
01:08:11,030 --> 01:08:13,450
able to build a causal consistency
causally consistent system that's faster

2774
01:08:13,450 --> 01:08:13,460
causally consistent system that's faster
 

2775
01:08:13,460 --> 01:08:18,370
causally consistent system that's faster
than a linearizable system okay there's

2776
01:08:18,370 --> 01:08:18,380
than a linearizable system okay there's
 

2777
01:08:18,380 --> 01:08:20,380
than a linearizable system okay there's
a question would cops gain any more

2778
01:08:20,380 --> 01:08:20,390
a question would cops gain any more
 

2779
01:08:20,390 --> 01:08:22,630
a question would cops gain any more
information by including puts in the

2780
01:08:22,630 --> 01:08:22,640
information by including puts in the
 

2781
01:08:22,640 --> 01:08:26,110
information by including puts in the
client context okay so it's this may be

2782
01:08:26,110 --> 01:08:26,120
client context okay so it's this may be
 

2783
01:08:26,120 --> 01:08:28,480
client context okay so it's this may be
a reference to the today's lecture

2784
01:08:28,480 --> 01:08:28,490
a reference to the today's lecture
 

2785
01:08:28,490 --> 01:08:33,520
a reference to the today's lecture
question it is the case so why don't I

2786
01:08:33,520 --> 01:08:33,530
question it is the case so why don't I
 

2787
01:08:33,530 --> 01:08:36,490
question it is the case so why don't I
explain the answer for the electric

2788
01:08:36,490 --> 01:08:36,500
explain the answer for the electric
 

2789
01:08:36,500 --> 01:08:45,790
explain the answer for the electric
question the if a client does get of X I

2790
01:08:45,790 --> 01:08:45,800
question the if a client does get of X I
 

2791
01:08:45,800 --> 01:08:49,630
question the if a client does get of X I
mean look at its context does the get of

2792
01:08:49,630 --> 01:08:49,640
mean look at its context does the get of
 

2793
01:08:49,640 --> 01:08:53,320
mean look at its context does the get of
X maybe and then put to Y and then a

2794
01:08:53,320 --> 01:08:53,330
X maybe and then put to Y and then a
 

2795
01:08:53,330 --> 01:08:58,750
X maybe and then put to Y and then a
quit to Z in the context initially is X

2796
01:08:58,750 --> 01:08:58,760
quit to Z in the context initially is X
 

2797
01:08:58,760 --> 01:09:02,050
quit to Z in the context initially is X
version something you know that when we

2798
01:09:02,050 --> 01:09:02,060
version something you know that when we
 

2799
01:09:02,060 --> 01:09:03,849
version something you know that when we
client since the puts of the server it's

2800
01:09:03,849 --> 01:09:03,859
client since the puts of the server it's
 

2801
01:09:03,859 --> 01:09:06,460
client since the puts of the server it's
gonna include this context along with it

2802
01:09:06,460 --> 01:09:06,470
gonna include this context along with it
 

2803
01:09:06,470 --> 01:09:08,829
gonna include this context along with it
but in the actual system there's this

2804
01:09:08,829 --> 01:09:08,839
but in the actual system there's this
 

2805
01:09:08,839 --> 01:09:13,620
but in the actual system there's this
optimization that after a put the

2806
01:09:13,620 --> 01:09:13,630
optimization that after a put the
 

2807
01:09:13,630 --> 01:09:20,400
optimization that after a put the
context is replaced by simply the

2808
01:09:20,400 --> 01:09:20,410
context is replaced by simply the
 

2809
01:09:20,410 --> 01:09:22,630
context is replaced by simply the
version number for the put and any

2810
01:09:22,630 --> 01:09:22,640
version number for the put and any
 

2811
01:09:22,640 --> 01:09:24,610
version number for the put and any
previous stuff in the context like

2812
01:09:24,610 --> 01:09:24,620
previous stuff in the context like
 

2813
01:09:24,620 --> 01:09:26,860
previous stuff in the context like
namely this information about X is a

2814
01:09:26,860 --> 01:09:26,870
namely this information about X is a
 

2815
01:09:26,870 --> 01:09:28,660
namely this information about X is a
race from the from the clients context

2816
01:09:28,660 --> 01:09:28,670
race from the from the clients context
 

2817
01:09:28,670 --> 01:09:30,849
race from the from the clients context
so it only includes after put the

2818
01:09:30,849 --> 01:09:30,859
so it only includes after put the
 

2819
01:09:30,859 --> 01:09:33,519
so it only includes after put the
context is just replaced with

2820
01:09:33,519 --> 01:09:33,529
context is just replaced with
 

2821
01:09:33,529 --> 01:09:37,030
context is just replaced with
number returned from the put that so

2822
01:09:37,030 --> 01:09:37,040
number returned from the put that so
 

2823
01:09:37,040 --> 01:09:38,789
number returned from the put that so
isn't this returns you know version

2824
01:09:38,789 --> 01:09:38,799
isn't this returns you know version
 

2825
01:09:38,799 --> 01:09:44,260
isn't this returns you know version
version seven of why and the reason why

2826
01:09:44,260 --> 01:09:44,270
version seven of why and the reason why
 

2827
01:09:44,270 --> 01:09:47,380
version seven of why and the reason why
this is correct and doesn't lose any

2828
01:09:47,380 --> 01:09:47,390
this is correct and doesn't lose any
 

2829
01:09:47,390 --> 01:09:49,510
this is correct and doesn't lose any
information for the non-transactional

2830
01:09:49,510 --> 01:09:49,520
information for the non-transactional
 

2831
01:09:49,520 --> 01:09:57,640
information for the non-transactional
cops is that for this when this put is

2832
01:09:57,640 --> 01:09:57,650
cops is that for this when this put is
 

2833
01:09:57,650 --> 01:10:01,480
cops is that for this when this put is
sent out to all the remote sites the put

2834
01:10:01,480 --> 01:10:01,490
sent out to all the remote sites the put
 

2835
01:10:01,490 --> 01:10:04,060
sent out to all the remote sites the put
is accompanied by X version whatever in

2836
01:10:04,060 --> 01:10:04,070
is accompanied by X version whatever in
 

2837
01:10:04,070 --> 01:10:06,070
is accompanied by X version whatever in
the dependency list so this put won't be

2838
01:10:06,070 --> 01:10:06,080
the dependency list so this put won't be
 

2839
01:10:06,080 --> 01:10:10,630
the dependency list so this put won't be
applied until at all and each data

2840
01:10:10,630 --> 01:10:10,640
applied until at all and each data
 

2841
01:10:10,640 --> 01:10:13,870
applied until at all and each data
center until this X is also applied so

2842
01:10:13,870 --> 01:10:13,880
center until this X is also applied so
 

2843
01:10:13,880 --> 01:10:16,390
center until this X is also applied so
then when if the client then does this

2844
01:10:16,390 --> 01:10:16,400
then when if the client then does this
 

2845
01:10:16,400 --> 01:10:18,700
then when if the client then does this
put right what this turns into is sent

2846
01:10:18,700 --> 01:10:18,710
put right what this turns into is sent
 

2847
01:10:18,710 --> 01:10:20,980
put right what this turns into is sent
to other data centers is really a put

2848
01:10:20,980 --> 01:10:20,990
to other data centers is really a put
 

2849
01:10:20,990 --> 01:10:24,520
to other data centers is really a put
with Z and some value and the dependency

2850
01:10:24,520 --> 01:10:24,530
with Z and some value and the dependency
 

2851
01:10:24,530 --> 01:10:27,040
with Z and some value and the dependency
is just Y version seven all the other

2852
01:10:27,040 --> 01:10:27,050
is just Y version seven all the other
 

2853
01:10:27,050 --> 01:10:29,340
is just Y version seven all the other
data centers are going to wait for

2854
01:10:29,340 --> 01:10:29,350
data centers are going to wait for
 

2855
01:10:29,350 --> 01:10:32,320
data centers are going to wait for
they're gonna check before applying Z

2856
01:10:32,320 --> 01:10:32,330
they're gonna check before applying Z
 

2857
01:10:32,330 --> 01:10:34,510
they're gonna check before applying Z
they're gonna check that Y version seven

2858
01:10:34,510 --> 01:10:34,520
they're gonna check that Y version seven
 

2859
01:10:34,520 --> 01:10:36,730
they're gonna check that Y version seven
has been applied at their data center

2860
01:10:36,730 --> 01:10:36,740
has been applied at their data center
 

2861
01:10:36,740 --> 01:10:39,100
has been applied at their data center
well we know the Y version seven won't

2862
01:10:39,100 --> 01:10:39,110
well we know the Y version seven won't
 

2863
01:10:39,110 --> 01:10:41,770
well we know the Y version seven won't
be applied at their data center until X

2864
01:10:41,770 --> 01:10:41,780
be applied at their data center until X
 

2865
01:10:41,780 --> 01:10:43,300
be applied at their data center until X
version whatever is supplied at that

2866
01:10:43,300 --> 01:10:43,310
version whatever is supplied at that
 

2867
01:10:43,310 --> 01:10:44,350
version whatever is supplied at that
data center so there's sort of a

2868
01:10:44,350 --> 01:10:44,360
data center so there's sort of a
 

2869
01:10:44,360 --> 01:10:48,300
data center so there's sort of a
cascading delays here where that is

2870
01:10:48,300 --> 01:10:48,310
cascading delays here where that is
 

2871
01:10:48,310 --> 01:10:50,620
cascading delays here where that is
telling other data centers to wait for Y

2872
01:10:50,620 --> 01:10:50,630
telling other data centers to wait for Y
 

2873
01:10:50,630 --> 01:10:53,290
telling other data centers to wait for Y
version seven to be installed implies

2874
01:10:53,290 --> 01:10:53,300
version seven to be installed implies
 

2875
01:10:53,300 --> 01:10:55,750
version seven to be installed implies
that they must also already be waiting

2876
01:10:55,750 --> 01:10:55,760
that they must also already be waiting
 

2877
01:10:55,760 --> 01:10:59,230
that they must also already be waiting
for whatever Y version seven depended on

2878
01:10:59,230 --> 01:10:59,240
for whatever Y version seven depended on
 

2879
01:10:59,240 --> 01:11:01,900
for whatever Y version seven depended on
and because of that we don't need to

2880
01:11:01,900 --> 01:11:01,910
and because of that we don't need to
 

2881
01:11:01,910 --> 01:11:06,160
and because of that we don't need to
also include X version the X version and

2882
01:11:06,160 --> 01:11:06,170
also include X version the X version and
 

2883
01:11:06,170 --> 01:11:08,800
also include X version the X version and
this dependency list because those data

2884
01:11:08,800 --> 01:11:08,810
this dependency list because those data
 

2885
01:11:08,810 --> 01:11:10,390
this dependency list because those data
centers will already be waiting for it

2886
01:11:10,390 --> 01:11:10,400
centers will already be waiting for it
 

2887
01:11:10,400 --> 01:11:12,550
centers will already be waiting for it
that version of X so the answer the

2888
01:11:12,550 --> 01:11:12,560
that version of X so the answer the
 

2889
01:11:12,560 --> 01:11:15,880
that version of X so the answer the
question is no cops call the

2890
01:11:15,880 --> 01:11:15,890
question is no cops call the
 

2891
01:11:15,890 --> 01:11:18,550
question is no cops call the
non-transactional cops doesn't need to

2892
01:11:18,550 --> 01:11:18,560
non-transactional cops doesn't need to
 

2893
01:11:18,560 --> 01:11:20,380
non-transactional cops doesn't need to
have anything doesn't need to remember

2894
01:11:20,380 --> 01:11:20,390
have anything doesn't need to remember
 

2895
01:11:20,390 --> 01:11:23,020
have anything doesn't need to remember
the gets in the context after it's done

2896
01:11:23,020 --> 01:11:23,030
the gets in the context after it's done
 

2897
01:11:23,030 --> 01:11:27,259
the gets in the context after it's done
put

2898
01:11:27,259 --> 01:11:27,269

 

2899
01:11:27,269 --> 01:11:32,069

all right a final thing to note about

2900
01:11:32,069 --> 01:11:32,079
all right a final thing to note about
 

2901
01:11:32,079 --> 01:11:36,989
all right a final thing to note about
this scheme is that cops only see

2902
01:11:36,989 --> 01:11:36,999
this scheme is that cops only see
 

2903
01:11:36,999 --> 01:11:39,810
this scheme is that cops only see
certain relationships it's only aware of

2904
01:11:39,810 --> 01:11:39,820
certain relationships it's only aware of
 

2905
01:11:39,820 --> 01:11:45,810
certain relationships it's only aware of
certain causal relationships that is it

2906
01:11:45,810 --> 01:11:45,820
certain causal relationships that is it
 

2907
01:11:45,820 --> 01:11:48,509
certain causal relationships that is it
only you know cops is aware that if a

2908
01:11:48,509 --> 01:11:48,519
only you know cops is aware that if a
 

2909
01:11:48,519 --> 01:11:50,310
only you know cops is aware that if a
single client thread does a put and then

2910
01:11:50,310 --> 01:11:50,320
single client thread does a put and then
 

2911
01:11:50,320 --> 01:11:53,310
single client thread does a put and then
another put client you know cops record

2912
01:11:53,310 --> 01:11:53,320
another put client you know cops record
 

2913
01:11:53,320 --> 01:11:55,979
another put client you know cops record
so this the second put depends on the

2914
01:11:55,979 --> 01:11:55,989
so this the second put depends on the
 

2915
01:11:55,989 --> 01:11:58,580
so this the second put depends on the
first book furthermore cops is aware

2916
01:11:58,580 --> 01:11:58,590
first book furthermore cops is aware
 

2917
01:11:58,590 --> 01:12:01,200
first book furthermore cops is aware
that oh what a client does a read of a

2918
01:12:01,200 --> 01:12:01,210
that oh what a client does a read of a
 

2919
01:12:01,210 --> 01:12:05,580
that oh what a client does a read of a
certain value that it's depending on I'm

2920
01:12:05,580 --> 01:12:05,590
certain value that it's depending on I'm
 

2921
01:12:05,590 --> 01:12:07,620
certain value that it's depending on I'm
the one to put the created that value

2922
01:12:07,620 --> 01:12:07,630
the one to put the created that value
 

2923
01:12:07,630 --> 01:12:09,120
the one to put the created that value
and therefore depending on anything that

2924
01:12:09,120 --> 01:12:09,130
and therefore depending on anything that
 

2925
01:12:09,130 --> 01:12:11,040
and therefore depending on anything that
that depended on so you know cops is

2926
01:12:11,040 --> 01:12:11,050
that depended on so you know cops is
 

2927
01:12:11,050 --> 01:12:13,259
that depended on so you know cops is
directly aware of these dependencies

2928
01:12:13,259 --> 01:12:13,269
directly aware of these dependencies
 

2929
01:12:13,269 --> 01:12:18,959
directly aware of these dependencies
here however it could it is often the

2930
01:12:18,959 --> 01:12:18,969
here however it could it is often the
 

2931
01:12:18,969 --> 01:12:21,959
here however it could it is often the
case that causality in the larger sense

2932
01:12:21,959 --> 01:12:21,969
case that causality in the larger sense
 

2933
01:12:21,969 --> 01:12:24,720
case that causality in the larger sense
is conveyed through channels that cops

2934
01:12:24,720 --> 01:12:24,730
is conveyed through channels that cops
 

2935
01:12:24,730 --> 01:12:29,549
is conveyed through channels that cops
is not aware of so for example you know

2936
01:12:29,549 --> 01:12:29,559
is not aware of so for example you know
 

2937
01:12:29,559 --> 01:12:34,830
is not aware of so for example you know
if client one does a put of X and then

2938
01:12:34,830 --> 01:12:34,840
if client one does a put of X and then
 

2939
01:12:34,840 --> 01:12:38,040
if client one does a put of X and then
the human you know who's controlling

2940
01:12:38,040 --> 01:12:38,050
the human you know who's controlling
 

2941
01:12:38,050 --> 01:12:41,640
the human you know who's controlling
client one calls up client to on the

2942
01:12:41,640 --> 01:12:41,650
client one calls up client to on the
 

2943
01:12:41,650 --> 01:12:44,129
client one calls up client to on the
telephone or it's you know email or

2944
01:12:44,129 --> 01:12:44,139
telephone or it's you know email or
 

2945
01:12:44,139 --> 01:12:45,569
telephone or it's you know email or
something that says look you know I just

2946
01:12:45,569 --> 01:12:45,579
something that says look you know I just
 

2947
01:12:45,579 --> 01:12:47,009
something that says look you know I just
updated the database with some new

2948
01:12:47,009 --> 01:12:47,019
updated the database with some new
 

2949
01:12:47,019 --> 01:12:48,540
updated the database with some new
information why don't you go look at it

2950
01:12:48,540 --> 01:12:48,550
information why don't you go look at it
 

2951
01:12:48,550 --> 01:12:52,080
information why don't you go look at it
right and then client to you know does

2952
01:12:52,080 --> 01:12:52,090
right and then client to you know does
 

2953
01:12:52,090 --> 01:12:57,509
right and then client to you know does
it get of X sort of in a larger sense

2954
01:12:57,509 --> 01:12:57,519
it get of X sort of in a larger sense
 

2955
01:12:57,519 --> 01:13:00,490
it get of X sort of in a larger sense
causality would you know

2956
01:13:00,490 --> 01:13:00,500
causality would you know
 

2957
01:13:00,500 --> 01:13:01,900
causality would you know
suggest the client to really ought to

2958
01:13:01,900 --> 01:13:01,910
suggest the client to really ought to
 

2959
01:13:01,910 --> 01:13:04,150
suggest the client to really ought to
see the updated X because client to new

2960
01:13:04,150 --> 01:13:04,160
see the updated X because client to new
 

2961
01:13:04,160 --> 01:13:07,060
see the updated X because client to new
from the telephone call that X had been

2962
01:13:07,060 --> 01:13:07,070
from the telephone call that X had been
 

2963
01:13:07,070 --> 01:13:11,350
from the telephone call that X had been
updated and so if cops had known about

2964
01:13:11,350 --> 01:13:11,360
updated and so if cops had known about
 

2965
01:13:11,360 --> 01:13:12,730
updated and so if cops had known about
the telephone call it would have

2966
01:13:12,730 --> 01:13:12,740
the telephone call it would have
 

2967
01:13:12,740 --> 01:13:19,540
the telephone call it would have
actually included the it would have

2968
01:13:19,540 --> 01:13:19,550
actually included the it would have
 

2969
01:13:19,550 --> 01:13:27,160
actually included the it would have
actually caused the extra sorry if the

2970
01:13:27,160 --> 01:13:27,170
actually caused the extra sorry if the
 

2971
01:13:27,170 --> 01:13:28,830
actually caused the extra sorry if the
telephone call had been itself a put

2972
01:13:28,830 --> 01:13:28,840
telephone call had been itself a put
 

2973
01:13:28,840 --> 01:13:31,330
telephone call had been itself a put
right you know it would have been a put

2974
01:13:31,330 --> 01:13:31,340
right you know it would have been a put
 

2975
01:13:31,340 --> 01:13:33,370
right you know it would have been a put
of telephone call here and I get of

2976
01:13:33,370 --> 01:13:33,380
of telephone call here and I get of
 

2977
01:13:33,380 --> 01:13:36,730
of telephone call here and I get of
telephone call here and if this get had

2978
01:13:36,730 --> 01:13:36,740
telephone call here and if this get had
 

2979
01:13:36,740 --> 01:13:39,580
telephone call here and if this get had
seen that put cops would know enough to

2980
01:13:39,580 --> 01:13:39,590
seen that put cops would know enough to
 

2981
01:13:39,590 --> 01:13:41,670
seen that put cops would know enough to
arrange that this get would see that put

2982
01:13:41,670 --> 01:13:41,680
arrange that this get would see that put
 

2983
01:13:41,680 --> 01:13:44,770
arrange that this get would see that put
but because cops was totally unaware of

2984
01:13:44,770 --> 01:13:44,780
but because cops was totally unaware of
 

2985
01:13:44,780 --> 01:13:47,140
but because cops was totally unaware of
the telephone call there's no reason to

2986
01:13:47,140 --> 01:13:47,150
the telephone call there's no reason to
 

2987
01:13:47,150 --> 01:13:48,730
the telephone call there's no reason to
expect that this get would actually

2988
01:13:48,730 --> 01:13:48,740
expect that this get would actually
 

2989
01:13:48,740 --> 01:13:55,230
expect that this get would actually
yield the put value so cops is sort of

2990
01:13:55,230 --> 01:13:55,240
yield the put value so cops is sort of
 

2991
01:13:55,240 --> 01:13:57,910
yield the put value so cops is sort of
enforcing causal consistency but only

2992
01:13:57,910 --> 01:13:57,920
enforcing causal consistency but only
 

2993
01:13:57,920 --> 01:14:00,670
enforcing causal consistency but only
for the sources the kinds of causation

2994
01:14:00,670 --> 01:14:00,680
for the sources the kinds of causation
 

2995
01:14:00,680 --> 01:14:04,720
for the sources the kinds of causation
the cops is directly aware of and that

2996
01:14:04,720 --> 01:14:04,730
the cops is directly aware of and that
 

2997
01:14:04,730 --> 01:14:08,350
the cops is directly aware of and that
means that the sense in which cops is

2998
01:14:08,350 --> 01:14:08,360
means that the sense in which cops is
 

2999
01:14:08,360 --> 01:14:10,620
means that the sense in which cops is
causal consistency sort of eliminates

3000
01:14:10,620 --> 01:14:10,630
causal consistency sort of eliminates
 

3001
01:14:10,630 --> 01:14:13,150
causal consistency sort of eliminates
anomalous behavior well it only

3002
01:14:13,150 --> 01:14:13,160
anomalous behavior well it only
 

3003
01:14:13,160 --> 01:14:17,200
anomalous behavior well it only
eliminates anomalous behavior if you

3004
01:14:17,200 --> 01:14:17,210
eliminates anomalous behavior if you
 

3005
01:14:17,210 --> 01:14:19,000
eliminates anomalous behavior if you
restrict your notion of causality to

3006
01:14:19,000 --> 01:14:19,010
restrict your notion of causality to
 

3007
01:14:19,010 --> 01:14:21,610
restrict your notion of causality to
what cops can see it in the larger sense

3008
01:14:21,610 --> 01:14:21,620
what cops can see it in the larger sense
 

3009
01:14:21,620 --> 01:14:23,290
what cops can see it in the larger sense
you're going to still see odd behavior

3010
01:14:23,290 --> 01:14:23,300
you're going to still see odd behavior
 

3011
01:14:23,300 --> 01:14:24,850
you're going to still see odd behavior
you definitely going to see situations

3012
01:14:24,850 --> 01:14:24,860
you definitely going to see situations
 

3013
01:14:24,860 --> 01:14:27,490
you definitely going to see situations
where you know someone believes that a

3014
01:14:27,490 --> 01:14:27,500
where you know someone believes that a
 

3015
01:14:27,500 --> 01:14:29,740
where you know someone believes that a
values been updated and yet they do not

3016
01:14:29,740 --> 01:14:29,750
values been updated and yet they do not
 

3017
01:14:29,750 --> 01:14:31,360
values been updated and yet they do not
see the updated value that's because

3018
01:14:31,360 --> 01:14:31,370
see the updated value that's because
 

3019
01:14:31,370 --> 01:14:32,980
see the updated value that's because
their belief was caused by something

3020
01:14:32,980 --> 01:14:32,990
their belief was caused by something
 

3021
01:14:32,990 --> 01:14:41,280
their belief was caused by something
that cops wasn't aware of all right

3022
01:14:41,280 --> 01:14:41,290
that cops wasn't aware of all right
 

3023
01:14:41,290 --> 01:14:46,030
that cops wasn't aware of all right
another potential problem which I'm not

3024
01:14:46,030 --> 01:14:46,040
another potential problem which I'm not
 

3025
01:14:46,040 --> 01:14:51,130
another potential problem which I'm not
gonna talk about is that the remember

3026
01:14:51,130 --> 01:14:51,140
gonna talk about is that the remember
 

3027
01:14:51,140 --> 01:14:52,630
gonna talk about is that the remember
for the photo example with the photo

3028
01:14:52,630 --> 01:14:52,640
for the photo example with the photo
 

3029
01:14:52,640 --> 01:14:55,510
for the photo example with the photo
list there was a particular order of the

3030
01:14:55,510 --> 01:14:55,520
list there was a particular order of the
 

3031
01:14:55,520 --> 01:14:57,570
list there was a particular order of the
adding a photo and that particular

3032
01:14:57,570 --> 01:14:57,580
adding a photo and that particular
 

3033
01:14:57,580 --> 01:14:59,770
adding a photo and that particular
different order of looking at photos

3034
01:14:59,770 --> 01:14:59,780
different order of looking at photos
 

3035
01:14:59,780 --> 01:15:02,920
different order of looking at photos
that made the system work with causal

3036
01:15:02,920 --> 01:15:02,930
that made the system work with causal
 

3037
01:15:02,930 --> 01:15:04,540
that made the system work with causal
consistency as we're definitely relying

3038
01:15:04,540 --> 01:15:04,550
consistency as we're definitely relying
 

3039
01:15:04,550 --> 01:15:08,740
consistency as we're definitely relying
on the there being sort of if the reader

3040
01:15:08,740 --> 01:15:08,750
on the there being sort of if the reader
 

3041
01:15:08,750 --> 01:15:10,900
on the there being sort of if the reader
reads the photo list and then reads the

3042
01:15:10,900 --> 01:15:10,910
reads the photo list and then reads the
 

3043
01:15:10,910 --> 01:15:13,300
reads the photo list and then reads the
photo in that order that the fact that a

3044
01:15:13,300 --> 01:15:13,310
photo in that order that the fact that a
 

3045
01:15:13,310 --> 01:15:14,020
photo in that order that the fact that a
photos refer

3046
01:15:14,020 --> 01:15:14,030
photos refer
 

3047
01:15:14,030 --> 01:15:16,240
photos refer
joana photo list means that the read of

3048
01:15:16,240 --> 01:15:16,250
joana photo list means that the read of
 

3049
01:15:16,250 --> 01:15:19,180
joana photo list means that the read of
the photo will succeed it is however the

3050
01:15:19,180 --> 01:15:19,190
the photo will succeed it is however the
 

3051
01:15:19,190 --> 01:15:22,660
the photo will succeed it is however the
case that there are situations where no

3052
01:15:22,660 --> 01:15:22,670
case that there are situations where no
 

3053
01:15:22,670 --> 01:15:25,960
case that there are situations where no
one order of reading or combination of

3054
01:15:25,960 --> 01:15:25,970
one order of reading or combination of
 

3055
01:15:25,970 --> 01:15:30,430
one order of reading or combination of
orders of reading or writing will cause

3056
01:15:30,430 --> 01:15:30,440
orders of reading or writing will cause
 

3057
01:15:30,440 --> 01:15:32,980
orders of reading or writing will cause
sort of the behavior we want and that

3058
01:15:32,980 --> 01:15:32,990
sort of the behavior we want and that
 

3059
01:15:32,990 --> 01:15:34,840
sort of the behavior we want and that
but this is leading into transactions

3060
01:15:34,840 --> 01:15:34,850
but this is leading into transactions
 

3061
01:15:34,850 --> 01:15:36,790
but this is leading into transactions
which I'm not gonna have time enough to

3062
01:15:36,790 --> 01:15:36,800
which I'm not gonna have time enough to
 

3063
01:15:36,800 --> 01:15:38,650
which I'm not gonna have time enough to
explain but at least I want to mention

3064
01:15:38,650 --> 01:15:38,660
explain but at least I want to mention
 

3065
01:15:38,660 --> 01:15:42,550
explain but at least I want to mention
the problems the paper set up so

3066
01:15:42,550 --> 01:15:42,560
the problems the paper set up so
 

3067
01:15:42,560 --> 01:15:47,040
the problems the paper set up so
supposing we have our photo list and

3068
01:15:47,040 --> 01:15:47,050
supposing we have our photo list and
 

3069
01:15:47,050 --> 01:15:50,200
supposing we have our photo list and
it's protected by an access control list

3070
01:15:50,200 --> 01:15:50,210
it's protected by an access control list
 

3071
01:15:50,210 --> 01:15:52,090
it's protected by an access control list
and an access control this is basically

3072
01:15:52,090 --> 01:15:52,100
and an access control this is basically
 

3073
01:15:52,100 --> 01:15:55,230
and an access control this is basically
a list of usernames that are allowed to

3074
01:15:55,230 --> 01:15:55,240
a list of usernames that are allowed to
 

3075
01:15:55,240 --> 01:15:57,490
a list of usernames that are allowed to
look at the photos on my list

3076
01:15:57,490 --> 01:15:57,500
look at the photos on my list
 

3077
01:15:57,500 --> 01:16:01,620
look at the photos on my list
does that means that the software that

3078
01:16:01,620 --> 01:16:01,630

 

3079
01:16:01,630 --> 01:16:04,240

implements these photo lists with access

3080
01:16:04,240 --> 01:16:04,250
implements these photo lists with access
 

3081
01:16:04,250 --> 01:16:07,480
implements these photo lists with access
control this needs to be able to you

3082
01:16:07,480 --> 01:16:07,490
control this needs to be able to you
 

3083
01:16:07,490 --> 01:16:09,160
control this needs to be able to you
know read the list and then read the

3084
01:16:09,160 --> 01:16:09,170
know read the list and then read the
 

3085
01:16:09,170 --> 01:16:11,530
know read the list and then read the
access control list and see if the user

3086
01:16:11,530 --> 01:16:11,540
access control list and see if the user
 

3087
01:16:11,540 --> 01:16:13,270
access control list and see if the user
trying to do the read is in the access

3088
01:16:13,270 --> 01:16:13,280
trying to do the read is in the access
 

3089
01:16:13,280 --> 01:16:17,050
trying to do the read is in the access
control list and however neither order

3090
01:16:17,050 --> 01:16:17,060
control list and however neither order
 

3091
01:16:17,060 --> 01:16:19,570
control list and however neither order
of getting the access control list and

3092
01:16:19,570 --> 01:16:19,580
of getting the access control list and
 

3093
01:16:19,580 --> 01:16:22,570
of getting the access control list and
the list of photos works out so if the

3094
01:16:22,570 --> 01:16:22,580
the list of photos works out so if the
 

3095
01:16:22,580 --> 01:16:24,310
the list of photos works out so if the
client code first gets the access

3096
01:16:24,310 --> 01:16:24,320
client code first gets the access
 

3097
01:16:24,320 --> 01:16:29,140
client code first gets the access
control list and then gets the list of

3098
01:16:29,140 --> 01:16:29,150
control list and then gets the list of
 

3099
01:16:29,150 --> 01:16:32,410
control list and then gets the list of
photos that order actually doesn't

3100
01:16:32,410 --> 01:16:32,420
photos that order actually doesn't
 

3101
01:16:32,420 --> 01:16:36,850
photos that order actually doesn't
always work so well because supposing my

3102
01:16:36,850 --> 01:16:36,860
always work so well because supposing my
 

3103
01:16:36,860 --> 01:16:38,620
always work so well because supposing my
client Reesie access control list and

3104
01:16:38,620 --> 01:16:38,630
client Reesie access control list and
 

3105
01:16:38,630 --> 01:16:40,870
client Reesie access control list and
sees that I'm on the list but then right

3106
01:16:40,870 --> 01:16:40,880
sees that I'm on the list but then right
 

3107
01:16:40,880 --> 01:16:44,050
sees that I'm on the list but then right
here the owner of this photo this

3108
01:16:44,050 --> 01:16:44,060
here the owner of this photo this
 

3109
01:16:44,060 --> 01:16:47,500
here the owner of this photo this
deletes me from the access control list

3110
01:16:47,500 --> 01:16:47,510
deletes me from the access control list
 

3111
01:16:47,510 --> 01:16:50,020
deletes me from the access control list
and inserts a new photograph that I'm

3112
01:16:50,020 --> 01:16:50,030
and inserts a new photograph that I'm
 

3113
01:16:50,030 --> 01:16:51,750
and inserts a new photograph that I'm
not supposed to see in the list list

3114
01:16:51,750 --> 01:16:51,760
not supposed to see in the list list
 

3115
01:16:51,760 --> 01:16:56,730
not supposed to see in the list list
right so c2 does a you know a port of

3116
01:16:56,730 --> 01:16:56,740
right so c2 does a you know a port of
 

3117
01:16:56,740 --> 01:16:59,650
right so c2 does a you know a port of
access control is to delete me and then

3118
01:16:59,650 --> 01:16:59,660
access control is to delete me and then
 

3119
01:16:59,660 --> 01:17:01,870
access control is to delete me and then
a put of the photo list to add a photo

3120
01:17:01,870 --> 01:17:01,880
a put of the photo list to add a photo
 

3121
01:17:01,880 --> 01:17:05,830
a put of the photo list to add a photo
I'm not allowed to see then my client

3122
01:17:05,830 --> 01:17:05,840
I'm not allowed to see then my client
 

3123
01:17:05,840 --> 01:17:07,780
I'm not allowed to see then my client
gets around to the second get it sees

3124
01:17:07,780 --> 01:17:07,790
gets around to the second get it sees
 

3125
01:17:07,790 --> 01:17:09,760
gets around to the second get it sees
this list you may see this list which is

3126
01:17:09,760 --> 01:17:09,770
this list you may see this list which is
 

3127
01:17:09,770 --> 01:17:11,500
this list you may see this list which is
the now the updated list that has the

3128
01:17:11,500 --> 01:17:11,510
the now the updated list that has the
 

3129
01:17:11,510 --> 01:17:12,790
the now the updated list that has the
photo I'm not allowed to see but my

3130
01:17:12,790 --> 01:17:12,800
photo I'm not allowed to see but my
 

3131
01:17:12,800 --> 01:17:14,170
photo I'm not allowed to see but my
client thinks aha I'm in the access

3132
01:17:14,170 --> 01:17:14,180
client thinks aha I'm in the access
 

3133
01:17:14,180 --> 01:17:15,700
client thinks aha I'm in the access
control list because it's reading an old

3134
01:17:15,700 --> 01:17:15,710
control list because it's reading an old
 

3135
01:17:15,710 --> 01:17:18,500
control list because it's reading an old
one

3136
01:17:18,500 --> 01:17:18,510

 

3137
01:17:18,510 --> 01:17:20,480

and here's this photo so I'm allowed to

3138
01:17:20,480 --> 01:17:20,490
and here's this photo so I'm allowed to
 

3139
01:17:20,490 --> 01:17:23,480
and here's this photo so I'm allowed to
see you so in that case you know we're

3140
01:17:23,480 --> 01:17:23,490
see you so in that case you know we're
 

3141
01:17:23,490 --> 01:17:26,030
see you so in that case you know we're
getting an inconsistent what we know to

3142
01:17:26,030 --> 01:17:26,040
getting an inconsistent what we know to
 

3143
01:17:26,040 --> 01:17:29,240
getting an inconsistent what we know to
be an inconsistent sort of combination

3144
01:17:29,240 --> 01:17:29,250
be an inconsistent sort of combination
 

3145
01:17:29,250 --> 01:17:32,030
be an inconsistent sort of combination
of a new list and an old access control

3146
01:17:32,030 --> 01:17:32,040
of a new list and an old access control
 

3147
01:17:32,040 --> 01:17:34,580
of a new list and an old access control
list but there was really nothing but

3148
01:17:34,580 --> 01:17:34,590
list but there was really nothing but
 

3149
01:17:34,590 --> 01:17:38,180
list but there was really nothing but
but causal consistency allows this it'll

3150
01:17:38,180 --> 01:17:38,190
but causal consistency allows this it'll
 

3151
01:17:38,190 --> 01:17:40,640
but causal consistency allows this it'll
it calls a consistency only says well

3152
01:17:40,640 --> 01:17:40,650
it calls a consistency only says well
 

3153
01:17:40,650 --> 01:17:42,290
it calls a consistency only says well
you're gonna see data that's at least as

3154
01:17:42,290 --> 01:17:42,300
you're gonna see data that's at least as
 

3155
01:17:42,300 --> 01:17:46,370
you're gonna see data that's at least as
new as the dependencies every time you

3156
01:17:46,370 --> 01:17:46,380
new as the dependencies every time you
 

3157
01:17:46,380 --> 01:17:51,380
new as the dependencies every time you
do a get so and indeed if you know as

3158
01:17:51,380 --> 01:17:51,390
do a get so and indeed if you know as
 

3159
01:17:51,390 --> 01:17:52,670
do a get so and indeed if you know as
the paper points out if you think it

3160
01:17:52,670 --> 01:17:52,680
the paper points out if you think it
 

3161
01:17:52,680 --> 01:17:54,580
the paper points out if you think it
through it's also not correct for the

3162
01:17:54,580 --> 01:17:54,590
through it's also not correct for the
 

3163
01:17:54,590 --> 01:17:58,040
through it's also not correct for the
reading client to first read the list of

3164
01:17:58,040 --> 01:17:58,050
reading client to first read the list of
 

3165
01:17:58,050 --> 01:18:01,040
reading client to first read the list of
photos and then read the access control

3166
01:18:01,040 --> 01:18:01,050
photos and then read the access control
 

3167
01:18:01,050 --> 01:18:05,500
photos and then read the access control
this because sneaking in between this

3168
01:18:05,500 --> 01:18:05,510
this because sneaking in between this
 

3169
01:18:05,510 --> 01:18:08,210
this because sneaking in between this
though this might have a this that I

3170
01:18:08,210 --> 01:18:08,220
though this might have a this that I
 

3171
01:18:08,220 --> 01:18:09,470
though this might have a this that I
read may have a photo I'm not allowed to

3172
01:18:09,470 --> 01:18:09,480
read may have a photo I'm not allowed to
 

3173
01:18:09,480 --> 01:18:11,450
read may have a photo I'm not allowed to
see and at that time maybe the access

3174
01:18:11,450 --> 01:18:11,460
see and at that time maybe the access
 

3175
01:18:11,460 --> 01:18:14,150
see and at that time maybe the access
control this didn't include me but at

3176
01:18:14,150 --> 01:18:14,160
control this didn't include me but at
 

3177
01:18:14,160 --> 01:18:15,920
control this didn't include me but at
this point the owner of the list may

3178
01:18:15,920 --> 01:18:15,930
this point the owner of the list may
 

3179
01:18:15,930 --> 01:18:18,230
this point the owner of the list may
delete the private photo add me to the

3180
01:18:18,230 --> 01:18:18,240
delete the private photo add me to the
 

3181
01:18:18,240 --> 01:18:20,210
delete the private photo add me to the
access control list and then I may see

3182
01:18:20,210 --> 01:18:20,220
access control list and then I may see
 

3183
01:18:20,220 --> 01:18:22,220
access control list and then I may see
myself in the list so again if we do it

3184
01:18:22,220 --> 01:18:22,230
myself in the list so again if we do it
 

3185
01:18:22,230 --> 01:18:23,510
myself in the list so again if we do it
in this order it's also not right

3186
01:18:23,510 --> 01:18:23,520
in this order it's also not right
 

3187
01:18:23,520 --> 01:18:28,100
in this order it's also not right
because we might see we might get an old

3188
01:18:28,100 --> 01:18:28,110
because we might see we might get an old
 

3189
01:18:28,110 --> 01:18:31,630
because we might see we might get an old
list and a new access control list so

3190
01:18:31,630 --> 01:18:31,640
list and a new access control list so
 

3191
01:18:31,640 --> 01:18:34,880
list and a new access control list so
causal consistency as I've described it

3192
01:18:34,880 --> 01:18:34,890
causal consistency as I've described it
 

3193
01:18:34,890 --> 01:18:36,260
causal consistency as I've described it
so far isn't powerful enough to deal

3194
01:18:36,260 --> 01:18:36,270
so far isn't powerful enough to deal
 

3195
01:18:36,270 --> 01:18:37,880
so far isn't powerful enough to deal
with this situation you know we need

3196
01:18:37,880 --> 01:18:37,890
with this situation you know we need
 

3197
01:18:37,890 --> 01:18:39,890
with this situation you know we need
some notion of being able to get a

3198
01:18:39,890 --> 01:18:39,900
some notion of being able to get a
 

3199
01:18:39,900 --> 01:18:42,710
some notion of being able to get a
mutually consistent list and access

3200
01:18:42,710 --> 01:18:42,720
mutually consistent list and access
 

3201
01:18:42,720 --> 01:18:45,380
mutually consistent list and access
control lists through either sort of

3202
01:18:45,380 --> 01:18:45,390
control lists through either sort of
 

3203
01:18:45,390 --> 01:18:48,490
control lists through either sort of
both before some update or both after

3204
01:18:48,490 --> 01:18:48,500
both before some update or both after
 

3205
01:18:48,500 --> 01:18:52,310
both before some update or both after
and cops GT actually provides a way of

3206
01:18:52,310 --> 01:18:52,320
and cops GT actually provides a way of
 

3207
01:18:52,320 --> 01:18:55,820
and cops GT actually provides a way of
doing this it by essentially doing both

3208
01:18:55,820 --> 01:18:55,830
doing this it by essentially doing both
 

3209
01:18:55,830 --> 01:18:57,400
doing this it by essentially doing both
Gatz

3210
01:18:57,400 --> 01:18:57,410
Gatz
 

3211
01:18:57,410 --> 01:19:02,690
Gatz
but but cops GT sends the full set of

3212
01:19:02,690 --> 01:19:02,700
but but cops GT sends the full set of
 

3213
01:19:02,700 --> 01:19:04,400
but but cops GT sends the full set of
dependencies back to the client when it

3214
01:19:04,400 --> 01:19:04,410
dependencies back to the client when it
 

3215
01:19:04,410 --> 01:19:07,310
dependencies back to the client when it
doesn't get and that means that the

3216
01:19:07,310 --> 01:19:07,320
doesn't get and that means that the
 

3217
01:19:07,320 --> 01:19:08,900
doesn't get and that means that the
client is submit is in a position to

3218
01:19:08,900 --> 01:19:08,910
client is submit is in a position to
 

3219
01:19:08,910 --> 01:19:10,670
client is submit is in a position to
actually check the dependencies of both

3220
01:19:10,670 --> 01:19:10,680
actually check the dependencies of both
 

3221
01:19:10,680 --> 01:19:14,870
actually check the dependencies of both
of these return values and see that aha

3222
01:19:14,870 --> 01:19:14,880
of these return values and see that aha
 

3223
01:19:14,880 --> 01:19:16,790
of these return values and see that aha
you know there's a dependency for list

3224
01:19:16,790 --> 01:19:16,800
you know there's a dependency for list
 

3225
01:19:16,800 --> 01:19:20,510
you know there's a dependency for list
that is a version of these sorry for

3226
01:19:20,510 --> 01:19:20,520
that is a version of these sorry for
 

3227
01:19:20,520 --> 01:19:23,960
that is a version of these sorry for
that there might be a the dependency

3228
01:19:23,960 --> 01:19:23,970
that there might be a the dependency
 

3229
01:19:23,970 --> 01:19:25,640
that there might be a the dependency
list for the access control list me

3230
01:19:25,640 --> 01:19:25,650
list for the access control list me
 

3231
01:19:25,650 --> 01:19:28,220
list for the access control list me
mention that it depends on a version of

3232
01:19:28,220 --> 01:19:28,230
mention that it depends on a version of
 

3233
01:19:28,230 --> 01:19:30,500
mention that it depends on a version of
this that's in the farther ahead than

3234
01:19:30,500 --> 01:19:30,510
this that's in the farther ahead than
 

3235
01:19:30,510 --> 01:19:31,910
this that's in the farther ahead than
the version of Lists the

3236
01:19:31,910 --> 01:19:31,920
the version of Lists the
 

3237
01:19:31,920 --> 01:19:34,130
the version of Lists the
begone and in that case cops GT would be

3238
01:19:34,130 --> 01:19:34,140
begone and in that case cops GT would be
 

3239
01:19:34,140 --> 01:19:41,930
begone and in that case cops GT would be
fetch the data alright with one question

3240
01:19:41,930 --> 01:19:41,940
fetch the data alright with one question
 

3241
01:19:41,940 --> 01:19:45,790
fetch the data alright with one question
is it related to the threat of execution

3242
01:19:45,790 --> 01:19:45,800
is it related to the threat of execution
 

3243
01:19:45,800 --> 01:19:50,870
is it related to the threat of execution
yeah so it's true their causal

3244
01:19:50,870 --> 01:19:50,880
yeah so it's true their causal
 

3245
01:19:50,880 --> 01:19:52,580
yeah so it's true their causal
consistency doesn't really it's not

3246
01:19:52,580 --> 01:19:52,590
consistency doesn't really it's not
 

3247
01:19:52,590 --> 01:19:55,790
consistency doesn't really it's not
about wall clock time so it has no

3248
01:19:55,790 --> 01:19:55,800
about wall clock time so it has no
 

3249
01:19:55,800 --> 01:19:58,120
about wall clock time so it has no
notion of wall clock time there's only

3250
01:19:58,120 --> 01:19:58,130
notion of wall clock time there's only
 

3251
01:19:58,130 --> 01:20:00,800
notion of wall clock time there's only
the only sort of forms of order that

3252
01:20:00,800 --> 01:20:00,810
the only sort of forms of order that
 

3253
01:20:00,810 --> 01:20:03,500
the only sort of forms of order that
it's obeying that are even a little bit

3254
01:20:03,500 --> 01:20:03,510
it's obeying that are even a little bit
 

3255
01:20:03,510 --> 01:20:05,689
it's obeying that are even a little bit
related to walk walk time or that if a

3256
01:20:05,689 --> 01:20:05,699
related to walk walk time or that if a
 

3257
01:20:05,699 --> 01:20:07,490
related to walk walk time or that if a
single thread does one thing and then

3258
01:20:07,490 --> 01:20:07,500
single thread does one thing and then
 

3259
01:20:07,500 --> 01:20:08,689
single thread does one thing and then
another and another

3260
01:20:08,689 --> 01:20:08,699
another and another
 

3261
01:20:08,699 --> 01:20:12,110
another and another
then causal consistency does consider

3262
01:20:12,110 --> 01:20:12,120
then causal consistency does consider
 

3263
01:20:12,120 --> 01:20:13,580
then causal consistency does consider
these three operations to be in that

3264
01:20:13,580 --> 01:20:13,590
these three operations to be in that
 

3265
01:20:13,590 --> 01:20:15,680
these three operations to be in that
order but it's because one client thread

3266
01:20:15,680 --> 01:20:15,690
order but it's because one client thread
 

3267
01:20:15,690 --> 01:20:18,200
order but it's because one client thread
did these sequence of things and not

3268
01:20:18,200 --> 01:20:18,210
did these sequence of things and not
 

3269
01:20:18,210 --> 01:20:19,870
did these sequence of things and not
because there was a real time

3270
01:20:19,870 --> 01:20:19,880
because there was a real time
 

3271
01:20:19,880 --> 01:20:24,770
because there was a real time
relationship so just a wrap up here to

3272
01:20:24,770 --> 01:20:24,780
relationship so just a wrap up here to
 

3273
01:20:24,780 --> 01:20:26,870
relationship so just a wrap up here to
sort of put this into a kind of larger

3274
01:20:26,870 --> 01:20:26,880
sort of put this into a kind of larger
 

3275
01:20:26,880 --> 01:20:32,570
sort of put this into a kind of larger
world context causal consistency has has

3276
01:20:32,570 --> 01:20:32,580
world context causal consistency has has
 

3277
01:20:32,580 --> 01:20:37,430
world context causal consistency has has
been an is like a very kind of promising

3278
01:20:37,430 --> 01:20:37,440
been an is like a very kind of promising
 

3279
01:20:37,440 --> 01:20:39,080
been an is like a very kind of promising
research area and has been for a long

3280
01:20:39,080 --> 01:20:39,090
research area and has been for a long
 

3281
01:20:39,090 --> 01:20:41,689
research area and has been for a long
time because it does seem like it might

3282
01:20:41,689 --> 01:20:41,699
time because it does seem like it might
 

3283
01:20:41,699 --> 01:20:43,910
time because it does seem like it might
provide you with good enough consistency

3284
01:20:43,910 --> 01:20:43,920
provide you with good enough consistency
 

3285
01:20:43,920 --> 01:20:47,090
provide you with good enough consistency
but also opportunities more

3286
01:20:47,090 --> 01:20:47,100
but also opportunities more
 

3287
01:20:47,100 --> 01:20:49,580
but also opportunities more
opportunities and linearise ability to

3288
01:20:49,580 --> 01:20:49,590
opportunities and linearise ability to
 

3289
01:20:49,590 --> 01:20:52,939
opportunities and linearise ability to
get high performance however it hasn't

3290
01:20:52,939 --> 01:20:52,949
get high performance however it hasn't
 

3291
01:20:52,949 --> 01:20:54,560
get high performance however it hasn't
actually gotten much traction in the

3292
01:20:54,560 --> 01:20:54,570
actually gotten much traction in the
 

3293
01:20:54,570 --> 01:20:55,280
actually gotten much traction in the
real world

3294
01:20:55,280 --> 01:20:55,290
real world
 

3295
01:20:55,290 --> 01:20:58,400
real world
people use eventual consistency systems

3296
01:20:58,400 --> 01:20:58,410
people use eventual consistency systems
 

3297
01:20:58,410 --> 01:21:00,350
people use eventual consistency systems
and they use strongly consistent systems

3298
01:21:00,350 --> 01:21:00,360
and they use strongly consistent systems
 

3299
01:21:00,360 --> 01:21:02,780
and they use strongly consistent systems
but it's very rare to see a deployed

3300
01:21:02,780 --> 01:21:02,790
but it's very rare to see a deployed
 

3301
01:21:02,790 --> 01:21:04,820
but it's very rare to see a deployed
system and as causal consistency and

3302
01:21:04,820 --> 01:21:04,830
system and as causal consistency and
 

3303
01:21:04,830 --> 01:21:06,800
system and as causal consistency and
there's a bunch of reasons potential

3304
01:21:06,800 --> 01:21:06,810
there's a bunch of reasons potential
 

3305
01:21:06,810 --> 01:21:09,500
there's a bunch of reasons potential
reasons for that you know it's always

3306
01:21:09,500 --> 01:21:09,510
reasons for that you know it's always
 

3307
01:21:09,510 --> 01:21:11,510
reasons for that you know it's always
hard to tell exactly why people do or

3308
01:21:11,510 --> 01:21:11,520
hard to tell exactly why people do or
 

3309
01:21:11,520 --> 01:21:15,320
hard to tell exactly why people do or
don't use some technology for real-world

3310
01:21:15,320 --> 01:21:15,330
don't use some technology for real-world
 

3311
01:21:15,330 --> 01:21:19,910
don't use some technology for real-world
systems one reason is that it can be

3312
01:21:19,910 --> 01:21:19,920
systems one reason is that it can be
 

3313
01:21:19,920 --> 01:21:24,020
systems one reason is that it can be
awkward to track per client causality in

3314
01:21:24,020 --> 01:21:24,030
awkward to track per client causality in
 

3315
01:21:24,030 --> 01:21:25,880
awkward to track per client causality in
the real world a user and browser are

3316
01:21:25,880 --> 01:21:25,890
the real world a user and browser are
 

3317
01:21:25,890 --> 01:21:27,650
the real world a user and browser are
likely to contact different web servers

3318
01:21:27,650 --> 01:21:27,660
likely to contact different web servers
 

3319
01:21:27,660 --> 01:21:31,010
likely to contact different web servers
at different times and that means it's

3320
01:21:31,010 --> 01:21:31,020
at different times and that means it's
 

3321
01:21:31,020 --> 01:21:32,780
at different times and that means it's
not enough for a single web server to

3322
01:21:32,780 --> 01:21:32,790
not enough for a single web server to
 

3323
01:21:32,790 --> 01:21:36,290
not enough for a single web server to
keep users context we need some way to

3324
01:21:36,290 --> 01:21:36,300
keep users context we need some way to
 

3325
01:21:36,300 --> 01:21:38,270
keep users context we need some way to
stitch together context for a single

3326
01:21:38,270 --> 01:21:38,280
stitch together context for a single
 

3327
01:21:38,280 --> 01:21:40,640
stitch together context for a single
user as they visit different web servers

3328
01:21:40,640 --> 01:21:40,650
user as they visit different web servers
 

3329
01:21:40,650 --> 01:21:43,230
user as they visit different web servers
at the same website so that's painful

3330
01:21:43,230 --> 01:21:43,240
at the same website so that's painful
 

3331
01:21:43,240 --> 01:21:45,090
at the same website so that's painful
I know there is this problem that cops

3332
01:21:45,090 --> 01:21:45,100
I know there is this problem that cops
 

3333
01:21:45,100 --> 01:21:48,870
I know there is this problem that cops
doesn't doesn't track only tracks causal

3334
01:21:48,870 --> 01:21:48,880
doesn't doesn't track only tracks causal
 

3335
01:21:48,880 --> 01:21:50,670
doesn't doesn't track only tracks causal
dependencies it knows about and that

3336
01:21:50,670 --> 01:21:50,680
dependencies it knows about and that
 

3337
01:21:50,680 --> 01:21:52,650
dependencies it knows about and that
means it doesn't doesn't have a sort of

3338
01:21:52,650 --> 01:21:52,660
means it doesn't doesn't have a sort of
 

3339
01:21:52,660 --> 01:21:55,950
means it doesn't doesn't have a sort of
ironclad solution or doesn't sort of

3340
01:21:55,950 --> 01:21:55,960
ironclad solution or doesn't sort of
 

3341
01:21:55,960 --> 01:21:57,960
ironclad solution or doesn't sort of
provide ironclad causality and only sort

3342
01:21:57,960 --> 01:21:57,970
provide ironclad causality and only sort
 

3343
01:21:57,970 --> 01:22:00,800
provide ironclad causality and only sort
of certain kinds of causality which is

3344
01:22:00,800 --> 01:22:00,810
of certain kinds of causality which is
 

3345
01:22:00,810 --> 01:22:05,900
of certain kinds of causality which is
well sort of limits how appealing it is

3346
01:22:05,900 --> 01:22:05,910
well sort of limits how appealing it is
 

3347
01:22:05,910 --> 01:22:09,180
well sort of limits how appealing it is
another is that the you know eventual

3348
01:22:09,180 --> 01:22:09,190
another is that the you know eventual
 

3349
01:22:09,190 --> 01:22:11,550
another is that the you know eventual
and causal consistent systems can

3350
01:22:11,550 --> 01:22:11,560
and causal consistent systems can
 

3351
01:22:11,560 --> 01:22:13,260
and causal consistent systems can
provide only the most limited notion of

3352
01:22:13,260 --> 01:22:13,270
provide only the most limited notion of
 

3353
01:22:13,270 --> 01:22:16,560
provide only the most limited notion of
transactions and people more and more I

3354
01:22:16,560 --> 01:22:16,570
transactions and people more and more I
 

3355
01:22:16,570 --> 01:22:19,530
transactions and people more and more I
think as time goes on are sort of

3356
01:22:19,530 --> 01:22:19,540
think as time goes on are sort of
 

3357
01:22:19,540 --> 01:22:21,750
think as time goes on are sort of
wishing that their storage systems had

3358
01:22:21,750 --> 01:22:21,760
wishing that their storage systems had
 

3359
01:22:21,760 --> 01:22:25,410
wishing that their storage systems had
transactions I'm finally the amount of

3360
01:22:25,410 --> 01:22:25,420
transactions I'm finally the amount of
 

3361
01:22:25,420 --> 01:22:27,630
transactions I'm finally the amount of
overhead required to push around a track

3362
01:22:27,630 --> 01:22:27,640
overhead required to push around a track
 

3363
01:22:27,640 --> 01:22:30,180
overhead required to push around a track
and store all that dependency

3364
01:22:30,180 --> 01:22:30,190
and store all that dependency
 

3365
01:22:30,190 --> 01:22:33,110
and store all that dependency
information can be quite significant and

3366
01:22:33,110 --> 01:22:33,120
information can be quite significant and
 

3367
01:22:33,120 --> 01:22:35,970
information can be quite significant and
you know I was unable to kind of detect

3368
01:22:35,970 --> 01:22:35,980
you know I was unable to kind of detect
 

3369
01:22:35,980 --> 01:22:38,550
you know I was unable to kind of detect
this in the performance section of the

3370
01:22:38,550 --> 01:22:38,560
this in the performance section of the
 

3371
01:22:38,560 --> 01:22:40,020
this in the performance section of the
paper but the fact is it's quite a lot

3372
01:22:40,020 --> 01:22:40,030
paper but the fact is it's quite a lot
 

3373
01:22:40,030 --> 01:22:41,520
paper but the fact is it's quite a lot
of information that has to be stored and

3374
01:22:41,520 --> 01:22:41,530
of information that has to be stored and
 

3375
01:22:41,530 --> 01:22:44,100
of information that has to be stored and
pushed around and it you know if you

3376
01:22:44,100 --> 01:22:44,110
pushed around and it you know if you
 

3377
01:22:44,110 --> 01:22:46,440
pushed around and it you know if you
were hoping for the sort of millions of

3378
01:22:46,440 --> 01:22:46,450
were hoping for the sort of millions of
 

3379
01:22:46,450 --> 01:22:47,790
were hoping for the sort of millions of
operations per second level of

3380
01:22:47,790 --> 01:22:47,800
operations per second level of
 

3381
01:22:47,800 --> 01:22:50,070
operations per second level of
performance that at least Facebook was

3382
01:22:50,070 --> 01:22:50,080
performance that at least Facebook was
 

3383
01:22:50,080 --> 01:22:52,920
performance that at least Facebook was
getting out of memcache D the kind of

3384
01:22:52,920 --> 01:22:52,930
getting out of memcache D the kind of
 

3385
01:22:52,930 --> 01:22:54,360
getting out of memcache D the kind of
overhead that you would have to pay to

3386
01:22:54,360 --> 01:22:54,370
overhead that you would have to pay to
 

3387
01:22:54,370 --> 01:22:57,240
overhead that you would have to pay to
use causal consistency might be

3388
01:22:57,240 --> 01:22:57,250
use causal consistency might be
 

3389
01:22:57,250 --> 01:22:59,370
use causal consistency might be
extremely significant for the

3390
01:22:59,370 --> 01:22:59,380
extremely significant for the
 

3391
01:22:59,380 --> 01:23:02,070
extremely significant for the
performance so those are reasons why I'm

3392
01:23:02,070 --> 01:23:02,080
performance so those are reasons why I'm
 

3393
01:23:02,080 --> 01:23:03,960
performance so those are reasons why I'm
causal consistency maybe hasn't

3394
01:23:03,960 --> 01:23:03,970
causal consistency maybe hasn't
 

3395
01:23:03,970 --> 01:23:08,340
causal consistency maybe hasn't
currently caught on although maybe

3396
01:23:08,340 --> 01:23:08,350
currently caught on although maybe
 

3397
01:23:08,350 --> 01:23:12,510
currently caught on although maybe
someday it will be okay that's all I

3398
01:23:12,510 --> 01:23:12,520
someday it will be okay that's all I
 

3399
01:23:12,520 --> 01:23:14,850
someday it will be okay that's all I
have to say and actually starting next

3400
01:23:14,850 --> 01:23:14,860
have to say and actually starting next
 

3401
01:23:14,860 --> 01:23:16,410
have to say and actually starting next
lecture we'll be switching gears away

3402
01:23:16,410 --> 01:23:16,420
lecture we'll be switching gears away
 

3403
01:23:16,420 --> 01:23:20,340
lecture we'll be switching gears away
from storage and sequence of three

3404
01:23:20,340 --> 01:23:20,350
from storage and sequence of three
 

3405
01:23:20,350 --> 01:23:24,210
from storage and sequence of three
lectures that involve block chains so

3406
01:23:24,210 --> 01:23:24,220
lectures that involve block chains so
 

3407
01:23:24,220 --> 01:23:27,480
lectures that involve block chains so
I'll see you on Thursday

3408
01:23:27,480 --> 01:23:27,490

 

3409
01:23:27,490 --> 01:23:29,550

you

